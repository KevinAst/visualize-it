{"version":3,"file":"bundle.js","sources":["../../src/util/ErrorExtensionPolyfill.js","../../src/util/verify.js","../../node_modules/lodash.isequal/index.js","../../node_modules/lodash.isfunction/index.js","../../node_modules/lodash.isobject/index.js","../../node_modules/lodash.isplainobject/index.js","../../node_modules/lodash.isstring/index.js","../../src/util/typeCheck.js","../../src/util/checkUnknownArgs.js","../../src/core/PseudoClass.js","../../src/util/logger.js","../../src/core/SmartClassRef.js","../../src/core/pkgManager.js","../../node_modules/enumify/dist/src/index.js","../../src/core/DispMode.js","../../src/core/createTypeRefHandler.js","../../node_modules/svelte/internal/index.mjs","../../node_modules/svelte/store/index.mjs","../../src/core/changeManager/applyChange.js","../../src/core/changeManager/UndoRedoMgr.js","../../src/core/changeManager/ChangeManager.js","../../node_modules/rollup-plugin-node-globals/src/global.js","../../node_modules/buffer-es6/base64.js","../../node_modules/buffer-es6/ieee754.js","../../node_modules/buffer-es6/isArray.js","../../node_modules/buffer-es6/index.js","../../node_modules/crc/create_buffer.js","../../node_modules/crc/define_crc.js","../../node_modules/crc/crc1.js","../../node_modules/crc/crc8.js","../../node_modules/crc/crc81wire.js","../../node_modules/crc/crc16.js","../../node_modules/crc/crc16ccitt.js","../../node_modules/crc/crc16modbus.js","../../node_modules/crc/crc16xmodem.js","../../node_modules/crc/crc16kermit.js","../../node_modules/crc/crc24.js","../../node_modules/crc/crc32.js","../../node_modules/crc/crcjam.js","../../node_modules/crc/index.js","../../src/util/crc.js","../../node_modules/style-inject/dist/style-inject.es.js","../../node_modules/@material/ripple/util.js","../../node_modules/@smui/common/forwardEvents.js","../../node_modules/@smui/common/exclude.js","../../node_modules/@smui/common/useActions.js","../../node_modules/@smui/common/Label.svelte","../../node_modules/@smui/common/A.svelte","../../node_modules/@smui/common/Button.svelte","../../node_modules/tslib/tslib.es6.js","../../node_modules/@material/base/foundation.js","../../node_modules/@material/dom/events.js","../../node_modules/@material/base/component.js","../../node_modules/@material/dom/ponyfill.js","../../node_modules/@material/ripple/constants.js","../../node_modules/@material/ripple/foundation.js","../../node_modules/@material/ripple/component.js","../../node_modules/@smui/ripple/Ripple.js","../../node_modules/@smui/button/Button.svelte","../../node_modules/@material/icon-button/constants.js","../../node_modules/@material/icon-button/foundation.js","../../node_modules/@material/icon-button/component.js","../../node_modules/@smui/icon-button/IconButton.svelte","../../node_modules/@smui/common/prefixFilter.js","../../node_modules/@material/snackbar/constants.js","../../node_modules/@material/snackbar/util.js","../../node_modules/@material/snackbar/foundation.js","../../node_modules/@material/snackbar/component.js","../../node_modules/@smui/snackbar/Snackbar.svelte","../../node_modules/@smui/common/ClassAdder.svelte","../../node_modules/@smui/common/classAdderBuilder.js","../../node_modules/@smui/common/Div.svelte","../../node_modules/@smui/snackbar/Actions.js","../../node_modules/@smui/snackbar/kitchen/Kitchen.svelte","../../src/util/ui/notify/Notify.svelte","../../src/util/ui/notify/index.js","../../src/core/SmartModel.js","../../src/core/SmartPallet.js","../../node_modules/konva/lib/Global.js","../../node_modules/konva/lib/Util.js","../../node_modules/konva/lib/Validators.js","../../node_modules/konva/lib/Factory.js","../../node_modules/konva/lib/Context.js","../../node_modules/konva/lib/Canvas.js","../../node_modules/konva/lib/DragAndDrop.js","../../node_modules/konva/lib/Node.js","../../node_modules/konva/lib/Container.js","../../node_modules/konva/lib/PointerEvents.js","../../node_modules/konva/lib/Stage.js","../../node_modules/konva/lib/BaseLayer.js","../../node_modules/konva/lib/Shape.js","../../node_modules/konva/lib/Layer.js","../../node_modules/konva/lib/FastLayer.js","../../node_modules/konva/lib/Group.js","../../node_modules/konva/lib/Animation.js","../../node_modules/konva/lib/Tween.js","../../node_modules/konva/lib/_CoreInternals.js","../../node_modules/konva/lib/shapes/Arc.js","../../node_modules/konva/lib/shapes/Line.js","../../node_modules/konva/lib/shapes/Arrow.js","../../node_modules/konva/lib/shapes/Circle.js","../../node_modules/konva/lib/shapes/Ellipse.js","../../node_modules/konva/lib/shapes/Image.js","../../node_modules/konva/lib/shapes/Label.js","../../node_modules/konva/lib/shapes/Path.js","../../node_modules/konva/lib/shapes/Rect.js","../../node_modules/konva/lib/shapes/RegularPolygon.js","../../node_modules/konva/lib/shapes/Ring.js","../../node_modules/konva/lib/shapes/Sprite.js","../../node_modules/konva/lib/shapes/Star.js","../../node_modules/konva/lib/shapes/Text.js","../../node_modules/konva/lib/shapes/TextPath.js","../../node_modules/konva/lib/shapes/Transformer.js","../../node_modules/konva/lib/shapes/Wedge.js","../../node_modules/konva/lib/filters/Blur.js","../../node_modules/konva/lib/filters/Brighten.js","../../node_modules/konva/lib/filters/Contrast.js","../../node_modules/konva/lib/filters/Emboss.js","../../node_modules/konva/lib/filters/Enhance.js","../../node_modules/konva/lib/filters/Grayscale.js","../../node_modules/konva/lib/filters/HSL.js","../../node_modules/konva/lib/filters/HSV.js","../../node_modules/konva/lib/filters/Invert.js","../../node_modules/konva/lib/filters/Kaleidoscope.js","../../node_modules/konva/lib/filters/Mask.js","../../node_modules/konva/lib/filters/Noise.js","../../node_modules/konva/lib/filters/Pixelate.js","../../node_modules/konva/lib/filters/Posterize.js","../../node_modules/konva/lib/filters/RGB.js","../../node_modules/konva/lib/filters/RGBA.js","../../node_modules/konva/lib/filters/Sepia.js","../../node_modules/konva/lib/filters/Solarize.js","../../node_modules/konva/lib/filters/Threshold.js","../../node_modules/konva/lib/_FullInternals.js","../../node_modules/konva/lib/index.js","../../src/core/Scene.js","../../src/core/konvaUtil.js","../../src/core/Collage.js","../../src/core/CompRef.js","../../src/core/SmartPkg.js","../../src/core/SmartView.js","../../src/core/preregisterCoreClasses.js","../../node_modules/tabbable/index.js","../../node_modules/focus-trap/index.js","../../node_modules/xtend/immutable.js","../../node_modules/@material/list/constants.js","../../node_modules/@material/list/foundation.js","../../node_modules/@material/list/component.js","../../node_modules/@material/drawer/constants.js","../../node_modules/@material/drawer/dismissible/foundation.js","../../node_modules/@material/drawer/modal/foundation.js","../../node_modules/@material/drawer/component.js","../../node_modules/@material/drawer/util.js","../../node_modules/@smui/drawer/Drawer.svelte","../../node_modules/@smui/drawer/AppContent.js","../../node_modules/@smui/drawer/Content.js","../../node_modules/@smui/common/H1.svelte","../../node_modules/@smui/drawer/Header.js","../../node_modules/@smui/common/H2.svelte","../../node_modules/@smui/drawer/Title.js","../../node_modules/@smui/drawer/Subtitle.js","../../node_modules/@smui/drawer/Scrim.js","../../node_modules/@smui/list/List.svelte","../../node_modules/@smui/list/Item.svelte","../../node_modules/@smui/common/Span.svelte","../../node_modules/@smui/list/Text.js","../../node_modules/@smui/list/PrimaryText.js","../../node_modules/@smui/list/SecondaryText.js","../../node_modules/@smui/list/Graphic.js","../../node_modules/@smui/list/Meta.js","../../node_modules/@smui/common/H3.svelte","../../node_modules/@smui/list/Group.js","../../node_modules/@smui/list/Separator.svelte","../../node_modules/@smui/list/Subheader.js","../../src/appLayout/LeftNav.svelte","../../node_modules/@material/top-app-bar/constants.js","../../node_modules/@material/top-app-bar/foundation.js","../../node_modules/@material/top-app-bar/standard/foundation.js","../../node_modules/@material/top-app-bar/fixed/foundation.js","../../node_modules/@material/top-app-bar/short/foundation.js","../../node_modules/@material/top-app-bar/component.js","../../node_modules/@smui/top-app-bar/TopAppBar.svelte","../../node_modules/@smui/top-app-bar/Row.js","../../node_modules/@smui/top-app-bar/Section.svelte","../../node_modules/@smui/top-app-bar/Title.js","../../node_modules/@material/menu-surface/constants.js","../../node_modules/@material/menu-surface/foundation.js","../../node_modules/@material/menu-surface/util.js","../../node_modules/@material/menu-surface/component.js","../../node_modules/@material/menu/constants.js","../../node_modules/@material/menu/foundation.js","../../node_modules/@material/menu/component.js","../../node_modules/@smui/menu-surface/MenuSurface.svelte","../../node_modules/@smui/menu/Menu.svelte","../../node_modules/@smui/menu/SelectionGroup.svelte","../../node_modules/@smui/menu/SelectionGroupIcon.js","../../src/util/ui/tabManager/TabController.js","../../src/core/RenderSmartView.svelte","../../src/util/ui/tabManager/TabManager.js","../../src/pkgEntryTabs/pkgEntryTabManager.js","../../src/pkgEntryTabs/PkgEntryTabsContextMenu.svelte","../../src/pkgEntryTabs/TabControllerPkgEntry.js","../../node_modules/@smui/paper/Paper.svelte","../../node_modules/@smui/paper/Content.js","../../node_modules/@smui/common/H5.svelte","../../node_modules/@smui/paper/Title.js","../../node_modules/@smui/common/H6.svelte","../../node_modules/@smui/paper/Subtitle.js","../../src/util/ui/Icon.svelte","../../src/util/ui/domUtil.js","../../src/util/ui/tabManager/TabEntry.svelte","../../src/util/ui/tabManager/TabPanel.svelte","../../node_modules/svelte/easing/index.mjs","../../node_modules/svelte/animate/index.mjs","../../src/util/ui/tabManager/Tabs.svelte","../../src/pkgEntryTabs/PkgEntryTabs.svelte","../../src/pkgEntryTabs/syncModelOnActiveTabChange.js","../../src/pkgEntryTabs/index.js","../../src/appLayout/ToolBar.svelte","../../src/appLayout/AppLayout.svelte","../../src/util/discloseError.js","../../node_modules/svelte/transition/index.mjs","../../src/pkgViewer/ViewPkgTree.svelte","../../src/util/ui/genDualClickHandler.js","../../src/pkgViewer/ViewPkg.svelte","../../src/core/pkgPersist.js","../../src/pkgViewer/PkgViewer.svelte","../../src/pkgViewer/index.js","../../src/core/SmartComp.js","../../src/sandbox/generalComps.js","../../src/util/strUtil.js","../../src/sandbox/konvaSandboxSmartPkg.js","../../src/sandbox/index.js","../../src/main.js"],"sourcesContent":["/**\r\n * Standardize the ability to handle ALL errors more generically, by\r\n * adding these value-added extensions to ALL Error objects (via this\r\n * Error class polyfill - a monkey patch).\r\n * \r\n * All Error instances (created anywhere) are extended to include the\r\n * following characteristics:\r\n * \r\n * - A new error.userMsg property is defined.\r\n * \r\n *   This message is intended to be seen by users, so it should be\r\n *   suitable for human consumption:\r\n *     - both in meaning, \r\n *     - and in sanitation (so as to not reveal any internal\r\n *       architecture)\r\n * \r\n *   By default, error.userMsg = 'Unexpected Condition'\r\n *   and can be changed by: \r\n *     + error.defineUserMsg(userMsg): error\r\n * \r\n * - There is a delineation of expected vs. unexpected conditions.  For\r\n *   example:\r\n * \r\n *     - An error communicating \"invalid password\" is an expected\r\n *       condition, because it is stimulated by user input.\r\n * \r\n *     - Contrast that with an error communicating \"DB is down\", which is\r\n *       an unexpected condition, because this is outside the user's\r\n *       control.\r\n * \r\n *   This distinction is controlled by whether an error.userMsg has\r\n *   been defined (expected) or not (unexpected).\r\n * \r\n *   In other words, all errors start out as unexpected, and can be\r\n *   changed to expected by simply invoking:\r\n *     + error.defineUserMsg(userMsg): error\r\n * \r\n *   This distinction may be programmatically delineated through one of\r\n *   the following methods:\r\n *     + error.isExpected(): boolean\r\n *     + error.isUnexpected(): boolean\r\n * \r\n * - A new error.attemptingToMsg property is defined.\r\n * \r\n *   This message is also intended to be seen by users, and provides\r\n *   additional detail of what was being attempted (over and above the\r\n *   error.userMsg).\r\n * \r\n *   By default, error.attemptingToMsg = ''\r\n *   and can be changed by: \r\n *     + error.defineAttemptingToMsg(attemptingToMsg): error\r\n * \r\n * - A new error.formatUserMsg() is provided that combines all\r\n *   user-specific messages (userMsg and attemptingToMsg).\r\n * \r\n *     + error.formatUserMsg(): string\r\n * \r\n * - The toString() method has been extended to suffix the base\r\n *   toString() with user-specific messages.\r\n * \r\n * - All of the new \"defining\" methods return the receiving error,\r\n *   so as to allow them to be conveniently chained.  For example:\r\n * \r\n *     throw new Error('catastrophic details here').defineAttemptingToMsg('sign in');\r\n * \r\n * **Usage Scenarios** are as follows:\r\n * \r\n * - Error Origination\r\n * \r\n *   In throwing a new Error, you can:\r\n *     throw new Error('internal technical error details')\r\n *                 .defineUserMsg('You did not bla')           // ONLY INVOKE if this is an expected condition - otherwise default to: 'Unexpected Condition'\r\n *                 .defineAttemptingToMsg('log into the app'); // optionally provide additional clarification in either case (expected/unexpected)\r\n * \r\n * - Error Pass Through\r\n * \r\n *   Within a mid-level service, you may capture an error from a lower\r\n *   point and supplement it as follows:\r\n * \r\n *     catch(err) {\r\n *       throw err.defineUserMsg('You did not bla')           // ONLY INVOKE if this is an expected condition - otherwise default to: 'Unexpected Condition'\r\n *                .defineAttemptingToMsg('log into the app'); // optionally provide additional clarification in either case (expected/unexpected)\r\n *     }\r\n * \r\n * - Error Consumption (by client)\r\n * \r\n *   Using these enhancements, the client can abstractly apply various\r\n *   heuristics, such as:\r\n *\r\n *     - if logging is necessary\r\n *       * if so, reveal complete context (internal details and user context)\r\n *     - if user notification necessary\r\n *       * if so supply info suitable for human consumption\r\n * \r\n *   For more usage scenarios, please refer to the discloseError.js utility.\r\n */\r\n\r\n/* eslint-disable no-extend-native */  // we are very careful NOT to break native behavior of the Error object\r\n\r\nif (!Error.prototype.defineUserMsg) { // key off of one of several extension points\r\n\r\n  /**\r\n   * Define a user-specific message, that is applicable for human\r\n   * consumption:\r\n   *  - both in meaning, \r\n   *  - and in sanitization (so as to not reveal any internal architecture).\r\n   *\r\n   * This method also delineates the error as an expected condition.\r\n   *\r\n   * @param {String} userMsg the user message to define\r\n   *\r\n   * @return {Error} self, supporting convenient Error method chaining.\r\n   */\r\n  Error.prototype.defineUserMsg = function(userMsg) {\r\n    this.userMsg  = userMsg;\r\n    this.expected = true;\r\n    return this;\r\n  };\r\n  Error.prototype.userMsg = \"Unexpected Condition\"; // prototype provides the default\r\n\r\n\r\n  /**\r\n   * Return an indicator as to whether this error was\r\n   * expected (say user input error),\r\n   * or not (say a catastrophic error).\r\n   *\r\n   * @return {boolean} error expected (true) or not (false).\r\n   */\r\n  Error.prototype.isExpected = function() {\r\n    return this.expected;\r\n  };\r\n  Error.prototype.expected = false; // prototype provides the default\r\n\r\n\r\n  /**\r\n   * Return an indicator as to whether this error was\r\n   * unexpected (say a catastrophic error),\r\n   * or not (say user input error).\r\n   *\r\n   * @return {boolean} error unexpected (true) or not (false).\r\n   */\r\n  Error.prototype.isUnexpected = function() {\r\n    return !this.expected;\r\n  };\r\n\r\n\r\n  /**\r\n   * Define a user-specific 'attempting to' message, that provides\r\n   * additional details of what was being attempted.\r\n   *\r\n   * Errors with this context are prefixed with ' ... attempting to: ',\r\n   * so word your phrasing appropriately.\r\n   * \r\n   * Multiple attempting-to phrases can be used, which will be\r\n   * combined with the ', -and- ' phrase.\r\n   *\r\n   * @param {String} attemptingToMsg the user-specific attempting\r\n   * to' message.\r\n   *\r\n   * @return {Error} self, supporting convenient Error method chaining.\r\n   */\r\n  Error.prototype.defineAttemptingToMsg = function(attemptingToMsg) {\r\n    if (this.attemptingToMsg) // append multiples\r\n      this.attemptingToMsg += `, -and- ${attemptingToMsg}`;\r\n    else                      // initial definition\r\n      this.attemptingToMsg += ` ... attempting to: ${attemptingToMsg}`;\r\n    return this;\r\n  };\r\n  Error.prototype.attemptingToMsg = ''; // prototype provides the default\r\n\r\n\r\n  /**\r\n   * Format a user-specific message, combining all user-specific contexts.\r\n   *\r\n   * @return {string} formatted user message.\r\n   */\r\n  Error.prototype.formatUserMsg = function() {\r\n    return this.userMsg + this.attemptingToMsg;\r\n  };\r\n\r\n\r\n  /**\r\n   * Extend the Error toString() to prefix user-specific context.\r\n   */\r\n  const prior_toString = Error.prototype.toString; // monkey patch\r\n  Error.prototype.toString = function() {\r\n    return prior_toString.call(this) + '\\n\\nUser Msg: ' + this.formatUserMsg();\r\n  };\r\n\r\n\r\n  // L8TR:\r\n  // /**\r\n  //  * Define an indicator as to the cause of this error ... used to apply\r\n  //  * various heuristics, such as whether logging is necessary.\r\n  //  *\r\n  //  * The following indicators are available:\r\n  //  *   Error.Cause {\r\n  //  *     UNEXPECTED_CONDITION        [default]\r\n  //  *     RECOGNIZED_USER_ERROR\r\n  //  *   }\r\n  //  *\r\n  //  * @param {String} cause one of Error.Cause.\r\n  //  *\r\n  //  * @return {Error} self, supporting convenient Error method chaining.\r\n  //  */\r\n  // Error.prototype.defineCause = function(cause) {\r\n  //   this.cause = cause;\r\n  //   return this;\r\n  // };\r\n  // \r\n  // Error.Cause = {\r\n  //   UNEXPECTED_CONDITION:    'UNEXPECTED_CONDITION',\r\n  //   RECOGNIZED_USER_ERROR: 'RECOGNIZED_USER_ERROR'\r\n  // };\r\n  // \r\n  // Error.prototype.cause = Error.Cause.UNEXPECTED_CONDITION; // prototype provides the default\r\n\r\n}\r\n","/**\r\n * A convenience assertion utility, typically used to validate\r\n * pre-conditions of a routine.\r\n *\r\n * **Advanced**: verify.prefix(msgPrefix) returns a higher-order\r\n *               verify() function where all messages are prefixed.\r\n *\r\n * @param {truthy} condition - a \"truthy\" condition which\r\n * must be satisfied.\r\n *\r\n * @param {string} msg - a message clarifying the condition being\r\n * checked.\r\n * \r\n * @throws {Error} an Error is thrown when the supplied condition is\r\n * NOT met.\r\n */\r\nexport default function verify(condition, msg) {\r\n  if (!condition) {\r\n    // TODO: don't think there is any benefit in logging this console.error \r\n    // console.error(`verify() constraint issue: ${msg}`); // supplement exception with error log (for react-native exposure)\r\n    throw new Error(msg);\r\n  }\r\n}\r\n\r\nverify.prefix = function(msgPrefix) {\r\n  return (condition, msg) => verify(condition, msgPrefix+msg);\r\n};\r\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    nullTag = '[object Null]',\n    proxyTag = '[object Proxy]',\n    undefinedTag = '[object Undefined]';\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isFunction;\n","/**\n * lodash 3.0.2 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(1);\n * // => false\n */\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) ||\n      objectToString.call(value) != objectTag || isHostObject(value)) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return (typeof Ctor == 'function' &&\n    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);\n}\n\nmodule.exports = isPlainObject;\n","/**\n * lodash 4.0.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @type Function\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag);\n}\n\nmodule.exports = isString;\n","import isEqual        from 'lodash.isequal';\r\nimport isFunction     from 'lodash.isfunction';\r\nimport isObject       from 'lodash.isobject';\r\nimport isPlainObject  from 'lodash.isplainobject';\r\nimport isString       from 'lodash.isstring';\r\n\r\n//***\r\n//*** various \"internal\" value-added isA functions\r\n//***\r\n\r\n// isClass(ref): alias to isFunction(ref) ... in JavaScript there is no real distinction between class/function\r\nconst isClass = isFunction;\r\n\r\n// isNumber(ref): is ref a number?\r\nfunction isNumber(ref) {\r\n  return typeof ref === 'number';\r\n}\r\n\r\n// isBoolean(ref): is ref a boolean?\r\nfunction isBoolean(ref) {\r\n  return ref === true || ref === false;\r\n}\r\n\r\n// isArray(ref): alias to Array.isArray(ref)\r\nconst isArray = Array.isArray;\r\n\r\n// isSmartObject(ref): is ref a SmartObject (a SmartModel derivation)\r\nfunction isSmartObject(ref) {\r\n  return ref && ref.isaSmartObject && ref.isaSmartObject();\r\n}\r\n\r\n// isPkg(ref): is ref a Pkg (SmartPkg)\r\nfunction isPkg(ref) {\r\n  return ref && ref.isaPkg && ref.isaPkg();\r\n}\r\n\r\n// isPkgEntry(ref): is ref a PkgEntry\r\nfunction isPkgEntry(ref) {\r\n  return ref && ref.isaPkgEntry && ref.isaPkgEntry();\r\n}\r\n\r\n// isEPkg(ref): is ref a EPkg\r\nfunction isEPkg(ref) {\r\n  return ref && ref.isaEPkg && ref.isaEPkg();\r\n}\r\n\r\n// isPkgTree(ref): is ref a PkgTree\r\nfunction isPkgTree(ref) {\r\n  return ref && ref.isRoot;\r\n}\r\n\r\n// isView(ref): is ref a View (SmartView)\r\nfunction isView(ref) {\r\n  return ref && ref.isaView && ref.isaView();\r\n}\r\n\r\n//***\r\n//*** promote our isA utilities\r\n//***\r\n\r\nexport {\r\n  isEqual,       // + isEqual(ref1, ref2):  boolean ... a deep comparison AI: doesn't really belong in typeCheck, but hey\r\n  isFunction,    // + isFunction(ref):      boolean\r\n  isNumber,      // + isNumber(ref):        boolean\r\n  isBoolean,     // + isBoolean(ref):       boolean\r\n  isObject,      // + isObject(ref):        boolean\r\n  isPlainObject, // + isPlainObject(ref):   boolean\r\n  isArray,       // + isArray(ref):         boolean\r\n  isString,      // + isString(ref):        boolean\r\n  isClass,       // + isClass(ref):         boolean\r\n  isSmartObject, // + isSmartObject(ref):   boolean\r\n  isPkg,         // + isPkg(ref):           boolean\r\n  isPkgEntry,    // + isPkgEntry(ref):      boolean\r\n  isEPkg,        // + isEPkg(ref):          boolean\r\n  isPkgTree,     // + isPkgTree(ref):       boolean\r\n  isView,        // + isView(ref):          boolean\r\n};\r\n","/**\r\n * A convenience assertion validation utility that performs checks\r\n * related to \"Unknown Arguments\" of functions accepting \"named\r\n * arguments\".  This logic is encapsulated here because it a\r\n * repetitive requirement by many functions :-)\r\n * \r\n * When any \"Unknown Arguments\" are detected, an exception is thrown\r\n * with a message containing context through the supplied `check`\r\n * parameter.\r\n * \r\n * USAGE: \r\n * ```js\r\n * myFunc({id, name, ...unknownNamedArgs}={}) {\r\n * \r\n *   // validate myFunc() parameters\r\n *   const check = verify.prefix(`myFunct({id:'${id}', name:'${name}'}) parameter violation: `);\r\n *   \r\n *   // ... id\r\n *   check(id,             'id is required');\r\n *   check(isString(id),   'id must be a string');\r\n *   \r\n *   // ... name\r\n *   check(name,           'name is required');\r\n *   check(isString(name), 'name must be a string');\r\n * \r\n *   // ... unknown arguments\r\n *   checkUnknownArgs(check, unknownNamedArgs, arguments);\r\n * }\r\n * ```\r\n *\r\n * @param {verifyFn} check - the verify assertion utility function,\r\n * typically prefixed with `verify.prefix()` to give proper context\r\n * to emitted exceptions.\r\n *\r\n * @param {string[]} unknownNamedArgs - an array of unknown named\r\n * argument named, typically supplied using ES6 \"rest parameters\".\r\n * \r\n * @param {argsObj} args - the implicit `arguments` object\r\n * (accessible within standard JavaScript functions).\r\n * \r\n * @throws {Error} an Error is thrown when any \"Unknown Arguments\" are\r\n * detected.\r\n */\r\nexport default function checkUnknownArgs(check, unknownNamedArgs, args) {\r\n\r\n  // check for any unrecognized named parameters\r\n  const unknownArgKeys = Object.keys(unknownNamedArgs);\r\n  check(unknownArgKeys.length === 0,  `unrecognized named parameter(s): ${unknownArgKeys}`);\r\n\r\n  // check for any unrecognized positional parameter\r\n  // NOTE: when defaulting entire struct, arguments.length is 0\r\n  check(args.length <= 1,  `unrecognized positional parameters (only named parameters can be specified) ... ${args.length} arguments were supplied`);\r\n}\r\n\r\n/*\r\n\r\n?? would be nice to add a check to determine if namedParams is a plain object\r\n\r\n   feature-u check-in comment: adjusted createAspect() namedParam validation to produce more intuitive \"positional param errors\"\r\n   ... see: c:/dev/feature-u/src/extend/createAspect.js\r\n\r\n   1. our utility would accept an additional `namedParams` parameter:\r\n\r\n        + checkUnknownArgs(check, args, namedParams, unknownNamedArgs): void ?? I reordered this too ?? AI rename checkUnknownArgs() TO: checkNamedParams()\r\n\r\n      AND provide this additional check:\r\n\r\n        check(isPlainObject(namedParams), `only named parameters may be supplied`);\r\n\r\n   2. client should accept a single `namedParams` parameter\r\n      and do the destructuring in an executable statement\r\n      RATHER than the function signature.\r\n\r\n      They would also move the checkUnknownArgs() up higher\r\n\r\n      CLIENT EX:\r\n\r\n      ```js\r\n      myFunc(namedParams={}) {\r\n      \r\n        const {id, name, ...unknownNamedArgs} = namedParams;\r\n      \r\n        // ... unknown arguments ?? move this up\r\n        // ... check named params ?? new name\r\n        checkNamedParams(check, arguments, namedParams, unknownNamedArgs); // ?? new signature\r\n      \r\n        // validate myFunc() parameters\r\n        const check = verify.prefix(`myFunct({id:'${id}', name:'${name}'}) parameter violation: `);\r\n        \r\n        // ... id\r\n        check(id,             'id is required');\r\n        check(isString(id),   'id must be a string');\r\n        \r\n        // ... name\r\n        check(name,           'name is required');\r\n        check(isString(name), 'name must be a string');\r\n      }\r\n      ```\r\n\r\n    9: INTERNAL NOTE:\r\n\r\n       I had originally tried to keep the destructuring in the function signature\r\n       AND use JavaScript `arguments[0]` as the namedParams\r\n       HOWEVER this has some BAD QUIRKS:\r\n\r\n       NOTE: arguments is a bit tricky\r\n             - it represents raw client-supplied args\r\n             - WITHOUT default semantics (in signature destructuring)\r\n                                                     arguments.length  arguments[0]  id (via signature destructuring)\r\n                                                     ================  ============  =========\r\n             - EX1: if client supplies NO params:           0            undefined   undefined\r\n             - EX2: if client supplies (123)                1            123         undefined (TRICKY)\r\n             - EX3: if client supplies (new Date())         1            Date        undefined (TRICKY)\r\n             - EX4: if client supplies (123, 456)           2            123         undefined (TRICKY)\r\n                    TRICKY: NOT SURE I fully understand this\r\n\r\n             - SO: placement order of the checks below is critical\r\n                   to get the desired message precedence to user\r\n                   i.e. our ONE required param check IS DONE FIRST\r\n\r\n*/\r\n","import verify            from '../util/verify';\r\nimport checkUnknownArgs  from '../util/checkUnknownArgs';\r\nimport {isString,\r\n        isClass}         from '../util/typeCheck';\r\n\r\n/**\r\n * PseudoClass maintains meta data that allows an object instance to\r\n * logically be considered a class (a pseudoClass).\r\n *\r\n * This is used for resource-based objects:\r\n *  - that can be dynamically edited (through the graphical editor)\r\n *  - and yet can be \"instantiated\" as items of other objects!\r\n * This last point is where the resource is taking on the roll of a\r\n * class ... i.e. there are instances of this class in other resources!\r\n *\r\n * Classes whose object instances can take on the roll of a\r\n * pseudoClass should instantiate a `pseudoClass` member of type\r\n * PseudoClass as follows:\r\n *\r\n * ```js\r\n * export default class MyClass extends SmartModel {\r\n *   constructor(...) {\r\n *     ...\r\n *     // make objects of this type pseudoClasses\r\n *     this.pseudoClass = new PseudoClass();\r\n *     ...\r\n *   }\r\n * }\r\n * ```\r\n *\r\n * All visualize-it utilities recognize this convention and support it.\r\n * As an example:\r\n *  - `SmartClassRef.createSmartObject(...)` will operate on either a\r\n *    real classes (SmartModel derivations) or pseudoClasses\r\n *\r\n * Objects instances that contain the pseudoClass member can be in one\r\n * of two states:\r\n * \r\n * 1. **MASTER DEFINITION** of the pseudoClass: There is only one\r\n *    object instance of this type, and is what can be dynamically\r\n *    edited.\r\n *\r\n *    **INTERNAL NOTE** In this state:\r\n *     - the `container.pseudoClass.id === 'TYPE'`\r\n *     - the `container.id` will represent the pseudoClass type\r\n *\r\n * 2. **INSTANCE** of the pseudoClass: There can be many instances of\r\n *    the pseudoClass type.\r\n *\r\n *    **INTERNAL NOTE** In this state:\r\n *     - the `container.pseudoClass.id` will reference the pseudoClass type name\r\n *     - the `container.pseudoClass.pseudoClassMaster` will reference the pseudoClassMaster\r\n *\r\n * Currently there are two scenarios where pseudoClasses are used:\r\n *\r\n *  - a `DynamicComp` represents a component that can be edited and\r\n *    maintained in the visualize-it graphical editor.  Many\r\n *    `DynamicComp` master definitions can be created (each with their\r\n *    own pseudoClass type), each which can be instantiated many times\r\n *    in a visualize-it model.\r\n *\r\n *  - a `Scene` represents a graphical perspective that visualizes a\r\n *    system, but each Scene definition can be referenced many times\r\n *    within various `Collages`.\r\n */\r\nexport default class PseudoClass {\r\n\r\n  /**\r\n   * Create a PseudoClass.\r\n   *\r\n   * **IMPORTANT NOTE**: The PseudoClass constructor parameters are\r\n   * strictly used internally!  All client usages should rely on the\r\n   * defaults for these parameters.\r\n   *\r\n   * **Please Note** this constructor uses named parameters.\r\n   *\r\n   * @param {string} [id='TYPE'] - the type reference for this pseudoClass.\r\n   */\r\n  constructor({id='TYPE', \r\n               name='the MASTER pseudoClass definition of type: ... see container.id',\r\n               ...unknownArgs}={}) {\r\n\r\n    // validate constructor parameters\r\n    const check = verify.prefix('PseudoClass() constructor parameter violation: ');\r\n\r\n    // ... id\r\n    check(id,            'id is required');\r\n    check(isString(id),  'id must be a string');\r\n\r\n    // ... name\r\n    check(name,           'name is required');\r\n    check(isString(name), 'name must be a string');\r\n\r\n    // ... unknown arguments\r\n    checkUnknownArgs(check, unknownArgs, arguments);\r\n\r\n    // retain parameters in self\r\n    this.id   = id;\r\n    this.name = name || id;\r\n  }\r\n  \r\n  /**\r\n   * Return an indicator as to whether self represents a \"type\",\r\n   * verses an \"instance\" of a type ... the opposite of\r\n   * `isInstance()`.\r\n   * \r\n   * @returns {boolean} `true` if self is a \"type\", false otherwise.\r\n   */\r\n  isType() { return this.id==='TYPE'; }\r\n\r\n  /**\r\n   * Return an indicator as to whether self represents an \"instance\"\r\n   * of a type, verses a \"type\" ... the opposite of `isType()`.\r\n   * \r\n   * @returns {boolean} `true` if self is an \"instance\" of a type,\r\n   * false otherwise.\r\n   */\r\n  isInstance() { return !this.isType(); }\r\n\r\n  /**\r\n   * Return an indicator as to whether the supplied `ref` is a\r\n   * \"logical\" class (i.e. a pseudoClass MASTER) ... an object\r\n   * instance that is logically treated as a class.\r\n   *\r\n   * @param {any} ref - the item to interpret.\r\n   *\r\n   * @returns {boolean} true: `ref` is a \"logical\" class (a\r\n   * pseudoClass MASTER), false: `ref` is something else.\r\n   */\r\n  static isPseudoClassMaster(ref) {\r\n    return ref.pseudoClass && ref.pseudoClass.isType();\r\n  }\r\n\r\n  /**\r\n   * Return the class name of the supplied `clazz` (interpreting BOTH\r\n   * real classes and pseudoClass MASTERS).\r\n   *\r\n   * NOTE: This utility is used when the client is reasoning about a\r\n   *       raw `clazz`, NOT a classRef (SmartClassRef).\r\n   *\r\n   * @param {class | pseudoClassMASTER} clazz - the class to interpret\r\n   * (either a real class or a pseudoClass MASTER).\r\n   *\r\n   * @returns {string} the class name of the supplied `clazz`.\r\n   *\r\n   * @throws {Error} an Error is thrown when the supplied clazz is invalid.\r\n   */\r\n  static getClassName(clazz) {\r\n\r\n    // validate parameters\r\n    const check = verify.prefix('PseudoClass.getClassName() parameter violation: ');\r\n    // ... clazz\r\n    check(clazz, 'clazz is required');\r\n\r\n    // interpret a pseudo class MASTER (an object instance that is logically a class)\r\n    if (this.isPseudoClassMaster(clazz)) {\r\n      return clazz.id;\r\n    }\r\n\r\n    // interpret a real class name\r\n    if (isClass(clazz)) {\r\n      return clazz.unmangledName || clazz.name;\r\n    }\r\n    \r\n    // otherwise supplied param is invalid\r\n    else {\r\n      check(false, 'clazz must be a real class or a pseudoClass MASTER');\r\n    }\r\n  }\r\n\r\n}\r\nPseudoClass.unmangledName = 'PseudoClass';\r\n","import verify     from './verify';\r\nimport {isString} from './typeCheck';\r\n\r\n/*--------------------------------------------------------------------------------\r\n   Simple logging utility with the following features:\r\n   - can be enabled/disabled at run-time\r\n   - all logging probes are prefixed\r\n   - a simple layer on top of console.log()\r\n\r\n   USAGE:\r\n     import {createLogger} from 'util/logger';\r\n     ...\r\n     const log = createLogger('*** My Prefix *** ').enable();\r\n\r\n     ... log('now is the time', myData); // emits: *** My Prefix *** now is the time\r\n\r\n   API:\r\n     log(msg [,obj]): void       ... conditionally log probe when enabled\r\n     log.force(msg [,obj]): void ... unconditionally log probe\r\n     log.isEnabled(): true/false ... is logging enabled or disabled\r\n     log.enable():  log          ... enable logging\r\n     log.disable(): log          ... disable logging\r\n   --------------------------------------------------------------------------------*/\r\n\r\nexport function createLogger(prefix) {\r\n\r\n  // validate parameters\r\n  const check = verify.prefix('createLogger() parameter violation: ');\r\n  check(prefix,           'prefix is required');\r\n  check(isString(prefix), 'prefix must be a string');\r\n\r\n  // our logger is enabled by default\r\n  let _enabled = true;\r\n\r\n  // create our new logger\r\n  const logger = function(msg, obj) { // our primary logging function\r\n    if (_enabled) {\r\n      logger.force(msg, obj);\r\n    }\r\n  };\r\n\r\n  // inject additional API\r\n\r\n  logger.force = (msg, obj) => {\r\n    msg = prefix + msg;\r\n    if (obj) {\r\n      console.log(msg, obj);\r\n    }\r\n    else {\r\n      console.log(msg);\r\n    }\r\n  };\r\n\r\n  logger.isEnabled = () => _enabled;\r\n\r\n  logger.enable = () => {\r\n    _enabled = true;\r\n    //logger('enabling logging');\r\n    return logger;\r\n  };\r\n\r\n  logger.disable = () => {\r\n    //logger('disabling logging');\r\n    _enabled = false;\r\n    return logger;\r\n  };\r\n\r\n  // thats all folks\r\n  return logger;\r\n}\r\n","import PseudoClass     from './PseudoClass';\r\nimport verify          from '../util/verify';\r\nimport {isClass,\r\n        isString}      from '../util/typeCheck';\r\nimport {createLogger}  from '../util/logger';\r\n\r\n// our internal diagnostic logger (normally disabled)\r\nconst log = createLogger('***DIAG*** SmartClassRef:').disable();\r\n\r\n/**\r\n * SmartClassRef is a meta object that accommodates type/class\r\n * information for ALL smartObjects, unifying both real classes and\r\n * pseudo classes!\r\n *\r\n * SmartClassRef meta objects can represent either:\r\n *\r\n *  - a real class ... of type SmartModel whose constructor supports\r\n *    namedProps,\r\n * \r\n *  - or a pseudoClass ... an object instance that logically\r\n *    represents a class.  These are resource-based objects that can\r\n *    be dynamically edited (through the graphical editor), and yet\r\n *    can be \"instantiated\" as items of other objects!  Please refer\r\n *    to PseudoClass.\r\n *\r\n * A `smartClassRef` property is dynamically attached to all classes\r\n * (both real and pseudoClass) by the SmartPkg package manager.\r\n *\r\n * IMPORTANT: This class verifies the existence of class.unmangledName!\r\n * - class name is crucial for our persistence (hydration invokes\r\n *   constructor matching registered classes)\r\n * - the standard class.name is mangled in our production build (ex:\r\n *   yielding 't' for 'SmartComp')\r\n * - this is a central spot that will highlight issues very early\r\n */\r\nexport default class SmartClassRef {\r\n\r\n  /**\r\n   * Create a SmartClassRef.\r\n   *\r\n   * @param {classRef} classRef - the class on which behalf we operate\r\n   * (either a real class or a pseudoClass).\r\n   *\r\n   * @param {string} [pkgId='UNKNOWN-PKG-ID'] - the package ID this\r\n   * class belongs to.  This item can be omitted (defaulting to\r\n   * 'UNKNOWN-PKG-ID') as a temporary stopgap measure, where the pkgId\r\n   * is NOT retained in a persistent source.\r\n   */\r\n  constructor(classRef, pkgId='UNKNOWN-PKG-ID') {\r\n\r\n    // validate parameters\r\n    const check = verify.prefix('SmartClassRef() constructor parameter violation: ');\r\n\r\n    // ... classRef (more validation below)\r\n    check(classRef,          'classRef is required');\r\n\r\n    // ... pkgId\r\n    check(pkgId,           'pkgId is required');\r\n    check(isString(pkgId), 'pkgId must be a string');\r\n\r\n\r\n    // retain information about the supplied classRef\r\n    // ... a realClass\r\n    if (isClass(classRef)) {\r\n      this.realClass = classRef;\r\n\r\n      // verify there is an unmangledName property (see IMPORTANT above)\r\n      // NOTE: MUST USE hasOwnProperty() because static class references\r\n      //       will walk the hierarchy chain (as of ES6 classes)\r\n      //       We MUST insure this concrete class has defined it's own\r\n      //       unique unmangledName!!\r\n      check(classRef.hasOwnProperty('unmangledName'), `real class ${classRef.name} MUST have an \"unmangledName\" property (supporting persistence in obfuscated production build)`);\r\n\r\n    }\r\n    // ... a pseudoClass MASTER (i.e. a logical type)\r\n    else if (PseudoClass.isPseudoClassMaster(classRef)) {\r\n      this.pseudoClassContainer = classRef;\r\n    }\r\n    else {\r\n      check(false, 'classRef must be a real class -or- pseudoClass');\r\n    }\r\n\r\n    // retain the supplied pkgId\r\n    this.pkgId = pkgId;\r\n  }\r\n\r\n\r\n  /**\r\n   * Return an indicator as to whether self is a real class\r\n   *\r\n   * NOTE: This method should have minimal use (the whole idea of self's\r\n   * class is to remove conditional logic)!\r\n   *\r\n   * @returns {boolean} true: a realClass, false: a pseudoClass\r\n   */\r\n  isClass() {\r\n    return this.realClass ? true : false;\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self is a pseudo class\r\n   *\r\n   * NOTE: This method should have minimal use (the whole idea of self's\r\n   * class is to remove conditional logic)!\r\n   *\r\n   * @returns {boolean} true: a pseudoClass, false: a realClass\r\n   */\r\n  isPseudoClass() {\r\n    return this.pseudoClassContainer ? true : false;\r\n  }\r\n\r\n\r\n  /**\r\n   * Return the class name of self.\r\n   * \r\n   * The class name is interpreted for BOTH real classes and\r\n   * pseudoClasses.\r\n   *\r\n   * For real classes, the name is never mangled, from an\r\n   * obfuscated production build.\r\n   *\r\n   * @returns {string} the class name.\r\n   */\r\n  getClassName() {\r\n    // interpret a pseudoClass type\r\n    // ... self is a pseudoClass MASTER (i.e. a logical type)\r\n    if (this.pseudoClassContainer) {\r\n      return this.pseudoClassContainer.id;\r\n    }\r\n\r\n    // interpret our real class name\r\n    return this.realClass.unmangledName || this.realClass.name;\r\n  }\r\n\r\n\r\n  /**\r\n   * Return the package ID (SmartPkg) from which this classRef is\r\n   * managed/distributed.\r\n   *\r\n   * @returns {string} the class package ID.\r\n   */\r\n  getClassPkgId() {\r\n    return this.pkgId;\r\n  }\r\n\r\n\r\n  /**\r\n   * Return the fully qualified class name of self, including the\r\n   * package ID and class name ... 'com.acme/Pump1'.\r\n   *\r\n   * @returns {string} self's fully qualified 'pkgId/className'\r\n   */\r\n  getFullClassName() {\r\n    return `${this.getClassPkgId()}/${this.getClassName()}`;\r\n  }\r\n\r\n  /**\r\n   * Return the current crc hash for self's class, considered a class\r\n   * version, used in detecting out-of-sync classes (see\r\n   * SmartModel.isClassOutOfSync()).\r\n   *\r\n   * Currently, this is only operational for pseudo classes.  Real\r\n   * code-based class versioning is not currently tracked, and will\r\n   * always return a zero (0), indicating they are in-sync.\r\n   *\r\n   * @returns {number} self's class versioning crc hash.\r\n   */\r\n  getClassVersionCrc() {\r\n    // interpret a pseudoClass type\r\n    // ... self is a pseudoClass MASTER (i.e. a logical type)\r\n    if (this.pseudoClassContainer) {\r\n      return this.pseudoClassContainer.getCrc();\r\n    }\r\n\r\n    // interpret our real class name\r\n    // ... we don't currently track versioning of real classes (every class version is zero)\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * A value-added constructor that creates smartObjects of this type.\r\n   *\r\n   * These newly instantiated objects represent SmartModel\r\n   * derivations, whose constructors supports namedParams.\r\n   *\r\n   * @param {ObjectLiteral} namedParams - The named properties used to\r\n   * passed into self's constructor.\r\n   *\r\n   * @returns {smartObject} a newly instantiated class-based object of\r\n   * this type, initialized with `namedParams`.\r\n   */\r\n  createSmartObject(namedParams) {\r\n\r\n    let newObj = null;\r\n    let msgQualifier = '';\r\n\r\n    //***\r\n    //*** handle real classes\r\n    //***\r\n\r\n    if (this.realClass) {\r\n      msgQualifier = 'real';\r\n      newObj = new this.realClass(namedParams);\r\n    }\r\n\r\n    //***\r\n    //*** handle pseudo classes\r\n    //***\r\n\r\n    else {\r\n      msgQualifier = 'pseudo';\r\n\r\n      const pseudoClassContainer = this.pseudoClassContainer;\r\n\r\n      // clone the pseudoClass (with depth), overriding supplied namedParams\r\n      newObj = pseudoClassContainer.smartClone(namedParams);\r\n\r\n      // AI: some of the following demarcations may have some \"logical\" duplication in it ... analyze this when the dust settles\r\n\r\n      // mark the cloned object as an instance (NOT a type)\r\n      newObj.pseudoClass.id   = pseudoClassContainer.id;\r\n      newObj.pseudoClass.name = `a pseudoClass instance of type: '${pseudoClassContainer.id}'`; // for good measure\r\n\r\n      // retain the pseudoClassMaster\r\n      // ... used to locate the pseudoClass from which an object was created :-)\r\n      // ... see: SmartModel.getClassRef()\r\n      newObj.pseudoClass.pseudoClassMaster = pseudoClassContainer;\r\n\r\n      // retain the version crc hash of the pseudoClassMaster used in our construction\r\n      // ... used to detect out-of-sync class when dynamic classes change during interactive edit session\r\n      // ... see: SM.isClassOutOfSync()\r\n      newObj.pseudoClass.versionCrcUsedInCreation = pseudoClassContainer.getCrc();\r\n    }\r\n\r\n    log(`createSmartObject() created new object from ${msgQualifier} class: '${this.getFullClassName()}' ... using namedParams: `, {namedParams, newObj});\r\n    return newObj;\r\n  }\r\n\r\n}\r\n","import SmartClassRef  from './SmartClassRef';\r\nimport verify         from '../util/verify';\r\nimport {isString,\r\n        isClass,\r\n        isPkg}        from '../util/typeCheck';\r\n\r\n/*-------------------------------------------------------------------------------\r\n   \r\n  ***********************************\r\n  *** Resolve Circular Dependency ***\r\n  ***********************************\r\n\r\n  Do NOT IMPORT SmartPkg\r\n  import SmartPkg from './SmartPkg';\r\n  \r\n  Because SmartPkg extends SmartModel, and SmartModel uses pkgManager,\r\n  this module (pkgManager) cannot rely on SmartPkg!\r\n  \r\n  In other words we cannot import SmartPkg here!\r\n   - Prior to this, openPkg() was a method in PkgManager()\r\n     and we worked around it (a hack) by insuring SmartPkg was expanded FIRST\r\n     ... in src/index.js\r\n         import 'core/SmartPkg'; // \"Resolve Circular Dependency\" by expanding this first\r\n   - This is why we moved openPkg() into a separate module (pkgPersist.js) \r\n     With this refactor, this hack is no longer needed!\r\n\r\n-------------------------------------------------------------------------------*/\r\n\r\n/**\r\n * PkgManager is the manager of ALL packages (SmartPkg)\r\n * loaded and maintained in the visualize-it system.\r\n *\r\n * Entries from one package can have dependencies on other external\r\n * packages (for example, a \"system\" package may contain component\r\n * instances from classes defined in a \"component\" package).\r\n * \r\n * Because the pkgManager service is aware of all packages, it\r\n * provides a clearing house to resolve classRefs, during persistence\r\n * hydration ... see: `SmartModel.fromSmartJSON()`\r\n */\r\nclass PkgManager {\r\n\r\n  /**\r\n   * Create a PkgManager.\r\n   */\r\n  constructor() {\r\n    // carve out our systemClassCatalog\r\n    this.systemClassCatalog = {\r\n      // [className]: SmartClassRef\r\n    };\r\n    // carve out our pkgCatalog\r\n    this.pkgCatalog = {\r\n      // [pkgId]: smartPkg,\r\n      // ...\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Internal method to register the supplied class as a system class.\r\n   *\r\n   * All system classes have an implied pkgId of 'core'.\r\n   *\r\n   * Only persistent concrete classes need be registered, because the\r\n   * 'core' pkgId is retained in the persistent file to map back to\r\n   * the appropriate class during the rehydration process.\r\n   *\r\n   * @param {class} clazz - the system class to register.\r\n   */\r\n  registerSystemClass(clazz) {\r\n\r\n    // validate parameters\r\n    const check = verify.prefix(`${this.constructor.unmangledName}.registerSystemClass() parameter violation: `);\r\n\r\n    // ... clazz\r\n    check(clazz,          'clazz is required');\r\n    check(isClass(clazz), 'clazz must be a class');\r\n\r\n    // maintain our systemClassCatalog\r\n    const smartClassRef                = new SmartClassRef(clazz, systemPkgId);\r\n    const clazzName                    = smartClassRef.getClassName();\r\n    this.systemClassCatalog[clazzName] = smartClassRef;\r\n\r\n    // adorn meta information to the class\r\n    // ... same heuristics as found in SmartPkg.adornContainedClasses()\r\n    clazz.smartClassRef = smartClassRef;\r\n  }\r\n\r\n\r\n  /**\r\n   * Register the supplied package in self.\r\n   *\r\n   * This registration:\r\n   *\r\n   * - makes SmartPkg resources available to low-level processes (for\r\n   *   example, classRefs used in resolving resource-based hydration)\r\n   *   ... see: getClassRef() / getPkgEntry()\r\n   * \r\n   * - is independent of LeftNav visualization (this is accomplished\r\n   *   through `pkgViewer`'s `viewPkg(smartPkg)`)\r\n   *\r\n   * This registration  occurs automatically when using `openPkg()` (in pkgPersist.js)\r\n   * ... so it could be interpreted as a pseudo private method.\r\n   * \r\n   * - However, non-resource-based packages must register themselves\r\n   *   using this entry point ... for ex:\r\n   *    - code-only packages (as in core offerings)\r\n   *    - unit tests\r\n   *    - etc.\r\n   *   This registration can be accomplished VERY EARLY (e.g. during\r\n   *   code expansion of core classes).\r\n   *\r\n   * @param {SmartPkg} smartPkg - the package to register.\r\n   *\r\n   * @throws {Error} an Error is thrown when the package is already loaded\r\n   */\r\n  registerPkg(smartPkg) {\r\n\r\n    // validate parameters\r\n    const check = verify.prefix(`${this.constructor.unmangledName}.registerPkg() parameter violation: `);\r\n\r\n    // ... smartPkg\r\n    check(smartPkg,         'smartPkg is required');\r\n    check(isPkg(smartPkg),  'smartPkg must be a SmartPkg object');\r\n\r\n    // maintain our package catalog\r\n    const pkgId = smartPkg.getPkgId();\r\n    check(pkgId !== systemPkgId, `a smartPkg was supplied with a pkgId of '${systemPkgId}' which is reserved for system classes`);\r\n    // console.log(`xx PkgManager.registerPkg() registering smartPkg(${pkgId}): `, smartPkg);\r\n    if (this.pkgCatalog[pkgId]) { // verify smartPkg is not already loaded\r\n      throw new Error(`***ERROR*** ${this.constructor.unmangledName}.registerPkg() pkgId: ${pkgId} is already registered :-(`)\r\n        .defineUserMsg(`The visualize-it '${pkgId}' package is already loaded`); // AI: we may need to conditionally refresh existing packages (per user confirmation)\r\n    }\r\n    this.pkgCatalog[pkgId] = smartPkg;\r\n  }\r\n\r\n  /**\r\n   * Return the package (SmartPkg) registered to the supplied `pkgId`.\r\n   *\r\n   * @param {string} pkgId - the package ID to acquire (ex: 'com.astx.ACME');\r\n   *\r\n   * @returns {SmartPkg} the package (SmartPkg) registered to the supplied\r\n   * `pkgId` (undefined for NOT registered).\r\n   */\r\n  getPkg(pkgId) {\r\n\r\n    // validate parameters\r\n    const check = verify.prefix('PkgManager.getPkg() parameter violation: ');\r\n    // ... pkgId\r\n    check(pkgId,             'pkgId is required');\r\n    check(isString(pkgId),   'pkgId must be a string');\r\n\r\n    // return the package (if any)\r\n    return this.pkgCatalog[pkgId];\r\n  }\r\n\r\n  /**\r\n   * Resolve classRefs managed in self's packages.\r\n   *\r\n   * NOTE: This accessor is commonly used in the rehydration process\r\n   *       (SmartModel.fromSmartJSON()) to resolve classes at a low level.\r\n   *\r\n   * @param {string} pkgId - the package id that the class belongs to.\r\n   * @param {string} className - the class name of the classRef to return.\r\n   *\r\n   * @returns {SmartClassRef} the classRef matching the supplied `pkgId`/`className`\r\n   *\r\n   * @throws {Error} an Error is thrown when the class was not resolved.\r\n   */\r\n  getClassRef(pkgId, className) {\r\n\r\n    // validate parameters\r\n    const check = verify.prefix('PkgManager.getClassRef() parameter violation: ');\r\n    // ... pkgId\r\n    check(pkgId,             'pkgId is required');\r\n    check(isString(pkgId),   'pkgId must be a string');\r\n    // ... className\r\n    check(className,           'className is required');\r\n    check(isString(className), 'className must be a string');\r\n\r\n    // ***\r\n    // *** resolve system classes (takes precedence)\r\n    // ***\r\n\r\n    if (pkgId === systemPkgId) {\r\n      const systemClassRef = this.systemClassCatalog[className];\r\n      if (!systemClassRef) { // this is an unexpected condition\r\n        throw new Error(`***ERROR*** PkgManager.getClassRef(pkgId:${pkgId}, className:${className}) class NOT registered :-(`);\r\n      }\r\n      return systemClassRef;\r\n    }\r\n\r\n\r\n    // ***\r\n    // *** otherwise, resolve from one of our registered packages\r\n    // ***\r\n\r\n    // resolve the package containing the class\r\n    const smartPkg = this.pkgCatalog[pkgId];\r\n    if (!smartPkg) { // this is an expected condition (communicate to user via defineUserMsg())\r\n      throw new Error(`***ERROR*** PkgManager.getClassRef(pkgId:${pkgId}, className:${className}) package is NOT cataloged ... did you forget to load a dependent package?`)\r\n        .defineUserMsg(`The '${pkgId}/${className}' class has been referenced, but the '${pkgId}' package has NOT been loaded ... did you forget to load this dependent package?`);\r\n    }\r\n    \r\n    // resolve the classRef\r\n    const classRef = smartPkg.getClassRef(className);\r\n    if (!classRef) { // this is an unexpected condition\r\n      throw new Error(`***ERROR*** PkgManager.getClassRef(pkgId:${pkgId}, className:${className}) class NOT in package :-(`);\r\n    }\r\n    return classRef;\r\n  }\r\n\r\n  /**\r\n   * Resolve entries managed in self's packages.\r\n   *\r\n   * NOTE: This accessor was thought to be used by the tabManager to resolve\r\n   *       entries at a low level, however it is currently not needed.\r\n   *       ... as of 2/16/2020, this method NOT being used.\r\n   *\r\n   * @param {string} pkgId - the package ID that the entry belongs to.\r\n   * @param {string} entryId - the entry ID of the entry to return.\r\n   *\r\n   * @returns {PkgEntry} the entry matching the supplied params,\r\n   * `undefined` for not-found.\r\n   */\r\n  getPkgEntry(pkgId, entryId) {\r\n\r\n    // validate parameters\r\n    const check = verify.prefix('PkgManager.getPkgEntry() parameter violation: ');\r\n    // ... pkgId\r\n    check(pkgId,           'pkgId is required');\r\n    check(isString(pkgId), 'pkgId must be a string');\r\n    // ... entryId\r\n    check(entryId,           'entryId is required');\r\n    check(isString(entryId), 'entryId must be a string');\r\n\r\n    // resolve the package containing the entry\r\n    const smartPkg = this.pkgCatalog[pkgId];\r\n    if (!smartPkg) {\r\n      return;\r\n    }\r\n    \r\n    // resolve the entry, if any (when defined in package)\r\n    return smartPkg.getPkgEntry(entryId);\r\n  }\r\n\r\n}\r\nPkgManager.unmangledName = 'PkgManager';\r\n\r\n\r\n// the implied pkgId for all system classes\r\nconst systemPkgId = 'core';\r\n\r\n\r\n// expose our single pkgManager utility ... AI: singleton code smell\r\nconst pkgManager = new PkgManager();\r\nexport default pkgManager;\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Enumify {\n    static closeEnum() {\n        const enumKeys = [];\n        const enumValues = [];\n        // Traverse the enum entries\n        for (const [key, value] of Object.entries(this)) {\n            enumKeys.push(key);\n            value.enumKey = key;\n            value.enumOrdinal = enumValues.length;\n            enumValues.push(value);\n        }\n        // Important: only add more static properties *after* processing the enum entries\n        this.enumKeys = enumKeys;\n        this.enumValues = enumValues;\n        // TODO: prevent instantiation now. Freeze `this`?\n    }\n    /** Use case: parsing enum values */\n    static enumValueOf(str) {\n        const index = this.enumKeys.indexOf(str);\n        if (index >= 0) {\n            return this.enumValues[index];\n        }\n        return undefined;\n    }\n    static [Symbol.iterator]() {\n        return this.enumValues[Symbol.iterator]();\n    }\n    toString() {\n        return this.constructor.name + '.' + this.enumKey;\n    }\n}\nexports.Enumify = Enumify;\n//# sourceMappingURL=index.js.map","import {Enumify} from 'enumify';\r\n\r\n/**\r\n * An enumeration designating the various **visualize-it** Display Modes.\r\n */\r\nexport default class DispMode extends Enumify {\r\n//ERROR: Support for the experimental syntax 'classProperties' isn't currently enabled (7:19):\r\n//static view     = new DispMode();\r\n//static edit     = new DispMode();\r\n//static animate  = new DispMode();\r\n//static _        = this.closeEnum();\r\n}\r\n\r\n// DO the old-fashion way, rather that attempting to re-configure svelte (see ERROR above)\r\nDispMode.view     = new DispMode();\r\nDispMode.edit     = new DispMode();\r\nDispMode.animate  = new DispMode();\r\nDispMode._        = DispMode.closeEnum();\r\n","import verify            from '../util/verify';\r\nimport {isObject,\r\n        isPlainObject,\r\n        isSmartObject,\r\n        isFunction,\r\n        isClass}         from '../util/typeCheck';\r\n\r\n/**\r\n * Generate `handleRefFn` with knowledge of how to handle **ALL** data\r\n * types for a given app-specific context.  This is accomplished by\r\n * registering a series of handlers (one for each data type).\r\n *\r\n * This is typically used in a SmartModel traversal, walking through\r\n * all the reference values within a containment tree (with depth).\r\n *\r\n * The API of the generated `handleRefFn` -AND- all app-specific\r\n * `handleXyz` functions are the same:\r\n *\r\n * ```js\r\n * + handleRefFn(ref, accum): accum\r\n * + handleXyz(ref, accum): accum\r\n *     - params:\r\n *       * `ref`:    the reference value to handle/interpret\r\n *       * `accum`:  the current accumulation (when of interest to client)\r\n *     - return: accum - an accumulative amalgamation (when of interest to client)\r\n * ```\r\n *\r\n * The only difference between the two APIs is context of the `ref` parameter:\r\n * - For the generated `handleRefFn`, the `ref` param is of ANY type.  \r\n *   This is the purpose of this generated function - to map the\r\n *   request to application handlers that are type-specific.\r\n * - For the app specific `handleXyz` the `ref` param is guaranteed to\r\n *   be of type `Xyz`.\r\n *\r\n * **Please Note** this function uses named parameters.\r\n * \r\n * @param {function} handleNoRef - a handler of NO ref (null,\r\n * undefined)\r\n * \r\n * @param {function} handlePrimitive - a handler of primitives\r\n * (string, number, etc.).\r\n * \r\n * @param {function} handleArray - a handler of arrays\r\n * \r\n * @param {function} handlePlainObj - a handler of plain objects\r\n * (object literals)\r\n * \r\n * @param {function} handleSmartObj - a handler of SmartObjects\r\n * (class-based object derivations of SmartModel)\r\n * \r\n * @param {function} handleNonSmartObj - a handler of NON\r\n * SmartObjects (not plain and not smart)\r\n * \r\n * @param {function} handleClass - a handler of classes/functions\r\n * \r\n * @returns {function} generated `handleRefFn` (see API in description\r\n * above).\r\n */\r\nexport default function createTypeRefHandler(handlers={}) {\r\n\r\n  // setup/validate the handler object for this context\r\n  // ... registering handlers for ALL data types\r\n  handlers = setupHandlers(handlers);\r\n\r\n  // generate our handleRefFn() for this application context\r\n  function handleRefFn(ref, accum) {\r\n    // handle NO ref (null, undefined)\r\n    if (ref===undefined || ref===null) {\r\n      return handlers.handleNoRef(ref, accum);\r\n    }\r\n    // handle arrays\r\n    else if (Array.isArray(ref)) {\r\n      return handlers.handleArray(ref, accum);\r\n    }\r\n    // handle classes/functions\r\n    else if (isClass(ref)) {\r\n      return handlers.handleClass(ref, accum);\r\n    }\r\n    // handle objects ... various object types (see below)\r\n    else if (isObject(ref)) {\r\n      // handle SmartObjects (class-based object derivations of SmartModel)\r\n      if (isSmartObject(ref)) {\r\n        return handlers.handleSmartObj(ref, accum);\r\n      }\r\n      // handle plain objects\r\n      else if (isPlainObject(ref)) {\r\n        return handlers.handlePlainObj(ref, accum);\r\n      }\r\n      // handle other objects (not plain and not smart)\r\n      else {\r\n        return handlers.handleNonSmartObj(ref, accum);\r\n      }\r\n    }\r\n    // handle primitives (string, number, boolean, etc.)\r\n    else {\r\n      return handlers.handlePrimitive(ref, accum);\r\n    }\r\n  }\r\n\r\n  // expose our generated handleRefFn()\r\n  return handleRefFn;\r\n}\r\n\r\n\r\n//********************************************************************************************\r\n//* internal helper **************************************************************************\r\n//********************************************************************************************\r\n\r\n// setup/validate the handler object for this context\r\n// ... registering handlers for ALL data types\r\nfunction setupHandlers(handlers) {\r\n\r\n  // validate parameters\r\n  const check = verify.prefix('createTypeRefHandler() parameter violation: ');\r\n\r\n  // ... handlers\r\n  check(isPlainObject(handlers), 'only named parameters may be supplied');\r\n\r\n  // ... descturcture/validate the handlers sub-structure\r\n  const {handleNoRef,\r\n         handlePrimitive,\r\n         handleArray,\r\n         handlePlainObj,\r\n         handleSmartObj,\r\n         handleNonSmartObj,\r\n         handleClass,\r\n         ...unknownNamedArgs} = handlers;\r\n\r\n  // ... handleNoRef\r\n  check(handleNoRef,                   'handleNoRef is required');\r\n  check(isFunction(handleNoRef),       'handleNoRef must be a function');\r\n\r\n  // ... handlePrimitive\r\n  check(handlePrimitive,               'handlePrimitive is required');\r\n  check(isFunction(handlePrimitive),   'handlePrimitive must be a function');\r\n\r\n  // ... handleArray\r\n  check(handleArray,                   'handleArray is required');\r\n  check(isFunction(handleArray),       'handleArray must be a function');\r\n\r\n  // ... handlePlainObj\r\n  check(handlePlainObj,                'handlePlainObj is required');\r\n  check(isFunction(handlePlainObj),    'handlePlainObj must be a function');\r\n\r\n  // ... handleSmartObj\r\n  check(handleSmartObj,                'handleSmartObj is required');\r\n  check(isFunction(handleSmartObj),    'handleSmartObj must be a function');\r\n\r\n  // ... handleNonSmartObj\r\n  check(handleNonSmartObj,             'handleNonSmartObj is required');\r\n  check(isFunction(handleNonSmartObj), 'handleNonSmartObj must be a function');\r\n\r\n  // ... handleClass\r\n  check(handleClass,                   'handleClass is required');\r\n  check(isFunction(handleClass),       'handleClass must be a function');\r\n\r\n  // ... unrecognized named parameter\r\n  const unknownArgKeys = Object.keys(unknownNamedArgs);\r\n  check(unknownArgKeys.length === 0,  `unrecognized named parameter(s): ${unknownArgKeys}`);\r\n\r\n  // ... unrecognized positional parameter\r\n  //     NOTE: when defaulting entire struct, arguments.length is 0\r\n  check(arguments.length <= 1, `unrecognized positional parameters (only named parameters may be specified) ... ${arguments.length} positional parameters were found`);\r\n\r\n  // reconstitute/return our value-added handlers\r\n  return {\r\n    handleNoRef,\r\n    handlePrimitive,\r\n    handleArray,\r\n    handlePlainObj,\r\n    handleSmartObj,\r\n    handleNonSmartObj,\r\n    handleClass,\r\n  };\r\n\r\n}\r\n","function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value' || descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group) {\n    const value = [];\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.push(group[i].__value);\n    }\n    return value;\n}\nfunction to_number(value) {\n    return value === '' ? undefined : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j];\n                if (attributes[attribute.name]) {\n                    j++;\n                }\n                else {\n                    node.removeAttribute(attribute.name);\n                }\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    if (value != null || input.value) {\n        input.value = value;\n    }\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\nfunction add_resize_listener(element, fn) {\n    if (getComputedStyle(element).position === 'static') {\n        element.style.position = 'relative';\n    }\n    const object = document.createElement('object');\n    object.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n    object.setAttribute('aria-hidden', 'true');\n    object.type = 'text/html';\n    object.tabIndex = -1;\n    let win;\n    object.onload = () => {\n        win = object.contentDocument.defaultView;\n        win.addEventListener('resize', fn);\n    };\n    if (/Trident/.test(navigator.userAgent)) {\n        element.appendChild(object);\n        object.data = 'about:blank';\n    }\n    else {\n        object.data = 'about:blank';\n        element.appendChild(object);\n    }\n    return {\n        cancel: () => {\n            win && win.removeEventListener && win.removeEventListener('resize', fn);\n            element.removeChild(object);\n        }\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(html, anchor = null) {\n        this.e = element('div');\n        this.a = anchor;\n        this.u(html);\n    }\n    m(target, anchor = null) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(target, this.n[i], anchor);\n        }\n        this.t = target;\n    }\n    u(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    p(html) {\n        this.d();\n        this.u(html);\n        this.m(this.t, this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error(`Function called outside component initialization`);\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined' ? window : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next, lookup.has(block.key));\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error(`Cannot have duplicate keys in a keyed each`);\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += \" \" + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += \" \" + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : ``;\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if ($$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set() {\n            // overridden by instance, if it has props\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set() {\n        // overridden by instance, if it has props\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.20.1' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev(\"SvelteDOMRemove\", { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? [\"capture\"] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev(\"SvelteDOMAddEventListener\", { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev(\"SvelteDOMRemoveEventListener\", { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev(\"SvelteDOMRemoveAttribute\", { node, attribute });\n    else\n        dispatch_dev(\"SvelteDOMSetAttribute\", { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev(\"SvelteDOMSetProperty\", { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev(\"SvelteDOMSetDataset\", { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev(\"SvelteDOMSetData\", { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(`'target' is a required option`);\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn(`Component was already destroyed`); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error(`Infinite loop detected`);\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal';\nexport { get_store_value as get } from '../internal';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe,\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import {isSmartObject, isPkgEntry, isArray}  from '../../util/typeCheck';\r\n\r\n/**\r\n * Utility function that manages the details of any change (initial,\r\n * undo, or redo).\r\n *\r\n * @param {function} check the check function on who's behalf we are\r\n * operating.\r\n *\r\n * @param {EPkg} ePkg - the EPkg smartObject on whose behalf we\r\n * manage/monitor.\r\n * \r\n * @param {function} changeFn - the function that will apply the\r\n * change (this can be the initial, redo, or undo function).\r\n *\r\n * @private\r\n */\r\nexport default function applyChange(check, ePkg, changeFn) {\r\n\r\n  // route functionality to the specific EPkg tasks:\r\n  if (isPkgEntry(ePkg)) { // ... PkgEntry\r\n    applyChangeForPkgEntry(check, ePkg, changeFn);\r\n  }\r\n  else { // ... Pkg (SmartPkg)\r\n    applyChangeForPkg(check, ePkg, changeFn);\r\n  }\r\n}\r\n\r\n// internal applyChange() route for PkgEntries\r\nfunction applyChangeForPkgEntry(check, ePkg, changeFn) {\r\n\r\n  // convenient aliases\r\n  const pkgEntry = ePkg;\r\n  const pallet   = ePkg;\r\n\r\n  // PART I: re-sync the graphical representation (i.e. the Konva state)\r\n  //         - employing a mount/unmount, repainting the entire graphics (a bit of a sledge hammer)\r\n  //         - two-phase sync is needed to catch things like removing objects\r\n  //           * a single-phase sync (after SmartObject mod), \r\n  //             will NOT remove konva rep (via unmount) because it is NOT found\r\n  //           * a single-phase sync COULD work if we pushed up the unmount/mount\r\n  //             to the view level, but that is not really needed\r\n  const containingKonvaStage = pallet.containingKonvaStage;\r\n  pallet.unmount();\r\n\r\n  // apply the change to our SmartObject model by invoking the app-specific change function\r\n  const targetObj = changeFn();\r\n  check(isSmartObject(targetObj), 'the execution of app-specific change functions (registered to ChangeManager) ' +\r\n                                  'MUST return a targetObj that is a SmartObject (type: SmartModel)');\r\n  check(pkgEntry === targetObj.getPkgEntry(), 'the execution of app-specific change functions (registered to ChangeManager for PkgEntries) ' + \r\n                                              `MUST return a targetObj that has lineage in the '${pkgEntry.getEPkgId()}' PkgEntry (on who's behalf we are operating)`);\r\n\r\n  // PART II: re-sync the graphical representation (i.e. the Konva state)\r\n  pallet.mount(containingKonvaStage);\r\n\r\n  // re-establish our pkgEntry DispMode\r\n  // ... this resets all our event handlers given the re-mount :-)\r\n  pkgEntry.changeManager.changeDispMode( pkgEntry.getDispMode() );\r\n\r\n  // trickle up this low-level change, auto-syncing required state\r\n  // ... this must happen after re-mounts (because size is calculated from mounted konva state)\r\n  targetObj.trickleUpChange();\r\n\r\n  // that's all folks\r\n}\r\n\r\n// internal applyChange() route for Pkgs (SmartPkg)\r\nfunction applyChangeForPkg(check, ePkg, changeFn) {\r\n\r\n  // convenient aliases\r\n  const pkg = ePkg; // ... we are servicing SmartPkg\r\n  \r\n  // apply the change to our SmartObject model by invoking the app-specific change function\r\n  const changeFnReturn = changeFn();\r\n  const targetObjs = isArray(changeFnReturn) ? changeFnReturn : [changeFnReturn];\r\n  targetObjs.forEach( (targetObj) => {\r\n    check(isSmartObject(targetObj), 'the execution of app-specific change functions (registered to ChangeManager) ' +\r\n                                    'MUST return a targetObj that is a SmartObject (type: SmartModel)');\r\n    check(pkg === targetObj.getPkg(), 'the execution of app-specific change functions (registered to ChangeManager for SmartPkgs) ' + \r\n                                      `MUST return a targetObj that has lineage in the '${pkg.getEPkgId()}' SmartPkg (on who's behalf we are operating)`);\r\n  });\r\n\r\n\r\n  // resync the parentage of the Pkg directory structure\r\n  // ... because the directory structure may change\r\n  //     EX: moving entries/directories to different parts of the structure\r\n  pkg.rootDir.syncParent(pkg);\r\n\r\n  // trickle up this low-level change, auto-syncing required state\r\n  // ... a trickle-up IS required to reflect changes in CRC within the entire tree\r\n  //     (for example: directories and sub-directories)\r\n  targetObjs.forEach( (targetObj) => {\r\n    // console.log(`xx trickling up: ${targetObj.getName()}`, {targetObj}, `\\n${targetObj}`);\r\n    targetObj.trickleUpChange(false/*sizeChanged: has NOT changed*/);\r\n  });\r\n\r\n  // synchronize our GUI to reflect the package structure changes\r\n  // ... we do this outside of trickleUpChange() so as to be specific to SmartPkg\r\n  //     and to only invoke ONCE\r\n  //     ... for SmartPkg changes, trickleUpChange() can occur multiple times \r\n  //         via array processing (see prior step)\r\n  if (pkg.syncPkgStructureGuiChanges) {\r\n    pkg.syncPkgStructureGuiChanges();\r\n  }\r\n  else {\r\n    console.warn(`*** WARNING *** changeManager.applyChange() could NOT sync GUI package structure changes - expecting SmartPkg to have syncPkgStructureGuiChanges() method (from ViewPkg.svelte) but was NOT registered.`);\r\n  }\r\n\r\n  // that's all folks\r\n}\r\n","import applyChange  from './applyChange';\r\nimport verify       from '../../util/verify';\r\n\r\n/**\r\n * UndoRedo is an internal class that manages undo/redo operations for\r\n * a given EPkg (PkgEntry or SmartPkg)\r\n *\r\n * @private\r\n */\r\nexport default class UndoRedoMgr {\r\n\r\n  /**\r\n   * Create an UndoRedo instance.\r\n   *\r\n   * @param {ChangeManager} changeManager - the changeManager on whose\r\n   * behalf we are operating.\r\n   */\r\n  constructor(changeManager) {\r\n    // NO validate parameters (internal usage only)\r\n\r\n    // maintain the linkage between self and changeManager\r\n    this.changeManager        = changeManager;\r\n    changeManager.undoRedoMgr = this;\r\n\r\n    // carve out our state\r\n    this.stack = []; // [ [undoFn, redoFn], ... ]\r\n    this.cur = -1;   // points to the actual current stack entry (-1 for NO entries)\r\n  }\r\n\r\n  /**\r\n   * Register the supplied undo/redo operation to self.\r\n   * \r\n   * @param {function} undoFn - the function that \"undoes\" the low-level\r\n   * change.\r\n   * \r\n   * @param {function} redoFn - the function that applies the\r\n   * low-level change.\r\n   */\r\n  registerOp(undoFn, redoFn) {\r\n    // prune any \"active\" redos\r\n    // ... when \"undos\" have been applied, there are active \"redos\" that are no longer possible\r\n    //     BECAUSE of this new user-supplied operation\r\n    while (this.isRedoAvail()) {\r\n      this.stack.pop();\r\n    }\r\n\r\n    // register our new entry\r\n    this.stack.push([undoFn, redoFn]);\r\n    this.cur = this.stack.length - 1;\r\n  }\r\n\r\n\r\n  /**\r\n   * Return an indicator as to whether self's EPkg has \"undos\" available.\r\n   * \r\n   * @returns {boolean} `true`: \"undos\" are available, `false` otherwise.\r\n   */\r\n  isUndoAvail() {\r\n    // undo is available whenever we have active entries\r\n    // ... NOTE: we use index NOT this.stack.length BECAUSE \r\n    //           the stack (array) is preserved during active undo (for redo activation)\r\n    return this.cur >= 0;\r\n  }\r\n\r\n  /**\r\n   * Apply an \"undo\" operation to self's EPkg.\r\n   */\r\n  applyUndo() {\r\n    // verify context ... we must have an undo available\r\n    const check = verify.prefix('*** ERROR *** applyUndo(): ');\r\n    check(this.isUndoAvail(), `ePkgId: '${this.changeManager.ePkg.getEPkgId()}' DOES NOT currently have an \"undo\" operation available`);\r\n\r\n    // locate undoFn\r\n    const [undoFn/*, redoFn*/] = this.stack[this.cur];\r\n    this.cur--;\r\n\r\n    // apply the undoFn\r\n    applyChange(check, this.changeManager.ePkg, undoFn, undefined/*redo: N/A for undo*/);\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self's EPkg has \"redos\" available.\r\n   * \r\n   * @returns {boolean} `true`: \"redos\" are available, `false` otherwise.\r\n   */\r\n  isRedoAvail() {\r\n    // redo is available when an \"active\" undo has been applied\r\n    // ... i.e. an undo executed -AND- no other changes have been executed\r\n    return this.cur < this.stack.length-1;\r\n  }\r\n\r\n  /**\r\n   * Apply an \"redo\" operation to self's EPkg.\r\n   */\r\n  applyRedo() {\r\n    // verify context ... we must have a redo available\r\n    const check = verify.prefix('*** ERROR *** applyRedo(): ');\r\n    check(this.isRedoAvail(), `ePkgId: '${this.changeManager.ePkg.getEPkgId()}' DOES NOT currently have an \"redo\" operation available`);\r\n\r\n    // locate the redoFn\r\n    this.cur++;\r\n    const [/*undoFn*/, redoFn] = this.stack[this.cur];\r\n\r\n    // apply the redoFn\r\n    applyChange(check, this.changeManager.ePkg, redoFn, true/*redo: this is truly a redo!!*/);\r\n  }\r\n\r\n}\r\n","import {writable, get}  from 'svelte/store';\r\nimport UndoRedoMgr      from './UndoRedoMgr';\r\nimport applyChange      from './applyChange';\r\nimport verify           from '../../util/verify';\r\nimport checkUnknownArgs from '../../util/checkUnknownArgs';\r\nimport {isEPkg,\r\n        isFunction}     from '../../util/typeCheck';\r\n\r\n/**\r\n * ChangeManager is a reactive custom store that manages and monitors\r\n * changes in an EPkg:\r\n * - either a pkg (SmartPkg)                             ... ex: 'com.astx.ACME'\r\n * - or a     pkgEntry (top-level entries of a SmartPkg) ... ex: 'com.astx.ACME/scene1'\r\n *\r\n * ChangeManager objects are retained in the corresponding EPkg\r\n * smartObject, as a convenient cataloging mechanism.\r\n *\r\n * **Auto Synchronization**:\r\n *\r\n * ChangeManager greatly simplifies the change process by\r\n * automatically applying the required synchronization to the:\r\n *\r\n *  - graphical representation (i.e. the Konva graphical state, or the LeftNav's PkgViewer)\r\n *    ... app logic focuses on SmartObject changes,\r\n *        and ChangeManager auto syncs the visual graphics\r\n *\r\n *  - SmartObject parentage\r\n *    ... app logic merely changes a \"focused\" target object\r\n *        and ChangeManager auto syncs it's parentage.\r\n *        This is accomplished via SmartObject.trickleUpChange(),\r\n *        propagating things like crc computations, and dynamic container size.\r\n *\r\n *  - ChangeMonitor state (see ChangeMonitor Object below)\r\n *    ... of course self's reflective ChangeMonitor state is auto synced.\r\n *        This is accomplished through the syncMonitoredChange() method,\r\n *        invoked at the appropriate places.\r\n *\r\n *\r\n * **API**:\r\n *\r\n * There are two distinct APIs you should be aware of (as in all\r\n * svelte custom stores):\r\n * \r\n * 1. ChangeManager Object (this object [i.e. the svelte custom store]):\r\n * \r\n *    For details, please refer to the method JavaDocs (below)\r\n *    ```js\r\n *    + changeDispMode(dispMode): void        - change the dispMode of self's ePkg (view/edit/animate)\r\n *\r\n *    + syncMonitoredChange(): void           - synchronize self's ChangeMonitor (store value), \r\n *                                              due to a change that has just been made to self's ePkg\r\n *                                              impacting items monitored by ChangeManger {dispMode, inSync, undoAvail, redoAvail},\r\n *                                              for example:\r\n *                                              * CRC computations (impacting: {inSync, undoAvail, redoAvail}):\r\n *                                                - SmartObject.resetCrc():     void ... via SmartObject.trickleUpChange() driven by changeManager.applyChange()\r\n *                                                - SmartObject.resetBaseCrc(): void ... via SmartPkg-constructor() and pkgPersist-savePkg()\r\n *                                              * DispMode changes (impacting: {dispMode}):\r\n *                                                - changeManager.changeDispMode(dispMode)\r\n *\r\n *    + applyChange({changeFn, undoFn}): void - apply a change to our system, registering the change to our undo/redo stack,\r\n *                                              auto-syncing required state (see \"Auto Synchronization\" above).\r\n *\r\n *    + applyUndo(): void                     - apply an \"undo\" operation to the EPkg on whose behalf we are managing,\r\n *                                              auto-syncing required state (see \"Auto Synchronization\" above).\r\n *\r\n *    + applyRedo(): void                     - apply an \"redo\" operation to the EPkg on whose behalf we are managing,\r\n *                                              auto-syncing required state (see \"Auto Synchronization\" above).\r\n *    ```\r\n *\r\n * 2. ChangeMonitor Object (the store value, accessible via\r\n *    subscription or the auto-subscription `$` prefix):\r\n *\r\n *    ```js\r\n *    + dispMode: DispMode enum - the current ePkg's DispMode (view/edit/animate)\r\n *\r\n *    + inSync: boolean - is self's ePkg \"in sync\" with it's base version (saved on disk)\r\n *    + inSyncIcon(): string - name of icon to qualify \"in sync\" status ('NONE' for in-sync - can be fed directly into <Icon>)\r\n *\r\n *    + undoAvail: boolean - are undo operations available to self's ePkg\r\n *    + redoAvail: boolean - are redo operations available to self's ePkg\r\n *    ```\r\n *\r\n * **NOTE about real classes**:\r\n *\r\n *   You may have never seen a real JavaScript class used as a svelte\r\n *   custom store.  **Yes** it is possible, as long has it has the\r\n *   `subscribe()` method.  In this usage scenario, my preference is to\r\n *   use real classes because we have many ChangeManager instances, and\r\n *   we can share the method definitions between these multiple\r\n *   instances.\r\n */\r\n\r\nexport default class ChangeManager {\r\n\r\n  /**\r\n   * Create a ChangeManager (a reactive custom store) that manages and\r\n   * monitors changes in the supplied ePkg.\r\n   *\r\n   * For standard reference purposes, this new object instance is\r\n   * retained in `ePkg.changeManager`.\r\n   *\r\n   * @param {EPkg} ePkg - the EPkg smartObject on whose behalf we\r\n   * manage/monitor.\r\n   * - either a pkg (SmartPkg)                             ... ex: 'com.astx.ACME'\r\n   * - or a     pkgEntry (top-level entries of a SmartPkg) ... ex: 'com.astx.ACME/scene1'\r\n   */\r\n  constructor(ePkg) {\r\n    // validate parameters\r\n    const check = verify.prefix('ChangeManager() constructor parameter violation: ');\r\n    // ... ePkg\r\n    check(ePkg,          'ePkg is required');\r\n    check(isEPkg(ePkg),  'ePkg must be an EPkg smartObject');\r\n\r\n    // maintain the linkage between self and ePkg\r\n    this.ePkg          = ePkg;\r\n    ePkg.changeManager = this;\r\n\r\n    // register our undo/redo manager\r\n    // ... auto maintains this.undoRedoMgr\r\n    new UndoRedoMgr(this);\r\n    \r\n    // create our underlying base writable store\r\n    this.baseStore = writable({ // *** initial ChangeMonitor store value ***\r\n      dispMode: this.ePkg.getDispMode(),\r\n\r\n      inSync:               this.ePkg.isInSync(),\r\n      inSyncIcon() {\r\n        return this.inSync ? 'NONE' : 'fiber_manual_record'; // a circle :-)\r\n      },\r\n\r\n      undoAvail: this.undoRedoMgr.isUndoAvail(),\r\n      redoAvail: this.undoRedoMgr.isRedoAvail(),\r\n    });\r\n    \r\n    // demark this object as a svelte custom store\r\n    this.subscribe = this.baseStore.subscribe;\r\n  }\r\n\r\n  /**\r\n   * Change self's EPkg to the supplied dispMode (view/edit/animate).\r\n   *\r\n   * NOTE: Technically, only EPkg objects utilize DispMode, however \r\n   *       all SmartObjects have a dispMode (a bit of an overkill).\r\n   *\r\n   * @param {DispMode} dispMode - the display mode to set.\r\n   */\r\n  changeDispMode(dispMode) {\r\n    // validate parameters\r\n    // ... this is indirectly accomplished in the .setDispMode() invocation (below)\r\n\r\n    // apply the change (only when out-of-sync)\r\n    // NOTE: There are cases where we want to issue a\r\n    //       `pkgEntry.setDispMode()` EVEN when it has NOT changed\r\n    //       ... see: src/pkgEntryTabs/syncModelOnActiveTabChange.js\r\n    //       THIS is OK to do this, as we will NOT reflex unless it has\r\n    //       actually changed :-)\r\n    //       ... see: this.syncMonitoredChange()\r\n    // console.log(`xx ChangeManager.changeDispMode(${dispMode.enumKey}) ... applying change`);\r\n    this.ePkg.setDispMode(dispMode);\r\n\r\n    // update our reflexive monitor\r\n    this.syncMonitoredChange();\r\n  }\r\n\r\n  /**\r\n   * Synchronize self's ChangeMonitor (store value), due to a change\r\n   * that has just been made to self's ePkg.\r\n   */\r\n  syncMonitoredChange() {\r\n\r\n    // resolve the latest (most current) state that we are tracking\r\n    const dispMode  = this.ePkg.getDispMode();\r\n    const inSync    = this.ePkg.isInSync();\r\n    const undoAvail = this.undoRedoMgr.isUndoAvail();\r\n    const redoAvail = this.undoRedoMgr.isRedoAvail();\r\n\r\n    // pre-fetch current state of our monitor\r\n    // ... used to determine if our monitor needs to change\r\n    const monitorState = get(this.baseStore);\r\n    \r\n    // update our ChangeMonitor store value (triggering reactivity)\r\n    // ... only when it has changed\r\n    //     NOTE: The mere act of invoking store.update() WILL mark the store as changed.\r\n    //           EVEN when returning the original state, the store is considered to have changed!\r\n    //           ONLY WAY AROUND THIS is to do a prelim fetch (see get() above)\r\n    //             1. potential concurrent change conflicts (min chance of happening)\r\n    //             2. a bit more overhead\r\n    if (dispMode  !== monitorState.dispMode  ||\r\n        inSync    !== monitorState.inSync    ||\r\n        undoAvail !== monitorState.undoAvail ||\r\n        redoAvail !== monitorState.redoAvail) {\r\n      this.baseStore.update( (state) => ({...state, dispMode, inSync, undoAvail, redoAvail}) );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply a change to our system, registering the change to our\r\n   * undo/redo stack, auto-syncing required state (see \"Auto\r\n   * Synchronization\" above).\r\n   * \r\n   * - Changes are registered to the EPkg on whose behalf we\r\n   *   manage/monitor (i.e. this.ePkg).  This must be consistent with\r\n   *   the EPkg of the targetObj returned from the `changeFn()` /\r\n   *   `undoFn()`.\r\n   *\r\n   * - Changes are modeled as functions to be executed.  The API of\r\n   *   `changeFn()` / `undoFn()` is as follows:\r\n   *   \r\n   *   ```js\r\n   *   + changeFn(): targetObj | [targetObjs]\r\n   *   + undoFn():   targetObj | [targetObjs]\r\n   *   ```\r\n   * \r\n   * - Both functions return the low-level targetObj(s) (of type\r\n   *   SmartObject) that were directly impacted by the change.  An\r\n   *   array of targetObjs can be returned if there are multiple\r\n   *   objects impacted (this is not typical, but used in things like\r\n   *   moving Pkg directories).  These targetObj(s) are used to seed\r\n   *   the synchronization of other parts of the model, through things\r\n   *   like the `SmartModel.trickleUpChange()` method.  The targetObj\r\n   *   MUST be in the lineage of the EPkg on who's behalf we are\r\n   *   operating.\r\n   * \r\n   * - These change functions should be implemented in a way that DOES NOT\r\n   *   reference stale objects!\r\n   *   - when using undo/redo (over the course of time) objects may be\r\n   *     \"swapped out\" via the synchronization process\r\n   *   - the solution to this dilemma is to resolve all object references\r\n   *     from their \"id\" AT RUN-TIME ... insuring you have the most current\r\n   *     active object.\r\n   *\r\n   * - Also, these change functions should only be concerned with the\r\n   *   modification of a given low-level SmartObject.  ChangeManager\r\n   *   will orchestrate additional detail to insure conformity (see\r\n   *   \"Auto Synchronization\" above).\r\n   *\r\n   * **Please Note** this service uses named parameters.\r\n   * \r\n   * @param {function} changeFn - the function that applies the\r\n   * low-level change.\r\n   * \r\n   * @param {function} undoFn - the function that \"undoes\" the low-level\r\n   * change.  A guarantee is made that the object state will be as it was\r\n   * immediately after the `changeFn()` execution.\r\n   */\r\n  applyChange({changeFn, undoFn, ...unknownArgs}={}) {\r\n    // validate parameters\r\n    const check = verify.prefix('changeManager.applyChange() parameter violation: ');\r\n    // ... changeFn\r\n    check(changeFn,             'changeFn is required');\r\n    check(isFunction(changeFn), 'changeFn must be a function');\r\n    // ... undoFn\r\n    check(undoFn,             'undoFn is required');\r\n    check(isFunction(undoFn), 'undoFn must be a function');\r\n    // ... unknown arguments\r\n    checkUnknownArgs(check, unknownArgs, arguments);\r\n\r\n    // register these change functions to our UnDoRedoMgr\r\n    // NOTE: This MUST be done prior to applyChange(), so as to sync undo/redo monitor state in one swoop\r\n    // NOTE: The changeFn IS our redoFn\r\n    this.undoRedoMgr.registerOp(undoFn, changeFn);\r\n\r\n    // apply the initial change\r\n    applyChange(check, this.ePkg, changeFn);\r\n  }\r\n\r\n\r\n  /**\r\n   * Apply an \"undo\" operation to the EPkg on whose behalf we are\r\n   * managing, auto-syncing required state (see \"Auto Synchronization\"\r\n   * above).\r\n   */\r\n  applyUndo() {\r\n    // simply propagate request into our undoRedoMgr\r\n    this.undoRedoMgr.applyUndo();\r\n  }\r\n\r\n\r\n  /**\r\n   * Apply an \"redo\" operation to the EPkg on whose behalf we are\r\n   * managing, auto-syncing required state (see \"Auto Synchronization\"\r\n   * above).\r\n   */\r\n  applyRedo() {\r\n    // simply propagate request into our undoRedoMgr\r\n    this.undoRedoMgr.applyRedo();\r\n  }\r\n\r\n}\r\n","export default (typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {});\n","\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\nvar inited = false;\nfunction init () {\n  inited = true;\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i]\n    revLookup[code.charCodeAt(i)] = i\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62\n  revLookup['_'.charCodeAt(0)] = 63\n}\n\nexport function toByteArray (b64) {\n  if (!inited) {\n    init();\n  }\n  var i, j, l, tmp, placeHolders, arr\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nexport function fromByteArray (uint8) {\n  if (!inited) {\n    init();\n  }\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n","\nexport function read (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexport function write (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nexport default Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n\nimport * as base64 from './base64'\nimport * as ieee754 from './ieee754'\nimport isArray from './isArray'\n\nexport var INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : true\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nvar _kMaxLength = kMaxLength()\nexport {_kMaxLength as kMaxLength};\nfunction typedArraySupport () {\n  return true;\n  // rollup issues\n  // try {\n  //   var arr = new Uint8Array(1)\n  //   arr.__proto__ = {\n  //     __proto__: Uint8Array.prototype,\n  //     foo: function () { return 42 }\n  //   }\n  //   return arr.foo() === 42 && // typed array instances can be augmented\n  //       typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n  //       arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  // } catch (e) {\n  //   return false\n  // }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nexport function Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    // Object.defineProperty(Buffer, Symbol.species, {\n    //   value: null,\n    //   configurable: true\n    // })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (internalIsBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nexport function SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\nBuffer.isBuffer = isBuffer;\nfunction internalIsBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!internalIsBuffer(a) || !internalIsBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!internalIsBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (internalIsBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!internalIsBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!internalIsBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (internalIsBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!internalIsBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = internalIsBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nexport function isBuffer(obj) {\n  return obj != null && (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj))\n}\n\nfunction isFastBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isFastBuffer(obj.slice(0, 0))\n}\n","import { Buffer } from 'buffer';\n\nconst createBuffer =\n  Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow\n    ? Buffer.from\n    : // support for Node < 5.10\n      val => new Buffer(val);\n\nexport default createBuffer;\n","export default function(model, calc) {\n  const fn = (buf, previous) => calc(buf, previous) >>> 0;\n  fn.signed = calc;\n  fn.unsigned = fn;\n  fn.model = model;\n\n  return fn;\n}\n","import { Buffer } from 'buffer';\nimport createBuffer from './create_buffer';\nimport defineCrc from './define_crc';\n\nconst crc1 = defineCrc('crc1', function(buf, previous) {\n  if (!Buffer.isBuffer(buf)) buf = createBuffer(buf);\n\n  let crc = ~~previous;\n  let accum = 0;\n\n  for (let index = 0; index < buf.length; index++) {\n    const byte = buf[index];\n    accum += byte;\n  }\n\n  crc += accum % 256;\n  return crc % 256;\n});\n\nexport default crc1;\n","import { Buffer } from 'buffer';\nimport createBuffer from './create_buffer';\nimport defineCrc from './define_crc';\n\n// Generated by `./pycrc.py --algorithm=table-driven --model=crc-8 --generate=c`\n// prettier-ignore\nlet TABLE = [\n  0x00, 0x07, 0x0e, 0x09, 0x1c, 0x1b, 0x12, 0x15, 0x38, 0x3f, 0x36, 0x31, 0x24, 0x23, 0x2a, 0x2d,\n  0x70, 0x77, 0x7e, 0x79, 0x6c, 0x6b, 0x62, 0x65, 0x48, 0x4f, 0x46, 0x41, 0x54, 0x53, 0x5a, 0x5d,\n  0xe0, 0xe7, 0xee, 0xe9, 0xfc, 0xfb, 0xf2, 0xf5, 0xd8, 0xdf, 0xd6, 0xd1, 0xc4, 0xc3, 0xca, 0xcd,\n  0x90, 0x97, 0x9e, 0x99, 0x8c, 0x8b, 0x82, 0x85, 0xa8, 0xaf, 0xa6, 0xa1, 0xb4, 0xb3, 0xba, 0xbd,\n  0xc7, 0xc0, 0xc9, 0xce, 0xdb, 0xdc, 0xd5, 0xd2, 0xff, 0xf8, 0xf1, 0xf6, 0xe3, 0xe4, 0xed, 0xea,\n  0xb7, 0xb0, 0xb9, 0xbe, 0xab, 0xac, 0xa5, 0xa2, 0x8f, 0x88, 0x81, 0x86, 0x93, 0x94, 0x9d, 0x9a,\n  0x27, 0x20, 0x29, 0x2e, 0x3b, 0x3c, 0x35, 0x32, 0x1f, 0x18, 0x11, 0x16, 0x03, 0x04, 0x0d, 0x0a,\n  0x57, 0x50, 0x59, 0x5e, 0x4b, 0x4c, 0x45, 0x42, 0x6f, 0x68, 0x61, 0x66, 0x73, 0x74, 0x7d, 0x7a,\n  0x89, 0x8e, 0x87, 0x80, 0x95, 0x92, 0x9b, 0x9c, 0xb1, 0xb6, 0xbf, 0xb8, 0xad, 0xaa, 0xa3, 0xa4,\n  0xf9, 0xfe, 0xf7, 0xf0, 0xe5, 0xe2, 0xeb, 0xec, 0xc1, 0xc6, 0xcf, 0xc8, 0xdd, 0xda, 0xd3, 0xd4,\n  0x69, 0x6e, 0x67, 0x60, 0x75, 0x72, 0x7b, 0x7c, 0x51, 0x56, 0x5f, 0x58, 0x4d, 0x4a, 0x43, 0x44,\n  0x19, 0x1e, 0x17, 0x10, 0x05, 0x02, 0x0b, 0x0c, 0x21, 0x26, 0x2f, 0x28, 0x3d, 0x3a, 0x33, 0x34,\n  0x4e, 0x49, 0x40, 0x47, 0x52, 0x55, 0x5c, 0x5b, 0x76, 0x71, 0x78, 0x7f, 0x6a, 0x6d, 0x64, 0x63,\n  0x3e, 0x39, 0x30, 0x37, 0x22, 0x25, 0x2c, 0x2b, 0x06, 0x01, 0x08, 0x0f, 0x1a, 0x1d, 0x14, 0x13,\n  0xae, 0xa9, 0xa0, 0xa7, 0xb2, 0xb5, 0xbc, 0xbb, 0x96, 0x91, 0x98, 0x9f, 0x8a, 0x8d, 0x84, 0x83,\n  0xde, 0xd9, 0xd0, 0xd7, 0xc2, 0xc5, 0xcc, 0xcb, 0xe6, 0xe1, 0xe8, 0xef, 0xfa, 0xfd, 0xf4, 0xf3\n];\n\nif (typeof Int32Array !== 'undefined') TABLE = new Int32Array(TABLE);\n\nconst crc8 = defineCrc('crc-8', function(buf, previous) {\n  if (!Buffer.isBuffer(buf)) buf = createBuffer(buf);\n\n  let crc = ~~previous;\n\n  for (let index = 0; index < buf.length; index++) {\n    const byte = buf[index];\n    crc = TABLE[(crc ^ byte) & 0xff] & 0xff;\n  }\n\n  return crc;\n});\n\nexport default crc8;\n","import { Buffer } from 'buffer';\nimport createBuffer from './create_buffer';\nimport defineCrc from './define_crc';\n\n// Generated by `./pycrc.py --algorithm=table-driven --model=dallas-1-wire --generate=c`\n// prettier-ignore\nlet TABLE = [\n  0x00, 0x5e, 0xbc, 0xe2, 0x61, 0x3f, 0xdd, 0x83, 0xc2, 0x9c, 0x7e, 0x20, 0xa3, 0xfd, 0x1f, 0x41,\n  0x9d, 0xc3, 0x21, 0x7f, 0xfc, 0xa2, 0x40, 0x1e, 0x5f, 0x01, 0xe3, 0xbd, 0x3e, 0x60, 0x82, 0xdc,\n  0x23, 0x7d, 0x9f, 0xc1, 0x42, 0x1c, 0xfe, 0xa0, 0xe1, 0xbf, 0x5d, 0x03, 0x80, 0xde, 0x3c, 0x62,\n  0xbe, 0xe0, 0x02, 0x5c, 0xdf, 0x81, 0x63, 0x3d, 0x7c, 0x22, 0xc0, 0x9e, 0x1d, 0x43, 0xa1, 0xff,\n  0x46, 0x18, 0xfa, 0xa4, 0x27, 0x79, 0x9b, 0xc5, 0x84, 0xda, 0x38, 0x66, 0xe5, 0xbb, 0x59, 0x07,\n  0xdb, 0x85, 0x67, 0x39, 0xba, 0xe4, 0x06, 0x58, 0x19, 0x47, 0xa5, 0xfb, 0x78, 0x26, 0xc4, 0x9a,\n  0x65, 0x3b, 0xd9, 0x87, 0x04, 0x5a, 0xb8, 0xe6, 0xa7, 0xf9, 0x1b, 0x45, 0xc6, 0x98, 0x7a, 0x24,\n  0xf8, 0xa6, 0x44, 0x1a, 0x99, 0xc7, 0x25, 0x7b, 0x3a, 0x64, 0x86, 0xd8, 0x5b, 0x05, 0xe7, 0xb9,\n  0x8c, 0xd2, 0x30, 0x6e, 0xed, 0xb3, 0x51, 0x0f, 0x4e, 0x10, 0xf2, 0xac, 0x2f, 0x71, 0x93, 0xcd,\n  0x11, 0x4f, 0xad, 0xf3, 0x70, 0x2e, 0xcc, 0x92, 0xd3, 0x8d, 0x6f, 0x31, 0xb2, 0xec, 0x0e, 0x50,\n  0xaf, 0xf1, 0x13, 0x4d, 0xce, 0x90, 0x72, 0x2c, 0x6d, 0x33, 0xd1, 0x8f, 0x0c, 0x52, 0xb0, 0xee,\n  0x32, 0x6c, 0x8e, 0xd0, 0x53, 0x0d, 0xef, 0xb1, 0xf0, 0xae, 0x4c, 0x12, 0x91, 0xcf, 0x2d, 0x73,\n  0xca, 0x94, 0x76, 0x28, 0xab, 0xf5, 0x17, 0x49, 0x08, 0x56, 0xb4, 0xea, 0x69, 0x37, 0xd5, 0x8b,\n  0x57, 0x09, 0xeb, 0xb5, 0x36, 0x68, 0x8a, 0xd4, 0x95, 0xcb, 0x29, 0x77, 0xf4, 0xaa, 0x48, 0x16,\n  0xe9, 0xb7, 0x55, 0x0b, 0x88, 0xd6, 0x34, 0x6a, 0x2b, 0x75, 0x97, 0xc9, 0x4a, 0x14, 0xf6, 0xa8,\n  0x74, 0x2a, 0xc8, 0x96, 0x15, 0x4b, 0xa9, 0xf7, 0xb6, 0xe8, 0x0a, 0x54, 0xd7, 0x89, 0x6b, 0x35\n];\n\nif (typeof Int32Array !== 'undefined') TABLE = new Int32Array(TABLE);\n\nconst crc81wire = defineCrc('dallas-1-wire', function(buf, previous) {\n  if (!Buffer.isBuffer(buf)) buf = createBuffer(buf);\n\n  let crc = ~~previous;\n\n  for (let index = 0; index < buf.length; index++) {\n    const byte = buf[index];\n    crc = TABLE[(crc ^ byte) & 0xff] & 0xff;\n  }\n\n  return crc;\n});\n\nexport default crc81wire;\n","import { Buffer } from 'buffer';\nimport createBuffer from './create_buffer';\nimport defineCrc from './define_crc';\n\n// Generated by `./pycrc.py --algorithm=table-driven --model=crc-16 --generate=c`\n// prettier-ignore\nlet TABLE = [\n  0x0000, 0xc0c1, 0xc181, 0x0140, 0xc301, 0x03c0, 0x0280, 0xc241,\n  0xc601, 0x06c0, 0x0780, 0xc741, 0x0500, 0xc5c1, 0xc481, 0x0440,\n  0xcc01, 0x0cc0, 0x0d80, 0xcd41, 0x0f00, 0xcfc1, 0xce81, 0x0e40,\n  0x0a00, 0xcac1, 0xcb81, 0x0b40, 0xc901, 0x09c0, 0x0880, 0xc841,\n  0xd801, 0x18c0, 0x1980, 0xd941, 0x1b00, 0xdbc1, 0xda81, 0x1a40,\n  0x1e00, 0xdec1, 0xdf81, 0x1f40, 0xdd01, 0x1dc0, 0x1c80, 0xdc41,\n  0x1400, 0xd4c1, 0xd581, 0x1540, 0xd701, 0x17c0, 0x1680, 0xd641,\n  0xd201, 0x12c0, 0x1380, 0xd341, 0x1100, 0xd1c1, 0xd081, 0x1040,\n  0xf001, 0x30c0, 0x3180, 0xf141, 0x3300, 0xf3c1, 0xf281, 0x3240,\n  0x3600, 0xf6c1, 0xf781, 0x3740, 0xf501, 0x35c0, 0x3480, 0xf441,\n  0x3c00, 0xfcc1, 0xfd81, 0x3d40, 0xff01, 0x3fc0, 0x3e80, 0xfe41,\n  0xfa01, 0x3ac0, 0x3b80, 0xfb41, 0x3900, 0xf9c1, 0xf881, 0x3840,\n  0x2800, 0xe8c1, 0xe981, 0x2940, 0xeb01, 0x2bc0, 0x2a80, 0xea41,\n  0xee01, 0x2ec0, 0x2f80, 0xef41, 0x2d00, 0xedc1, 0xec81, 0x2c40,\n  0xe401, 0x24c0, 0x2580, 0xe541, 0x2700, 0xe7c1, 0xe681, 0x2640,\n  0x2200, 0xe2c1, 0xe381, 0x2340, 0xe101, 0x21c0, 0x2080, 0xe041,\n  0xa001, 0x60c0, 0x6180, 0xa141, 0x6300, 0xa3c1, 0xa281, 0x6240,\n  0x6600, 0xa6c1, 0xa781, 0x6740, 0xa501, 0x65c0, 0x6480, 0xa441,\n  0x6c00, 0xacc1, 0xad81, 0x6d40, 0xaf01, 0x6fc0, 0x6e80, 0xae41,\n  0xaa01, 0x6ac0, 0x6b80, 0xab41, 0x6900, 0xa9c1, 0xa881, 0x6840,\n  0x7800, 0xb8c1, 0xb981, 0x7940, 0xbb01, 0x7bc0, 0x7a80, 0xba41,\n  0xbe01, 0x7ec0, 0x7f80, 0xbf41, 0x7d00, 0xbdc1, 0xbc81, 0x7c40,\n  0xb401, 0x74c0, 0x7580, 0xb541, 0x7700, 0xb7c1, 0xb681, 0x7640,\n  0x7200, 0xb2c1, 0xb381, 0x7340, 0xb101, 0x71c0, 0x7080, 0xb041,\n  0x5000, 0x90c1, 0x9181, 0x5140, 0x9301, 0x53c0, 0x5280, 0x9241,\n  0x9601, 0x56c0, 0x5780, 0x9741, 0x5500, 0x95c1, 0x9481, 0x5440,\n  0x9c01, 0x5cc0, 0x5d80, 0x9d41, 0x5f00, 0x9fc1, 0x9e81, 0x5e40,\n  0x5a00, 0x9ac1, 0x9b81, 0x5b40, 0x9901, 0x59c0, 0x5880, 0x9841,\n  0x8801, 0x48c0, 0x4980, 0x8941, 0x4b00, 0x8bc1, 0x8a81, 0x4a40,\n  0x4e00, 0x8ec1, 0x8f81, 0x4f40, 0x8d01, 0x4dc0, 0x4c80, 0x8c41,\n  0x4400, 0x84c1, 0x8581, 0x4540, 0x8701, 0x47c0, 0x4680, 0x8641,\n  0x8201, 0x42c0, 0x4380, 0x8341, 0x4100, 0x81c1, 0x8081, 0x4040\n]\n\nif (typeof Int32Array !== 'undefined') TABLE = new Int32Array(TABLE);\n\nconst crc16 = defineCrc('crc-16', function(buf, previous) {\n  if (!Buffer.isBuffer(buf)) buf = createBuffer(buf);\n\n  let crc = ~~previous;\n\n  for (let index = 0; index < buf.length; index++) {\n    const byte = buf[index];\n    crc = (TABLE[(crc ^ byte) & 0xff] ^ (crc >> 8)) & 0xffff;\n  }\n\n  return crc;\n});\n\nexport default crc16;\n","import { Buffer } from 'buffer';\nimport createBuffer from './create_buffer';\nimport defineCrc from './define_crc';\n\n// Generated by `./pycrc.py --algorithm=table-driven --model=ccitt --generate=c`\n// prettier-ignore\nlet TABLE = [\n  0x0000, 0x1021, 0x2042, 0x3063, 0x4084, 0x50a5, 0x60c6, 0x70e7,\n  0x8108, 0x9129, 0xa14a, 0xb16b, 0xc18c, 0xd1ad, 0xe1ce, 0xf1ef,\n  0x1231, 0x0210, 0x3273, 0x2252, 0x52b5, 0x4294, 0x72f7, 0x62d6,\n  0x9339, 0x8318, 0xb37b, 0xa35a, 0xd3bd, 0xc39c, 0xf3ff, 0xe3de,\n  0x2462, 0x3443, 0x0420, 0x1401, 0x64e6, 0x74c7, 0x44a4, 0x5485,\n  0xa56a, 0xb54b, 0x8528, 0x9509, 0xe5ee, 0xf5cf, 0xc5ac, 0xd58d,\n  0x3653, 0x2672, 0x1611, 0x0630, 0x76d7, 0x66f6, 0x5695, 0x46b4,\n  0xb75b, 0xa77a, 0x9719, 0x8738, 0xf7df, 0xe7fe, 0xd79d, 0xc7bc,\n  0x48c4, 0x58e5, 0x6886, 0x78a7, 0x0840, 0x1861, 0x2802, 0x3823,\n  0xc9cc, 0xd9ed, 0xe98e, 0xf9af, 0x8948, 0x9969, 0xa90a, 0xb92b,\n  0x5af5, 0x4ad4, 0x7ab7, 0x6a96, 0x1a71, 0x0a50, 0x3a33, 0x2a12,\n  0xdbfd, 0xcbdc, 0xfbbf, 0xeb9e, 0x9b79, 0x8b58, 0xbb3b, 0xab1a,\n  0x6ca6, 0x7c87, 0x4ce4, 0x5cc5, 0x2c22, 0x3c03, 0x0c60, 0x1c41,\n  0xedae, 0xfd8f, 0xcdec, 0xddcd, 0xad2a, 0xbd0b, 0x8d68, 0x9d49,\n  0x7e97, 0x6eb6, 0x5ed5, 0x4ef4, 0x3e13, 0x2e32, 0x1e51, 0x0e70,\n  0xff9f, 0xefbe, 0xdfdd, 0xcffc, 0xbf1b, 0xaf3a, 0x9f59, 0x8f78,\n  0x9188, 0x81a9, 0xb1ca, 0xa1eb, 0xd10c, 0xc12d, 0xf14e, 0xe16f,\n  0x1080, 0x00a1, 0x30c2, 0x20e3, 0x5004, 0x4025, 0x7046, 0x6067,\n  0x83b9, 0x9398, 0xa3fb, 0xb3da, 0xc33d, 0xd31c, 0xe37f, 0xf35e,\n  0x02b1, 0x1290, 0x22f3, 0x32d2, 0x4235, 0x5214, 0x6277, 0x7256,\n  0xb5ea, 0xa5cb, 0x95a8, 0x8589, 0xf56e, 0xe54f, 0xd52c, 0xc50d,\n  0x34e2, 0x24c3, 0x14a0, 0x0481, 0x7466, 0x6447, 0x5424, 0x4405,\n  0xa7db, 0xb7fa, 0x8799, 0x97b8, 0xe75f, 0xf77e, 0xc71d, 0xd73c,\n  0x26d3, 0x36f2, 0x0691, 0x16b0, 0x6657, 0x7676, 0x4615, 0x5634,\n  0xd94c, 0xc96d, 0xf90e, 0xe92f, 0x99c8, 0x89e9, 0xb98a, 0xa9ab,\n  0x5844, 0x4865, 0x7806, 0x6827, 0x18c0, 0x08e1, 0x3882, 0x28a3,\n  0xcb7d, 0xdb5c, 0xeb3f, 0xfb1e, 0x8bf9, 0x9bd8, 0xabbb, 0xbb9a,\n  0x4a75, 0x5a54, 0x6a37, 0x7a16, 0x0af1, 0x1ad0, 0x2ab3, 0x3a92,\n  0xfd2e, 0xed0f, 0xdd6c, 0xcd4d, 0xbdaa, 0xad8b, 0x9de8, 0x8dc9,\n  0x7c26, 0x6c07, 0x5c64, 0x4c45, 0x3ca2, 0x2c83, 0x1ce0, 0x0cc1,\n  0xef1f, 0xff3e, 0xcf5d, 0xdf7c, 0xaf9b, 0xbfba, 0x8fd9, 0x9ff8,\n  0x6e17, 0x7e36, 0x4e55, 0x5e74, 0x2e93, 0x3eb2, 0x0ed1, 0x1ef0\n];\n\nif (typeof Int32Array !== 'undefined') TABLE = new Int32Array(TABLE);\n\nconst crc16ccitt = defineCrc('ccitt', function(buf, previous) {\n  if (!Buffer.isBuffer(buf)) buf = createBuffer(buf);\n\n  let crc = typeof previous !== 'undefined' ? ~~previous : 0xffff;\n\n  for (let index = 0; index < buf.length; index++) {\n    const byte = buf[index];\n    crc = (TABLE[((crc >> 8) ^ byte) & 0xff] ^ (crc << 8)) & 0xffff;\n  }\n\n  return crc;\n});\n\nexport default crc16ccitt;\n","import { Buffer } from 'buffer';\nimport createBuffer from './create_buffer';\nimport defineCrc from './define_crc';\n\n// Generated by `./pycrc.py --algorithm=table-driven --model=crc-16-modbus --generate=c`\n// prettier-ignore\nlet TABLE = [\n  0x0000, 0xc0c1, 0xc181, 0x0140, 0xc301, 0x03c0, 0x0280, 0xc241,\n  0xc601, 0x06c0, 0x0780, 0xc741, 0x0500, 0xc5c1, 0xc481, 0x0440,\n  0xcc01, 0x0cc0, 0x0d80, 0xcd41, 0x0f00, 0xcfc1, 0xce81, 0x0e40,\n  0x0a00, 0xcac1, 0xcb81, 0x0b40, 0xc901, 0x09c0, 0x0880, 0xc841,\n  0xd801, 0x18c0, 0x1980, 0xd941, 0x1b00, 0xdbc1, 0xda81, 0x1a40,\n  0x1e00, 0xdec1, 0xdf81, 0x1f40, 0xdd01, 0x1dc0, 0x1c80, 0xdc41,\n  0x1400, 0xd4c1, 0xd581, 0x1540, 0xd701, 0x17c0, 0x1680, 0xd641,\n  0xd201, 0x12c0, 0x1380, 0xd341, 0x1100, 0xd1c1, 0xd081, 0x1040,\n  0xf001, 0x30c0, 0x3180, 0xf141, 0x3300, 0xf3c1, 0xf281, 0x3240,\n  0x3600, 0xf6c1, 0xf781, 0x3740, 0xf501, 0x35c0, 0x3480, 0xf441,\n  0x3c00, 0xfcc1, 0xfd81, 0x3d40, 0xff01, 0x3fc0, 0x3e80, 0xfe41,\n  0xfa01, 0x3ac0, 0x3b80, 0xfb41, 0x3900, 0xf9c1, 0xf881, 0x3840,\n  0x2800, 0xe8c1, 0xe981, 0x2940, 0xeb01, 0x2bc0, 0x2a80, 0xea41,\n  0xee01, 0x2ec0, 0x2f80, 0xef41, 0x2d00, 0xedc1, 0xec81, 0x2c40,\n  0xe401, 0x24c0, 0x2580, 0xe541, 0x2700, 0xe7c1, 0xe681, 0x2640,\n  0x2200, 0xe2c1, 0xe381, 0x2340, 0xe101, 0x21c0, 0x2080, 0xe041,\n  0xa001, 0x60c0, 0x6180, 0xa141, 0x6300, 0xa3c1, 0xa281, 0x6240,\n  0x6600, 0xa6c1, 0xa781, 0x6740, 0xa501, 0x65c0, 0x6480, 0xa441,\n  0x6c00, 0xacc1, 0xad81, 0x6d40, 0xaf01, 0x6fc0, 0x6e80, 0xae41,\n  0xaa01, 0x6ac0, 0x6b80, 0xab41, 0x6900, 0xa9c1, 0xa881, 0x6840,\n  0x7800, 0xb8c1, 0xb981, 0x7940, 0xbb01, 0x7bc0, 0x7a80, 0xba41,\n  0xbe01, 0x7ec0, 0x7f80, 0xbf41, 0x7d00, 0xbdc1, 0xbc81, 0x7c40,\n  0xb401, 0x74c0, 0x7580, 0xb541, 0x7700, 0xb7c1, 0xb681, 0x7640,\n  0x7200, 0xb2c1, 0xb381, 0x7340, 0xb101, 0x71c0, 0x7080, 0xb041,\n  0x5000, 0x90c1, 0x9181, 0x5140, 0x9301, 0x53c0, 0x5280, 0x9241,\n  0x9601, 0x56c0, 0x5780, 0x9741, 0x5500, 0x95c1, 0x9481, 0x5440,\n  0x9c01, 0x5cc0, 0x5d80, 0x9d41, 0x5f00, 0x9fc1, 0x9e81, 0x5e40,\n  0x5a00, 0x9ac1, 0x9b81, 0x5b40, 0x9901, 0x59c0, 0x5880, 0x9841,\n  0x8801, 0x48c0, 0x4980, 0x8941, 0x4b00, 0x8bc1, 0x8a81, 0x4a40,\n  0x4e00, 0x8ec1, 0x8f81, 0x4f40, 0x8d01, 0x4dc0, 0x4c80, 0x8c41,\n  0x4400, 0x84c1, 0x8581, 0x4540, 0x8701, 0x47c0, 0x4680, 0x8641,\n  0x8201, 0x42c0, 0x4380, 0x8341, 0x4100, 0x81c1, 0x8081, 0x4040\n]\n\nif (typeof Int32Array !== 'undefined') TABLE = new Int32Array(TABLE);\n\nconst crc16modbus = defineCrc('crc-16-modbus', function(buf, previous) {\n  if (!Buffer.isBuffer(buf)) buf = createBuffer(buf);\n\n  let crc = typeof previous !== 'undefined' ? ~~previous : 0xffff;\n\n  for (let index = 0; index < buf.length; index++) {\n    const byte = buf[index];\n    crc = (TABLE[(crc ^ byte) & 0xff] ^ (crc >> 8)) & 0xffff;\n  }\n\n  return crc;\n});\n\nexport default crc16modbus;\n","import { Buffer } from 'buffer';\nimport createBuffer from './create_buffer';\nimport defineCrc from './define_crc';\n\nconst crc16xmodem = defineCrc('xmodem', function(buf, previous) {\n  if (!Buffer.isBuffer(buf)) buf = createBuffer(buf);\n\n  let crc = typeof previous !== 'undefined' ? ~~previous : 0x0;\n\n  for (let index = 0; index < buf.length; index++) {\n    const byte = buf[index];\n    let code = (crc >>> 8) & 0xff;\n\n    code ^= byte & 0xff;\n    code ^= code >>> 4;\n    crc = (crc << 8) & 0xffff;\n    crc ^= code;\n    code = (code << 5) & 0xffff;\n    crc ^= code;\n    code = (code << 7) & 0xffff;\n    crc ^= code;\n  }\n\n  return crc;\n});\n\nexport default crc16xmodem;\n","import { Buffer } from 'buffer';\nimport createBuffer from './create_buffer';\nimport defineCrc from './define_crc';\n\n// Generated by `./pycrc.py --algorithm=table-driven --model=kermit --generate=c`\n// prettier-ignore\nlet TABLE = [\n  0x0000, 0x1189, 0x2312, 0x329b, 0x4624, 0x57ad, 0x6536, 0x74bf,\n  0x8c48, 0x9dc1, 0xaf5a, 0xbed3, 0xca6c, 0xdbe5, 0xe97e, 0xf8f7,\n  0x1081, 0x0108, 0x3393, 0x221a, 0x56a5, 0x472c, 0x75b7, 0x643e,\n  0x9cc9, 0x8d40, 0xbfdb, 0xae52, 0xdaed, 0xcb64, 0xf9ff, 0xe876,\n  0x2102, 0x308b, 0x0210, 0x1399, 0x6726, 0x76af, 0x4434, 0x55bd,\n  0xad4a, 0xbcc3, 0x8e58, 0x9fd1, 0xeb6e, 0xfae7, 0xc87c, 0xd9f5,\n  0x3183, 0x200a, 0x1291, 0x0318, 0x77a7, 0x662e, 0x54b5, 0x453c,\n  0xbdcb, 0xac42, 0x9ed9, 0x8f50, 0xfbef, 0xea66, 0xd8fd, 0xc974,\n  0x4204, 0x538d, 0x6116, 0x709f, 0x0420, 0x15a9, 0x2732, 0x36bb,\n  0xce4c, 0xdfc5, 0xed5e, 0xfcd7, 0x8868, 0x99e1, 0xab7a, 0xbaf3,\n  0x5285, 0x430c, 0x7197, 0x601e, 0x14a1, 0x0528, 0x37b3, 0x263a,\n  0xdecd, 0xcf44, 0xfddf, 0xec56, 0x98e9, 0x8960, 0xbbfb, 0xaa72,\n  0x6306, 0x728f, 0x4014, 0x519d, 0x2522, 0x34ab, 0x0630, 0x17b9,\n  0xef4e, 0xfec7, 0xcc5c, 0xddd5, 0xa96a, 0xb8e3, 0x8a78, 0x9bf1,\n  0x7387, 0x620e, 0x5095, 0x411c, 0x35a3, 0x242a, 0x16b1, 0x0738,\n  0xffcf, 0xee46, 0xdcdd, 0xcd54, 0xb9eb, 0xa862, 0x9af9, 0x8b70,\n  0x8408, 0x9581, 0xa71a, 0xb693, 0xc22c, 0xd3a5, 0xe13e, 0xf0b7,\n  0x0840, 0x19c9, 0x2b52, 0x3adb, 0x4e64, 0x5fed, 0x6d76, 0x7cff,\n  0x9489, 0x8500, 0xb79b, 0xa612, 0xd2ad, 0xc324, 0xf1bf, 0xe036,\n  0x18c1, 0x0948, 0x3bd3, 0x2a5a, 0x5ee5, 0x4f6c, 0x7df7, 0x6c7e,\n  0xa50a, 0xb483, 0x8618, 0x9791, 0xe32e, 0xf2a7, 0xc03c, 0xd1b5,\n  0x2942, 0x38cb, 0x0a50, 0x1bd9, 0x6f66, 0x7eef, 0x4c74, 0x5dfd,\n  0xb58b, 0xa402, 0x9699, 0x8710, 0xf3af, 0xe226, 0xd0bd, 0xc134,\n  0x39c3, 0x284a, 0x1ad1, 0x0b58, 0x7fe7, 0x6e6e, 0x5cf5, 0x4d7c,\n  0xc60c, 0xd785, 0xe51e, 0xf497, 0x8028, 0x91a1, 0xa33a, 0xb2b3,\n  0x4a44, 0x5bcd, 0x6956, 0x78df, 0x0c60, 0x1de9, 0x2f72, 0x3efb,\n  0xd68d, 0xc704, 0xf59f, 0xe416, 0x90a9, 0x8120, 0xb3bb, 0xa232,\n  0x5ac5, 0x4b4c, 0x79d7, 0x685e, 0x1ce1, 0x0d68, 0x3ff3, 0x2e7a,\n  0xe70e, 0xf687, 0xc41c, 0xd595, 0xa12a, 0xb0a3, 0x8238, 0x93b1,\n  0x6b46, 0x7acf, 0x4854, 0x59dd, 0x2d62, 0x3ceb, 0x0e70, 0x1ff9,\n  0xf78f, 0xe606, 0xd49d, 0xc514, 0xb1ab, 0xa022, 0x92b9, 0x8330,\n  0x7bc7, 0x6a4e, 0x58d5, 0x495c, 0x3de3, 0x2c6a, 0x1ef1, 0x0f78\n];\n\nif (typeof Int32Array !== 'undefined') TABLE = new Int32Array(TABLE);\n\nconst crc16kermit = defineCrc('kermit', function(buf, previous) {\n  if (!Buffer.isBuffer(buf)) buf = createBuffer(buf);\n\n  let crc = typeof previous !== 'undefined' ? ~~previous : 0x0000;\n\n  for (let index = 0; index < buf.length; index++) {\n    const byte = buf[index];\n    crc = (TABLE[(crc ^ byte) & 0xff] ^ (crc >> 8)) & 0xffff;\n  }\n\n  return crc;\n});\n\nexport default crc16kermit;\n","import { Buffer } from 'buffer';\nimport createBuffer from './create_buffer';\nimport defineCrc from './define_crc';\n\n// Generated by `./pycrc.py --algorithm=table-drive --model=crc-24 --generate=c`\n// prettier-ignore\nlet TABLE = [\n  0x000000, 0x864cfb, 0x8ad50d, 0x0c99f6, 0x93e6e1, 0x15aa1a, 0x1933ec, 0x9f7f17,\n  0xa18139, 0x27cdc2, 0x2b5434, 0xad18cf, 0x3267d8, 0xb42b23, 0xb8b2d5, 0x3efe2e,\n  0xc54e89, 0x430272, 0x4f9b84, 0xc9d77f, 0x56a868, 0xd0e493, 0xdc7d65, 0x5a319e,\n  0x64cfb0, 0xe2834b, 0xee1abd, 0x685646, 0xf72951, 0x7165aa, 0x7dfc5c, 0xfbb0a7,\n  0x0cd1e9, 0x8a9d12, 0x8604e4, 0x00481f, 0x9f3708, 0x197bf3, 0x15e205, 0x93aefe,\n  0xad50d0, 0x2b1c2b, 0x2785dd, 0xa1c926, 0x3eb631, 0xb8faca, 0xb4633c, 0x322fc7,\n  0xc99f60, 0x4fd39b, 0x434a6d, 0xc50696, 0x5a7981, 0xdc357a, 0xd0ac8c, 0x56e077,\n  0x681e59, 0xee52a2, 0xe2cb54, 0x6487af, 0xfbf8b8, 0x7db443, 0x712db5, 0xf7614e,\n  0x19a3d2, 0x9fef29, 0x9376df, 0x153a24, 0x8a4533, 0x0c09c8, 0x00903e, 0x86dcc5,\n  0xb822eb, 0x3e6e10, 0x32f7e6, 0xb4bb1d, 0x2bc40a, 0xad88f1, 0xa11107, 0x275dfc,\n  0xdced5b, 0x5aa1a0, 0x563856, 0xd074ad, 0x4f0bba, 0xc94741, 0xc5deb7, 0x43924c,\n  0x7d6c62, 0xfb2099, 0xf7b96f, 0x71f594, 0xee8a83, 0x68c678, 0x645f8e, 0xe21375,\n  0x15723b, 0x933ec0, 0x9fa736, 0x19ebcd, 0x8694da, 0x00d821, 0x0c41d7, 0x8a0d2c,\n  0xb4f302, 0x32bff9, 0x3e260f, 0xb86af4, 0x2715e3, 0xa15918, 0xadc0ee, 0x2b8c15,\n  0xd03cb2, 0x567049, 0x5ae9bf, 0xdca544, 0x43da53, 0xc596a8, 0xc90f5e, 0x4f43a5,\n  0x71bd8b, 0xf7f170, 0xfb6886, 0x7d247d, 0xe25b6a, 0x641791, 0x688e67, 0xeec29c,\n  0x3347a4, 0xb50b5f, 0xb992a9, 0x3fde52, 0xa0a145, 0x26edbe, 0x2a7448, 0xac38b3,\n  0x92c69d, 0x148a66, 0x181390, 0x9e5f6b, 0x01207c, 0x876c87, 0x8bf571, 0x0db98a,\n  0xf6092d, 0x7045d6, 0x7cdc20, 0xfa90db, 0x65efcc, 0xe3a337, 0xef3ac1, 0x69763a,\n  0x578814, 0xd1c4ef, 0xdd5d19, 0x5b11e2, 0xc46ef5, 0x42220e, 0x4ebbf8, 0xc8f703,\n  0x3f964d, 0xb9dab6, 0xb54340, 0x330fbb, 0xac70ac, 0x2a3c57, 0x26a5a1, 0xa0e95a,\n  0x9e1774, 0x185b8f, 0x14c279, 0x928e82, 0x0df195, 0x8bbd6e, 0x872498, 0x016863,\n  0xfad8c4, 0x7c943f, 0x700dc9, 0xf64132, 0x693e25, 0xef72de, 0xe3eb28, 0x65a7d3,\n  0x5b59fd, 0xdd1506, 0xd18cf0, 0x57c00b, 0xc8bf1c, 0x4ef3e7, 0x426a11, 0xc426ea,\n  0x2ae476, 0xaca88d, 0xa0317b, 0x267d80, 0xb90297, 0x3f4e6c, 0x33d79a, 0xb59b61,\n  0x8b654f, 0x0d29b4, 0x01b042, 0x87fcb9, 0x1883ae, 0x9ecf55, 0x9256a3, 0x141a58,\n  0xefaaff, 0x69e604, 0x657ff2, 0xe33309, 0x7c4c1e, 0xfa00e5, 0xf69913, 0x70d5e8,\n  0x4e2bc6, 0xc8673d, 0xc4fecb, 0x42b230, 0xddcd27, 0x5b81dc, 0x57182a, 0xd154d1,\n  0x26359f, 0xa07964, 0xace092, 0x2aac69, 0xb5d37e, 0x339f85, 0x3f0673, 0xb94a88,\n  0x87b4a6, 0x01f85d, 0x0d61ab, 0x8b2d50, 0x145247, 0x921ebc, 0x9e874a, 0x18cbb1,\n  0xe37b16, 0x6537ed, 0x69ae1b, 0xefe2e0, 0x709df7, 0xf6d10c, 0xfa48fa, 0x7c0401,\n  0x42fa2f, 0xc4b6d4, 0xc82f22, 0x4e63d9, 0xd11cce, 0x575035, 0x5bc9c3, 0xdd8538\n]\n\nif (typeof Int32Array !== 'undefined') TABLE = new Int32Array(TABLE);\n\nconst crc24 = defineCrc('crc-24', function(buf, previous) {\n  if (!Buffer.isBuffer(buf)) buf = createBuffer(buf);\n\n  let crc = typeof previous !== 'undefined' ? ~~previous : 0xb704ce;\n\n  for (let index = 0; index < buf.length; index++) {\n    const byte = buf[index];\n    crc = (TABLE[((crc >> 16) ^ byte) & 0xff] ^ (crc << 8)) & 0xffffff;\n  }\n\n  return crc;\n});\n\nexport default crc24;\n","import { Buffer } from 'buffer';\nimport createBuffer from './create_buffer';\nimport defineCrc from './define_crc';\n\n// Generated by `./pycrc.py --algorithm=table-driven --model=crc-32 --generate=c`\n// prettier-ignore\nlet TABLE = [\n  0x00000000, 0x77073096, 0xee0e612c, 0x990951ba,\n  0x076dc419, 0x706af48f, 0xe963a535, 0x9e6495a3,\n  0x0edb8832, 0x79dcb8a4, 0xe0d5e91e, 0x97d2d988,\n  0x09b64c2b, 0x7eb17cbd, 0xe7b82d07, 0x90bf1d91,\n  0x1db71064, 0x6ab020f2, 0xf3b97148, 0x84be41de,\n  0x1adad47d, 0x6ddde4eb, 0xf4d4b551, 0x83d385c7,\n  0x136c9856, 0x646ba8c0, 0xfd62f97a, 0x8a65c9ec,\n  0x14015c4f, 0x63066cd9, 0xfa0f3d63, 0x8d080df5,\n  0x3b6e20c8, 0x4c69105e, 0xd56041e4, 0xa2677172,\n  0x3c03e4d1, 0x4b04d447, 0xd20d85fd, 0xa50ab56b,\n  0x35b5a8fa, 0x42b2986c, 0xdbbbc9d6, 0xacbcf940,\n  0x32d86ce3, 0x45df5c75, 0xdcd60dcf, 0xabd13d59,\n  0x26d930ac, 0x51de003a, 0xc8d75180, 0xbfd06116,\n  0x21b4f4b5, 0x56b3c423, 0xcfba9599, 0xb8bda50f,\n  0x2802b89e, 0x5f058808, 0xc60cd9b2, 0xb10be924,\n  0x2f6f7c87, 0x58684c11, 0xc1611dab, 0xb6662d3d,\n  0x76dc4190, 0x01db7106, 0x98d220bc, 0xefd5102a,\n  0x71b18589, 0x06b6b51f, 0x9fbfe4a5, 0xe8b8d433,\n  0x7807c9a2, 0x0f00f934, 0x9609a88e, 0xe10e9818,\n  0x7f6a0dbb, 0x086d3d2d, 0x91646c97, 0xe6635c01,\n  0x6b6b51f4, 0x1c6c6162, 0x856530d8, 0xf262004e,\n  0x6c0695ed, 0x1b01a57b, 0x8208f4c1, 0xf50fc457,\n  0x65b0d9c6, 0x12b7e950, 0x8bbeb8ea, 0xfcb9887c,\n  0x62dd1ddf, 0x15da2d49, 0x8cd37cf3, 0xfbd44c65,\n  0x4db26158, 0x3ab551ce, 0xa3bc0074, 0xd4bb30e2,\n  0x4adfa541, 0x3dd895d7, 0xa4d1c46d, 0xd3d6f4fb,\n  0x4369e96a, 0x346ed9fc, 0xad678846, 0xda60b8d0,\n  0x44042d73, 0x33031de5, 0xaa0a4c5f, 0xdd0d7cc9,\n  0x5005713c, 0x270241aa, 0xbe0b1010, 0xc90c2086,\n  0x5768b525, 0x206f85b3, 0xb966d409, 0xce61e49f,\n  0x5edef90e, 0x29d9c998, 0xb0d09822, 0xc7d7a8b4,\n  0x59b33d17, 0x2eb40d81, 0xb7bd5c3b, 0xc0ba6cad,\n  0xedb88320, 0x9abfb3b6, 0x03b6e20c, 0x74b1d29a,\n  0xead54739, 0x9dd277af, 0x04db2615, 0x73dc1683,\n  0xe3630b12, 0x94643b84, 0x0d6d6a3e, 0x7a6a5aa8,\n  0xe40ecf0b, 0x9309ff9d, 0x0a00ae27, 0x7d079eb1,\n  0xf00f9344, 0x8708a3d2, 0x1e01f268, 0x6906c2fe,\n  0xf762575d, 0x806567cb, 0x196c3671, 0x6e6b06e7,\n  0xfed41b76, 0x89d32be0, 0x10da7a5a, 0x67dd4acc,\n  0xf9b9df6f, 0x8ebeeff9, 0x17b7be43, 0x60b08ed5,\n  0xd6d6a3e8, 0xa1d1937e, 0x38d8c2c4, 0x4fdff252,\n  0xd1bb67f1, 0xa6bc5767, 0x3fb506dd, 0x48b2364b,\n  0xd80d2bda, 0xaf0a1b4c, 0x36034af6, 0x41047a60,\n  0xdf60efc3, 0xa867df55, 0x316e8eef, 0x4669be79,\n  0xcb61b38c, 0xbc66831a, 0x256fd2a0, 0x5268e236,\n  0xcc0c7795, 0xbb0b4703, 0x220216b9, 0x5505262f,\n  0xc5ba3bbe, 0xb2bd0b28, 0x2bb45a92, 0x5cb36a04,\n  0xc2d7ffa7, 0xb5d0cf31, 0x2cd99e8b, 0x5bdeae1d,\n  0x9b64c2b0, 0xec63f226, 0x756aa39c, 0x026d930a,\n  0x9c0906a9, 0xeb0e363f, 0x72076785, 0x05005713,\n  0x95bf4a82, 0xe2b87a14, 0x7bb12bae, 0x0cb61b38,\n  0x92d28e9b, 0xe5d5be0d, 0x7cdcefb7, 0x0bdbdf21,\n  0x86d3d2d4, 0xf1d4e242, 0x68ddb3f8, 0x1fda836e,\n  0x81be16cd, 0xf6b9265b, 0x6fb077e1, 0x18b74777,\n  0x88085ae6, 0xff0f6a70, 0x66063bca, 0x11010b5c,\n  0x8f659eff, 0xf862ae69, 0x616bffd3, 0x166ccf45,\n  0xa00ae278, 0xd70dd2ee, 0x4e048354, 0x3903b3c2,\n  0xa7672661, 0xd06016f7, 0x4969474d, 0x3e6e77db,\n  0xaed16a4a, 0xd9d65adc, 0x40df0b66, 0x37d83bf0,\n  0xa9bcae53, 0xdebb9ec5, 0x47b2cf7f, 0x30b5ffe9,\n  0xbdbdf21c, 0xcabac28a, 0x53b39330, 0x24b4a3a6,\n  0xbad03605, 0xcdd70693, 0x54de5729, 0x23d967bf,\n  0xb3667a2e, 0xc4614ab8, 0x5d681b02, 0x2a6f2b94,\n  0xb40bbe37, 0xc30c8ea1, 0x5a05df1b, 0x2d02ef8d\n];\n\nif (typeof Int32Array !== 'undefined') TABLE = new Int32Array(TABLE);\n\nconst crc32 = defineCrc('crc-32', function(buf, previous) {\n  if (!Buffer.isBuffer(buf)) buf = createBuffer(buf);\n\n  let crc = previous === 0 ? 0 : ~~previous ^ -1;\n\n  for (let index = 0; index < buf.length; index++) {\n    const byte = buf[index];\n    crc = TABLE[(crc ^ byte) & 0xff] ^ (crc >>> 8);\n  }\n\n  return crc ^ -1;\n});\n\nexport default crc32;\n","import { Buffer } from 'buffer';\nimport createBuffer from './create_buffer';\nimport defineCrc from './define_crc';\n\n// Generated by `./pycrc.py --algorithm=table-driven --model=jam --generate=c`\n// prettier-ignore\nlet TABLE = [\n  0x00000000, 0x77073096, 0xee0e612c, 0x990951ba,\n  0x076dc419, 0x706af48f, 0xe963a535, 0x9e6495a3,\n  0x0edb8832, 0x79dcb8a4, 0xe0d5e91e, 0x97d2d988,\n  0x09b64c2b, 0x7eb17cbd, 0xe7b82d07, 0x90bf1d91,\n  0x1db71064, 0x6ab020f2, 0xf3b97148, 0x84be41de,\n  0x1adad47d, 0x6ddde4eb, 0xf4d4b551, 0x83d385c7,\n  0x136c9856, 0x646ba8c0, 0xfd62f97a, 0x8a65c9ec,\n  0x14015c4f, 0x63066cd9, 0xfa0f3d63, 0x8d080df5,\n  0x3b6e20c8, 0x4c69105e, 0xd56041e4, 0xa2677172,\n  0x3c03e4d1, 0x4b04d447, 0xd20d85fd, 0xa50ab56b,\n  0x35b5a8fa, 0x42b2986c, 0xdbbbc9d6, 0xacbcf940,\n  0x32d86ce3, 0x45df5c75, 0xdcd60dcf, 0xabd13d59,\n  0x26d930ac, 0x51de003a, 0xc8d75180, 0xbfd06116,\n  0x21b4f4b5, 0x56b3c423, 0xcfba9599, 0xb8bda50f,\n  0x2802b89e, 0x5f058808, 0xc60cd9b2, 0xb10be924,\n  0x2f6f7c87, 0x58684c11, 0xc1611dab, 0xb6662d3d,\n  0x76dc4190, 0x01db7106, 0x98d220bc, 0xefd5102a,\n  0x71b18589, 0x06b6b51f, 0x9fbfe4a5, 0xe8b8d433,\n  0x7807c9a2, 0x0f00f934, 0x9609a88e, 0xe10e9818,\n  0x7f6a0dbb, 0x086d3d2d, 0x91646c97, 0xe6635c01,\n  0x6b6b51f4, 0x1c6c6162, 0x856530d8, 0xf262004e,\n  0x6c0695ed, 0x1b01a57b, 0x8208f4c1, 0xf50fc457,\n  0x65b0d9c6, 0x12b7e950, 0x8bbeb8ea, 0xfcb9887c,\n  0x62dd1ddf, 0x15da2d49, 0x8cd37cf3, 0xfbd44c65,\n  0x4db26158, 0x3ab551ce, 0xa3bc0074, 0xd4bb30e2,\n  0x4adfa541, 0x3dd895d7, 0xa4d1c46d, 0xd3d6f4fb,\n  0x4369e96a, 0x346ed9fc, 0xad678846, 0xda60b8d0,\n  0x44042d73, 0x33031de5, 0xaa0a4c5f, 0xdd0d7cc9,\n  0x5005713c, 0x270241aa, 0xbe0b1010, 0xc90c2086,\n  0x5768b525, 0x206f85b3, 0xb966d409, 0xce61e49f,\n  0x5edef90e, 0x29d9c998, 0xb0d09822, 0xc7d7a8b4,\n  0x59b33d17, 0x2eb40d81, 0xb7bd5c3b, 0xc0ba6cad,\n  0xedb88320, 0x9abfb3b6, 0x03b6e20c, 0x74b1d29a,\n  0xead54739, 0x9dd277af, 0x04db2615, 0x73dc1683,\n  0xe3630b12, 0x94643b84, 0x0d6d6a3e, 0x7a6a5aa8,\n  0xe40ecf0b, 0x9309ff9d, 0x0a00ae27, 0x7d079eb1,\n  0xf00f9344, 0x8708a3d2, 0x1e01f268, 0x6906c2fe,\n  0xf762575d, 0x806567cb, 0x196c3671, 0x6e6b06e7,\n  0xfed41b76, 0x89d32be0, 0x10da7a5a, 0x67dd4acc,\n  0xf9b9df6f, 0x8ebeeff9, 0x17b7be43, 0x60b08ed5,\n  0xd6d6a3e8, 0xa1d1937e, 0x38d8c2c4, 0x4fdff252,\n  0xd1bb67f1, 0xa6bc5767, 0x3fb506dd, 0x48b2364b,\n  0xd80d2bda, 0xaf0a1b4c, 0x36034af6, 0x41047a60,\n  0xdf60efc3, 0xa867df55, 0x316e8eef, 0x4669be79,\n  0xcb61b38c, 0xbc66831a, 0x256fd2a0, 0x5268e236,\n  0xcc0c7795, 0xbb0b4703, 0x220216b9, 0x5505262f,\n  0xc5ba3bbe, 0xb2bd0b28, 0x2bb45a92, 0x5cb36a04,\n  0xc2d7ffa7, 0xb5d0cf31, 0x2cd99e8b, 0x5bdeae1d,\n  0x9b64c2b0, 0xec63f226, 0x756aa39c, 0x026d930a,\n  0x9c0906a9, 0xeb0e363f, 0x72076785, 0x05005713,\n  0x95bf4a82, 0xe2b87a14, 0x7bb12bae, 0x0cb61b38,\n  0x92d28e9b, 0xe5d5be0d, 0x7cdcefb7, 0x0bdbdf21,\n  0x86d3d2d4, 0xf1d4e242, 0x68ddb3f8, 0x1fda836e,\n  0x81be16cd, 0xf6b9265b, 0x6fb077e1, 0x18b74777,\n  0x88085ae6, 0xff0f6a70, 0x66063bca, 0x11010b5c,\n  0x8f659eff, 0xf862ae69, 0x616bffd3, 0x166ccf45,\n  0xa00ae278, 0xd70dd2ee, 0x4e048354, 0x3903b3c2,\n  0xa7672661, 0xd06016f7, 0x4969474d, 0x3e6e77db,\n  0xaed16a4a, 0xd9d65adc, 0x40df0b66, 0x37d83bf0,\n  0xa9bcae53, 0xdebb9ec5, 0x47b2cf7f, 0x30b5ffe9,\n  0xbdbdf21c, 0xcabac28a, 0x53b39330, 0x24b4a3a6,\n  0xbad03605, 0xcdd70693, 0x54de5729, 0x23d967bf,\n  0xb3667a2e, 0xc4614ab8, 0x5d681b02, 0x2a6f2b94,\n  0xb40bbe37, 0xc30c8ea1, 0x5a05df1b, 0x2d02ef8d\n];\n\nif (typeof Int32Array !== 'undefined') TABLE = new Int32Array(TABLE);\n\nconst crcjam = defineCrc('jam', function(buf, previous = -1) {\n  if (!Buffer.isBuffer(buf)) buf = createBuffer(buf);\n\n  let crc = previous === 0 ? 0 : ~~previous;\n\n  for (let index = 0; index < buf.length; index++) {\n    const byte = buf[index];\n    crc = TABLE[(crc ^ byte) & 0xff] ^ (crc >>> 8);\n  }\n\n  return crc;\n});\n\nexport default crcjam;\n","import crc1 from './crc1';\nimport crc8 from './crc8';\nimport crc81wire from './crc81wire';\nimport crc16 from './crc16';\nimport crc16ccitt from './crc16ccitt';\nimport crc16modbus from './crc16modbus';\nimport crc16xmodem from './crc16xmodem';\nimport crc16kermit from './crc16kermit';\nimport crc24 from './crc24';\nimport crc32 from './crc32';\nimport crcjam from './crcjam';\n\nexport { crc1 };\nexport { crc8 };\nexport { crc81wire };\nexport { crc16 };\nexport { crc16ccitt };\nexport { crc16modbus };\nexport { crc16xmodem };\nexport { crc16kermit };\nexport { crc24 };\nexport { crc32 };\nexport { crcjam };\n\nexport default {\n  crc1,\n  crc8,\n  crc81wire,\n  crc16,\n  crc16ccitt,\n  crc16modbus,\n  crc16xmodem,\n  crc16kermit,\n  crc24,\n  crc32,\n  crcjam,\n};\n","import crcUtil from 'crc';       // usage: crcUtil.crc32(valStr, accumCrc) ... below\r\n//import crc32 from 'crc/crc32'; // usage: crc32(valStr, accumCrc)         ... below\r\n\r\n// NOTE: Would prefer 2nd import option (above)\r\n//       BECAUSE: It only imports the crc32 code (NOT bloating our bundle size)\r\n//       HOWEVER: It generates a \"SyntaxError: Unexpected token {\" in our jest test usage\r\n//       GOOGLE:  crc Jest encountered an unexpected token\r\n//       SUSPECT: NOT: This may be related to how my project config uses 'src/' as our import root\r\n//       SUSPECT: This is some babel 7 issue with jest\r\n//       FIX:     I punted for now.\r\n//                ONE \"last resort\" option would be to locally include code from crc pkg\r\n//                ... see journal.txt for details\r\n\r\n/**\r\n * Generate a crc value from the supplied parameters.\r\n *\r\n * @param {any} val - the value to include in the crc.  Supports:\r\n *  - any primitive type (string, number, boolean)\r\n *  - array of primitive types\r\n *  - any object with a toString() representative of the object state\r\n *  - undefined/null\r\n *  WARNING:\r\n *  - all other cases will generate a non-unique crc\r\n *\r\n * @param {number} [accumCrc] - an optional crc value, used when\r\n * accumulating additional items in your crc computation.\r\n *\r\n * @return {number} the generated crc value.\r\n */\r\nexport default function crc(val, accumCrc=0) {\r\n  // convert val to string\r\n  const valStr = '' + val;\r\n  // console.log(`xx val: ${val}, valStr: ${valStr}`);\r\n\r\n  return crcUtil.crc32(valStr, accumCrc);\r\n//return crc32(valStr, accumCrc);\r\n}\r\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","/**\n * Stores result from supportsCssVariables to avoid redundant processing to\n * detect CSS custom variable support.\n */\nvar supportsCssVariables_;\nfunction detectEdgePseudoVarBug(windowObj) {\n    // Detect versions of Edge with buggy var() support\n    // See: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/11495448/\n    var document = windowObj.document;\n    var node = document.createElement('div');\n    node.className = 'mdc-ripple-surface--test-edge-var-bug';\n    // Append to head instead of body because this script might be invoked in the\n    // head, in which case the body doesn't exist yet. The probe works either way.\n    document.head.appendChild(node);\n    // The bug exists if ::before style ends up propagating to the parent element.\n    // Additionally, getComputedStyle returns null in iframes with display: \"none\" in Firefox,\n    // but Firefox is known to support CSS custom properties correctly.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n    var computedStyle = windowObj.getComputedStyle(node);\n    var hasPseudoVarBug = computedStyle !== null && computedStyle.borderTopStyle === 'solid';\n    if (node.parentNode) {\n        node.parentNode.removeChild(node);\n    }\n    return hasPseudoVarBug;\n}\nexport function supportsCssVariables(windowObj, forceRefresh) {\n    if (forceRefresh === void 0) { forceRefresh = false; }\n    var CSS = windowObj.CSS;\n    var supportsCssVars = supportsCssVariables_;\n    if (typeof supportsCssVariables_ === 'boolean' && !forceRefresh) {\n        return supportsCssVariables_;\n    }\n    var supportsFunctionPresent = CSS && typeof CSS.supports === 'function';\n    if (!supportsFunctionPresent) {\n        return false;\n    }\n    var explicitlySupportsCssVars = CSS.supports('--css-vars', 'yes');\n    // See: https://bugs.webkit.org/show_bug.cgi?id=154669\n    // See: README section on Safari\n    var weAreFeatureDetectingSafari10plus = (CSS.supports('(--css-vars: yes)') &&\n        CSS.supports('color', '#00000000'));\n    if (explicitlySupportsCssVars || weAreFeatureDetectingSafari10plus) {\n        supportsCssVars = !detectEdgePseudoVarBug(windowObj);\n    }\n    else {\n        supportsCssVars = false;\n    }\n    if (!forceRefresh) {\n        supportsCssVariables_ = supportsCssVars;\n    }\n    return supportsCssVars;\n}\nexport function getNormalizedEventCoords(evt, pageOffset, clientRect) {\n    if (!evt) {\n        return { x: 0, y: 0 };\n    }\n    var x = pageOffset.x, y = pageOffset.y;\n    var documentX = x + clientRect.left;\n    var documentY = y + clientRect.top;\n    var normalizedX;\n    var normalizedY;\n    // Determine touch point relative to the ripple container.\n    if (evt.type === 'touchstart') {\n        var touchEvent = evt;\n        normalizedX = touchEvent.changedTouches[0].pageX - documentX;\n        normalizedY = touchEvent.changedTouches[0].pageY - documentY;\n    }\n    else {\n        var mouseEvent = evt;\n        normalizedX = mouseEvent.pageX - documentX;\n        normalizedY = mouseEvent.pageY - documentY;\n    }\n    return { x: normalizedX, y: normalizedY };\n}\n//# sourceMappingURL=util.js.map","import {bubble, listen} from 'svelte/internal';\n\nexport function forwardEventsBuilder(component, additionalEvents = []) {\n  const events = [\n    'focus', 'blur',\n    'fullscreenchange', 'fullscreenerror', 'scroll',\n    'cut', 'copy', 'paste',\n    'keydown', 'keypress', 'keyup',\n    'auxclick', 'click', 'contextmenu', 'dblclick', 'mousedown', 'mouseenter', 'mouseleave', 'mousemove', 'mouseover', 'mouseout', 'mouseup', 'pointerlockchange', 'pointerlockerror', 'select', 'wheel',\n    'drag', 'dragend', 'dragenter', 'dragstart', 'dragleave', 'dragover', 'drop',\n    'touchcancel', 'touchend', 'touchmove', 'touchstart',\n    'pointerover', 'pointerenter', 'pointerdown', 'pointermove', 'pointerup', 'pointercancel', 'pointerout', 'pointerleave', 'gotpointercapture', 'lostpointercapture',\n    ...additionalEvents\n  ];\n\n  function forward(e) {\n    bubble(component, e);\n  }\n\n  return node => {\n    const destructors = [];\n\n    for (let i = 0; i < events.length; i++) {\n      destructors.push(listen(node, events[i], forward));\n    }\n\n    return {\n      destroy: () => {\n        for (let i = 0; i < destructors.length; i++) {\n          destructors[i]();\n        }\n      }\n    }\n  };\n}\n","export function exclude(obj, keys) {\n  let names = Object.getOwnPropertyNames(obj);\n  const newObj = {};\n\n  for (let i = 0; i < names.length; i++) {\n    const name = names[i];\n    const cashIndex = name.indexOf('$');\n    if (cashIndex !== -1 && keys.indexOf(name.substring(0, cashIndex + 1)) !== -1) {\n      continue;\n    }\n    if (keys.indexOf(name) !== -1) {\n      continue;\n    }\n    newObj[name] = obj[name];\n  }\n\n  return newObj;\n}","export function useActions(node, actions) {\n  let objects = [];\n\n  if (actions) {\n    for (let i = 0; i < actions.length; i++) {\n      const isArray = Array.isArray(actions[i]);\n      const action = isArray ? actions[i][0] : actions[i];\n      if (isArray && actions[i].length > 1) {\n        objects.push(action(node, actions[i][1]));\n      } else {\n        objects.push(action(node));\n      }\n    }\n  }\n\n  return {\n    update(actions) {\n      if ((actions && actions.length || 0) != objects.length) {\n        throw new Error('You must not change the length of an actions array.');\n      }\n\n      if (actions) {\n        for (let i = 0; i < actions.length; i++) {\n          if (objects[i] && 'update' in objects[i]) {\n            const isArray = Array.isArray(actions[i]);\n            if (isArray && actions[i].length > 1) {\n              objects[i].update(actions[i][1]);\n            } else {\n              objects[i].update();\n            }\n          }\n        }\n      }\n    },\n\n    destroy() {\n      for (let i = 0; i < objects.length; i++) {\n        if (objects[i] && 'destroy' in objects[i]) {\n          objects[i].destroy();\n        }\n      }\n    }\n  }\n}","<span\n  use:useActions={use}\n  use:forwardEvents\n  class=\"\n    {className}\n    {context === 'button' ? 'mdc-button__label' : ''}\n    {context === 'fab' ? 'mdc-fab__label' : ''}\n    {context === 'chip' ? 'mdc-chip__text' : ''}\n    {context === 'tab' ? 'mdc-tab__text-label' : ''}\n    {context === 'image-list' ? 'mdc-image-list__label' : ''}\n    {context === 'snackbar' ? 'mdc-snackbar__label' : ''}\n  \"\n  {...((context === 'snackbar') ? {role: 'status', 'aria-live': 'polite'} : {})}\n  {...exclude($$props, ['use', 'class'])}\n><slot></slot></span>\n\n<script>\n  import {getContext} from 'svelte';\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from './forwardEvents.js';\n  import {exclude} from './exclude.js';\n  import {useActions} from './useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n\n  export let use = [];\n  let className = '';\n  export {className as class};\n\n  const context = getContext('SMUI:label:context');\n</script>\n","<a\n  use:useActions={use}\n  use:forwardEvents\n  {href}\n  {...exclude($$props, ['use', 'href'])}\n><slot></slot></a>\n\n<script>\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from './forwardEvents.js';\n  import {exclude} from './exclude.js';\n  import {useActions} from './useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n\n  export let use = [];\n  export let href = 'javascript:void(0);';\n</script>\n","<button\n  use:useActions={use}\n  use:forwardEvents\n  {...exclude($$props, ['use'])}\n><slot></slot></button>\n\n<script>\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from './forwardEvents.js';\n  import {exclude} from './exclude.js';\n  import {useActions} from './useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n\n  export let use = [];\n</script>\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\n * @license\n * Copyright 2016 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar MDCFoundation = /** @class */ (function () {\n    function MDCFoundation(adapter) {\n        if (adapter === void 0) { adapter = {}; }\n        this.adapter_ = adapter;\n    }\n    Object.defineProperty(MDCFoundation, \"cssClasses\", {\n        get: function () {\n            // Classes extending MDCFoundation should implement this method to return an object which exports every\n            // CSS class the foundation class needs as a property. e.g. {ACTIVE: 'mdc-component--active'}\n            return {};\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCFoundation, \"strings\", {\n        get: function () {\n            // Classes extending MDCFoundation should implement this method to return an object which exports all\n            // semantic strings as constants. e.g. {ARIA_ROLE: 'tablist'}\n            return {};\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCFoundation, \"numbers\", {\n        get: function () {\n            // Classes extending MDCFoundation should implement this method to return an object which exports all\n            // of its semantic numbers as constants. e.g. {ANIMATION_DELAY_MS: 350}\n            return {};\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCFoundation, \"defaultAdapter\", {\n        get: function () {\n            // Classes extending MDCFoundation may choose to implement this getter in order to provide a convenient\n            // way of viewing the necessary methods of an adapter. In the future, this could also be used for adapter\n            // validation.\n            return {};\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCFoundation.prototype.init = function () {\n        // Subclasses should override this method to perform initialization routines (registering events, etc.)\n    };\n    MDCFoundation.prototype.destroy = function () {\n        // Subclasses should override this method to perform de-initialization routines (de-registering events, etc.)\n    };\n    return MDCFoundation;\n}());\nexport { MDCFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n/**\n * Stores result from applyPassive to avoid redundant processing to detect\n * passive event listener support.\n */\nvar supportsPassive_;\n/**\n * Determine whether the current browser supports passive event listeners, and\n * if so, use them.\n */\nexport function applyPassive(globalObj, forceRefresh) {\n    if (globalObj === void 0) { globalObj = window; }\n    if (forceRefresh === void 0) { forceRefresh = false; }\n    if (supportsPassive_ === undefined || forceRefresh) {\n        var isSupported_1 = false;\n        try {\n            globalObj.document.addEventListener('test', function () { return undefined; }, {\n                get passive() {\n                    isSupported_1 = true;\n                    return isSupported_1;\n                },\n            });\n        }\n        catch (e) {\n        } // tslint:disable-line:no-empty cannot throw error due to tests. tslint also disables console.log.\n        supportsPassive_ = isSupported_1;\n    }\n    return supportsPassive_ ? { passive: true } : false;\n}\n//# sourceMappingURL=events.js.map","/**\n * @license\n * Copyright 2016 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCFoundation } from './foundation';\nvar MDCComponent = /** @class */ (function () {\n    function MDCComponent(root, foundation) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        this.root_ = root;\n        this.initialize.apply(this, tslib_1.__spread(args));\n        // Note that we initialize foundation here and not within the constructor's default param so that\n        // this.root_ is defined and can be used within the foundation class.\n        this.foundation_ = foundation === undefined ? this.getDefaultFoundation() : foundation;\n        this.foundation_.init();\n        this.initialSyncWithDOM();\n    }\n    MDCComponent.attachTo = function (root) {\n        // Subclasses which extend MDCBase should provide an attachTo() method that takes a root element and\n        // returns an instantiated component with its root set to that element. Also note that in the cases of\n        // subclasses, an explicit foundation class will not have to be passed in; it will simply be initialized\n        // from getDefaultFoundation().\n        return new MDCComponent(root, new MDCFoundation({}));\n    };\n    /* istanbul ignore next: method param only exists for typing purposes; it does not need to be unit tested */\n    MDCComponent.prototype.initialize = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n        // Subclasses can override this to do any additional setup work that would be considered part of a\n        // \"constructor\". Essentially, it is a hook into the parent constructor before the foundation is\n        // initialized. Any additional arguments besides root and foundation will be passed in here.\n    };\n    MDCComponent.prototype.getDefaultFoundation = function () {\n        // Subclasses must override this method to return a properly configured foundation class for the\n        // component.\n        throw new Error('Subclasses must override getDefaultFoundation to return a properly configured ' +\n            'foundation class');\n    };\n    MDCComponent.prototype.initialSyncWithDOM = function () {\n        // Subclasses should override this method if they need to perform work to synchronize with a host DOM\n        // object. An example of this would be a form control wrapper that needs to synchronize its internal state\n        // to some property or attribute of the host DOM. Please note: this is *not* the place to perform DOM\n        // reads/writes that would cause layout / paint, as this is called synchronously from within the constructor.\n    };\n    MDCComponent.prototype.destroy = function () {\n        // Subclasses may implement this method to release any resources / deregister any listeners they have\n        // attached. An example of this might be deregistering a resize event from the window object.\n        this.foundation_.destroy();\n    };\n    MDCComponent.prototype.listen = function (evtType, handler, options) {\n        this.root_.addEventListener(evtType, handler, options);\n    };\n    MDCComponent.prototype.unlisten = function (evtType, handler, options) {\n        this.root_.removeEventListener(evtType, handler, options);\n    };\n    /**\n     * Fires a cross-browser-compatible custom event from the component root of the given type, with the given data.\n     */\n    MDCComponent.prototype.emit = function (evtType, evtData, shouldBubble) {\n        if (shouldBubble === void 0) { shouldBubble = false; }\n        var evt;\n        if (typeof CustomEvent === 'function') {\n            evt = new CustomEvent(evtType, {\n                bubbles: shouldBubble,\n                detail: evtData,\n            });\n        }\n        else {\n            evt = document.createEvent('CustomEvent');\n            evt.initCustomEvent(evtType, shouldBubble, false, evtData);\n        }\n        this.root_.dispatchEvent(evt);\n    };\n    return MDCComponent;\n}());\nexport { MDCComponent };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCComponent;\n//# sourceMappingURL=component.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n/**\n * @fileoverview A \"ponyfill\" is a polyfill that doesn't modify the global prototype chain.\n * This makes ponyfills safer than traditional polyfills, especially for libraries like MDC.\n */\nexport function closest(element, selector) {\n    if (element.closest) {\n        return element.closest(selector);\n    }\n    var el = element;\n    while (el) {\n        if (matches(el, selector)) {\n            return el;\n        }\n        el = el.parentElement;\n    }\n    return null;\n}\nexport function matches(element, selector) {\n    var nativeMatches = element.matches\n        || element.webkitMatchesSelector\n        || element.msMatchesSelector;\n    return nativeMatches.call(element, selector);\n}\n//# sourceMappingURL=ponyfill.js.map","/**\n * @license\n * Copyright 2016 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nexport var cssClasses = {\n    // Ripple is a special case where the \"root\" component is really a \"mixin\" of sorts,\n    // given that it's an 'upgrade' to an existing component. That being said it is the root\n    // CSS class that all other CSS classes derive from.\n    BG_FOCUSED: 'mdc-ripple-upgraded--background-focused',\n    FG_ACTIVATION: 'mdc-ripple-upgraded--foreground-activation',\n    FG_DEACTIVATION: 'mdc-ripple-upgraded--foreground-deactivation',\n    ROOT: 'mdc-ripple-upgraded',\n    UNBOUNDED: 'mdc-ripple-upgraded--unbounded',\n};\nexport var strings = {\n    VAR_FG_SCALE: '--mdc-ripple-fg-scale',\n    VAR_FG_SIZE: '--mdc-ripple-fg-size',\n    VAR_FG_TRANSLATE_END: '--mdc-ripple-fg-translate-end',\n    VAR_FG_TRANSLATE_START: '--mdc-ripple-fg-translate-start',\n    VAR_LEFT: '--mdc-ripple-left',\n    VAR_TOP: '--mdc-ripple-top',\n};\nexport var numbers = {\n    DEACTIVATION_TIMEOUT_MS: 225,\n    FG_DEACTIVATION_MS: 150,\n    INITIAL_ORIGIN_SCALE: 0.6,\n    PADDING: 10,\n    TAP_DELAY_MS: 300,\n};\n//# sourceMappingURL=constants.js.map","/**\n * @license\n * Copyright 2016 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { cssClasses, numbers, strings } from './constants';\nimport { getNormalizedEventCoords } from './util';\n// Activation events registered on the root element of each instance for activation\nvar ACTIVATION_EVENT_TYPES = [\n    'touchstart', 'pointerdown', 'mousedown', 'keydown',\n];\n// Deactivation events registered on documentElement when a pointer-related down event occurs\nvar POINTER_DEACTIVATION_EVENT_TYPES = [\n    'touchend', 'pointerup', 'mouseup', 'contextmenu',\n];\n// simultaneous nested activations\nvar activatedTargets = [];\nvar MDCRippleFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCRippleFoundation, _super);\n    function MDCRippleFoundation(adapter) {\n        var _this = _super.call(this, tslib_1.__assign({}, MDCRippleFoundation.defaultAdapter, adapter)) || this;\n        _this.activationAnimationHasEnded_ = false;\n        _this.activationTimer_ = 0;\n        _this.fgDeactivationRemovalTimer_ = 0;\n        _this.fgScale_ = '0';\n        _this.frame_ = { width: 0, height: 0 };\n        _this.initialSize_ = 0;\n        _this.layoutFrame_ = 0;\n        _this.maxRadius_ = 0;\n        _this.unboundedCoords_ = { left: 0, top: 0 };\n        _this.activationState_ = _this.defaultActivationState_();\n        _this.activationTimerCallback_ = function () {\n            _this.activationAnimationHasEnded_ = true;\n            _this.runDeactivationUXLogicIfReady_();\n        };\n        _this.activateHandler_ = function (e) { return _this.activate_(e); };\n        _this.deactivateHandler_ = function () { return _this.deactivate_(); };\n        _this.focusHandler_ = function () { return _this.handleFocus(); };\n        _this.blurHandler_ = function () { return _this.handleBlur(); };\n        _this.resizeHandler_ = function () { return _this.layout(); };\n        return _this;\n    }\n    Object.defineProperty(MDCRippleFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCRippleFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCRippleFoundation, \"numbers\", {\n        get: function () {\n            return numbers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCRippleFoundation, \"defaultAdapter\", {\n        get: function () {\n            return {\n                addClass: function () { return undefined; },\n                browserSupportsCssVars: function () { return true; },\n                computeBoundingRect: function () { return ({ top: 0, right: 0, bottom: 0, left: 0, width: 0, height: 0 }); },\n                containsEventTarget: function () { return true; },\n                deregisterDocumentInteractionHandler: function () { return undefined; },\n                deregisterInteractionHandler: function () { return undefined; },\n                deregisterResizeHandler: function () { return undefined; },\n                getWindowPageOffset: function () { return ({ x: 0, y: 0 }); },\n                isSurfaceActive: function () { return true; },\n                isSurfaceDisabled: function () { return true; },\n                isUnbounded: function () { return true; },\n                registerDocumentInteractionHandler: function () { return undefined; },\n                registerInteractionHandler: function () { return undefined; },\n                registerResizeHandler: function () { return undefined; },\n                removeClass: function () { return undefined; },\n                updateCssVariable: function () { return undefined; },\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCRippleFoundation.prototype.init = function () {\n        var _this = this;\n        var supportsPressRipple = this.supportsPressRipple_();\n        this.registerRootHandlers_(supportsPressRipple);\n        if (supportsPressRipple) {\n            var _a = MDCRippleFoundation.cssClasses, ROOT_1 = _a.ROOT, UNBOUNDED_1 = _a.UNBOUNDED;\n            requestAnimationFrame(function () {\n                _this.adapter_.addClass(ROOT_1);\n                if (_this.adapter_.isUnbounded()) {\n                    _this.adapter_.addClass(UNBOUNDED_1);\n                    // Unbounded ripples need layout logic applied immediately to set coordinates for both shade and ripple\n                    _this.layoutInternal_();\n                }\n            });\n        }\n    };\n    MDCRippleFoundation.prototype.destroy = function () {\n        var _this = this;\n        if (this.supportsPressRipple_()) {\n            if (this.activationTimer_) {\n                clearTimeout(this.activationTimer_);\n                this.activationTimer_ = 0;\n                this.adapter_.removeClass(MDCRippleFoundation.cssClasses.FG_ACTIVATION);\n            }\n            if (this.fgDeactivationRemovalTimer_) {\n                clearTimeout(this.fgDeactivationRemovalTimer_);\n                this.fgDeactivationRemovalTimer_ = 0;\n                this.adapter_.removeClass(MDCRippleFoundation.cssClasses.FG_DEACTIVATION);\n            }\n            var _a = MDCRippleFoundation.cssClasses, ROOT_2 = _a.ROOT, UNBOUNDED_2 = _a.UNBOUNDED;\n            requestAnimationFrame(function () {\n                _this.adapter_.removeClass(ROOT_2);\n                _this.adapter_.removeClass(UNBOUNDED_2);\n                _this.removeCssVars_();\n            });\n        }\n        this.deregisterRootHandlers_();\n        this.deregisterDeactivationHandlers_();\n    };\n    /**\n     * @param evt Optional event containing position information.\n     */\n    MDCRippleFoundation.prototype.activate = function (evt) {\n        this.activate_(evt);\n    };\n    MDCRippleFoundation.prototype.deactivate = function () {\n        this.deactivate_();\n    };\n    MDCRippleFoundation.prototype.layout = function () {\n        var _this = this;\n        if (this.layoutFrame_) {\n            cancelAnimationFrame(this.layoutFrame_);\n        }\n        this.layoutFrame_ = requestAnimationFrame(function () {\n            _this.layoutInternal_();\n            _this.layoutFrame_ = 0;\n        });\n    };\n    MDCRippleFoundation.prototype.setUnbounded = function (unbounded) {\n        var UNBOUNDED = MDCRippleFoundation.cssClasses.UNBOUNDED;\n        if (unbounded) {\n            this.adapter_.addClass(UNBOUNDED);\n        }\n        else {\n            this.adapter_.removeClass(UNBOUNDED);\n        }\n    };\n    MDCRippleFoundation.prototype.handleFocus = function () {\n        var _this = this;\n        requestAnimationFrame(function () {\n            return _this.adapter_.addClass(MDCRippleFoundation.cssClasses.BG_FOCUSED);\n        });\n    };\n    MDCRippleFoundation.prototype.handleBlur = function () {\n        var _this = this;\n        requestAnimationFrame(function () {\n            return _this.adapter_.removeClass(MDCRippleFoundation.cssClasses.BG_FOCUSED);\n        });\n    };\n    /**\n     * We compute this property so that we are not querying information about the client\n     * until the point in time where the foundation requests it. This prevents scenarios where\n     * client-side feature-detection may happen too early, such as when components are rendered on the server\n     * and then initialized at mount time on the client.\n     */\n    MDCRippleFoundation.prototype.supportsPressRipple_ = function () {\n        return this.adapter_.browserSupportsCssVars();\n    };\n    MDCRippleFoundation.prototype.defaultActivationState_ = function () {\n        return {\n            activationEvent: undefined,\n            hasDeactivationUXRun: false,\n            isActivated: false,\n            isProgrammatic: false,\n            wasActivatedByPointer: false,\n            wasElementMadeActive: false,\n        };\n    };\n    /**\n     * supportsPressRipple Passed from init to save a redundant function call\n     */\n    MDCRippleFoundation.prototype.registerRootHandlers_ = function (supportsPressRipple) {\n        var _this = this;\n        if (supportsPressRipple) {\n            ACTIVATION_EVENT_TYPES.forEach(function (evtType) {\n                _this.adapter_.registerInteractionHandler(evtType, _this.activateHandler_);\n            });\n            if (this.adapter_.isUnbounded()) {\n                this.adapter_.registerResizeHandler(this.resizeHandler_);\n            }\n        }\n        this.adapter_.registerInteractionHandler('focus', this.focusHandler_);\n        this.adapter_.registerInteractionHandler('blur', this.blurHandler_);\n    };\n    MDCRippleFoundation.prototype.registerDeactivationHandlers_ = function (evt) {\n        var _this = this;\n        if (evt.type === 'keydown') {\n            this.adapter_.registerInteractionHandler('keyup', this.deactivateHandler_);\n        }\n        else {\n            POINTER_DEACTIVATION_EVENT_TYPES.forEach(function (evtType) {\n                _this.adapter_.registerDocumentInteractionHandler(evtType, _this.deactivateHandler_);\n            });\n        }\n    };\n    MDCRippleFoundation.prototype.deregisterRootHandlers_ = function () {\n        var _this = this;\n        ACTIVATION_EVENT_TYPES.forEach(function (evtType) {\n            _this.adapter_.deregisterInteractionHandler(evtType, _this.activateHandler_);\n        });\n        this.adapter_.deregisterInteractionHandler('focus', this.focusHandler_);\n        this.adapter_.deregisterInteractionHandler('blur', this.blurHandler_);\n        if (this.adapter_.isUnbounded()) {\n            this.adapter_.deregisterResizeHandler(this.resizeHandler_);\n        }\n    };\n    MDCRippleFoundation.prototype.deregisterDeactivationHandlers_ = function () {\n        var _this = this;\n        this.adapter_.deregisterInteractionHandler('keyup', this.deactivateHandler_);\n        POINTER_DEACTIVATION_EVENT_TYPES.forEach(function (evtType) {\n            _this.adapter_.deregisterDocumentInteractionHandler(evtType, _this.deactivateHandler_);\n        });\n    };\n    MDCRippleFoundation.prototype.removeCssVars_ = function () {\n        var _this = this;\n        var rippleStrings = MDCRippleFoundation.strings;\n        var keys = Object.keys(rippleStrings);\n        keys.forEach(function (key) {\n            if (key.indexOf('VAR_') === 0) {\n                _this.adapter_.updateCssVariable(rippleStrings[key], null);\n            }\n        });\n    };\n    MDCRippleFoundation.prototype.activate_ = function (evt) {\n        var _this = this;\n        if (this.adapter_.isSurfaceDisabled()) {\n            return;\n        }\n        var activationState = this.activationState_;\n        if (activationState.isActivated) {\n            return;\n        }\n        // Avoid reacting to follow-on events fired by touch device after an already-processed user interaction\n        var previousActivationEvent = this.previousActivationEvent_;\n        var isSameInteraction = previousActivationEvent && evt !== undefined && previousActivationEvent.type !== evt.type;\n        if (isSameInteraction) {\n            return;\n        }\n        activationState.isActivated = true;\n        activationState.isProgrammatic = evt === undefined;\n        activationState.activationEvent = evt;\n        activationState.wasActivatedByPointer = activationState.isProgrammatic ? false : evt !== undefined && (evt.type === 'mousedown' || evt.type === 'touchstart' || evt.type === 'pointerdown');\n        var hasActivatedChild = evt !== undefined && activatedTargets.length > 0 && activatedTargets.some(function (target) { return _this.adapter_.containsEventTarget(target); });\n        if (hasActivatedChild) {\n            // Immediately reset activation state, while preserving logic that prevents touch follow-on events\n            this.resetActivationState_();\n            return;\n        }\n        if (evt !== undefined) {\n            activatedTargets.push(evt.target);\n            this.registerDeactivationHandlers_(evt);\n        }\n        activationState.wasElementMadeActive = this.checkElementMadeActive_(evt);\n        if (activationState.wasElementMadeActive) {\n            this.animateActivation_();\n        }\n        requestAnimationFrame(function () {\n            // Reset array on next frame after the current event has had a chance to bubble to prevent ancestor ripples\n            activatedTargets = [];\n            if (!activationState.wasElementMadeActive\n                && evt !== undefined\n                && (evt.key === ' ' || evt.keyCode === 32)) {\n                // If space was pressed, try again within an rAF call to detect :active, because different UAs report\n                // active states inconsistently when they're called within event handling code:\n                // - https://bugs.chromium.org/p/chromium/issues/detail?id=635971\n                // - https://bugzilla.mozilla.org/show_bug.cgi?id=1293741\n                // We try first outside rAF to support Edge, which does not exhibit this problem, but will crash if a CSS\n                // variable is set within a rAF callback for a submit button interaction (#2241).\n                activationState.wasElementMadeActive = _this.checkElementMadeActive_(evt);\n                if (activationState.wasElementMadeActive) {\n                    _this.animateActivation_();\n                }\n            }\n            if (!activationState.wasElementMadeActive) {\n                // Reset activation state immediately if element was not made active.\n                _this.activationState_ = _this.defaultActivationState_();\n            }\n        });\n    };\n    MDCRippleFoundation.prototype.checkElementMadeActive_ = function (evt) {\n        return (evt !== undefined && evt.type === 'keydown') ? this.adapter_.isSurfaceActive() : true;\n    };\n    MDCRippleFoundation.prototype.animateActivation_ = function () {\n        var _this = this;\n        var _a = MDCRippleFoundation.strings, VAR_FG_TRANSLATE_START = _a.VAR_FG_TRANSLATE_START, VAR_FG_TRANSLATE_END = _a.VAR_FG_TRANSLATE_END;\n        var _b = MDCRippleFoundation.cssClasses, FG_DEACTIVATION = _b.FG_DEACTIVATION, FG_ACTIVATION = _b.FG_ACTIVATION;\n        var DEACTIVATION_TIMEOUT_MS = MDCRippleFoundation.numbers.DEACTIVATION_TIMEOUT_MS;\n        this.layoutInternal_();\n        var translateStart = '';\n        var translateEnd = '';\n        if (!this.adapter_.isUnbounded()) {\n            var _c = this.getFgTranslationCoordinates_(), startPoint = _c.startPoint, endPoint = _c.endPoint;\n            translateStart = startPoint.x + \"px, \" + startPoint.y + \"px\";\n            translateEnd = endPoint.x + \"px, \" + endPoint.y + \"px\";\n        }\n        this.adapter_.updateCssVariable(VAR_FG_TRANSLATE_START, translateStart);\n        this.adapter_.updateCssVariable(VAR_FG_TRANSLATE_END, translateEnd);\n        // Cancel any ongoing activation/deactivation animations\n        clearTimeout(this.activationTimer_);\n        clearTimeout(this.fgDeactivationRemovalTimer_);\n        this.rmBoundedActivationClasses_();\n        this.adapter_.removeClass(FG_DEACTIVATION);\n        // Force layout in order to re-trigger the animation.\n        this.adapter_.computeBoundingRect();\n        this.adapter_.addClass(FG_ACTIVATION);\n        this.activationTimer_ = setTimeout(function () { return _this.activationTimerCallback_(); }, DEACTIVATION_TIMEOUT_MS);\n    };\n    MDCRippleFoundation.prototype.getFgTranslationCoordinates_ = function () {\n        var _a = this.activationState_, activationEvent = _a.activationEvent, wasActivatedByPointer = _a.wasActivatedByPointer;\n        var startPoint;\n        if (wasActivatedByPointer) {\n            startPoint = getNormalizedEventCoords(activationEvent, this.adapter_.getWindowPageOffset(), this.adapter_.computeBoundingRect());\n        }\n        else {\n            startPoint = {\n                x: this.frame_.width / 2,\n                y: this.frame_.height / 2,\n            };\n        }\n        // Center the element around the start point.\n        startPoint = {\n            x: startPoint.x - (this.initialSize_ / 2),\n            y: startPoint.y - (this.initialSize_ / 2),\n        };\n        var endPoint = {\n            x: (this.frame_.width / 2) - (this.initialSize_ / 2),\n            y: (this.frame_.height / 2) - (this.initialSize_ / 2),\n        };\n        return { startPoint: startPoint, endPoint: endPoint };\n    };\n    MDCRippleFoundation.prototype.runDeactivationUXLogicIfReady_ = function () {\n        var _this = this;\n        // This method is called both when a pointing device is released, and when the activation animation ends.\n        // The deactivation animation should only run after both of those occur.\n        var FG_DEACTIVATION = MDCRippleFoundation.cssClasses.FG_DEACTIVATION;\n        var _a = this.activationState_, hasDeactivationUXRun = _a.hasDeactivationUXRun, isActivated = _a.isActivated;\n        var activationHasEnded = hasDeactivationUXRun || !isActivated;\n        if (activationHasEnded && this.activationAnimationHasEnded_) {\n            this.rmBoundedActivationClasses_();\n            this.adapter_.addClass(FG_DEACTIVATION);\n            this.fgDeactivationRemovalTimer_ = setTimeout(function () {\n                _this.adapter_.removeClass(FG_DEACTIVATION);\n            }, numbers.FG_DEACTIVATION_MS);\n        }\n    };\n    MDCRippleFoundation.prototype.rmBoundedActivationClasses_ = function () {\n        var FG_ACTIVATION = MDCRippleFoundation.cssClasses.FG_ACTIVATION;\n        this.adapter_.removeClass(FG_ACTIVATION);\n        this.activationAnimationHasEnded_ = false;\n        this.adapter_.computeBoundingRect();\n    };\n    MDCRippleFoundation.prototype.resetActivationState_ = function () {\n        var _this = this;\n        this.previousActivationEvent_ = this.activationState_.activationEvent;\n        this.activationState_ = this.defaultActivationState_();\n        // Touch devices may fire additional events for the same interaction within a short time.\n        // Store the previous event until it's safe to assume that subsequent events are for new interactions.\n        setTimeout(function () { return _this.previousActivationEvent_ = undefined; }, MDCRippleFoundation.numbers.TAP_DELAY_MS);\n    };\n    MDCRippleFoundation.prototype.deactivate_ = function () {\n        var _this = this;\n        var activationState = this.activationState_;\n        // This can happen in scenarios such as when you have a keyup event that blurs the element.\n        if (!activationState.isActivated) {\n            return;\n        }\n        var state = tslib_1.__assign({}, activationState);\n        if (activationState.isProgrammatic) {\n            requestAnimationFrame(function () { return _this.animateDeactivation_(state); });\n            this.resetActivationState_();\n        }\n        else {\n            this.deregisterDeactivationHandlers_();\n            requestAnimationFrame(function () {\n                _this.activationState_.hasDeactivationUXRun = true;\n                _this.animateDeactivation_(state);\n                _this.resetActivationState_();\n            });\n        }\n    };\n    MDCRippleFoundation.prototype.animateDeactivation_ = function (_a) {\n        var wasActivatedByPointer = _a.wasActivatedByPointer, wasElementMadeActive = _a.wasElementMadeActive;\n        if (wasActivatedByPointer || wasElementMadeActive) {\n            this.runDeactivationUXLogicIfReady_();\n        }\n    };\n    MDCRippleFoundation.prototype.layoutInternal_ = function () {\n        var _this = this;\n        this.frame_ = this.adapter_.computeBoundingRect();\n        var maxDim = Math.max(this.frame_.height, this.frame_.width);\n        // Surface diameter is treated differently for unbounded vs. bounded ripples.\n        // Unbounded ripple diameter is calculated smaller since the surface is expected to already be padded appropriately\n        // to extend the hitbox, and the ripple is expected to meet the edges of the padded hitbox (which is typically\n        // square). Bounded ripples, on the other hand, are fully expected to expand beyond the surface's longest diameter\n        // (calculated based on the diagonal plus a constant padding), and are clipped at the surface's border via\n        // `overflow: hidden`.\n        var getBoundedRadius = function () {\n            var hypotenuse = Math.sqrt(Math.pow(_this.frame_.width, 2) + Math.pow(_this.frame_.height, 2));\n            return hypotenuse + MDCRippleFoundation.numbers.PADDING;\n        };\n        this.maxRadius_ = this.adapter_.isUnbounded() ? maxDim : getBoundedRadius();\n        // Ripple is sized as a fraction of the largest dimension of the surface, then scales up using a CSS scale transform\n        this.initialSize_ = Math.floor(maxDim * MDCRippleFoundation.numbers.INITIAL_ORIGIN_SCALE);\n        this.fgScale_ = \"\" + this.maxRadius_ / this.initialSize_;\n        this.updateLayoutCssVars_();\n    };\n    MDCRippleFoundation.prototype.updateLayoutCssVars_ = function () {\n        var _a = MDCRippleFoundation.strings, VAR_FG_SIZE = _a.VAR_FG_SIZE, VAR_LEFT = _a.VAR_LEFT, VAR_TOP = _a.VAR_TOP, VAR_FG_SCALE = _a.VAR_FG_SCALE;\n        this.adapter_.updateCssVariable(VAR_FG_SIZE, this.initialSize_ + \"px\");\n        this.adapter_.updateCssVariable(VAR_FG_SCALE, this.fgScale_);\n        if (this.adapter_.isUnbounded()) {\n            this.unboundedCoords_ = {\n                left: Math.round((this.frame_.width / 2) - (this.initialSize_ / 2)),\n                top: Math.round((this.frame_.height / 2) - (this.initialSize_ / 2)),\n            };\n            this.adapter_.updateCssVariable(VAR_LEFT, this.unboundedCoords_.left + \"px\");\n            this.adapter_.updateCssVariable(VAR_TOP, this.unboundedCoords_.top + \"px\");\n        }\n    };\n    return MDCRippleFoundation;\n}(MDCFoundation));\nexport { MDCRippleFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCRippleFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2016 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCComponent } from '@material/base/component';\nimport { applyPassive } from '@material/dom/events';\nimport { matches } from '@material/dom/ponyfill';\nimport { MDCRippleFoundation } from './foundation';\nimport * as util from './util';\nvar MDCRipple = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCRipple, _super);\n    function MDCRipple() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.disabled = false;\n        return _this;\n    }\n    MDCRipple.attachTo = function (root, opts) {\n        if (opts === void 0) { opts = { isUnbounded: undefined }; }\n        var ripple = new MDCRipple(root);\n        // Only override unbounded behavior if option is explicitly specified\n        if (opts.isUnbounded !== undefined) {\n            ripple.unbounded = opts.isUnbounded;\n        }\n        return ripple;\n    };\n    MDCRipple.createAdapter = function (instance) {\n        return {\n            addClass: function (className) { return instance.root_.classList.add(className); },\n            browserSupportsCssVars: function () { return util.supportsCssVariables(window); },\n            computeBoundingRect: function () { return instance.root_.getBoundingClientRect(); },\n            containsEventTarget: function (target) { return instance.root_.contains(target); },\n            deregisterDocumentInteractionHandler: function (evtType, handler) {\n                return document.documentElement.removeEventListener(evtType, handler, applyPassive());\n            },\n            deregisterInteractionHandler: function (evtType, handler) {\n                return instance.root_.removeEventListener(evtType, handler, applyPassive());\n            },\n            deregisterResizeHandler: function (handler) { return window.removeEventListener('resize', handler); },\n            getWindowPageOffset: function () { return ({ x: window.pageXOffset, y: window.pageYOffset }); },\n            isSurfaceActive: function () { return matches(instance.root_, ':active'); },\n            isSurfaceDisabled: function () { return Boolean(instance.disabled); },\n            isUnbounded: function () { return Boolean(instance.unbounded); },\n            registerDocumentInteractionHandler: function (evtType, handler) {\n                return document.documentElement.addEventListener(evtType, handler, applyPassive());\n            },\n            registerInteractionHandler: function (evtType, handler) {\n                return instance.root_.addEventListener(evtType, handler, applyPassive());\n            },\n            registerResizeHandler: function (handler) { return window.addEventListener('resize', handler); },\n            removeClass: function (className) { return instance.root_.classList.remove(className); },\n            updateCssVariable: function (varName, value) { return instance.root_.style.setProperty(varName, value); },\n        };\n    };\n    Object.defineProperty(MDCRipple.prototype, \"unbounded\", {\n        get: function () {\n            return Boolean(this.unbounded_);\n        },\n        set: function (unbounded) {\n            this.unbounded_ = Boolean(unbounded);\n            this.setUnbounded_();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCRipple.prototype.activate = function () {\n        this.foundation_.activate();\n    };\n    MDCRipple.prototype.deactivate = function () {\n        this.foundation_.deactivate();\n    };\n    MDCRipple.prototype.layout = function () {\n        this.foundation_.layout();\n    };\n    MDCRipple.prototype.getDefaultFoundation = function () {\n        return new MDCRippleFoundation(MDCRipple.createAdapter(this));\n    };\n    MDCRipple.prototype.initialSyncWithDOM = function () {\n        var root = this.root_;\n        this.unbounded = 'mdcRippleIsUnbounded' in root.dataset;\n    };\n    /**\n     * Closure Compiler throws an access control error when directly accessing a\n     * protected or private property inside a getter/setter, like unbounded above.\n     * By accessing the protected property inside a method, we solve that problem.\n     * That's why this function exists.\n     */\n    MDCRipple.prototype.setUnbounded_ = function () {\n        this.foundation_.setUnbounded(Boolean(this.unbounded_));\n    };\n    return MDCRipple;\n}(MDCComponent));\nexport { MDCRipple };\n//# sourceMappingURL=component.js.map","import {MDCRipple} from '@material/ripple';\nimport {getContext} from 'svelte';\n\nexport default function Ripple(node, props = {ripple: false, unbounded: false, color: null, classForward: () => {}}) {\n  let instance = null;\n  let addLayoutListener = getContext('SMUI:addLayoutListener');\n  let removeLayoutListener;\n  let classList = [];\n\n  function addClass(className) {\n    const idx = classList.indexOf(className);\n    if (idx === -1) {\n      node.classList.add(className);\n      classList.push(className);\n      if (props.classForward) {\n        props.classForward(classList);\n      }\n    }\n  }\n\n  function removeClass(className) {\n    const idx = classList.indexOf(className);\n    if (idx !== -1) {\n      node.classList.remove(className);\n      classList.splice(idx, 1);\n      if (props.classForward) {\n        props.classForward(classList);\n      }\n    }\n  }\n\n  function handleProps() {\n    if (props.ripple && !instance) {\n      // Override the Ripple component's adapter, so that we can forward classes\n      // to Svelte components that overwrite Ripple's classes.\n      const _createAdapter = MDCRipple.createAdapter;\n      MDCRipple.createAdapter = function(...args) {\n        const adapter = _createAdapter.apply(this, args);\n        adapter.addClass = function(className) {\n          return addClass(className);\n        };\n        adapter.removeClass = function(className) {\n          return removeClass(className);\n        };\n        return adapter;\n      };\n      instance = new MDCRipple(node);\n      MDCRipple.createAdapter = _createAdapter;\n    } else if (instance && !props.ripple) {\n      instance.destroy();\n      instance = null;\n    }\n    if (props.ripple) {\n      instance.unbounded = !!props.unbounded;\n      switch (props.color) {\n        case 'surface':\n          addClass('mdc-ripple-surface');\n          removeClass('mdc-ripple-surface--primary');\n          removeClass('mdc-ripple-surface--accent');\n          return;\n        case 'primary':\n          addClass('mdc-ripple-surface');\n          addClass('mdc-ripple-surface--primary');\n          removeClass('mdc-ripple-surface--accent');\n          return;\n        case 'secondary':\n          addClass('mdc-ripple-surface');\n          removeClass('mdc-ripple-surface--primary');\n          addClass('mdc-ripple-surface--accent');\n          return;\n      }\n    }\n    removeClass('mdc-ripple-surface');\n    removeClass('mdc-ripple-surface--primary');\n    removeClass('mdc-ripple-surface--accent');\n  }\n\n  handleProps();\n\n  if (addLayoutListener) {\n    removeLayoutListener = addLayoutListener(layout);\n  }\n\n  function layout() {\n    if (instance) {\n      instance.layout();\n    }\n  }\n\n  return {\n    update(newProps = {ripple: false, unbounded: false, color: null, classForward: []}) {\n      props = newProps;\n      handleProps();\n    },\n\n    destroy() {\n      if (instance) {\n        instance.destroy();\n        instance = null;\n        removeClass('mdc-ripple-surface');\n        removeClass('mdc-ripple-surface--primary');\n        removeClass('mdc-ripple-surface--accent');\n      }\n\n      if (removeLayoutListener) {\n        removeLayoutListener();\n      }\n    }\n  }\n}\n","<svelte:component\n  this={component}\n  use={[[Ripple, {ripple, unbounded: false, classForward: classes => rippleClasses = classes}], forwardEvents, ...use]}\n  class=\"\n    mdc-button\n    {className}\n    {rippleClasses.join(' ')}\n    {variant === 'raised' ? 'mdc-button--raised' : ''}\n    {variant === 'unelevated' ? 'mdc-button--unelevated' : ''}\n    {variant === 'outlined' ? 'mdc-button--outlined' : ''}\n    {dense ? 'mdc-button--dense' : ''}\n    {color === 'secondary' ? 'smui-button--color-secondary' : ''}\n    {context === 'card:action' ? 'mdc-card__action' : ''}\n    {context === 'card:action' ? 'mdc-card__action--button' : ''}\n    {context === 'dialog:action' ? 'mdc-dialog__button' : ''}\n    {context === 'top-app-bar:navigation' ? 'mdc-top-app-bar__navigation-icon' : ''}\n    {context === 'top-app-bar:action' ? 'mdc-top-app-bar__action-item' : ''}\n    {context === 'snackbar' ? 'mdc-snackbar__action' : ''}\n  \"\n  {...actionProp}\n  {...defaultProp}\n  {...exclude($$props, ['use', 'class', 'ripple', 'color', 'variant', 'dense', ...dialogExcludes])}\n><slot></slot></svelte:component>\n\n<script>\n  import {setContext, getContext} from 'svelte';\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from '@smui/common/forwardEvents.js';\n  import {exclude} from '@smui/common/exclude.js';\n  import {useActions} from '@smui/common/useActions.js';\n  import A from '@smui/common/A.svelte';\n  import Button from '@smui/common/Button.svelte';\n  import Ripple from '@smui/ripple/bare.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n\n  export let use = [];\n  let className = '';\n  export {className as class};\n  export let ripple = true;\n  export let color = 'primary';\n  export let variant = 'text';\n  export let dense = false;\n  // Purposely left out of props exclude.\n  export let href = null;\n  export let action = 'close';\n  let defaultAction = false;\n  export {defaultAction as default};\n  export let component = href == null ? Button : A;\n\n  let context = getContext('SMUI:button:context');\n  let rippleClasses = [];\n\n  $: dialogExcludes = (context === 'dialog:action') ? ['action', 'default'] : [];\n\n  $: actionProp = (context === 'dialog:action' && action !== null) ? {'data-mdc-dialog-action': action} : {};\n  $: defaultProp = (context === 'dialog:action' && defaultAction) ? {'data-mdc-dialog-button-default': ''} : {};\n\n  setContext('SMUI:label:context', 'button');\n  setContext('SMUI:icon:context', 'button');\n</script>\n","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nexport var cssClasses = {\n    ICON_BUTTON_ON: 'mdc-icon-button--on',\n    ROOT: 'mdc-icon-button',\n};\nexport var strings = {\n    ARIA_PRESSED: 'aria-pressed',\n    CHANGE_EVENT: 'MDCIconButtonToggle:change',\n};\n//# sourceMappingURL=constants.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { cssClasses, strings } from './constants';\nvar MDCIconButtonToggleFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCIconButtonToggleFoundation, _super);\n    function MDCIconButtonToggleFoundation(adapter) {\n        return _super.call(this, tslib_1.__assign({}, MDCIconButtonToggleFoundation.defaultAdapter, adapter)) || this;\n    }\n    Object.defineProperty(MDCIconButtonToggleFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCIconButtonToggleFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCIconButtonToggleFoundation, \"defaultAdapter\", {\n        get: function () {\n            return {\n                addClass: function () { return undefined; },\n                hasClass: function () { return false; },\n                notifyChange: function () { return undefined; },\n                removeClass: function () { return undefined; },\n                setAttr: function () { return undefined; },\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCIconButtonToggleFoundation.prototype.init = function () {\n        this.adapter_.setAttr(strings.ARIA_PRESSED, \"\" + this.isOn());\n    };\n    MDCIconButtonToggleFoundation.prototype.handleClick = function () {\n        this.toggle();\n        this.adapter_.notifyChange({ isOn: this.isOn() });\n    };\n    MDCIconButtonToggleFoundation.prototype.isOn = function () {\n        return this.adapter_.hasClass(cssClasses.ICON_BUTTON_ON);\n    };\n    MDCIconButtonToggleFoundation.prototype.toggle = function (isOn) {\n        if (isOn === void 0) { isOn = !this.isOn(); }\n        if (isOn) {\n            this.adapter_.addClass(cssClasses.ICON_BUTTON_ON);\n        }\n        else {\n            this.adapter_.removeClass(cssClasses.ICON_BUTTON_ON);\n        }\n        this.adapter_.setAttr(strings.ARIA_PRESSED, \"\" + isOn);\n    };\n    return MDCIconButtonToggleFoundation;\n}(MDCFoundation));\nexport { MDCIconButtonToggleFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCIconButtonToggleFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCComponent } from '@material/base/component';\nimport { MDCRipple } from '@material/ripple/component';\nimport { MDCIconButtonToggleFoundation } from './foundation';\nvar strings = MDCIconButtonToggleFoundation.strings;\nvar MDCIconButtonToggle = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCIconButtonToggle, _super);\n    function MDCIconButtonToggle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.ripple_ = _this.createRipple_();\n        return _this;\n    }\n    MDCIconButtonToggle.attachTo = function (root) {\n        return new MDCIconButtonToggle(root);\n    };\n    MDCIconButtonToggle.prototype.initialSyncWithDOM = function () {\n        var _this = this;\n        this.handleClick_ = function () { return _this.foundation_.handleClick(); };\n        this.listen('click', this.handleClick_);\n    };\n    MDCIconButtonToggle.prototype.destroy = function () {\n        this.unlisten('click', this.handleClick_);\n        this.ripple_.destroy();\n        _super.prototype.destroy.call(this);\n    };\n    MDCIconButtonToggle.prototype.getDefaultFoundation = function () {\n        var _this = this;\n        // DO NOT INLINE this variable. For backward compatibility, foundations take a Partial<MDCFooAdapter>.\n        // To ensure we don't accidentally omit any methods, we need a separate, strongly typed adapter variable.\n        var adapter = {\n            addClass: function (className) { return _this.root_.classList.add(className); },\n            hasClass: function (className) { return _this.root_.classList.contains(className); },\n            notifyChange: function (evtData) { return _this.emit(strings.CHANGE_EVENT, evtData); },\n            removeClass: function (className) { return _this.root_.classList.remove(className); },\n            setAttr: function (attrName, attrValue) { return _this.root_.setAttribute(attrName, attrValue); },\n        };\n        return new MDCIconButtonToggleFoundation(adapter);\n    };\n    Object.defineProperty(MDCIconButtonToggle.prototype, \"ripple\", {\n        get: function () {\n            return this.ripple_;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCIconButtonToggle.prototype, \"on\", {\n        get: function () {\n            return this.foundation_.isOn();\n        },\n        set: function (isOn) {\n            this.foundation_.toggle(isOn);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCIconButtonToggle.prototype.createRipple_ = function () {\n        var ripple = new MDCRipple(this.root_);\n        ripple.unbounded = true;\n        return ripple;\n    };\n    return MDCIconButtonToggle;\n}(MDCComponent));\nexport { MDCIconButtonToggle };\n//# sourceMappingURL=component.js.map","{#if href}\n  <a\n    bind:this={element}\n    use:useActions={use}\n    use:forwardEvents\n    class=\"\n      mdc-icon-button\n      {className}\n      {pressed ? 'mdc-icon-button--on' : ''}\n      {context === 'card:action' ? 'mdc-card__action' : ''}\n      {context === 'card:action' ? 'mdc-card__action--icon' : ''}\n      {context === 'top-app-bar:navigation' ? 'mdc-top-app-bar__navigation-icon' : ''}\n      {context === 'top-app-bar:action' ? 'mdc-top-app-bar__action-item' : ''}\n      {context === 'snackbar' ? 'mdc-snackbar__dismiss' : ''}\n    \"\n    use:Ripple={{ripple: ripple && !toggle, unbounded: true, color}}\n    aria-hidden=\"true\"\n    aria-pressed={pressed}\n    {href}\n    on:MDCIconButtonToggle:change={handleChange}\n    {...props}\n  ><slot></slot></a>\n{:else}\n  <button\n    bind:this={element}\n    use:useActions={use}\n    use:forwardEvents\n    class=\"\n      mdc-icon-button\n      {className}\n      {pressed ? 'mdc-icon-button--on' : ''}\n      {context === 'card:action' ? 'mdc-card__action' : ''}\n      {context === 'card:action' ? 'mdc-card__action--icon' : ''}\n      {context === 'top-app-bar:navigation' ? 'mdc-top-app-bar__navigation-icon' : ''}\n      {context === 'top-app-bar:action' ? 'mdc-top-app-bar__action-item' : ''}\n      {context === 'snackbar' ? 'mdc-snackbar__dismiss' : ''}\n    \"\n    use:Ripple={{ripple: ripple && !toggle, unbounded: true, color}}\n    aria-hidden=\"true\"\n    aria-pressed={pressed}\n    on:MDCIconButtonToggle:change={handleChange}\n    {...props}\n  ><slot></slot></button>\n{/if}\n\n<script>\n  import {MDCIconButtonToggle} from '@material/icon-button';\n  import {onDestroy, getContext, setContext} from 'svelte';\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from '@smui/common/forwardEvents.js';\n  import {exclude} from '@smui/common/exclude.js';\n  import {useActions} from '@smui/common/useActions.js';\n  import Ripple from '@smui/ripple/bare.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component(), ['MDCIconButtonToggle:change']);\n\n  export let use = [];\n  let className = '';\n  export {className as class};\n  export let ripple = true;\n  export let color = null;\n  export let toggle = false;\n  export let pressed = false;\n  export let href = null;\n\n  $: props = exclude($$props, ['use', 'class', 'ripple', 'color', 'toggle', 'pressed', 'href']);\n\n  let element;\n  let toggleButton;\n  let context = getContext('SMUI:icon-button:context');\n\n  setContext('SMUI:icon:context', 'icon-button');\n\n  let oldToggle = null;\n  $: if (element && toggle !== oldToggle) {\n    if (toggle) {\n      toggleButton = new MDCIconButtonToggle(element);\n      if (!ripple) {\n        toggleButton.ripple.destroy();\n      }\n      toggleButton.on = pressed;\n    } else if (oldToggle) {\n      toggleButton && toggleButton.destroy();\n      toggleButton = null;\n    }\n    oldToggle = toggle;\n  }\n\n  $: if (toggleButton && toggleButton.on !== pressed) {\n    toggleButton.on = pressed;\n  }\n\n  onDestroy(() => {\n    toggleButton && toggleButton.destroy();\n  });\n\n  function handleChange(e) {\n    pressed = e.detail.isOn;\n  }\n</script>\n","export function prefixFilter(obj, prefix) {\n  let names = Object.getOwnPropertyNames(obj);\n  const newObj = {};\n\n  for (let i = 0; i < names.length; i++) {\n    const name = names[i];\n    if (name.substring(0, prefix.length) === prefix) {\n      newObj[name.substring(prefix.length)] = obj[name];\n    }\n  }\n\n  return newObj;\n}","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar cssClasses = {\n    CLOSING: 'mdc-snackbar--closing',\n    OPEN: 'mdc-snackbar--open',\n    OPENING: 'mdc-snackbar--opening',\n};\nvar strings = {\n    ACTION_SELECTOR: '.mdc-snackbar__action',\n    ARIA_LIVE_LABEL_TEXT_ATTR: 'data-mdc-snackbar-label-text',\n    CLOSED_EVENT: 'MDCSnackbar:closed',\n    CLOSING_EVENT: 'MDCSnackbar:closing',\n    DISMISS_SELECTOR: '.mdc-snackbar__dismiss',\n    LABEL_SELECTOR: '.mdc-snackbar__label',\n    OPENED_EVENT: 'MDCSnackbar:opened',\n    OPENING_EVENT: 'MDCSnackbar:opening',\n    REASON_ACTION: 'action',\n    REASON_DISMISS: 'dismiss',\n    SURFACE_SELECTOR: '.mdc-snackbar__surface',\n};\nvar numbers = {\n    DEFAULT_AUTO_DISMISS_TIMEOUT_MS: 5000,\n    MAX_AUTO_DISMISS_TIMEOUT_MS: 10000,\n    MIN_AUTO_DISMISS_TIMEOUT_MS: 4000,\n    // These variables need to be kept in sync with the values in _variables.scss.\n    SNACKBAR_ANIMATION_CLOSE_TIME_MS: 75,\n    SNACKBAR_ANIMATION_OPEN_TIME_MS: 150,\n    /**\n     * Number of milliseconds to wait between temporarily clearing the label text\n     * in the DOM and subsequently restoring it. This is necessary to force IE 11\n     * to pick up the `aria-live` content change and announce it to the user.\n     */\n    ARIA_LIVE_DELAY_MS: 1000,\n};\nexport { cssClasses, strings, numbers };\n//# sourceMappingURL=constants.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { numbers, strings } from './constants';\nvar ARIA_LIVE_DELAY_MS = numbers.ARIA_LIVE_DELAY_MS;\nvar ARIA_LIVE_LABEL_TEXT_ATTR = strings.ARIA_LIVE_LABEL_TEXT_ATTR;\nfunction announce(ariaEl, labelEl) {\n    if (labelEl === void 0) { labelEl = ariaEl; }\n    var priority = ariaEl.getAttribute('aria-live');\n    // Trim text to ignore `&nbsp;` (see below).\n    // textContent is only null if the node is a document, DOCTYPE, or notation.\n    var labelText = labelEl.textContent.trim();\n    if (!labelText || !priority) {\n        return;\n    }\n    // Temporarily disable `aria-live` to prevent JAWS+Firefox from announcing the message twice.\n    ariaEl.setAttribute('aria-live', 'off');\n    // Temporarily clear `textContent` to force a DOM mutation event that will be detected by screen readers.\n    // `aria-live` elements are only announced when the element's `textContent` *changes*, so snackbars\n    // sent to the browser in the initial HTML response won't be read unless we clear the element's `textContent` first.\n    // Similarly, displaying the same snackbar message twice in a row doesn't trigger a DOM mutation event,\n    // so screen readers won't announce the second message unless we first clear `textContent`.\n    //\n    // We have to clear the label text two different ways to make it work in all browsers and screen readers:\n    //\n    //   1. `textContent = ''` is required for IE11 + JAWS\n    //   2. `innerHTML = '&nbsp;'` is required for Chrome + JAWS and NVDA\n    //\n    // All other browser/screen reader combinations support both methods.\n    //\n    // The wrapper `<span>` visually hides the space character so that it doesn't cause jank when added/removed.\n    // N.B.: Setting `position: absolute`, `opacity: 0`, or `height: 0` prevents Chrome from detecting the DOM change.\n    //\n    // This technique has been tested in:\n    //\n    //   * JAWS 2019:\n    //       - Chrome 70\n    //       - Firefox 60 (ESR)\n    //       - IE 11\n    //   * NVDA 2018:\n    //       - Chrome 70\n    //       - Firefox 60 (ESR)\n    //       - IE 11\n    //   * ChromeVox 53\n    labelEl.textContent = '';\n    labelEl.innerHTML = '<span style=\"display: inline-block; width: 0; height: 1px;\">&nbsp;</span>';\n    // Prevent visual jank by temporarily displaying the label text in the ::before pseudo-element.\n    // CSS generated content is normally announced by screen readers\n    // (except in IE 11; see https://tink.uk/accessibility-support-for-css-generated-content/);\n    // however, `aria-live` is turned off, so this DOM update will be ignored by screen readers.\n    labelEl.setAttribute(ARIA_LIVE_LABEL_TEXT_ATTR, labelText);\n    setTimeout(function () {\n        // Allow screen readers to announce changes to the DOM again.\n        ariaEl.setAttribute('aria-live', priority);\n        // Remove the message from the ::before pseudo-element.\n        labelEl.removeAttribute(ARIA_LIVE_LABEL_TEXT_ATTR);\n        // Restore the original label text, which will be announced by screen readers.\n        labelEl.textContent = labelText;\n    }, ARIA_LIVE_DELAY_MS);\n}\nexport { announce };\n//# sourceMappingURL=util.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { cssClasses, numbers, strings } from './constants';\nvar OPENING = cssClasses.OPENING, OPEN = cssClasses.OPEN, CLOSING = cssClasses.CLOSING;\nvar REASON_ACTION = strings.REASON_ACTION, REASON_DISMISS = strings.REASON_DISMISS;\nvar MDCSnackbarFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCSnackbarFoundation, _super);\n    function MDCSnackbarFoundation(adapter) {\n        var _this = _super.call(this, tslib_1.__assign({}, MDCSnackbarFoundation.defaultAdapter, adapter)) || this;\n        _this.isOpen_ = false;\n        _this.animationFrame_ = 0;\n        _this.animationTimer_ = 0;\n        _this.autoDismissTimer_ = 0;\n        _this.autoDismissTimeoutMs_ = numbers.DEFAULT_AUTO_DISMISS_TIMEOUT_MS;\n        _this.closeOnEscape_ = true;\n        return _this;\n    }\n    Object.defineProperty(MDCSnackbarFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCSnackbarFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCSnackbarFoundation, \"numbers\", {\n        get: function () {\n            return numbers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCSnackbarFoundation, \"defaultAdapter\", {\n        get: function () {\n            return {\n                addClass: function () { return undefined; },\n                announce: function () { return undefined; },\n                notifyClosed: function () { return undefined; },\n                notifyClosing: function () { return undefined; },\n                notifyOpened: function () { return undefined; },\n                notifyOpening: function () { return undefined; },\n                removeClass: function () { return undefined; },\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCSnackbarFoundation.prototype.destroy = function () {\n        this.clearAutoDismissTimer_();\n        cancelAnimationFrame(this.animationFrame_);\n        this.animationFrame_ = 0;\n        clearTimeout(this.animationTimer_);\n        this.animationTimer_ = 0;\n        this.adapter_.removeClass(OPENING);\n        this.adapter_.removeClass(OPEN);\n        this.adapter_.removeClass(CLOSING);\n    };\n    MDCSnackbarFoundation.prototype.open = function () {\n        var _this = this;\n        this.clearAutoDismissTimer_();\n        this.isOpen_ = true;\n        this.adapter_.notifyOpening();\n        this.adapter_.removeClass(CLOSING);\n        this.adapter_.addClass(OPENING);\n        this.adapter_.announce();\n        // Wait a frame once display is no longer \"none\", to establish basis for animation\n        this.runNextAnimationFrame_(function () {\n            _this.adapter_.addClass(OPEN);\n            _this.animationTimer_ = setTimeout(function () {\n                _this.handleAnimationTimerEnd_();\n                _this.adapter_.notifyOpened();\n                _this.autoDismissTimer_ = setTimeout(function () {\n                    _this.close(REASON_DISMISS);\n                }, _this.getTimeoutMs());\n            }, numbers.SNACKBAR_ANIMATION_OPEN_TIME_MS);\n        });\n    };\n    /**\n     * @param reason Why the snackbar was closed. Value will be passed to CLOSING_EVENT and CLOSED_EVENT via the\n     *     `event.detail.reason` property. Standard values are REASON_ACTION and REASON_DISMISS, but custom\n     *     client-specific values may also be used if desired.\n     */\n    MDCSnackbarFoundation.prototype.close = function (reason) {\n        var _this = this;\n        if (reason === void 0) { reason = ''; }\n        if (!this.isOpen_) {\n            // Avoid redundant close calls (and events), e.g. repeated interactions as the snackbar is animating closed\n            return;\n        }\n        cancelAnimationFrame(this.animationFrame_);\n        this.animationFrame_ = 0;\n        this.clearAutoDismissTimer_();\n        this.isOpen_ = false;\n        this.adapter_.notifyClosing(reason);\n        this.adapter_.addClass(cssClasses.CLOSING);\n        this.adapter_.removeClass(cssClasses.OPEN);\n        this.adapter_.removeClass(cssClasses.OPENING);\n        clearTimeout(this.animationTimer_);\n        this.animationTimer_ = setTimeout(function () {\n            _this.handleAnimationTimerEnd_();\n            _this.adapter_.notifyClosed(reason);\n        }, numbers.SNACKBAR_ANIMATION_CLOSE_TIME_MS);\n    };\n    MDCSnackbarFoundation.prototype.isOpen = function () {\n        return this.isOpen_;\n    };\n    MDCSnackbarFoundation.prototype.getTimeoutMs = function () {\n        return this.autoDismissTimeoutMs_;\n    };\n    MDCSnackbarFoundation.prototype.setTimeoutMs = function (timeoutMs) {\n        // Use shorter variable names to make the code more readable\n        var minValue = numbers.MIN_AUTO_DISMISS_TIMEOUT_MS;\n        var maxValue = numbers.MAX_AUTO_DISMISS_TIMEOUT_MS;\n        if (timeoutMs <= maxValue && timeoutMs >= minValue) {\n            this.autoDismissTimeoutMs_ = timeoutMs;\n        }\n        else {\n            throw new Error(\"timeoutMs must be an integer in the range \" + minValue + \"\\u2013\" + maxValue + \", but got '\" + timeoutMs + \"'\");\n        }\n    };\n    MDCSnackbarFoundation.prototype.getCloseOnEscape = function () {\n        return this.closeOnEscape_;\n    };\n    MDCSnackbarFoundation.prototype.setCloseOnEscape = function (closeOnEscape) {\n        this.closeOnEscape_ = closeOnEscape;\n    };\n    MDCSnackbarFoundation.prototype.handleKeyDown = function (evt) {\n        var isEscapeKey = evt.key === 'Escape' || evt.keyCode === 27;\n        if (isEscapeKey && this.getCloseOnEscape()) {\n            this.close(REASON_DISMISS);\n        }\n    };\n    MDCSnackbarFoundation.prototype.handleActionButtonClick = function (_evt) {\n        this.close(REASON_ACTION);\n    };\n    MDCSnackbarFoundation.prototype.handleActionIconClick = function (_evt) {\n        this.close(REASON_DISMISS);\n    };\n    MDCSnackbarFoundation.prototype.clearAutoDismissTimer_ = function () {\n        clearTimeout(this.autoDismissTimer_);\n        this.autoDismissTimer_ = 0;\n    };\n    MDCSnackbarFoundation.prototype.handleAnimationTimerEnd_ = function () {\n        this.animationTimer_ = 0;\n        this.adapter_.removeClass(cssClasses.OPENING);\n        this.adapter_.removeClass(cssClasses.CLOSING);\n    };\n    /**\n     * Runs the given logic on the next animation frame, using setTimeout to factor in Firefox reflow behavior.\n     */\n    MDCSnackbarFoundation.prototype.runNextAnimationFrame_ = function (callback) {\n        var _this = this;\n        cancelAnimationFrame(this.animationFrame_);\n        this.animationFrame_ = requestAnimationFrame(function () {\n            _this.animationFrame_ = 0;\n            clearTimeout(_this.animationTimer_);\n            _this.animationTimer_ = setTimeout(callback, 0);\n        });\n    };\n    return MDCSnackbarFoundation;\n}(MDCFoundation));\nexport { MDCSnackbarFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCSnackbarFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCComponent } from '@material/base/component';\nimport { closest } from '@material/dom/ponyfill';\nimport { strings } from './constants';\nimport { MDCSnackbarFoundation } from './foundation';\nimport * as util from './util';\nvar SURFACE_SELECTOR = strings.SURFACE_SELECTOR, LABEL_SELECTOR = strings.LABEL_SELECTOR, ACTION_SELECTOR = strings.ACTION_SELECTOR, DISMISS_SELECTOR = strings.DISMISS_SELECTOR, OPENING_EVENT = strings.OPENING_EVENT, OPENED_EVENT = strings.OPENED_EVENT, CLOSING_EVENT = strings.CLOSING_EVENT, CLOSED_EVENT = strings.CLOSED_EVENT;\nvar MDCSnackbar = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCSnackbar, _super);\n    function MDCSnackbar() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MDCSnackbar.attachTo = function (root) {\n        return new MDCSnackbar(root);\n    };\n    MDCSnackbar.prototype.initialize = function (announcerFactory) {\n        if (announcerFactory === void 0) { announcerFactory = function () { return util.announce; }; }\n        this.announce_ = announcerFactory();\n    };\n    MDCSnackbar.prototype.initialSyncWithDOM = function () {\n        var _this = this;\n        this.surfaceEl_ = this.root_.querySelector(SURFACE_SELECTOR);\n        this.labelEl_ = this.root_.querySelector(LABEL_SELECTOR);\n        this.actionEl_ = this.root_.querySelector(ACTION_SELECTOR);\n        this.handleKeyDown_ = function (evt) { return _this.foundation_.handleKeyDown(evt); };\n        this.handleSurfaceClick_ = function (evt) {\n            var target = evt.target;\n            if (_this.isActionButton_(target)) {\n                _this.foundation_.handleActionButtonClick(evt);\n            }\n            else if (_this.isActionIcon_(target)) {\n                _this.foundation_.handleActionIconClick(evt);\n            }\n        };\n        this.registerKeyDownHandler_(this.handleKeyDown_);\n        this.registerSurfaceClickHandler_(this.handleSurfaceClick_);\n    };\n    MDCSnackbar.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.deregisterKeyDownHandler_(this.handleKeyDown_);\n        this.deregisterSurfaceClickHandler_(this.handleSurfaceClick_);\n    };\n    MDCSnackbar.prototype.open = function () {\n        this.foundation_.open();\n    };\n    /**\n     * @param reason Why the snackbar was closed. Value will be passed to CLOSING_EVENT and CLOSED_EVENT via the\n     *     `event.detail.reason` property. Standard values are REASON_ACTION and REASON_DISMISS, but custom\n     *     client-specific values may also be used if desired.\n     */\n    MDCSnackbar.prototype.close = function (reason) {\n        if (reason === void 0) { reason = ''; }\n        this.foundation_.close(reason);\n    };\n    MDCSnackbar.prototype.getDefaultFoundation = function () {\n        var _this = this;\n        // DO NOT INLINE this variable. For backward compatibility, foundations take a Partial<MDCFooAdapter>.\n        // To ensure we don't accidentally omit any methods, we need a separate, strongly typed adapter variable.\n        var adapter = {\n            addClass: function (className) { return _this.root_.classList.add(className); },\n            announce: function () { return _this.announce_(_this.labelEl_); },\n            notifyClosed: function (reason) { return _this.emit(CLOSED_EVENT, reason ? { reason: reason } : {}); },\n            notifyClosing: function (reason) { return _this.emit(CLOSING_EVENT, reason ? { reason: reason } : {}); },\n            notifyOpened: function () { return _this.emit(OPENED_EVENT, {}); },\n            notifyOpening: function () { return _this.emit(OPENING_EVENT, {}); },\n            removeClass: function (className) { return _this.root_.classList.remove(className); },\n        };\n        return new MDCSnackbarFoundation(adapter);\n    };\n    Object.defineProperty(MDCSnackbar.prototype, \"timeoutMs\", {\n        get: function () {\n            return this.foundation_.getTimeoutMs();\n        },\n        set: function (timeoutMs) {\n            this.foundation_.setTimeoutMs(timeoutMs);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCSnackbar.prototype, \"closeOnEscape\", {\n        get: function () {\n            return this.foundation_.getCloseOnEscape();\n        },\n        set: function (closeOnEscape) {\n            this.foundation_.setCloseOnEscape(closeOnEscape);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCSnackbar.prototype, \"isOpen\", {\n        get: function () {\n            return this.foundation_.isOpen();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCSnackbar.prototype, \"labelText\", {\n        get: function () {\n            // This property only returns null if the node is a document, DOCTYPE, or notation.\n            // On Element nodes, it always returns a string.\n            return this.labelEl_.textContent;\n        },\n        set: function (labelText) {\n            this.labelEl_.textContent = labelText;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCSnackbar.prototype, \"actionButtonText\", {\n        get: function () {\n            return this.actionEl_.textContent;\n        },\n        set: function (actionButtonText) {\n            this.actionEl_.textContent = actionButtonText;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCSnackbar.prototype.registerKeyDownHandler_ = function (handler) {\n        this.listen('keydown', handler);\n    };\n    MDCSnackbar.prototype.deregisterKeyDownHandler_ = function (handler) {\n        this.unlisten('keydown', handler);\n    };\n    MDCSnackbar.prototype.registerSurfaceClickHandler_ = function (handler) {\n        this.surfaceEl_.addEventListener('click', handler);\n    };\n    MDCSnackbar.prototype.deregisterSurfaceClickHandler_ = function (handler) {\n        this.surfaceEl_.removeEventListener('click', handler);\n    };\n    MDCSnackbar.prototype.isActionButton_ = function (target) {\n        return Boolean(closest(target, ACTION_SELECTOR));\n    };\n    MDCSnackbar.prototype.isActionIcon_ = function (target) {\n        return Boolean(closest(target, DISMISS_SELECTOR));\n    };\n    return MDCSnackbar;\n}(MDCComponent));\nexport { MDCSnackbar };\n//# sourceMappingURL=component.js.map","<div\n  bind:this={element}\n  use:useActions={use}\n  use:forwardEvents\n  class=\"\n    mdc-snackbar\n    {className}\n    {variant === 'stacked' ? 'mdc-snackbar--stacked' : ''}\n    {leading ? 'mdc-snackbar--leading' : ''}\n  \"\n  on:MDCSnackbar:closed={handleClosed}\n  {...exclude($$props, ['use', 'class', 'variant', 'leading', 'surface$'])}\n>\n  <div\n    use:useActions={surface$use}\n    class=\"mdc-snackbar__surface {surface$class}\"\n    {...prefixFilter($$props, 'surface$')}\n  ><slot></slot></div>\n</div>\n\n<script context=\"module\">\n  let waiting = Promise.resolve();\n</script>\n\n<script>\n  import {MDCSnackbar} from '@material/snackbar';\n  import {onMount, onDestroy, setContext} from 'svelte';\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from '@smui/common/forwardEvents.js';\n  import {exclude} from '@smui/common/exclude.js';\n  import {prefixFilter} from '@smui/common/prefixFilter.js';\n  import {useActions} from '@smui/common/useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component(), ['MDCSnackbar:opening', 'MDCSnackbar:opened', 'MDCSnackbar:closing', 'MDCSnackbar:closed']);\n  const uninitializedValue = () => {};\n\n  export let use = [];\n  let className = '';\n  export {className as class};\n  export let variant = '';\n  export let leading = false;\n  export let timeoutMs = 5000;\n  export let closeOnEscape = true;\n  export let labelText = uninitializedValue;\n  export let actionButtonText = uninitializedValue;\n  export let surface$class = '';\n  export let surface$use = [];\n\n  let element;\n  let snackbar;\n  let closeResolve;\n  let closePromise = new Promise(resolve => closeResolve = resolve);\n\n  setContext('SMUI:button:context', 'snackbar');\n  setContext('SMUI:icon-button:context', 'snackbar');\n  setContext('SMUI:label:context', 'snackbar');\n\n  $: if (snackbar && snackbar.timeoutMs !== timeoutMs) {\n    snackbar.timeoutMs = timeoutMs;\n  }\n\n  $: if (snackbar && snackbar.closeOnEscape !== closeOnEscape) {\n    snackbar.closeOnEscape = closeOnEscape;\n  }\n\n  $: if (snackbar && labelText !== uninitializedValue && snackbar.labelText !== labelText) {\n    snackbar.labelText = labelText;\n  }\n\n  $: if (snackbar && actionButtonText !== uninitializedValue && snackbar.actionButtonText !== actionButtonText) {\n    snackbar.actionButtonText = actionButtonText;\n  }\n\n  onMount(() => {\n    snackbar = new MDCSnackbar(element);\n  });\n\n  onDestroy(() => {\n    snackbar && snackbar.destroy();\n  });\n\n  function handleClosed() {\n    closeResolve();\n    closePromise = new Promise(resolve => closeResolve = resolve);\n  }\n\n  export function open(...args) {\n    waiting = waiting.then(() => {\n      snackbar.open(...args);\n      return closePromise;\n    });\n  }\n\n  export function forceOpen(...args) {\n    return snackbar.open(...args);\n  }\n\n  export function close(...args) {\n    return snackbar.close(...args);\n  }\n\n  export function isOpen() {\n    return snackbar.isOpen;\n  }\n</script>\n","<svelte:component\n  this={component}\n  use={[forwardEvents, ...use]}\n  class=\"{smuiClass} {className}\"\n  {...exclude($$props, ['use', 'class', 'component', 'forwardEvents'])}\n><slot></slot></svelte:component>\n\n<script context=\"module\">\n  export const internals = {\n    component: null,\n    smuiClass: null,\n    contexts: {}\n  };\n</script>\n\n<script>\n  import {setContext} from 'svelte';\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from './forwardEvents.js';\n  import {exclude} from './exclude.js';\n  import {useActions} from './useActions.js';\n\n  export let use = [];\n  let className = '';\n  export {className as class};\n  export let component = internals.component;\n  let smuiForwardEvents = [];\n  export {smuiForwardEvents as forwardEvents};\n\n  const smuiClass = internals.class;\n  const contexts = internals.contexts;\n\n  const forwardEvents = forwardEventsBuilder(get_current_component(), smuiForwardEvents);\n\n  for (let context in contexts) {\n    if (contexts.hasOwnProperty(context)) {\n      setContext(context, contexts[context]);\n    }\n  }\n</script>\n","import ClassAdder, {internals} from './ClassAdder.svelte';\n\nexport function classAdderBuilder(props) {\n  function Component(...args) {\n    Object.assign(internals, props);\n    return new ClassAdder(...args);\n  }\n\n  Component.prototype = ClassAdder;\n\n  // SSR support\n  if (ClassAdder.$$render) {\n    Component.$$render = (...args) => Object.assign(internals, props) && ClassAdder.$$render(...args);\n  }\n  if (ClassAdder.render) {\n    Component.render = (...args) => Object.assign(internals, props) && ClassAdder.render(...args);\n  }\n\n  return Component;\n}","<div\n  use:useActions={use}\n  use:forwardEvents\n  {...exclude($$props, ['use'])}\n><slot></slot></div>\n\n<script>\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from './forwardEvents.js';\n  import {exclude} from './exclude.js';\n  import {useActions} from './useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n\n  export let use = [];\n</script>\n","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Div from '@smui/common/Div.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-snackbar__actions',\n  component: Div,\n  contexts: {}\n});","{#if config}\n  <Snackbar\n    bind:this={component}\n    on:MDCSnackbar:closed={handleClosed}\n    labelText={config.label}\n    {...(config && config.props || {})}\n    {...prefixFilter($$props, 'snackbar$')}\n  >\n    <Label\n      {...prefixFilter($$props, 'label$')}\n    ></Label>\n    {#if config.actions || config.dismissButton}\n      <Actions>\n        {#if config.actions}\n          {#each config.actions as action}\n            <Button\n              on:click={e => action.onClick && action.onClick(e)}\n              {...prefixFilter($$props, 'action$')}\n            >{action.text}</Button>\n          {/each}\n        {/if}\n        {#if config.dismissButton}\n          <IconButton\n            on:click={e => config.onDismiss && config.onDismiss(e)}\n            title=\"{config.dismissTitle || 'Dismiss'}\"\n            {...prefixFilter($$props, 'dismiss$')}\n          >{config.dismissText || 'close'}</IconButton>\n        {/if}\n      </Actions>\n    {/if}\n  </Snackbar>\n{/if}\n\n<script>\n  import {tick} from 'svelte';\n  import Label from '@smui/common/Label.svelte';\n  import Button from '@smui/button/Button.svelte';\n  import IconButton from '@smui/icon-button/IconButton.svelte';\n  import {prefixFilter} from '@smui/common/prefixFilter.js';\n  import Snackbar from '../Snackbar.svelte';\n  import Actions from '../Actions.js';\n\n  let snackbars = [];\n  let component;\n  let config = null;\n  let waiting = false;\n\n  $: if (snackbars.length && !config) {\n    config = snackbars[0];\n    waiting = true;\n  }\n\n  $: if (component && waiting && !component.isOpen()) {\n    component.open();\n    waiting = false;\n  }\n\n  function handleClosed(e) {\n    if (config.onClose) {\n      config.onClose(e);\n    }\n    snackbars.splice(0, 1);\n    snackbars = snackbars;\n    config = null;\n  }\n\n  export function push(config) {\n    snackbars.push(config);\n    snackbars = snackbars;\n  }\n</script>","<script context=\"module\">\r\n import verify from '../../verify';\r\n\r\n // function in our one-and-only <Notify/> component instance\r\n // ... maintained by <Notify/> life-cycle-hooks\r\n let _pushMsgOnSnackbar$comp;\r\n\r\n // pushMsgOnSnackbar(): our exposed programatic interface\r\n // ... accessed via: import {pushMsgOnSnackbar} from './Notify.svelte'\r\n export function pushMsgOnSnackbar(snackbarParams) {\r\n   // verify the proper context\r\n   verify(_pushMsgOnSnackbar$comp, 'toast() setup violation: a <Notify/> component is required to be instantated (at the app root)');\r\n\r\n   // propogate request to our one-and-only <Notify/> component instance\r\n   _pushMsgOnSnackbar$comp(snackbarParams);\r\n }\r\n</script>\r\n\r\n<script>\r\n import Kitchen     from '@smui/snackbar/kitchen';\r\n import {onMount}   from 'svelte';\r\n\r\n // our programmatic interface to the Snackbar kitchen\r\n // ... initialized via bind:this\r\n let kitchen;\r\n\r\n function pushMsgOnSnackbar$comp(snackbarParams) {\r\n   kitchen.push(snackbarParams);\r\n }\r\n\r\n // maintain our external functional binding (when <Notify> is mounted)\r\n onMount(() => {\r\n   // insure only one <Notify/> component\r\n   verify(!_pushMsgOnSnackbar$comp, 'only ONE <Notify/> component should be instantated (at the app root)');\r\n\r\n   // retain our external binding\r\n   _pushMsgOnSnackbar$comp = pushMsgOnSnackbar$comp;\r\n\r\n   // return function to invoke with unmounted\r\n\t return () => _pushMsgOnSnackbar$comp = null;\r\n });\r\n</script>\r\n\r\n<Kitchen bind:this={kitchen}\r\n         snackbar$leading={true}\r\n         snackbar$timeoutMs={4000}\r\n         dismiss$class=\"material-icons\"/>\r\n<!-- snackbar$leading:   grrr - can only set Snackbar position at <Kitchen> instantiation time -->\r\n<!-- snackbar$timeoutMs: grrr - can only define timeout at <Kitchen> instantiation time (4000–10000) -->\r\n<!-- dismiss$class:      configure the close/dismiss control to be the X icon ... FYI: SMUI injects any dismiss$ prefixed prop onto it's dissmiss IconButton -->\r\n\r\n<style>\r\n /* control layout of the snackbar message text */\r\n :global(.mdc-snackbar__label) {\r\n   white-space: pre-wrap; /* honor cr/lf breaks and overall spacing */\r\n }\r\n</style>\r\n","import Notify,\r\n       {pushMsgOnSnackbar} from './Notify.svelte';\r\nimport verify              from '../../verify';\r\nimport checkUnknownArgs    from '../../checkUnknownArgs';\r\nimport {isString,\r\n        isNumber,\r\n        isPlainObject,\r\n        isFunction}        from '../../typeCheck';\r\n\r\n/**\r\n * The one-and-only `<Notify/>` component to be instantiated at the\r\n * app root.\r\n */\r\nexport {\r\n  Notify,\r\n};\r\n\r\nconst DEFAULT = 'APPLY-DEFAULT';\r\n\r\n/**\r\n * Display a toast message to the user.\r\n *\r\n * Example:\r\n * ```js\r\n *   toast({\r\n *     msg:      'You have un-saved changes.\\nif you leave, your changes will NOT be saved!',\r\n *     actions: [ // optional app-specific actions/buttons\r\n *       { txt: 'Discard Changes', action: () => ...callback-logic-here... },\r\n *       { txt: 'Go Back' }\r\n *     ],\r\n *     stacked:     true,  // vertically space msg/buttons (DEFAULT: false)\r\n *     dismissible: false, // user can dismiss early       (DEFAULT: true)\r\n *   });\r\n * ```\r\n * \r\n * **Please Note** this function uses named parameters.\r\n *\r\n * @param {string} msg - the toast message to display (cr/lf are\r\n * supported).\r\n *\r\n * @param {Action[]} [actions=[]] zero or more client-supplied actions\r\n * (button/action combinations).  When clicked, each action will\r\n * implicitly close the toast, in addition to invoking the optional\r\n * client-supplied action callback.  Each action has the following\r\n * form:\r\n * ```js\r\n * {\r\n *   txt:    'Reset',                         // the button label\r\n *   action: () => ...callback-logic-here..., // optional callback\r\n * }\r\n * ```\r\n *\r\n * @param {boolean} [stacked] - an indicator as to whether the\r\n * action buttons are vertically separated from the msg\r\n * ... DEFAULT: stacked when actions supplied.\r\n *\r\n * @param {boolean} [dismissible] - an indicator as to whether\r\n * the user can dismiss the toast dialog early (NOTE: All toasts\r\n * are auto-dismissed over time).\r\n * ... DEFAULT: dismissible when actions are NOT supplied.\r\n *\r\n * @throws {Error} for invalid params.\r\n */\r\nexport function toast({msg, actions=[], stacked=DEFAULT, dismissible=DEFAULT, ...unknownArgs}={}) {\r\n  // verify params\r\n  const check = verify.prefix('toast() parameter violation: ');\r\n  // ... msg\r\n  check(msg,           'msg is required');\r\n  check(isString(msg), `msg must be a string, NOT: ${msg}`);\r\n  // ... actions\r\n  check(Array.isArray(actions), 'actions must be an Action[] array');\r\n  actions.forEach( (action, indx) => {\r\n    check(isPlainObject(action),     `action[${indx}] must be an object literal ... NOT: ${action}`);\r\n    check(action.txt,                `action[${indx}].txt is required`);\r\n    check(isString(action.txt),      `action[${indx}].txt must be a string ... NOT: ${action.txt}`);\r\n    if (action.action) {\r\n      check(isFunction(action.action), `action[${indx}].action (when supplied) must be a function ... NOT: ${action.action}`);\r\n    }\r\n    else {\r\n      action.action = (p) => p;  // no-op default\r\n    }\r\n  });\r\n  const actionsSupplied = actions.length > 0;\r\n  // ... stacked\r\n  if (stacked===DEFAULT) {                    // apply run-time DEFAULT:\r\n    stacked = actionsSupplied ? true : false; // ... stacked with actions\r\n  }\r\n  check(stacked===true || stacked===false, 'stacked must be a boolean');\r\n  // ... dismissible\r\n  if (dismissible===DEFAULT) {                    // apply run-time DEFAULT:\r\n    dismissible = actionsSupplied ? false : true; // ... NOT dismissible with actions\r\n  }\r\n  check(dismissible===true || dismissible===false, 'dismissible must be a boolean');\r\n  // ... duration: NOT: can only set snackbar$timeoutMs at <Kitchen> instantiation time (see <Notify>)\r\n  // check(isNumber(duration), `duration must be a number, NOT: ${duration}`);\r\n  // check(duration >= 4 && duration <= 10, `duration (${duration}) must be a number between 4 and 10 (inclusive).`);\r\n  // ... unknown arguments\r\n  checkUnknownArgs(check, unknownArgs, arguments);\r\n\r\n  // convert toastParams to snackbarParams\r\n  const snackbarParams = {\r\n    props: {\r\n      variant:          stacked ? 'stacked' : '', // stacked: vertically separate msg/buttons\r\n    },\r\n    label:              msg,\r\n    actions:            actions.map( (action) => ({text: action.txt, onClick: action.action}) ),\r\n    dismissButton:      dismissible, // allow user to dismiss early\r\n\r\n  //onDismiss:          () => console.log('xx Dismissed'), // UNNEEDED: fired when user dismisses early\r\n  //onClose:           (e) => console.log('xx Closed'),    // UNNEEDED: fired when closed (either auto or user)\r\n  };\r\n\r\n  // process the request\r\n  pushMsgOnSnackbar(snackbarParams);\r\n}\r\n","import verify               from '../util/verify';\r\nimport {isString,\r\n        isPlainObject,\r\n        isFunction}         from '../util/typeCheck';\r\nimport checkUnknownArgs     from '../util/checkUnknownArgs';\r\nimport pkgManager           from './pkgManager';\r\nimport PseudoClass          from './PseudoClass';\r\nimport DispMode             from './DispMode';\r\nimport createTypeRefHandler from './createTypeRefHandler';\r\nimport SmartClassRef        from './SmartClassRef';\r\n\r\nimport {ChangeManager}      from './changeManager';\r\n\r\nimport crc                  from '../util/crc';\r\nimport {toast}              from '../util/ui/notify';\r\n\r\n/**\r\n * SmartModel is the abstract top-level base class of the visualize-it\r\n * object model. \r\n *\r\n * SmartModel derivations are referred to as \"smartObjects\".  They\r\n * have the following characteristics:\r\n *\r\n * - The class constructor employs namedProps.  This is KEY aspect to\r\n *   make persistence work, because it supports data-driven injection\r\n *   from smartJSON.\r\n *\r\n * The SmartModel base class provides a consistency in:\r\n *\r\n *  - identification (id/name):\r\n *    + constructor({id, name})\r\n *\r\n *  - persistance:\r\n *    + toSmartJSON():smartJSON ................. transforms self (with depth) into smartJSON\r\n *<S> + fromSmartJSON(smartJSON): smartObject ... reconstitutes class-based objects (with depth) from smartJSON\r\n *    + smartClone(): smartObject ............... creates a deep copy of self (used in pseudo constructor - SmartClassRef.createSmartObject(namedParams)))\r\n *    + getEncodingProps(): string[] ............ polymorphically expose properties required to encode self\r\n *\r\n *  - meta info (more found in PseudoClass and SmartClassRef):\r\n *    + getClassRef(): SmartClassRef ... promotes the classRef from which self was created (unifying both real classes and pseudo classes)\r\n *    + diagClassName(): string ........ resolves real class name (unmangled) used in diagnostics (use getClassRef().getClassName() when pseudoClass needs to be interpreted)\r\n */\r\nexport default class SmartModel {\r\n\r\n  /**\r\n   * Create a SmartModel.\r\n   *\r\n   * **Please Note** this constructor uses named parameters.\r\n   *\r\n   * @param {string} id - the unique identifier of this object.\r\n   * @param {string} [name=id] - the human interpretable name of this\r\n   * object (DEFAULT to id).\r\n   */\r\n  constructor({id, name, ...unknownArgs}={}) {\r\n\r\n    // validate parameters\r\n    const check = verify.prefix(`${this.diagClassName()}(id:'${id}', name:'${name}') constructor parameter violation: `);\r\n\r\n    // ... id\r\n    check(id,            'id is required');\r\n    check(isString(id),  'id must be a string');\r\n\r\n    // ... name\r\n    if (name) {\r\n      check(isString(name), 'name (when supplied) must be a string');\r\n    }\r\n\r\n    // ... unknown arguments\r\n    checkUnknownArgs(check, unknownArgs, arguments);\r\n\r\n    // retain parameters in self\r\n    this.id       = id;\r\n    this.name     = name || id;\r\n    this.dispMode = DispMode.view; // ... our dispMode starts out \"viewing\" content\r\n  }\r\n\r\n  /**\r\n   * Return self's object id.\r\n   */\r\n  getId() {\r\n    return this.id;\r\n  }\r\n\r\n  /**\r\n   * Return self's object name.\r\n   */\r\n  getName() {\r\n    return this.name;\r\n  }\r\n\r\n  /**\r\n   * Promote the material icon \"name\" representing self's OO classification.\r\n   *\r\n   * @returns {string} the material icon name for self.\r\n   */\r\n  getIconName() {\r\n    return 'not_listed_location'; // ... a big question mark\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self is a SmartObject (a\r\n   * SmartModel derivation).\r\n   *\r\n   * NOTE: These isaXyz() methods provide a way to perform instanceof\r\n   *       checks without requiring core class imports, which is more\r\n   *       vulnerable to circular dependencies (especially when used\r\n   *       in core)!\r\n   *\r\n   *       As a convenience, this method is fronted by `isSmartObject(ref)`\r\n   *       (found in `util/typeCheck.js`) which accommodates all data\r\n   *       type conditions (undefined, primitives, any object, etc.).\r\n   *\r\n   * @returns {boolean} `true`: self is a SmartObject (a SmartModel\r\n   * derivation), `false` otherwise.\r\n   */\r\n  isaSmartObject() {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Polymorphically reveal self's properties that should be used to\r\n   * reconstitute an equivalent object.\r\n   * \r\n   * The polymorphic knowledge provided by this method allows the\r\n   * many  methods to be fully implemented in the SmartModel\r\n   * base class, including:\r\n   * \r\n   *  - toSmartJSON()\r\n   *  - smartClone()\r\n   *  - getCrc()\r\n   *  - resetBaseCrc()\r\n   *  - areClassesOutOfSync()\r\n   *  - syncClassInstances()\r\n   *  - etc.\r\n   *\r\n   * In the simplest form, this method merely returns a `string[]` of\r\n   * the property names to encode.\r\n   *\r\n   *   ```js\r\n   *   class MyClass extends SmartModel {\r\n   *     getEncodingProps(): {\r\n   *       return ['prop1', 'prop2'];\r\n   *     }\r\n   *     ...\r\n   *   }\r\n   *   ```\r\n   * \r\n   * Sub-classes may accumulate their properties to their parent\r\n   * class, as follows:\r\n   *\r\n   *   ```js\r\n   *   class MyClass extends SmartModel {\r\n   *     getEncodingProps(): {\r\n   *       return [...super.getEncodingProps(), ...['my', 'props', 'too']];\r\n   *     }\r\n   *     ...\r\n   *   }\r\n   *   ```\r\n   * \r\n   * Each element in the returned array may either be:\r\n   *  - a propName: string\r\n   *  - or an ordered pair: `[propName, defaultValue]`\r\n   *    ... defaultValues are an optimization.  Persistence related tasks\r\n   *        will omit values matching defaultValues, because they are\r\n   *        expected to be reconstituted (by default) at\r\n   *        instantiation.  As a result, these defaultValues should\r\n   *        match the constructor default value semantics.\r\n   *\r\n   * As an example of this, let's say that in the sample above, the\r\n   * `too` prop will default to `1` (in the constructor).  With this\r\n   * knowledge, the encoding can be specified as follows:\r\n   *\r\n   *   ```js\r\n   *   class MyClass extends SmartModel {\r\n   *     constructor({my, props, too=1}): {\r\n   *       ...\r\n   *     }\r\n   *     getEncodingProps(): {\r\n   *       return [...super.getEncodingProps(), ...['my', 'props', ['too',1]]];\r\n   *     }\r\n   *     ...\r\n   *   }\r\n   *   ```\r\n   * \r\n   * **Details**:\r\n   *\r\n   * NOT ALL object properties should be encoded.  There are cases\r\n   * where the object state is reconstituted from logic (in the\r\n   * constructor or elsewhere) rather from the content driven by this\r\n   * method.  As an example, temporal working state (such as mounted\r\n   * visuals) should be omitted.\r\n   *\r\n   * Remember this encoding is used to reconstitute an equivalent\r\n   * object.\r\n   *\r\n   * **pseudoClass Details**:\r\n   * \r\n   * pseudoClass implementations have additional considerations in\r\n   * their `getEncodingProps()` implementation.\r\n   * \r\n   * - General Rule: \r\n   * \r\n   *   * pseudoClass INSTANCEs should omit the props that will be\r\n   *     reconstituted by the pseudoClass constructor (i.e. the\r\n   *     pseudoClass MASTER).  This is similar to how a real class\r\n   *     instantiation reconstitutes its internal state.\r\n   * \r\n   *   * pseudoClass MASTERs should include ALL props.\r\n   *\r\n   *   Here is a pseudoClass example taken from `Scene`:\r\n   *   \r\n   *     ```js\r\n   *     getEncodingProps() {\r\n   *     \r\n   *       // define our \"baseline\"\r\n   *       const encodingProps = [['x',0], ['y',0]];\r\n   *     \r\n   *       // for pseudoClass MASTERs, include non-temporal props\r\n   *       // ... see JavaDoc for: SmartModel.getEncodingProps()\r\n   *       if (this.pseudoClass.isType()) {\r\n   *         encodingProps.push('comps');\r\n   *       }\r\n   *     \r\n   *       return [...super.getEncodingProps(), ...encodingProps];\r\n   *     }      \r\n   *     ```\r\n   *\r\n   * @returns {[propName, [propName, defaultValue], ...]} self's\r\n   * property names (string) to be encoded in our smartJSON\r\n   * representation (omitting values that match the optional\r\n   * defaultValue).\r\n   */\r\n  getEncodingProps() {\r\n    return ['id', 'name'];\r\n  }\r\n\r\n  /**\r\n   * Iterate over all self's encoding properties, executing the\r\n   * supplied `cbFn` for each property.\r\n   *\r\n   * As a convenience, the entire encoding structure is deciphered,\r\n   * including:\r\n   *  - propName\r\n   *  - propValue\r\n   *  - defaultValue (optional - when not defined, an obscure\r\n   *    `'DeFaUlT NoT dEfInEd'` value is used)\r\n   *\r\n   * @param {function} cbFn - the callback function to execute for each\r\n   * encoding property.  API:\r\n   *   ```js\r\n   *   + cbFn(propName, propValue, defaultValue): void\r\n   *   ```\r\n   */\r\n  encodingPropsForEach(cbFn) {\r\n\r\n    // validate parameters\r\n    const check = verify.prefix(`${this.diagClassName()}.encodingPropsForEach() parameter violation: `);\r\n    // ... cbFn\r\n    check(cbFn,             'cbFn is required');\r\n    check(isFunction(cbFn), 'cbFn must be a function');\r\n\r\n    // iteration loop\r\n    // ... driven by self's smartObj encoding properties\r\n    const encodingProps = this.getEncodingProps();\r\n    encodingProps.forEach( (prop) => {\r\n      // decipher propName/propValue\r\n      const [propName, defaultValue] = Array.isArray(prop) ? prop : [prop, 'DeFaUlT NoT dEfInEd'];\r\n      const propValue = this[propName];\r\n      \r\n      // callback into invoker realm\r\n      cbFn(propName, propValue, defaultValue);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Provide a reducer, by iterating over all self's encoding\r\n   * properties, executing the supplied `cbFn` (a reducer) for each\r\n   * property, resulting in a single output value.\r\n   *\r\n   * As a convenience, the entire encoding structure is deciphered,\r\n   * including:\r\n   *  - propName\r\n   *  - propValue\r\n   *  - defaultValue (optional - when not defined, an obscure\r\n   *    `'DeFaUlT NoT dEfInEd'` value is used)\r\n   *\r\n   * @param {function} cbFn - the callback reducer function to execute\r\n   * for each encoding property.  API:\r\n   *   ```js\r\n   *   + cbFn(accum, propName, propValue, defaultValue): accumAmalgamation\r\n   *   ```\r\n   *\r\n   * @param {any} initialAccum - the initial accumulation value.  This\r\n   * seeds the `accum` parameter (of the `cbFn()`) for the first\r\n   * iteration.\r\n   *\r\n   * @returns {any} the single output value resulting from the\r\n   * reduction.\r\n   */\r\n  encodingPropsReduce(cbFn, initialAccum) {\r\n\r\n    // validate parameters\r\n    const check = verify.prefix(`${this.diagClassName()}.encodingPropsReduce() parameter violation: `);\r\n    // ... cbFn\r\n    check(cbFn,             'cbFn is required');\r\n    check(isFunction(cbFn), 'cbFn must be a function');\r\n    // ... initialAccum\r\n    check(initialAccum!==undefined, 'initialAccum is required');\r\n\r\n    // iteration loop\r\n    // ... driven by self's smartObj encoding properties\r\n    const encodingProps = this.getEncodingProps();\r\n    const accum = encodingProps.reduce( (accum, prop) => {\r\n      // decipher propName/propValue\r\n      const [propName, defaultValue] = Array.isArray(prop) ? prop : [prop, 'DeFaUlT NoT dEfInEd'];\r\n      const propValue = this[propName];\r\n      \r\n      // callback into invoker realm\r\n      return cbFn(accum, propName, propValue, defaultValue);\r\n    }, initialAccum);\r\n\r\n    // promote the overall accumulation\r\n    return accum;\r\n  }\r\n\r\n\r\n  /**\r\n   * Return the crc hash for this object, uniquely identifying self.\r\n   * \r\n   * This hash is generated as needed, utilizing an optimized cache.\r\n   * \r\n   * NOTE: This algorithm is fully implemented within the SmartModel\r\n   *       base class.  With the polymorphic knowledge of which\r\n   *       properties to process (see getEncodingProps()) it rarely\r\n   *       needs to be overwritten.\r\n   *\r\n   * @returns {number} self's crc hash that uniquely identifies self\r\n   */\r\n  getCrc() {\r\n\r\n    // our type specific handler\r\n    // ... definition is close to usage, but cached for optimization (can be re-used by ANY instance)\r\n    const getCrcRefHandler = handlerCache.getCrcRefHandler = handlerCache.getCrcRefHandler || createTypeRefHandler({\r\n      // fold in null/undefined (just for good measure)\r\n      handleNoRef: (noRef, accumCrc) => crc(noRef, accumCrc),\r\n      // fold in primitive's crc\r\n      handlePrimitive: (primitiveRef, accumCrc) => crc(primitiveRef, accumCrc),\r\n      // fold in array items\r\n      handleArray: (arrRef, accumCrc) => arrRef.reduce( (accum, item) => getCrcRefHandler(item, accum), accumCrc ),\r\n      // fold in the crc of each object property\r\n      handlePlainObj: (plainObjRef, accumCrc) => (\r\n        Object.entries(plainObjRef).reduce( (accum, [subPropName, subPropValue]) => {\r\n          accum = crc(subPropName, accum); // accum the prop name  (string) ... for good measure (shouldn't hurt)\r\n          accum = getCrcRefHandler(subPropValue, accum); // accum the prop value (any type)\r\n          return accum;\r\n        }, accumCrc)\r\n      ),\r\n      // fold in SmartObj.getCrc()\r\n      // ... should be OK to use a crc as the value of another crc calc\r\n      handleSmartObj: (smartObjRef, accumCrc) => crc(smartObjRef.getCrc(), accumCrc),\r\n      // UNSUPPORTED: NON SmartObjects (not plain and not smart)\r\n      handleNonSmartObj(otherObjRef, accum) {\r\n        throw new Error(`***ERROR*** SmartObject.getCrc() traversal encountered an object reference of unsupported type: ${otherObjRef.constructor.name} :-(`);\r\n      },\r\n      // fold in class name (unsure if this is needed)\r\n      handleClass: (classRef, accumCrc) => crc(classRef.name, accumCrc),\r\n    });\r\n\r\n    // calculate/retain our crc as needed\r\n    if (!this._crc) { // ... either first time, or cache is being regenerated\r\n\r\n      // our crc is driven by self's instance properties\r\n      this._crc = this.encodingPropsReduce( (accumCrc, propName, propValue, defaultValue) => {\r\n        // recursively accumulate the crc of each instance props\r\n        // ... interpreting arrays, primitives, and SmartModel\r\n        accumCrc = crc(propName, accumCrc);               // accum the prop name  (string) ... for good measure (shouldn't hurt)\r\n        accumCrc = getCrcRefHandler(propValue, accumCrc); // accum the prop value (any type)\r\n\r\n        return accumCrc;\r\n      }, 0/*initialAccum*/);\r\n\r\n      // console.log(`xx ${this.diagClassName()}.getCrc() CALCULATING CRC from props: ${encodingProps} ... CRC: ${this._crc}`);\r\n    }\r\n    else {\r\n      // console.log(`xx ${this.diagClassName()}.getCrc() using CACHE ... CRC: ${this._crc}`);\r\n    }\r\n\r\n    // that's all folks\r\n    return this._crc;\r\n  }\r\n\r\n  /**\r\n   * Reset self's crc.\r\n   */\r\n  resetCrc() {\r\n    // by clearing _crc (the crc cached result), getCrc() will recalculate it on next request.\r\n    this._crc = undefined;\r\n\r\n    // synchronize self's ChangeMonitor reflective store\r\n    if (this.isaEPkg()) { // ... only for EPkg entries (same as ... `if (this.changeManager) {`)\r\n      this.changeManager.syncMonitoredChange();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self is \"in sync\" with it's\r\n   * base version (i.e. the version saved on disk).\r\n   *\r\n   * An \"out of sync\" state indicates that modifications have occurred,\r\n   * and that a \"save\" operation is needed.\r\n   *\r\n   * @returns {boolean} self's \"in sync\" status with it's base version\r\n   * (true: in-sync, false: out-of-sync).\r\n   */\r\n  isInSync() {\r\n    return this.getBaseCrc() === this.getCrc();\r\n  }\r\n\r\n  /**\r\n   * Return the baseline crc hash for this object.\r\n   *\r\n   * This represents the crc from an initial version (typically a\r\n   * saved resource), and is used to determine when an item is \"out of\r\n   * sync\" (i.e. needs to be saved).\r\n   *\r\n   * @returns {number} self's baseline crc\r\n   */\r\n  getBaseCrc() {\r\n    // NOTE: when NOT defined, we still do NOT want to dynamically save this._baseCrc\r\n    //       - EX:   this._baseCrc = this.getCrc();\r\n    //       - BAD:  it is really too late for this\r\n    //               ... we have no idea if this time represents our baseline\r\n    //       - GOOD: just depend on resetBaseCrc() being invoked at the appropriate times\r\n    return this._baseCrc;\r\n  }\r\n\r\n  /**\r\n   * Reset the baseline crc throughout our containment tree.\r\n   *\r\n   * This represents the crc from an initial version (typically a\r\n   * saved resource), and is used to determine when an item is \"out of\r\n   * sync\" (i.e. needs to be saved).\r\n   * \r\n   * This method is invoked:\r\n   *  - at SmartPkg constructor (covering code-based packages)\r\n   *  - and at persistance time (load/save)\r\n   *  - NO: dynamically on getBaseCrc() ... see NOTE in getBaseCrc()\r\n   * \r\n   * NOTE: This algorithm is fully implemented within the SmartModel\r\n   *       base class.  With the polymorphic knowledge of which\r\n   *       properties to process (see getEncodingProps()) it rarely\r\n   *       needs to be overwritten.\r\n   */\r\n  resetBaseCrc() {\r\n\r\n    // our type specific handler\r\n    // ... definition is close to usage, but cached for optimization (can be re-used by ANY instance)\r\n    const resetBaseCrcRefHandler = handlerCache.resetBaseCrcRefHandler = handlerCache.resetBaseCrcRefHandler || createTypeRefHandler({\r\n      // no-op null/undefined ... resetBaseCrc does NOTHING for NoRef\r\n      handleNoRef: (noRef) => {},\r\n      // no-op primitives ... resetBaseCrc does NOTHING for primitives\r\n      handlePrimitive: (primitiveRef) => {},\r\n      // propagate into our subordinate array items\r\n      handleArray: (arrRef) => arrRef.forEach( (item) => resetBaseCrcRefHandler(item) ),\r\n      // propagate into our subordinate plain objects\r\n      handlePlainObj: (plainObjRef) => Object.values(plainObjRef).forEach( (item) => resetBaseCrcRefHandler(item) ),\r\n      // propagate into our subordinate smartObjs\r\n      handleSmartObj: (smartObjRef) => smartObjRef.resetBaseCrc(),\r\n      // UNSUPPORTED: NON SmartObjects (not plain and not smart)\r\n      handleNonSmartObj(otherObjRef) {\r\n        throw new Error(`***ERROR*** SmartObject.resetBaseCrc() traversal encountered an object reference of unsupported type: ${otherObjRef.constructor.name} :-(`);\r\n      },\r\n      // no-op classes ... currently there is NO crc recorded in raw classes\r\n      handleClass: (classRef) => {},\r\n    });\r\n\r\n    // trickle this request down through our containment tree, driven by self's instance properties\r\n    this.encodingPropsForEach( (propName, propValue, defaultValue) => resetBaseCrcRefHandler(propValue) );\r\n\r\n    // reset self's new baseline crc\r\n    // ... this is done AFTER our lower-level subordinate objects (in the recursive routine above)\r\n    //     - probably NOT necessary, because normally these CRCs are adjusted from the \"ground up\"\r\n    //     - HOWEVER, it doesn't hurt (more of a defensive measure)\r\n    this._baseCrc = this.getCrc();\r\n\r\n    // synchronize self's ChangeMonitor reflective store\r\n    if (this.isaEPkg()) { // ... only for EPkg entries (same as ... `if (this.changeManager) {`)\r\n      this.changeManager.syncMonitoredChange();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Mount the visuals of this node, binding the Konva graphics.\r\n   *\r\n   * Prior to `mount()` execution, the visualize-it object\r\n   * representation is very lightweight.\r\n   *\r\n   * @param {Konva.any} containingKonvaContext - The container of\r\n   * this node (varies - typically a Konva reference).\r\n   */\r\n  mount(containingKonvaContext) {\r\n    throw new Error(`***ERROR*** SmartModel pseudo-interface-violation [id:${this.id}]: ${this.diagClassName()}.mount() is an abstract method that MUST BE implemented!`);\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self is mounted (i.e. bound to the Konva graphics).\r\n   *\r\n   * @returns {boolean} `true`: self is mounted, `false` otherwise\r\n   */\r\n  isMounted() {\r\n    throw new Error(`***ERROR*** SmartModel pseudo-interface-violation [id:${this.id}]: ${this.diagClassName()}.isMounted() is an abstract method that MUST BE implemented!`);\r\n  }\r\n\r\n  /**\r\n   * Unmount the visuals of this node, unbinding the Konva graphics.\r\n   *\r\n   * @param {boolean} [konvaPreDestroyed=false] - an internal\r\n   * parameter that indicates if konva nodes have already been\r\n   * destroyed (when a parent Konva.Node has already issued the\r\n   * konvaNode.destroy()).\r\n   */\r\n  unmount(konvaPreDestroyed=false) {\r\n    throw new Error(`***ERROR*** SmartModel pseudo-interface-violation [id:${this.id}]: ${this.diagClassName()}.unmount() is an abstract method that MUST BE implemented!`);\r\n  }\r\n\r\n  /**\r\n   * Replace self's child reference, defined by the specified params.\r\n   *\r\n   * @param {any} oldRef - the existing child to be replaced with\r\n   * `newRef`.\r\n   *\r\n   * @param {any} newRef - the new child to replace `oldRef`.\r\n   */\r\n  changeChildRef(oldRef, newRef) {\r\n    throw new Error(`***ERROR*** SmartModel pseudo-interface-violation [id:${this.id}]: ${this.diagClassName()}.changeChildRef() is an abstract method that MUST BE implemented!`);\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether the class self was created from\r\n   * is out-of-sync with the latest class definition.\r\n   *\r\n   * Class versioning can become out-of-sync when interactive edits\r\n   * occur to the class master.\r\n   *\r\n   * Currently, this is only operational for pseudo classes.  Real\r\n   * code-based class versioning is not currently tracked, and will\r\n   * always indicate they are in-sync.\r\n   *\r\n   * @returns {boolean} `true`: self's class is out-of-sync with the\r\n   * latest class version, `false` otherwise.\r\n   */\r\n  isClassOutOfSync() {\r\n    // obtain the classRef self was created from\r\n    // ... NOTE: This is the same instance as if we pulled it directly from pkgManager!\r\n    //           e.g. pkgManager.getClassRef(selfsClassRef.getClassPkgId(), selfsClassRef.getClassName());\r\n    const selfsClassRef  = this.getClassRef();\r\n\r\n    // handle pseudo classes\r\n    if (selfsClassRef.isPseudoClass()) {\r\n      // compare the class version self was created from\r\n      // ... NOTE: versionCrcUsedInCreation is maintained by SmartClassRef.createSmartObject()\r\n      // console.log(`xx ${this.diagClassName()}.isClassOutOfSync() ... a pseudoClassInstance from version: : ${this.pseudoClass.versionCrcUsedInCreation} ... selfsClassRef:\\n`, selfsClassRef);\r\n      return selfsClassRef.getClassVersionCrc() !== this.pseudoClass.versionCrcUsedInCreation;\r\n    }\r\n\r\n    // handle real classes\r\n    // ... currently not tracked - consider them in-sync\r\n    return false;\r\n  }\r\n\r\n\r\n  /**\r\n   * Return an indicator as to whether any of the classes that make up\r\n   * self (and it's containment tree) are out-of-sync with the latest\r\n   * class definitions.\r\n   *\r\n   * Class versioning can become out-of-sync when interactive edits\r\n   * occur to the class master.\r\n   *\r\n   * Currently, this is only operational for pseudo classes.  Real\r\n   * code-based class versioning is not currently tracked, and will\r\n   * always indicate they are in-sync.\r\n   *\r\n   * NOTE: This algorithm will short-circuit on the first out-of-sync\r\n   *       class it finds.  This is accomplished using OR logic.\r\n   *\r\n   * @returns {boolean} `true`: some of self's containment classes is\r\n   * out-of-sync with the latest class versions, `false` otherwise.\r\n   */\r\n  areClassesOutOfSync() {\r\n\r\n    // our type specific handler\r\n    // ... definition is close to usage, but cached for optimization (can be re-used by ANY instance)\r\n    const outOfSyncHandler = handlerCache.outOfSyncHandler = handlerCache.outOfSyncHandler || createTypeRefHandler({\r\n      // null/undefined can't be out-of-sync\r\n      handleNoRef: (noRef, accumOutOfSync) => accumOutOfSync || false,\r\n      // primitive's can't be out-of-sync\r\n      handlePrimitive: (primitiveRef, accumOutOfSync) => accumOutOfSync || false,\r\n      // analyze array items\r\n      handleArray: (arrRef, accumOutOfSync) => arrRef.reduce( (accum, item) => accum || outOfSyncHandler(item, accum), accumOutOfSync ),\r\n      // analyze plain object\r\n      handlePlainObj: (plainObjRef, accumOutOfSync) => Object.values(plainObjRef).reduce( (accum, item) => accum || outOfSyncHandler(item, accum), accumOutOfSync ),\r\n      // analyze SmartObj by recursing on our `areClassesOutOfSync()` method\r\n      handleSmartObj: (smartObjRef, accumOutOfSync) => accumOutOfSync || smartObjRef.areClassesOutOfSync(),\r\n      // UNSUPPORTED: NON SmartObjects (not plain and not smart)\r\n      handleNonSmartObj(otherObjRef, accumOutOfSync) {\r\n        throw new Error(`***ERROR*** SmartObject.areClassesOutOfSync() traversal encountered an object reference of unsupported type: ${otherObjRef.constructor.name} :-(`);\r\n      },\r\n      // classes can't be out-of-sync\r\n      handleClass: (classRef, accumOutOfSync) => accumOutOfSync || false,\r\n    });\r\n\r\n    // short-circuit process when we find our first out-of-date\r\n    if (this.isClassOutOfSync()) {\r\n      return true;\r\n    }\r\n\r\n    // trickle this request down through our containment tree, driven by self's instance properties\r\n    return this.encodingPropsReduce( (accumOutOfSync, propName, propValue, defaultValue) => {\r\n      return accumOutOfSync || outOfSyncHandler(propValue, accumOutOfSync); // short-circuit via OR (||)\r\n    }, false/*initialAccum*/);\r\n  }\r\n\r\n  /**\r\n   * Synchronize any out-of-date objects (within self and it's\r\n   * containment tree), bringing them up-to-date with the latest class\r\n   * definitions.\r\n   *\r\n   * Class versioning can become out-of-sync when interactive edits\r\n   * occur to the class master.\r\n   *\r\n   * Currently, this is only operational for pseudo classes.  Real\r\n   * code-based class versioning is not currently tracked, and will\r\n   * always indicate they are in-sync.\r\n   *\r\n   * PREREQUISITE: When invoking this method, the management of the\r\n   * Konva visuals must be addressed by surrounding the invocation\r\n   * with:\r\n   *   1. \"unmounting\" prior to invocation, and\r\n   *   2. \"remounting\" after the invocation\r\n   * Currently this is accomplished by our single invoking agent:\r\n   * `syncOutOfDateClasses()`\r\n   * ... the tabManager logic module that is activated whenever a tab is changed\r\n   *     (src/pkgEntryTabs/syncModelOnActiveTabChange.js).\r\n   */\r\n  syncClassInstances() {\r\n\r\n    // our type specific handler\r\n    // ... definition is close to usage, but cached for optimization (can be re-used by ANY instance)\r\n    const syncClassHandler = handlerCache.syncClassHandler = handlerCache.syncClassHandler || createTypeRefHandler({\r\n      // null/undefined can't be out-of-sync\r\n      handleNoRef: (noRef, accum) => {},\r\n      // primitive's can't be out-of-sync\r\n      handlePrimitive: (primitiveRef, accum) => {},\r\n      // drill into array items\r\n      handleArray: (arrRef, accum) => arrRef.forEach( (item) => syncClassHandler(item) ),\r\n      // drill into plain object\r\n      handlePlainObj: (plainObjRef, accum) => Object.values(plainObjRef).forEach( (item) => syncClassHandler(item) ),\r\n      // analyze SmartObj by recursing on our `syncClassInstances()` method\r\n      handleSmartObj: (smartObjRef, accum) => smartObjRef.syncClassInstances(),\r\n      // UNSUPPORTED: NON SmartObjects (not plain and not smart)\r\n      handleNonSmartObj(otherObjRef, accum) {\r\n        throw new Error(`***ERROR*** SmartObject.syncClassInstances() traversal encountered an object reference of unsupported type: ${otherObjRef.constructor.name} :-(`);\r\n      },\r\n      // classes can't be out-of-sync\r\n      handleClass: (classRef, accum) => {},\r\n    });\r\n\r\n    // when self is out-of-date, resync it!\r\n    if (this.isClassOutOfSync()) {\r\n\r\n      // verify that our Konva visuals have been unmounted\r\n      // ... see PREREQUISITE note (above)\r\n      verify(!this.isMounted(), `${this.diagClassName()}.syncClassInstances() ... invoker must first issue unmount() on self.`);\r\n\r\n      // re-create self by cloning it\r\n      // ... because smartClone() re-instantiates class instances from\r\n      //     the most current class definition, our new instance will be\r\n      //     in-sync!\r\n      // ... NOTE: We must directly issue smartClone() to get the\r\n      //           correct result (picking up the correct instance\r\n      //           state and class state)\r\n      //           NOT: this.getClassRef().createSmartObject()\r\n      //                ... see: \"two-phase\" NOTE in smartClone()\r\n//    const newSelf = this.getClassRef().createSmartObject(); // NO\r\n      const newSelf = this.smartClone();                      // YES\r\n      // console.log(`xx ${this.diagClassName()}.syncClassInstances() self is out-of-date:\\n`, {oldRef: this, newRef: newSelf});\r\n\r\n      // patch in our re-synced newSelf within our containment tree (replacing self)\r\n      // ... both to the \"primary\" containment tree\r\n      const parent = this.getParent();\r\n      if (parent) {\r\n        newSelf.parent = parent;              // ... back-reference\r\n        parent.changeChildRef(this, newSelf); // ... forward-reference\r\n      }\r\n      // ... and the \"view\" containment tree\r\n      const viewParent = this.viewParent;\r\n      if (viewParent) {\r\n        newSelf.viewParent = viewParent;          // ... back-reference\r\n        viewParent.changeChildRef(this, newSelf); // ... forward-reference\r\n      }\r\n\r\n      // short-circuit our process\r\n      // ... there is no need to go any further IN THIS path\r\n      //     BECAUSE this entire containment tree path is now in-sync!\r\n      return;\r\n    }\r\n\r\n    // trickle this request down through our containment tree, driven by self's instance properties\r\n    this.encodingPropsForEach( (propName, propValue, defaultValue) => syncClassHandler(propValue) );\r\n  }\r\n\r\n\r\n  /**\r\n   * Return an indicator as to whether self is a pkg (SmartPkg).\r\n   *\r\n   * NOTE: These isaXyz() methods provide a way to perform instanceof\r\n   *       checks without requiring core class imports, which is more\r\n   *       vulnerable to circular dependencies (especially when used\r\n   *       in core)!\r\n   *\r\n   *       As a convenience, this method is fronted by `isPkg(ref)`\r\n   *       (found in `util/typeCheck.js`) which accommodates all data\r\n   *       type conditions (undefined, primitives, any object, etc.).\r\n   *\r\n   * @returns {boolean} `true`: self is a package (SmartPkg), `false` otherwise.\r\n   */\r\n  isaPkg() {\r\n    return false; // ... NOTE: overridden in SmartPkg\r\n  }\r\n\r\n  /**\r\n   * Return the pkg (SmartPkg) self belongs to (or self when it is a\r\n   * SmartPkg).\r\n   * \r\n   * NOTE: This is the SmartPkg that self belongs to (e.g. 'com.astx.ACME'),\r\n   *       NOT the package self was created from: (e.g. 'core').\r\n   *\r\n   * @returns {SmartPkg} the pkg (SmartPkg) self belongs to (or self\r\n   * when it is a SmartPkg), `undefined` when outside our supported\r\n   * \"primary\" containment tree.\r\n   */\r\n  getPkg() {\r\n    // when self is a SmartPkg, we have found it!\r\n    if (this.isaPkg()) {\r\n      return this;\r\n    }\r\n    // follow our parent chain, till we find the SmartPkg\r\n    const  parent = this.getParent();\r\n    return parent ? parent.getPkg() : undefined;\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self is a PkgEntry or not.\r\n   *\r\n   * PkgEntries are top-level entries registered to a package (SmartPkg).\r\n   * - They are visible in the LeftNav.\r\n   * - They are displayed in a tab (ex: Scene, Collage, Comp).\r\n   * - They are visually critical in monitoring whether they are in-sync\r\n   *   with their file resources.\r\n   *\r\n   * PkgEntries are managed by SmartPkg, simply marking them using the\r\n   * `markAsPkgEntry()` method.\r\n   *\r\n   * NOTE: As a convenience, this method is fronted by `isPkgEntry(ref)`\r\n   *       (found in `util/typeCheck.js`) which accommodates all data\r\n   *       type conditions (undefined, primitives, any object, etc.).\r\n   *\r\n   * @returns {boolean} `true`: self is a PkgEntry, `false` otherwise.\r\n   */\r\n  isaPkgEntry() {\r\n    return this._pkgEntry ? true : false;\r\n  }\r\n\r\n  /**\r\n   * Return the \"qualified\" identifier for a PkgEntry.\r\n   *\r\n   * Example:\r\n   * - 'com.astx.ACME/scene1'\r\n   *\r\n   * @returns {string} self's PkgEntry ID.\r\n   *\r\n   * @throws {Error} when self is NOT a PkgEntry.\r\n   */\r\n  getPkgEntryId() {\r\n    if (this.isaPkgEntry()) {\r\n      return `${this.getPkg().getPkgId()}/${this.getId()}`;\r\n    }\r\n    else {\r\n      throw new Error(`***ERROR*** ${this.diagClassName()}.getPkgEntryId() [id:${this.id}]: self is NOT a PkgEntry!`);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Return the PkgEntry self belongs to (or self when it is a\r\n   * PkgEntry).\r\n   *\r\n   * @returns {PkgEntry} the PkgEntry self belongs to (or self when it\r\n   * is a PkgEntry), `undefined` when outside our supported \"primary\"\r\n   * containment tree.\r\n   */\r\n  getPkgEntry() {\r\n    // when self is a PkgEntry, we have found it!\r\n    if (this.isaPkgEntry()) {\r\n      return this;\r\n    }\r\n    // follow our parent chain, till we find the PkgEntry\r\n    const  parent = this.getParent();\r\n    return parent ? parent.getPkgEntry() : undefined;\r\n  }\r\n\r\n  /**\r\n   * Mark self as a PkgEntry (see notes in `isaPkgEntry()`).\r\n   */\r\n  markAsPkgEntry() {\r\n    // mark self as a PkgEntry\r\n    this._pkgEntry = true;\r\n\r\n    // ALSO: register self (PkgEntry) to changeManager\r\n    // this maintains our this.changeManager linkage\r\n    new ChangeManager(this);\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self is an EPkg:\r\n   * - either a pkg (SmartPkg)\r\n   * - or a pkgEntry (top-level entries registered to a SmartPkg)\r\n   *\r\n   * These two objects are consolidated in the EPkg nomenclature, to\r\n   * accommodate the `changeManager` feature state, where EPkgs are\r\n   * tracked.\r\n   *\r\n   * NOTE: As a convenience, this method is fronted by `isEPkg(ref)`\r\n   *       (found in `util/typeCheck.js`) which accommodates all data\r\n   *       type conditions (undefined, primitives, any object, etc.).\r\n   *\r\n   * EPkgAI: EPkg may be obsolete with Svelte usage (it is an anomaly\r\n   *         of changeManager redux state management)\r\n   *\r\n   * @returns {boolean} `true`: self is an EPkg, `false` otherwise.\r\n   */\r\n  isaEPkg() {\r\n    return this.isaPkg() || this.isaPkgEntry();\r\n  }\r\n\r\n  /**\r\n   * Return the EPkg ID (see notes in isaEPkg).\r\n   *\r\n   * Examples:\r\n   * - 'com.astx.ACME' .......... for pkg (SmartPkg)\r\n   * - 'com.astx.ACME/scene1' ... for pkgEntry\r\n   *\r\n   * EPkgAI: EPkg may be obsolete with Svelte usage (it is an anomaly\r\n   *         of changeManager redux state management)\r\n   *\r\n   * @returns {string} self's EPkg ID.\r\n   *\r\n   * @throws {Error} when self is NOT an EPkg.\r\n   */\r\n  getEPkgId() {\r\n    if (this.isaPkg()) {\r\n      return this.getPkgId();\r\n    }\r\n    else if (this.isaPkgEntry()) {\r\n      return this.getPkgEntryId();\r\n    }\r\n    else {\r\n      throw new Error(`***ERROR*** ${this.diagClassName()}.getEPkgId() [id:${this.id}]: self is NOT an EPkg!`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return self's parent object, with respect to the \"primary\"\r\n   * containment tree (i.e. NOT view related).\r\n   *\r\n   * @returns {SmartObject} the parent object of self, `undefined` for\r\n   * top-level (e.g. SmartPkg).\r\n   */\r\n  getParent() {\r\n    return this.parent;\r\n  }\r\n\r\n  /**\r\n   * Set self's parent object, with respect to the \"primary\"\r\n   * containment tree (i.e. NOT view related).\r\n   *\r\n   * @param {SmartObject} parent - the parent object of self.\r\n   */\r\n  setParent(parent) {\r\n    this.parent = parent;\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self is a view (SmartView).\r\n   *\r\n   * NOTE: These isaXyz() methods provide a way to perform instanceof\r\n   *       checks without requiring core class imports, which is more\r\n   *       vulnerable to circular dependencies (especially when used\r\n   *       in core)!\r\n   *\r\n   *       As a convenience, this method is fronted by `isView(ref)`\r\n   *       (found in `util/typeCheck.js`) which accommodates all data\r\n   *       type conditions (undefined, primitives, any object, etc.).\r\n   *\r\n   * @returns {boolean} `true`: self is a view (SmartView), `false` otherwise.\r\n   */\r\n  isaView() {\r\n    return false; // ... NOTE: overridden in SmartView\r\n  }\r\n\r\n  /**\r\n   * Return the SmartView self belongs to (or self when it is a\r\n   * SmartView)\r\n   *\r\n   * @returns {SmartView} the SmartView self belongs to (or self when\r\n   * it is a SmartView), `undefined` when outside our supported \"view\"\r\n   * containment tree.\r\n   */\r\n  getView() {\r\n    // when self is a SmartView, we have found it!\r\n    if (this.isaView()) {\r\n      return this;\r\n    }\r\n\r\n    // follow our \"view\" containment tree, till we find the SmartView\r\n    const  viewParent = this.getViewParent();\r\n    return viewParent ? viewParent.getView() : undefined;\r\n  }\r\n  \r\n  /**\r\n   * Return self's parent object, with respect to the \"view\"\r\n   * containment tree (i.e. NOT \"primary\" related).\r\n   *\r\n   * @returns {SmartObject} the \"view\" parent object of self,\r\n   * `undefined` when at top (e.g. SmartView).\r\n   */\r\n  getViewParent() {\r\n    // `this.viewParent` takes precedence, otherwise `this.parent` is a \"shared chain\"\r\n    return this.viewParent ? this.viewParent : this.parent;\r\n  }\r\n  \r\n  /**\r\n   * Set self's parent object, with respect to the \"view\" containment\r\n   * tree (i.e. NOT \"primary\" related).\r\n   *\r\n   * @param {SmartObject} parent - the \"view\" parent object of self.\r\n   */\r\n  setViewParent(viewParent) {\r\n    this.viewParent = viewParent;\r\n  }\r\n\r\n  /**\r\n   * Trickle up low-level changes to our parentage (both the \"primary\"\r\n   * and \"view\" containment tree.\r\n   *\r\n   * This propagates changes to various aspects, such as:\r\n   *  - size\r\n   *  - crc\r\n   *\r\n   * The `trickleUpChange()` should be invoked when any change occurs:\r\n   *  - centrally by `changeManger.applyChange()`\r\n   *  - also during an initial mount (replacing \"approximation\" size\r\n   *    with \"exact\" size) ... see: `SmartView.mount()`\r\n   *\r\n   * @param {boolean} [sizeChanged=true] - an internal indicator as to\r\n   * whether size has changed.  This should NOT be set by any public\r\n   * invocation - only by our internal recursion.  It is an\r\n   * optimization, that no-ops size re-calculation when the size has\r\n   * NOT changed.  The entry-level default assumes size may have\r\n   * changed (so it will always check for size changes)\r\n   */\r\n  trickleUpChange(sizeChanged=true) {\r\n\r\n    //***\r\n    //*** manage size (many things can impact container size)\r\n    //***\r\n\r\n    // when self promotes size, and size has changed (in our lower-containment tree)\r\n    // ... regen self's size, keeping track of whether sizeChanged (for optimization)\r\n    if (this.getSize && sizeChanged) {\r\n\r\n      // retain our oldSize\r\n      // ... via our cache (this exists when getSize() previously invoked)\r\n      const oldSize = this.sizeCache ? this.sizeCache : {width:-1, height:-1};\r\n\r\n      // clear our sizeCache allowing getSize() to regenerate\r\n      this.sizeCache = undefined;\r\n\r\n      // regen our size (i.e. our newSize)\r\n      // ... internally, this retains our cache once more :-)\r\n      const newSize = this.getSize();\r\n      \r\n      // perform any static binding of new size\r\n      // ... only when size has changed\r\n      sizeChanged = !(oldSize.width===newSize.width && oldSize.height===newSize.height);\r\n      if (sizeChanged) {\r\n        this.bindSizeChanges(oldSize, newSize);\r\n      }\r\n    }\r\n\r\n    //***\r\n    //*** manage crc changes\r\n    //***\r\n\r\n    // reset self's crc\r\n    // console.log(`xx trickleUpChange(): resetCrc() for ${this.getName()}`, {obj: this});\r\n    this.resetCrc();\r\n\r\n    //***\r\n    //*** trickle up change to higher level\r\n    //***\r\n\r\n    // both to the \"primary\" containment tree\r\n    const parent = this.getParent();\r\n    if (parent) {\r\n      parent.trickleUpChange(sizeChanged);\r\n    }\r\n\r\n    // and the \"view\" containment tree\r\n    const viewParent = this.viewParent;\r\n    if (viewParent) {\r\n      viewParent.trickleUpChange(sizeChanged);\r\n    }\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * Return self's dispMode (maintained in top-level PkgEntry objects - visible in LeftNav and Tabs).\r\n   * @returns {DispMode} the dispMode of self.\r\n   */\r\n  getDispMode() {\r\n    return this.dispMode;\r\n  }\r\n\r\n  /**\r\n   * Set self's dispMode (maintained in top-level PkgEntry objects - visible in LeftNav and Tabs).\r\n   *\r\n   * NOTE: This method should be considered to be private.  Instead,\r\n   *       use `changeManager.changeDispMode(dispMode)` in order to\r\n   *       insure the proper reflection is applied.\r\n   *\r\n   * @param {DispMode} dispMode - the display mode to set.\r\n   *\r\n   * @throws {Error} an Error is thrown if the supplied dispMode is NOT supported.\r\n   *\r\n   * @private\r\n   */\r\n  setDispMode(dispMode) {\r\n\r\n    // validate parameters\r\n    const check = verify.prefix(`${this.diagClassName()}.setDispMode() parameter violation: `);\r\n    // ... dispMode\r\n    check(dispMode,                     'dispMode is required');\r\n    check(dispMode instanceof DispMode, 'dispMode must be a DispMode type');\r\n\r\n    // ... insure self supports this setting\r\n    check(this.canHandleDispMode(dispMode), `does NOT support ${dispMode} :-(`);\r\n    if (dispMode === DispMode.edit) {\r\n      const pkg = this.getPkg();\r\n      check(pkg.canPersist(), \r\n            `The \"${this.getName()}\" resource (id: \"${this.getId()}\") cannot be edited ` + \r\n            `... normally it can, however it belongs to the \"${pkg.getPkgName()}\" package which ` +\r\n            `contains code (therefore you would not be able to save your changes).`);\r\n    }\r\n\r\n    // retain the setting in self\r\n    this.dispMode = dispMode;\r\n\r\n    // fully enable the DispMode operation\r\n    if (dispMode === DispMode.view) {\r\n      this.enableViewMode();\r\n    }\r\n    else if (dispMode === DispMode.edit) {\r\n      this.enableViewMode(); // ... a neutral reset\r\n      this.enableEditMode();\r\n    }\r\n    else if (dispMode === DispMode.animate) {\r\n      this.enableViewMode();    // ... a neutral reset\r\n      this.enableAnimateMode();\r\n    }\r\n    else {\r\n      throw new Error(`***ERROR*** ${this.diagClassName()}.setDispMode() [id:${this.id}]: unrecognized dispMode: ${dispMode}!`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self supports the supplied `dispMode`.\r\n   *\r\n   * @param {DispMode} dispMode - the display mode to evaluate.\r\n   *\r\n   * @returns {boolean} true: can handle, false: not supported.\r\n   */\r\n  canHandleDispMode(dispMode) {\r\n    return true;  // by default, base class assumes all DispModes are supported\r\n  }\r\n\r\n  /**\r\n   * Enable self's \"view\" DispMode (maintained in top-level PkgEntry objects - visible in LeftNav and Tabs).\r\n   *\r\n   * NOTE: this is also invoked prior to other display modes, as a neutral reset :-)\r\n   */\r\n  enableViewMode() {\r\n    throw new Error(`***ERROR*** SmartModel pseudo-interface-violation [id:${this.id}]: ${this.diagClassName()}.enableViewMode() is an abstract method that MUST BE implemented!`);\r\n  }\r\n\r\n  /**\r\n   * Enable self's \"edit\" DispMode (maintained in top-level PkgEntry objects - visible in LeftNav and Tabs).\r\n   */\r\n  enableEditMode() {\r\n    throw new Error(`***ERROR*** SmartModel pseudo-interface-violation [id:${this.id}]: ${this.diagClassName()}.enableEditMode() is an abstract method that MUST BE implemented!`);\r\n  }\r\n\r\n  /**\r\n   * Enable self's \"animate\" DispMode (maintained in top-level PkgEntry objects - visible in LeftNav and Tabs).\r\n   */\r\n  enableAnimateMode() {\r\n    throw new Error(`***ERROR*** SmartModel pseudo-interface-violation [id:${this.id}]: ${this.diagClassName()}.enableAnimateMode() is an abstract method that MUST BE implemented!`);\r\n  }\r\n\r\n\r\n  /**\r\n   * Provide indicator as to whether self can be copied to other sources (i.e. a DnD source)\r\n   *\r\n   * API: DnD\r\n   *\r\n   * @returns {CopySrc} a CopySrc: {type, key} ... null when NOT copyable\r\n   */\r\n  copyable() {\r\n    return null; // ... by default, NOT copyable\r\n  }\r\n\r\n  /**\r\n   * Is the content of the supplied DnD event pastable in self (i.e. a DnD target)\r\n   *\r\n   * API: DnD\r\n   *\r\n   * @param {Event} e - the DnD event\r\n   *\r\n   * @returns {boolean} `true`: content of DnD event IS pastable, `false` otherwise\r\n   */\r\n  pastable(e) {\r\n    return false; // ... by default, NOT pastable\r\n  }\r\n\r\n  /**\r\n   * Perform the DnD paste operation of the supplied DnD event.\r\n   *\r\n   * API: DnD\r\n   *\r\n   * @param {Event} e - the DnD event\r\n   */\r\n  paste(e) {\r\n    throw new Error(`***ERROR*** SmartModel pseudo-interface-violation [id:${this.id}]: ${this.diagClassName()}.paste() is an abstract method that MUST BE implemented!`);\r\n  }\r\n\r\n\r\n  /**\r\n   * An instance method that transforms self (with depth) into\r\n   * smartJSON.\r\n   * \r\n   * NOTE: This algorithm is fully implemented within the SmartModel\r\n   *       base class.  With the polymorphic knowledge of which\r\n   *       properties to encode (see getEncodingProps()) it rarely\r\n   *       needs to be overwritten.\r\n   *\r\n   * REMEMBER: `this` is an object instance of SmartModel (because we are an\r\n   *           instance method).  In other words, this method only handles\r\n   *           SmartModel types (NOT primitives, or other objects, etc.)\r\n   *           As a result, the resulting JSON follows this pattern:\r\n   *\r\n   *           - the master definition of the BoilerScene pseudoClass (a type: Scene)\r\n   *             ```js\r\n   *               {\r\n   *                 smartType: 'Scene',\r\n   *                 smartPkg:  'core',\r\n   *                 id:        'BoilerScene',\r\n   *                 name:      'A Scene focused on the boiler components of our system',\r\n   *                 comps: [\r\n   *                   {...smartObj...},\r\n   *                   {...smartObj...},\r\n   *                 ],\r\n   *               }\r\n   *             ```\r\n   *\r\n   *           - an instance of the BoilerScene pseudoClass (a type: BoilerScene)\r\n   *             ```js\r\n   *               {\r\n   *                 smartType: 'BoilerScene',\r\n   *                 smartPkg:  'ACME',\r\n   *                 id:        'BoilerScene',\r\n   *                 name:      'A Scene focused on the boiler components of our system',\r\n   *                 .... NOTE: all other members are re-constituted from the master definition\r\n   *                            ... i.e. the pseudoClass\r\n   *               }\r\n   *             ```\r\n   *\r\n   * @returns {smartJSON} the smartJSON representation of self.\r\n   */\r\n  toSmartJSON() {\r\n\r\n    // our type specific handler\r\n    // ... definition is close to usage, but cached for optimization (can be re-used by ANY instance)\r\n    const toSmartJSONRefHandler = handlerCache.toSmartJSONRefHandler = handlerCache.toSmartJSONRefHandler || createTypeRefHandler({\r\n      // pass through null/undefined references\r\n      handleNoRef: (noRef, accumJSON) => noRef,\r\n      // pass through primitives\r\n      handlePrimitive: (primitiveRef, accumJSON) => primitiveRef,\r\n      // encode all array items\r\n      handleArray: (arrRef, accumJSON) => arrRef.map( item => toSmartJSONRefHandler(item) ),\r\n      // encode plain object\r\n      handlePlainObj: (plainObjRef, accumJSON) => (\r\n        Object.entries(plainObjRef).reduce( (accum, [subRefName, subRef]) => {\r\n          accum[subRefName] = toSmartJSONRefHandler(subRef);\r\n          return accum;\r\n        }, {} )\r\n      ),\r\n      // encode SmartObjs toSmartJSON()\r\n      handleSmartObj: (smartObjRef, accumJSON) => smartObjRef.toSmartJSON(),\r\n      // UNSUPPORTED: NON SmartObjects (not plain and not smart)\r\n      handleNonSmartObj(otherObjRef, accumJSON) {\r\n        throw new Error(`***ERROR*** SmartObject.toSmartJSON() traversal encountered an object reference of unsupported type: ${otherObjRef.constructor.name} :-(`);\r\n      },\r\n      // UNSUPPORTED: class reference\r\n      handleClass(classRef, accumJSON) {\r\n        throw new Error(`***ERROR*** SmartObject.toSmartJSON() traversal encountered reference of unsupported type - class or function: ${classRef.name} :-(`);\r\n      },\r\n    });\r\n\r\n    // prime our JSON by encoding our smart type information\r\n    // ... using SmartClassRef, this structure considers BOTH real types/classes AND pseudoClasses\r\n    const classRef = this.getClassRef();\r\n    const myJSON = {\r\n      smartType: classRef.getClassName(),\r\n      smartPkg:  classRef.getClassPkgId(),\r\n    };\r\n\r\n    // demark the pseudoClass MASTERs in our JSON, so they can be hydrated early\r\n    // ... see SmartModel.fromSmartJSON()\r\n    if (PseudoClass.isPseudoClassMaster(this)) {\r\n      myJSON.isPseudoClassMaster = true;\r\n    }\r\n\r\n    // encode self's instance properties\r\n    this.encodingPropsForEach( (propName, propValue, defaultValue) => {\r\n      // conditionally accumulate the running JSON structure ONLY WHEN it is NOT the default\r\n      if (propValue !== defaultValue) {\r\n        myJSON[propName] = toSmartJSONRefHandler(propValue);\r\n      }\r\n    });\r\n\r\n    // beam me up Scotty :-)\r\n    return myJSON;\r\n  }\r\n\r\n\r\n  /**\r\n   * Return the classRef from which self was created.\r\n   *\r\n   * This is a meta object that accommodates type/class information\r\n   * for ALL smartObjects, unifying both real classes and pseudo\r\n   * classes!\r\n   *\r\n   * @returns {SmartClassRef} the classRef from which self was\r\n   * created.\r\n   */\r\n  getClassRef() {\r\n\r\n    // validation checks\r\n    const check = verify.prefix(`${this.diagClassName()}.getClassRef() id:'${this.id}', name:'${this.name}') ... `);\r\n\r\n    // interpret pseudoClass instances\r\n    // ... once again, we interpret this structure directly\r\n    //     to avoid reliance on the value-added classRef we are accessing \"in this method\" :-)\r\n    if (this.pseudoClass && this.pseudoClass.isInstance() ) {\r\n\r\n      // the pseudoClass master (it's type) is maintained by the pseudo constructor\r\n      // ... see: SmartClassRef.createSmartObject(namedParams)\r\n      const pseudoClass = this.pseudoClass.pseudoClassMaster;\r\n      check(pseudoClass, 'this pseudoClass instance has NO pseudoClassMaster reference ... you must create it with SmartClassRef.createSmartObject()');\r\n\r\n      // the smartClassRef is maintained by the SmartPkg package manager\r\n      const pseudoClassRef = pseudoClass.smartClassRef;\r\n      check(pseudoClassRef, 'this pseudoClass instance has NO smartClassRef reference ... it must be managed by a SmartPkg');\r\n\r\n      return pseudoClassRef;\r\n    }\r\n\r\n    // interpret a real class instances (the only other case)\r\n    // ... NOTE: even pseudoClass Masters revert to their real class :-)\r\n\r\n    // the real class is defined by standard JavaScript constructs\r\n    const realClass = this.constructor;\r\n\r\n    // the smartClassRef is maintained by the SmartPkg package manager\r\n    const realClassRef = realClass.smartClassRef;\r\n    check(realClassRef, 'this real class instance has NO smartClassRef reference ... it must be managed by a SmartPkg');\r\n\r\n    return realClassRef;\r\n  }\r\n\r\n  /**\r\n   * Return self's \"real\" class name, used for diagnostic purposes\r\n   * (such as logs and errors).  The name is unmangled (even in\r\n   * production builds).\r\n   *\r\n   * NOTE: Any usage that requires interpretation of pseudo classes,\r\n   *       should use:\r\n   *         this.getClassRef().getClassName()\r\n   *       This is only available once package containers have been\r\n   *       registered (e.g. pkgManager.registerPkg(smartPkg)!\r\n   *\r\n   * @returns {string} self's \"real\" class name.\r\n   */\r\n  diagClassName() {\r\n    return this.constructor.unmangledName || this.constructor.name;\r\n  }\r\n\r\n  /**\r\n   * A static method that reconstitutes class-based objects (with\r\n   * depth) from smartJSON.  By class-based objects we mean it will have\r\n   * all the behavior (i.e. methods and state) of the original object.\r\n   *\r\n   * @param {JSON} smartJSON - the smartJSON structure representing\r\n   * the object(s) to create.\r\n   *\r\n   * @returns {smartObject} a newly instantiated class-based object\r\n   * from the supplied smartJSON.\r\n   *\r\n   * @throws {Error} an Error is thrown when the process could not\r\n   * successfully complete.\r\n   */\r\n  static fromSmartJSON(smartJSON) {\r\n\r\n    // validate supplied parameters\r\n    const check = verify.prefix('SmartModel.fromSmartJSON(smartJSON) parameter violation: ');\r\n    // ... smartJSON\r\n    check(smartJSON,                     'smartJSON is required');\r\n    check(isPlainObject(smartJSON),      'smartJSON must be a JSON structure');\r\n    check(isString(smartJSON.smartType), 'smartJSON must be a JSON structure for a SmartObject (a SmartModel derivation)');\r\n\r\n    // ***\r\n    // *** Preliminary Setup\r\n    // ***\r\n\r\n    // the pkgId being resolved (defined when hydrating a top-level SmartPkg)\r\n    let pkgIdBeingResolved = null;\r\n\r\n    // our catalogs of preresolved objects - pseudoClassMasters\r\n    // ... objects in these catalogs are implicitly part of the pkg: pkgIdBeingResolved\r\n\r\n    // preresolvedObjects: optimize hydrateObject() so it doesn't have to resolve preresolved objects twice\r\n    //   KEY              VALUE                         \r\n    //   ===============  ==============================\r\n    //   jsonFragmentObj  smartObj (a pseudoClassMaster)\r\n    const preresolvedObjects = new Map();\r\n\r\n    // preresolvedPseudoClassMasters: supplements resolveClassRefFromSmartJSON() for self-referencing pseudoClasses\r\n    //   KEY              VALUE                         \r\n    //   ===============  ==============================\r\n    //   className        smartObj (a pseudoClassMaster)  \r\n    const preresolvedPseudoClassMasters = new Map();\r\n\r\n\r\n    // a convenience function that resolves the classRef of the supplied smartJSON\r\n    // - combining the standard external pkgManager class resolver\r\n    // - with the self-referencing pseudoClasses of the pkg being resolved\r\n    // RETURN: classRef (a SmartClassRef)\r\n    // THROW:  Error when the class was not resolved\r\n    function resolveClassRefFromSmartJSON(smartJSON) {\r\n\r\n      // glean our pkgId and className from the supplied smartJSON\r\n      const pkgId     = smartJSON.smartPkg;\r\n      const className = smartJSON.smartType;\r\n\r\n      // preresolvedPseudoClassMasters catalog takes precedence\r\n      // ... objects in this catalog are implicitly part of the pkg: pkgIdBeingResolved\r\n      //     SO the request must match this pkg\r\n      if (pkgId === pkgIdBeingResolved) {\r\n        const pseudoClassMaster = preresolvedPseudoClassMasters.get(className);\r\n        if (pseudoClassMaster) { // ... found it\r\n          // NOTE: the .smartClassRef dereference is the same thing that is done in\r\n          //       SmartPkg.getClassRef(className)\r\n          //       via: pkgManager.getClassRef(pkgId, className)\r\n          return pseudoClassMaster.smartClassRef;\r\n        }\r\n      }\r\n\r\n      // fallback to the standard external pkgManager class resolver\r\n      try {\r\n        return pkgManager.getClassRef(pkgId, className);\r\n      }\r\n      catch (err) {\r\n        // supplement errors with logs and an \"attempting to\" directive\r\n        console.log(`***ERROR*** SmartModel.fromSmartJSON() could not resolve pkgId: ${pkgId} / className: ${className} ` +\r\n                    `... smartJSON: ${JSON.stringify(smartJSON, null, 2)}`);\r\n        throw err.defineAttemptingToMsg('hydrate smartObj (see logs for smartJson)');\r\n      }\r\n    }\r\n\r\n\r\n    // ***\r\n    // *** PHASE-1: Preresolve any pseudoClass MASTER definitions\r\n    // ***          ... in support of self-referencing pseudoClasses\r\n    // ***              ex: a collage referencing self-contained scene instances\r\n    // ***\r\n\r\n    // PHASE-1 is only executed when we are hydrating SmartPkg objects\r\n    // ... this is the only place where there can be self-referencing pseudoClasses\r\n    if (smartJSON.smartType === 'SmartPkg') {\r\n\r\n      // retain the pkgId being resolved\r\n      // NOTE: for SmartPkg JSON, the top-level id IS the package ID\r\n      //       ... see: SmartPkg.getPkgId()\r\n      pkgIdBeingResolved = smartJSON.id;\r\n\r\n      // recursively preresolve our pseudoClass MASTER definitions\r\n      preresolvePseudoClassMasters(smartJSON.rootDir);\r\n    }\r\n\r\n    // our recursive function that preresolves the pseudoClass MASTERs\r\n    // UPDATES: preresolvedObjects/preresolvedPseudoClassMasters catalogs\r\n    function preresolvePseudoClassMasters(jsonPkgTree) {\r\n\r\n      // recurse directories (PkgTreeDir)\r\n      if (jsonPkgTree.smartType === 'PkgTreeDir') {\r\n        jsonPkgTree.entries.forEach( (jsonSubEntry) => preresolvePseudoClassMasters(jsonSubEntry));\r\n      }\r\n\r\n      // process directory entries (PkgTreeEntry)\r\n      else if (jsonPkgTree.smartType === 'PkgTreeEntry') {\r\n\r\n        // process jsonPkgTree.entry (SmartPallet)\r\n        const jsonSmartPallet = jsonPkgTree.entry;\r\n\r\n        // hydrate our pseudoClass MASTERs early\r\n        // ... IMPORTANT: this is the reason we are pre-processing!\r\n        // ... NOTE: pseudoClass MASTERs are never nested,\r\n        //           so there is NO NEED to drill any further deep!\r\n        if (jsonSmartPallet.isPseudoClassMaster) {\r\n\r\n          // morph into a real object\r\n          const resolvedObj = hydrateObject(jsonSmartPallet);\r\n\r\n          // adorn the .smartClassRef early (normally done by SmartPkg at the end of it's construction)\r\n          // NOTE: SmartClassRef is NOT serializable (because it is NOT a SmartModel derivation)\r\n          resolvedObj.smartClassRef = new SmartClassRef(resolvedObj, pkgIdBeingResolved);\r\n\r\n          // catalog this pseudoClassMaster\r\n          // ... optimize hydrateObject() so it doesn't have to resolve preresolved objects twice\r\n          preresolvedObjects.set(jsonSmartPallet, resolvedObj);\r\n          // ... supplements resolveClassRefFromSmartJSON() for self-referencing pseudoClasses\r\n          //     NOTE: for pseudoClassMasters, the id IS the className\r\n          preresolvedPseudoClassMasters.set(resolvedObj.getId(),  resolvedObj);\r\n        }\r\n      }\r\n\r\n      // unexpected jsonPkgTree\r\n      // ... defensive only (should never happen)\r\n      else {\r\n        console.warn('SmartModel.fromSmartJSON(smartJson).preresolvePseudoClassMasters(jsonPkgTree) PHASE-1: UNEXPECTED JSON NODE (expecting a PkgTree derivation) ... ', {jsonPkgTree, smartJSON});\r\n      }\r\n    }\r\n\r\n\r\n    // ***\r\n    // *** PHASE-2: Fully hydrate the entire object\r\n    // *** \r\n\r\n    // top-level invocation, resolving the requested object\r\n    // ... THIS IS IT (the primary return from SmartModel.fromSmartJSON(smartJSON))\r\n    return hydrateObject(smartJSON);\r\n\r\n    // our recursive function that fully resolves the requested object\r\n    // RETURNS: the class-based object representing the supplied smartJSON\r\n    function hydrateObject(smartJSON) {\r\n\r\n      // handle objects that have been pre-resolved in PHASE-1\r\n      // ... strictly an optimization (we COULD re-hydrate it a second time)\r\n      const preresolvedObject = preresolvedObjects.get(smartJSON);\r\n      if (preresolvedObject) {\r\n        return preresolvedObject;\r\n      }\r\n\r\n      // handle NO smartJSON\r\n      // ... simply pass it through (null, undefined, etc. ... even false is OK :-)\r\n      else if (!smartJSON) {\r\n        return smartJSON;\r\n      }\r\n\r\n      // handle arrays ... simply recursively decode all array items\r\n      else if (Array.isArray(smartJSON)) {\r\n        return smartJSON.map( item => hydrateObject(item) );\r\n      }\r\n\r\n      // handle JSON objects\r\n      // ... two types (see below)\r\n      else if (isPlainObject(smartJSON)) {\r\n\r\n        // handle smartObjs (class-based object derivations of SmartModel)\r\n        if (smartJSON.smartType) {\r\n\r\n          // define our namedProps to feed into our constructor (from smartJSON),\r\n          // recursively resolving each ref into real class-based objects (as needed)\r\n          const namedProps = {};\r\n          for (const key in smartJSON) {\r\n            const val = smartJSON[key];\r\n\r\n            // bypass selected keywords that are NOT part of the constructor namedProps\r\n            if (key === 'smartType' || key === 'smartPkg' || key === 'isPseudoClassMaster') { // type info is for decoding only\r\n              continue;\r\n            }\r\n\r\n            // recursively resolve each val into a real class-based object\r\n            namedProps[key] = hydrateObject(val);\r\n          }\r\n\r\n          // determine the classRef (could be a real class or a pseudoClass)\r\n          const classRef = resolveClassRefFromSmartJSON(smartJSON);\r\n\r\n          // instantiate a real class-based object using our value-added constructor\r\n          // that handles BOTH real classes and pseudoClasses\r\n          if (!classRef.createSmartObject) {\r\n            debugger;\r\n          }\r\n          return classRef.createSmartObject(namedProps);\r\n        }\r\n\r\n        // handle plain NON class-based objects\r\n        // ... simply decode each item recursively\r\n        //     NOTE: This is a hold-over to the OLD SmartPkg.entries (which was a free-formed structure)\r\n        //           TECHNICALLY, it is NOT needed\r\n        //           HOWEVER, it doesn't hurt to keep it\r\n        else {\r\n          const plainObj = Object.entries(smartJSON).reduce( (accum, [subName, subRef]) => {\r\n            accum[subName] = hydrateObject(subRef) ;\r\n            return accum;\r\n          }, {} );\r\n          return plainObj;\r\n        }\r\n      }\r\n      \r\n      // all other types are assumed to be immutable primitives, and simply passed through :-)\r\n      // ... string, number, etc.\r\n      return smartJSON;\r\n    }\r\n\r\n  } // end of ... SmartModel.fromSmartJSON(smartJSON)\r\n\r\n\r\n  /**\r\n   * Create a deep copy of self that is up-to-date with the latest\r\n   * class versioning.\r\n   * \r\n   * Within this cloning process, object creation is still based on\r\n   * class instantiation.\r\n   * \r\n   * The hallmark of smartClone() is it is designed to generate deep\r\n   * copies of self that are up-to-date with the latest class\r\n   * versioning.\r\n   *\r\n   * - Class versioning can become out-of-sync when interactive edits\r\n   *   occur to the class master.\r\n   *   \r\n   * - Currently, this is only operational for pseudo classes.  Real\r\n   *   code-based class versioning is not currently tracked, and will\r\n   *   always indicate they are in-sync.\r\n   *\r\n   * INTERNAL NOTE: \"two-phase\" process\r\n   *\r\n   *   There is a very subtle (and powerful) characteristic of\r\n   *   smartClone() that can be confusing.  When cloning pseudoClass\r\n   *   INSTANCES, we need to pull in characteristics from BOTH\r\n   *   instance state and pseudo-class state.  This is accomplished\r\n   *   through a \"two-phase\" process, where smartClone() is invoked\r\n   *   twice.\r\n   *\r\n   *   To make sense of this, let's look a Scene object (a\r\n   *   pseudoClass).  A scene INSTANCE can reside in a collage, and if\r\n   *   the scene MASTER is updated, the collage reference to that\r\n   *   scene INSTANCE must be updated.\r\n   *\r\n   *   PHASE 1:\r\n   *    - scene.smartClone() is invoked\r\n   *    - the \"instance\" properties are accumulated [x,y]\r\n   *      ... these are the translation characteristics of where the\r\n   *          scene instance is placed in the collage\r\n   *      ... this is accomplished based on the dynamics of\r\n   *          this.getEncodingProps()\r\n   *    - the clonedCopy is requested via:\r\n   *      classRef.createSmartObject(namedProps) ... passing {x,y} as namedProps\r\n   *\r\n   *   PHASE 2:\r\n   *    - scene.smartClone({x,y}) is invoked a second time\r\n   *      * because createSmartObject() is processing a pseudoClass, \r\n   *        it issues another smartClone() request\r\n   *      * IMPORTANT: however, this time self is the pseudoClass MASTER\r\n   *                   NOT the pseudoClass INSTANCE (from Phase 1).\r\n   *      * IMPORTANT: and the overridingNamedProps param includes the\r\n   *                   {x,y} from Phase 1.\r\n   *    - the \"class\" properties are now accumulated [comps]\r\n   *      ... these are what makes the pseudoClass a class: \r\n   *          i.e. the components are part of the \"Scene\" pseudoClass!\r\n   *      ... this is accomplished based on the dynamics of\r\n   *          this.getEncodingProps()\r\n   *    - the clonedCopy is requested via:\r\n   *      classRef.createSmartObject(namedProps) ... passing {x,y,comps} as namedProps\r\n   *      * because the classRef is the \"real\" Scene class it is instantiate\r\n   *        using `new Scene(...)` semantics\r\n   *      * KOOL: we have accumulated BOTH the appropriate \"instance\" and \"class\" properties!!!\r\n   *\r\n   *\r\n   * NOTE: This algorithm is fully implemented within the SmartModel\r\n   *       base class.  With the polymorphic knowledge of which\r\n   *       properties to encode (see getEncodingProps()) it rarely\r\n   *       needs to be overwritten.\r\n   *\r\n   * @param {ObjectLiteral} [overridingNamedProps] - The optional\r\n   * named properties that when supplied will override the members of\r\n   * self that are to be deeply cloned.\r\n   *\r\n   * @returns {smartObject} a deep copy of self that is up-to-date\r\n   * with the latest class versioning.\r\n   */\r\n  smartClone(overridingNamedProps={}) {\r\n\r\n    // our type specific handler\r\n    // ... definition is close to usage, but cached for optimization (can be re-used by ANY instance)\r\n    const smartCloneRefHandler = handlerCache.smartCloneRefHandler = handlerCache.smartCloneRefHandler || createTypeRefHandler({\r\n      // pass through null/undefined references\r\n      handleNoRef: (noRef, accumClone) => noRef,\r\n      // pass through primitives ... clone is N/A because they are immutable\r\n      handlePrimitive: (primitiveRef, accumClone) => primitiveRef,\r\n      // encode all array items\r\n      handleArray: (arrRef, accumClone) => arrRef.map( item => smartCloneRefHandler(item) ),\r\n      // encode plain object\r\n      handlePlainObj: (plainObjRef, accumClone) => (\r\n        Object.entries(plainObjRef).reduce( (accum, [subRefName, subRef]) => {\r\n          accum[subRefName] = smartCloneRefHandler(subRef);\r\n          return accum;\r\n        }, {} )\r\n      ),\r\n      // encode SmartObjs smartClone()\r\n      handleSmartObj: (smartObjRef, accumClone) => smartObjRef.smartClone(),\r\n      // UNSUPPORTED: NON SmartObjects (not plain and not smart)\r\n      handleNonSmartObj(otherObjRef, accumClone) {\r\n        throw new Error(`***ERROR*** SmartObject.smartClone() traversal encountered an object reference of unsupported type: ${otherObjRef.constructor.name} :-(`);\r\n      },\r\n      // pass-through classes as-is (i.e. clone is N/A because they are immutable)\r\n      handleClass: (classRef, accumClone) => classRef,\r\n    });\r\n\r\n    // clone self's properties by recursively drilling through entire tree with depth\r\n    // ... recursion is handled by our internal smartCloneRefHandler() function\r\n    const clonedProps = this.encodingPropsReduce( (accumProps, propName, propValue, defaultValue) => {\r\n\r\n      // clone each prop ONLY if it is not specified in our overridingNamedProps param\r\n      if ( !overridingNamedProps.hasOwnProperty(propName) ) {\r\n        const clonedValue    = smartCloneRefHandler(propValue); // clone our propValue\r\n        accumProps[propName] = clonedValue;                     // accumulate our running clonedProps\r\n      }\r\n      return accumProps;\r\n\r\n    }, {}/*initialAccum*/);\r\n\r\n    // accumulate all namedProps for our constructor\r\n    // ... overridingNamedProps param take precedence\r\n    //     -and- supports overrides that are NOT part of our instance members\r\n    const namedProps = {...clonedProps, ...overridingNamedProps};\r\n    // console.log(`xx ${this.diagClassName()}.smartClone() instantiating new object with following params:\\n`, {clonedProps, overridingNamedProps, namedProps});\r\n\r\n    // instantiate a new copy of self (our cloned copy)\r\n    // NOTE: Our entire cloning and persistance architecture is based on\r\n    //       SmartModel constructors using named parameters!\r\n    // NOTE: We must use classRef.createSmartObject() to get the\r\n    //       correct result (picking up the correct instance\r\n    //       state and class state)\r\n    //       NOT: new this.constructor(namedProps)\r\n    //            ... see: \"two-phase\" NOTE (in self's JavaDoc)\r\n//  const clonedCopy = new this.constructor(namedProps);                 // NO\r\n    const clonedCopy = this.getClassRef().createSmartObject(namedProps); // YES\r\n\r\n    // that's all folks :-)\r\n    return clonedCopy;\r\n  } // end of ... smartClone() method\r\n\r\n} // end of ... SmartModel class\r\nSmartModel.unmangledName = 'SmartModel';\r\n\r\n\r\n//******************************************************************************\r\n//*** Specifications\r\n//******************************************************************************\r\n\r\n/**\r\n * @typedef {Object} smartObject\r\n *\r\n * smartObject is an object instance that is a SmartModel derivation.  It\r\n * has the following characteristics:\r\n *\r\n * - The class constructor employs namedProps.  This is KEY aspect to\r\n *   make persistence work, because it supports data-driven injection\r\n *   from smartJSON.\r\n */\r\n\r\n\r\n/**\r\n * @typedef {JSON} smartJSON\r\n * \r\n * smartJSON is a self-contained JSON structure that can be\r\n * re-constituted back into a class-based object representation.\r\n * \r\n * - it supports object containment (i.e. objects with depth),\r\n *   allowing an entire object tree to be  JSONized\r\n * \r\n * - it is used for BOTH persistence and functional state management\r\n *   (in redux).\r\n * \r\n * - it is created by:\r\n *   ```\r\n *   SmartModel.prototype.toSmartJSON()\r\n *   ```\r\n * \r\n * - it is used to reconstitute class-based objects, via:\r\n *   ```\r\n *   SmartModel.fromSmartJSON(smartJSON)\r\n *   ```\r\n */\r\n\r\n\r\n/**\r\n * @typedef {{width, height}} Size\r\n * \r\n * A `size` consisting of {width, height}.\r\n */\r\n\r\n\r\n/**\r\n * @typedef {ref} ObjectLiteral\r\n * \r\n * A plain object, such as an object literal ...  `{a: 1, b: 2}` used\r\n * in JSON structures, namedProps, etc.\r\n */\r\n\r\n\r\n\r\n//******************************************************************************\r\n//*** Internal Helpers\r\n//******************************************************************************\r\n\r\n/**\r\n * A static cache of all `createTypeRefHandler()` functions.  These\r\n * functions can be re-used for ANY SmartObject instance.  This cache\r\n * is used to support the preference of creating the functions in-line\r\n * (so as to live close to the usage code).\r\n */\r\nconst handlerCache = {\r\n  // [functName]: function,\r\n  // ...\r\n};\r\n","import SmartModel        from './SmartModel';\r\nimport verify            from '../util/verify';\r\nimport checkUnknownArgs  from '../util/checkUnknownArgs';\r\n\r\n/**\r\n * SmartPallet is an abstract base class representing the graphical\r\n * perspective that visualizes a system (either in part or whole).\r\n */\r\nexport default class SmartPallet extends SmartModel {\r\n\r\n  /**\r\n   * Create a SmartPallet.\r\n   *\r\n   * **Please Note** this constructor uses named parameters.\r\n   *\r\n   * @param {string} id - the unique identifier of this pallet.\r\n   * @param {string} [name=id] - the human interpretable name of this\r\n   * pallet (DEFAULT to id).\r\n   */\r\n  constructor({id, name, ...unknownArgs}={}) {\r\n    super({id, name});\r\n\r\n    // validate SmartPallet() constructor parameters\r\n    const check = verify.prefix('SmartPallet() constructor parameter violation: ');\r\n    // ... id/name validated by base class\r\n    // ... unknown arguments\r\n    checkUnknownArgs(check, unknownArgs, arguments);\r\n  }\r\n\r\n  /**\r\n   * Get self's current size (dynamically calculated).\r\n   *\r\n   * @returns {Size} self's current size ... {width, height}.\r\n   */\r\n  getSize() {\r\n    throw new Error(`***ERROR*** SmartPallet pseudo-interface-violation [id:${this.id}]: ${this.diagClassName()}.getSize() is an abstract method that MUST BE implemented!`);\r\n  }\r\n\r\n  /**\r\n   * Perform any static binding of self's size change (such as HTML or\r\n   * Konva bindings).\r\n   *\r\n   * @param {Size} oldSize - the previous size ... {width, height}.\r\n   * @param {Size} newSize - the new size ... {width, height}.\r\n   */\r\n  bindSizeChanges(oldSize, newSize) {\r\n    throw new Error(`***ERROR*** SmartPallet pseudo-interface-violation [id:${this.id}]: ${this.diagClassName()}.bindSizeChanges() is an abstract method that MUST BE implemented!`);\r\n  }\r\n\r\n  /**\r\n   * Translate the supplied DnD event's absolute page coordinates to\r\n   * canvas coordinates for self's SmartPallet.\r\n   *\r\n   * This algorithm considers things like page offsets and content\r\n   * scrolling.\r\n   *\r\n   * API: DnD\r\n   *\r\n   * @param {DnDEvent} event - the DnD event containing the absolute\r\n   * coordinates.\r\n   *\r\n   * @returns {Coord} the translated coordinate ... {x, y}.\r\n   */\r\n  dndCanvasCoord(event) {\r\n    // accumulate the page offsets and scrolling\r\n    // ... Unlike the konva-based canvas, our viewContainer has the parentage\r\n    //     we need to calculate offsets!\r\n    //     MORE DETAIL:\r\n    //     - The DnD event.target will be a canvas, however it has NO parentage\r\n    //       (something related to Konva).\r\n    //     - As a result, we calculate offsets from our viewContainer\r\n    //       (i.e. self's SmartPallet).\r\n    const viewContainer = this.getView().containingHtmlElm;\r\n    const offset        = accumDomCoordOffset(viewContainer);\r\n\r\n    // return the canvas coordinate\r\n    // ... a combination of the event's absolute x/y, adjusted by our offset\r\n    return {\r\n      x: event.clientX - offset.x,\r\n      y: event.clientY - offset.y,\r\n    };\r\n  }\r\n\r\n}\r\nSmartPallet.unmangledName = 'SmartPallet';\r\n\r\n\r\n// recursive helper function of dndCanvasCoord() method\r\nfunction accumDomCoordOffset(elm, offsetCoord={x:0, y:0}) {\r\n\r\n  // account for offsets\r\n  if (elm.offsetLeft)\r\n    offsetCoord.x += elm.offsetLeft;\r\n  if (elm.offsetTop)\r\n    offsetCoord.y += elm.offsetTop;\r\n\r\n  // account for scrolling\r\n  if (elm.scrollLeft)\r\n    offsetCoord.x -= elm.scrollLeft;\r\n  if (elm.scrollTop)\r\n    offsetCoord.y -= elm.scrollTop;\r\n\r\n  // recurse up parent chain\r\n  if (elm.parentNode) {\r\n    return accumDomCoordOffset(elm.parentNode, offsetCoord);\r\n  }\r\n\r\n  // that's all folks\r\n  return offsetCoord;\r\n}\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PI_OVER_180 = Math.PI / 180;\nfunction detectBrowser() {\n    return (typeof window !== 'undefined' &&\n        ({}.toString.call(window) === '[object Window]' ||\n            {}.toString.call(window) === '[object global]'));\n}\nvar _detectIE = function (ua) {\n    var msie = ua.indexOf('msie ');\n    if (msie > 0) {\n        return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n    }\n    var trident = ua.indexOf('trident/');\n    if (trident > 0) {\n        var rv = ua.indexOf('rv:');\n        return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n    }\n    var edge = ua.indexOf('edge/');\n    if (edge > 0) {\n        return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n    }\n    return false;\n};\nexports._parseUA = function (userAgent) {\n    var ua = userAgent.toLowerCase(), match = /(chrome)[ /]([\\w.]+)/.exec(ua) ||\n        /(webkit)[ /]([\\w.]+)/.exec(ua) ||\n        /(opera)(?:.*version|)[ /]([\\w.]+)/.exec(ua) ||\n        /(msie) ([\\w.]+)/.exec(ua) ||\n        (ua.indexOf('compatible') < 0 &&\n            /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua)) ||\n        [], mobile = !!userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i), ieMobile = !!userAgent.match(/IEMobile/i);\n    return {\n        browser: match[1] || '',\n        version: match[2] || '0',\n        isIE: _detectIE(ua),\n        mobile: mobile,\n        ieMobile: ieMobile\n    };\n};\nexports.glob = typeof global !== 'undefined'\n    ? global\n    : typeof window !== 'undefined'\n        ? window\n        : typeof WorkerGlobalScope !== 'undefined'\n            ? self\n            : {};\nexports.Konva = {\n    _global: exports.glob,\n    version: '6.0.0',\n    isBrowser: detectBrowser(),\n    isUnminified: /param/.test(function (param) { }.toString()),\n    dblClickWindow: 400,\n    getAngle: function (angle) {\n        return exports.Konva.angleDeg ? angle * PI_OVER_180 : angle;\n    },\n    enableTrace: false,\n    _pointerEventsEnabled: false,\n    hitOnDragEnabled: false,\n    captureTouchEventsEnabled: false,\n    listenClickTap: false,\n    inDblClickWindow: false,\n    pixelRatio: undefined,\n    dragDistance: 3,\n    angleDeg: true,\n    showWarnings: true,\n    dragButtons: [0, 1],\n    isDragging: function () {\n        return exports.Konva['DD'].isDragging;\n    },\n    isDragReady: function () {\n        return !!exports.Konva['DD'].node;\n    },\n    UA: exports._parseUA((exports.glob.navigator && exports.glob.navigator.userAgent) || ''),\n    document: exports.glob.document,\n    _injectGlobal: function (Konva) {\n        exports.glob.Konva = Konva;\n    },\n    _parseUA: exports._parseUA\n};\nexports._NODES_REGISTRY = {};\nexports._registerNode = function (NodeClass) {\n    exports._NODES_REGISTRY[NodeClass.prototype.getClassName()] = NodeClass;\n    exports.Konva[NodeClass.prototype.getClassName()] = NodeClass;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Collection = (function () {\n    function Collection() {\n    }\n    Collection.toCollection = function (arr) {\n        var collection = new Collection(), len = arr.length, n;\n        for (n = 0; n < len; n++) {\n            collection.push(arr[n]);\n        }\n        return collection;\n    };\n    Collection._mapMethod = function (methodName) {\n        Collection.prototype[methodName] = function () {\n            var len = this.length, i;\n            var args = [].slice.call(arguments);\n            for (i = 0; i < len; i++) {\n                this[i][methodName].apply(this[i], args);\n            }\n            return this;\n        };\n    };\n    Collection.mapMethods = function (constructor) {\n        var prot = constructor.prototype;\n        for (var methodName in prot) {\n            Collection._mapMethod(methodName);\n        }\n    };\n    return Collection;\n}());\nexports.Collection = Collection;\nCollection.prototype = [];\nCollection.prototype.each = function (func) {\n    for (var n = 0; n < this.length; n++) {\n        func(this[n], n);\n    }\n};\nCollection.prototype.toArray = function () {\n    var arr = [], len = this.length, n;\n    for (n = 0; n < len; n++) {\n        arr.push(this[n]);\n    }\n    return arr;\n};\nvar Transform = (function () {\n    function Transform(m) {\n        if (m === void 0) { m = [1, 0, 0, 1, 0, 0]; }\n        this.m = (m && m.slice()) || [1, 0, 0, 1, 0, 0];\n    }\n    Transform.prototype.copy = function () {\n        return new Transform(this.m);\n    };\n    Transform.prototype.point = function (point) {\n        var m = this.m;\n        return {\n            x: m[0] * point.x + m[2] * point.y + m[4],\n            y: m[1] * point.x + m[3] * point.y + m[5]\n        };\n    };\n    Transform.prototype.translate = function (x, y) {\n        this.m[4] += this.m[0] * x + this.m[2] * y;\n        this.m[5] += this.m[1] * x + this.m[3] * y;\n        return this;\n    };\n    Transform.prototype.scale = function (sx, sy) {\n        this.m[0] *= sx;\n        this.m[1] *= sx;\n        this.m[2] *= sy;\n        this.m[3] *= sy;\n        return this;\n    };\n    Transform.prototype.rotate = function (rad) {\n        var c = Math.cos(rad);\n        var s = Math.sin(rad);\n        var m11 = this.m[0] * c + this.m[2] * s;\n        var m12 = this.m[1] * c + this.m[3] * s;\n        var m21 = this.m[0] * -s + this.m[2] * c;\n        var m22 = this.m[1] * -s + this.m[3] * c;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    };\n    Transform.prototype.getTranslation = function () {\n        return {\n            x: this.m[4],\n            y: this.m[5]\n        };\n    };\n    Transform.prototype.skew = function (sx, sy) {\n        var m11 = this.m[0] + this.m[2] * sy;\n        var m12 = this.m[1] + this.m[3] * sy;\n        var m21 = this.m[2] + this.m[0] * sx;\n        var m22 = this.m[3] + this.m[1] * sx;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    };\n    Transform.prototype.multiply = function (matrix) {\n        var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n        var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n        var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n        var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n        var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n        var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        this.m[4] = dx;\n        this.m[5] = dy;\n        return this;\n    };\n    Transform.prototype.invert = function () {\n        var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n        var m0 = this.m[3] * d;\n        var m1 = -this.m[1] * d;\n        var m2 = -this.m[2] * d;\n        var m3 = this.m[0] * d;\n        var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n        var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n        this.m[0] = m0;\n        this.m[1] = m1;\n        this.m[2] = m2;\n        this.m[3] = m3;\n        this.m[4] = m4;\n        this.m[5] = m5;\n        return this;\n    };\n    Transform.prototype.getMatrix = function () {\n        return this.m;\n    };\n    Transform.prototype.setAbsolutePosition = function (x, y) {\n        var m0 = this.m[0], m1 = this.m[1], m2 = this.m[2], m3 = this.m[3], m4 = this.m[4], m5 = this.m[5], yt = (m0 * (y - m5) - m1 * (x - m4)) / (m0 * m3 - m1 * m2), xt = (x - m4 - m2 * yt) / m0;\n        return this.translate(xt, yt);\n    };\n    Transform.prototype.decompose = function () {\n        var a = this.m[0];\n        var b = this.m[1];\n        var c = this.m[2];\n        var d = this.m[3];\n        var e = this.m[4];\n        var f = this.m[5];\n        var delta = a * d - b * c;\n        var result = {\n            x: e,\n            y: f,\n            rotation: 0,\n            scaleX: 0,\n            scaleY: 0,\n            skewX: 0,\n            skewY: 0\n        };\n        if (a != 0 || b != 0) {\n            var r = Math.sqrt(a * a + b * b);\n            result.rotation = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);\n            result.scaleX = r;\n            result.scaleY = delta / r;\n            result.skewX = (a * c + b * d) / delta;\n            result.skewY = 0;\n        }\n        else if (c != 0 || d != 0) {\n            var s = Math.sqrt(c * c + d * d);\n            result.rotation =\n                Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));\n            result.scaleX = delta / s;\n            result.scaleY = s;\n            result.skewX = 0;\n            result.skewY = (a * c + b * d) / delta;\n        }\n        else {\n        }\n        result.rotation = exports.Util._getRotation(result.rotation);\n        return result;\n    };\n    return Transform;\n}());\nexports.Transform = Transform;\nvar OBJECT_ARRAY = '[object Array]', OBJECT_NUMBER = '[object Number]', OBJECT_STRING = '[object String]', OBJECT_BOOLEAN = '[object Boolean]', PI_OVER_DEG180 = Math.PI / 180, DEG180_OVER_PI = 180 / Math.PI, HASH = '#', EMPTY_STRING = '', ZERO = '0', KONVA_WARNING = 'Konva warning: ', KONVA_ERROR = 'Konva error: ', RGB_PAREN = 'rgb(', COLORS = {\n    aliceblue: [240, 248, 255],\n    antiquewhite: [250, 235, 215],\n    aqua: [0, 255, 255],\n    aquamarine: [127, 255, 212],\n    azure: [240, 255, 255],\n    beige: [245, 245, 220],\n    bisque: [255, 228, 196],\n    black: [0, 0, 0],\n    blanchedalmond: [255, 235, 205],\n    blue: [0, 0, 255],\n    blueviolet: [138, 43, 226],\n    brown: [165, 42, 42],\n    burlywood: [222, 184, 135],\n    cadetblue: [95, 158, 160],\n    chartreuse: [127, 255, 0],\n    chocolate: [210, 105, 30],\n    coral: [255, 127, 80],\n    cornflowerblue: [100, 149, 237],\n    cornsilk: [255, 248, 220],\n    crimson: [220, 20, 60],\n    cyan: [0, 255, 255],\n    darkblue: [0, 0, 139],\n    darkcyan: [0, 139, 139],\n    darkgoldenrod: [184, 132, 11],\n    darkgray: [169, 169, 169],\n    darkgreen: [0, 100, 0],\n    darkgrey: [169, 169, 169],\n    darkkhaki: [189, 183, 107],\n    darkmagenta: [139, 0, 139],\n    darkolivegreen: [85, 107, 47],\n    darkorange: [255, 140, 0],\n    darkorchid: [153, 50, 204],\n    darkred: [139, 0, 0],\n    darksalmon: [233, 150, 122],\n    darkseagreen: [143, 188, 143],\n    darkslateblue: [72, 61, 139],\n    darkslategray: [47, 79, 79],\n    darkslategrey: [47, 79, 79],\n    darkturquoise: [0, 206, 209],\n    darkviolet: [148, 0, 211],\n    deeppink: [255, 20, 147],\n    deepskyblue: [0, 191, 255],\n    dimgray: [105, 105, 105],\n    dimgrey: [105, 105, 105],\n    dodgerblue: [30, 144, 255],\n    firebrick: [178, 34, 34],\n    floralwhite: [255, 255, 240],\n    forestgreen: [34, 139, 34],\n    fuchsia: [255, 0, 255],\n    gainsboro: [220, 220, 220],\n    ghostwhite: [248, 248, 255],\n    gold: [255, 215, 0],\n    goldenrod: [218, 165, 32],\n    gray: [128, 128, 128],\n    green: [0, 128, 0],\n    greenyellow: [173, 255, 47],\n    grey: [128, 128, 128],\n    honeydew: [240, 255, 240],\n    hotpink: [255, 105, 180],\n    indianred: [205, 92, 92],\n    indigo: [75, 0, 130],\n    ivory: [255, 255, 240],\n    khaki: [240, 230, 140],\n    lavender: [230, 230, 250],\n    lavenderblush: [255, 240, 245],\n    lawngreen: [124, 252, 0],\n    lemonchiffon: [255, 250, 205],\n    lightblue: [173, 216, 230],\n    lightcoral: [240, 128, 128],\n    lightcyan: [224, 255, 255],\n    lightgoldenrodyellow: [250, 250, 210],\n    lightgray: [211, 211, 211],\n    lightgreen: [144, 238, 144],\n    lightgrey: [211, 211, 211],\n    lightpink: [255, 182, 193],\n    lightsalmon: [255, 160, 122],\n    lightseagreen: [32, 178, 170],\n    lightskyblue: [135, 206, 250],\n    lightslategray: [119, 136, 153],\n    lightslategrey: [119, 136, 153],\n    lightsteelblue: [176, 196, 222],\n    lightyellow: [255, 255, 224],\n    lime: [0, 255, 0],\n    limegreen: [50, 205, 50],\n    linen: [250, 240, 230],\n    magenta: [255, 0, 255],\n    maroon: [128, 0, 0],\n    mediumaquamarine: [102, 205, 170],\n    mediumblue: [0, 0, 205],\n    mediumorchid: [186, 85, 211],\n    mediumpurple: [147, 112, 219],\n    mediumseagreen: [60, 179, 113],\n    mediumslateblue: [123, 104, 238],\n    mediumspringgreen: [0, 250, 154],\n    mediumturquoise: [72, 209, 204],\n    mediumvioletred: [199, 21, 133],\n    midnightblue: [25, 25, 112],\n    mintcream: [245, 255, 250],\n    mistyrose: [255, 228, 225],\n    moccasin: [255, 228, 181],\n    navajowhite: [255, 222, 173],\n    navy: [0, 0, 128],\n    oldlace: [253, 245, 230],\n    olive: [128, 128, 0],\n    olivedrab: [107, 142, 35],\n    orange: [255, 165, 0],\n    orangered: [255, 69, 0],\n    orchid: [218, 112, 214],\n    palegoldenrod: [238, 232, 170],\n    palegreen: [152, 251, 152],\n    paleturquoise: [175, 238, 238],\n    palevioletred: [219, 112, 147],\n    papayawhip: [255, 239, 213],\n    peachpuff: [255, 218, 185],\n    peru: [205, 133, 63],\n    pink: [255, 192, 203],\n    plum: [221, 160, 203],\n    powderblue: [176, 224, 230],\n    purple: [128, 0, 128],\n    rebeccapurple: [102, 51, 153],\n    red: [255, 0, 0],\n    rosybrown: [188, 143, 143],\n    royalblue: [65, 105, 225],\n    saddlebrown: [139, 69, 19],\n    salmon: [250, 128, 114],\n    sandybrown: [244, 164, 96],\n    seagreen: [46, 139, 87],\n    seashell: [255, 245, 238],\n    sienna: [160, 82, 45],\n    silver: [192, 192, 192],\n    skyblue: [135, 206, 235],\n    slateblue: [106, 90, 205],\n    slategray: [119, 128, 144],\n    slategrey: [119, 128, 144],\n    snow: [255, 255, 250],\n    springgreen: [0, 255, 127],\n    steelblue: [70, 130, 180],\n    tan: [210, 180, 140],\n    teal: [0, 128, 128],\n    thistle: [216, 191, 216],\n    transparent: [255, 255, 255, 0],\n    tomato: [255, 99, 71],\n    turquoise: [64, 224, 208],\n    violet: [238, 130, 238],\n    wheat: [245, 222, 179],\n    white: [255, 255, 255],\n    whitesmoke: [245, 245, 245],\n    yellow: [255, 255, 0],\n    yellowgreen: [154, 205, 5]\n}, RGB_REGEX = /rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)/, animQueue = [];\nexports.Util = {\n    _isElement: function (obj) {\n        return !!(obj && obj.nodeType == 1);\n    },\n    _isFunction: function (obj) {\n        return !!(obj && obj.constructor && obj.call && obj.apply);\n    },\n    _isPlainObject: function (obj) {\n        return !!obj && obj.constructor === Object;\n    },\n    _isArray: function (obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_ARRAY;\n    },\n    _isNumber: function (obj) {\n        return (Object.prototype.toString.call(obj) === OBJECT_NUMBER &&\n            !isNaN(obj) &&\n            isFinite(obj));\n    },\n    _isString: function (obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_STRING;\n    },\n    _isBoolean: function (obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_BOOLEAN;\n    },\n    isObject: function (val) {\n        return val instanceof Object;\n    },\n    isValidSelector: function (selector) {\n        if (typeof selector !== 'string') {\n            return false;\n        }\n        var firstChar = selector[0];\n        return (firstChar === '#' ||\n            firstChar === '.' ||\n            firstChar === firstChar.toUpperCase());\n    },\n    _sign: function (number) {\n        if (number === 0) {\n            return 0;\n        }\n        if (number > 0) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    },\n    requestAnimFrame: function (callback) {\n        animQueue.push(callback);\n        if (animQueue.length === 1) {\n            requestAnimationFrame(function () {\n                var queue = animQueue;\n                animQueue = [];\n                queue.forEach(function (cb) {\n                    cb();\n                });\n            });\n        }\n    },\n    createCanvasElement: function () {\n        var canvas = document.createElement('canvas');\n        try {\n            canvas.style = canvas.style || {};\n        }\n        catch (e) { }\n        return canvas;\n    },\n    createImageElement: function () {\n        return document.createElement('img');\n    },\n    _isInDocument: function (el) {\n        while ((el = el.parentNode)) {\n            if (el == document) {\n                return true;\n            }\n        }\n        return false;\n    },\n    _simplifyArray: function (arr) {\n        var retArr = [], len = arr.length, util = exports.Util, n, val;\n        for (n = 0; n < len; n++) {\n            val = arr[n];\n            if (util._isNumber(val)) {\n                val = Math.round(val * 1000) / 1000;\n            }\n            else if (!util._isString(val)) {\n                val = val.toString();\n            }\n            retArr.push(val);\n        }\n        return retArr;\n    },\n    _urlToImage: function (url, callback) {\n        var imageObj = new Global_1.glob.Image();\n        imageObj.onload = function () {\n            callback(imageObj);\n        };\n        imageObj.src = url;\n    },\n    _rgbToHex: function (r, g, b) {\n        return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n    },\n    _hexToRgb: function (hex) {\n        hex = hex.replace(HASH, EMPTY_STRING);\n        var bigint = parseInt(hex, 16);\n        return {\n            r: (bigint >> 16) & 255,\n            g: (bigint >> 8) & 255,\n            b: bigint & 255\n        };\n    },\n    getRandomColor: function () {\n        var randColor = ((Math.random() * 0xffffff) << 0).toString(16);\n        while (randColor.length < 6) {\n            randColor = ZERO + randColor;\n        }\n        return HASH + randColor;\n    },\n    get: function (val, def) {\n        if (val === undefined) {\n            return def;\n        }\n        else {\n            return val;\n        }\n    },\n    getRGB: function (color) {\n        var rgb;\n        if (color in COLORS) {\n            rgb = COLORS[color];\n            return {\n                r: rgb[0],\n                g: rgb[1],\n                b: rgb[2]\n            };\n        }\n        else if (color[0] === HASH) {\n            return this._hexToRgb(color.substring(1));\n        }\n        else if (color.substr(0, 4) === RGB_PAREN) {\n            rgb = RGB_REGEX.exec(color.replace(/ /g, ''));\n            return {\n                r: parseInt(rgb[1], 10),\n                g: parseInt(rgb[2], 10),\n                b: parseInt(rgb[3], 10)\n            };\n        }\n        else {\n            return {\n                r: 0,\n                g: 0,\n                b: 0\n            };\n        }\n    },\n    colorToRGBA: function (str) {\n        str = str || 'black';\n        return (exports.Util._namedColorToRBA(str) ||\n            exports.Util._hex3ColorToRGBA(str) ||\n            exports.Util._hex6ColorToRGBA(str) ||\n            exports.Util._rgbColorToRGBA(str) ||\n            exports.Util._rgbaColorToRGBA(str) ||\n            exports.Util._hslColorToRGBA(str));\n    },\n    _namedColorToRBA: function (str) {\n        var c = COLORS[str.toLowerCase()];\n        if (!c) {\n            return null;\n        }\n        return {\n            r: c[0],\n            g: c[1],\n            b: c[2],\n            a: 1\n        };\n    },\n    _rgbColorToRGBA: function (str) {\n        if (str.indexOf('rgb(') === 0) {\n            str = str.match(/rgb\\(([^)]+)\\)/)[1];\n            var parts = str.split(/ *, */).map(Number);\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: 1\n            };\n        }\n    },\n    _rgbaColorToRGBA: function (str) {\n        if (str.indexOf('rgba(') === 0) {\n            str = str.match(/rgba\\(([^)]+)\\)/)[1];\n            var parts = str.split(/ *, */).map(Number);\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: parts[3]\n            };\n        }\n    },\n    _hex6ColorToRGBA: function (str) {\n        if (str[0] === '#' && str.length === 7) {\n            return {\n                r: parseInt(str.slice(1, 3), 16),\n                g: parseInt(str.slice(3, 5), 16),\n                b: parseInt(str.slice(5, 7), 16),\n                a: 1\n            };\n        }\n    },\n    _hex3ColorToRGBA: function (str) {\n        if (str[0] === '#' && str.length === 4) {\n            return {\n                r: parseInt(str[1] + str[1], 16),\n                g: parseInt(str[2] + str[2], 16),\n                b: parseInt(str[3] + str[3], 16),\n                a: 1\n            };\n        }\n    },\n    _hslColorToRGBA: function (str) {\n        if (/hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.test(str)) {\n            var _a = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(str), _ = _a[0], hsl = _a.slice(1);\n            var h = Number(hsl[0]) / 360;\n            var s = Number(hsl[1]) / 100;\n            var l = Number(hsl[2]) / 100;\n            var t2 = void 0;\n            var t3 = void 0;\n            var val = void 0;\n            if (s === 0) {\n                val = l * 255;\n                return {\n                    r: Math.round(val),\n                    g: Math.round(val),\n                    b: Math.round(val),\n                    a: 1\n                };\n            }\n            if (l < 0.5) {\n                t2 = l * (1 + s);\n            }\n            else {\n                t2 = l + s - l * s;\n            }\n            var t1 = 2 * l - t2;\n            var rgb = [0, 0, 0];\n            for (var i = 0; i < 3; i++) {\n                t3 = h + (1 / 3) * -(i - 1);\n                if (t3 < 0) {\n                    t3++;\n                }\n                if (t3 > 1) {\n                    t3--;\n                }\n                if (6 * t3 < 1) {\n                    val = t1 + (t2 - t1) * 6 * t3;\n                }\n                else if (2 * t3 < 1) {\n                    val = t2;\n                }\n                else if (3 * t3 < 2) {\n                    val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n                }\n                else {\n                    val = t1;\n                }\n                rgb[i] = val * 255;\n            }\n            return {\n                r: Math.round(rgb[0]),\n                g: Math.round(rgb[1]),\n                b: Math.round(rgb[2]),\n                a: 1\n            };\n        }\n    },\n    haveIntersection: function (r1, r2) {\n        return !(r2.x > r1.x + r1.width ||\n            r2.x + r2.width < r1.x ||\n            r2.y > r1.y + r1.height ||\n            r2.y + r2.height < r1.y);\n    },\n    cloneObject: function (obj) {\n        var retObj = {};\n        for (var key in obj) {\n            if (this._isPlainObject(obj[key])) {\n                retObj[key] = this.cloneObject(obj[key]);\n            }\n            else if (this._isArray(obj[key])) {\n                retObj[key] = this.cloneArray(obj[key]);\n            }\n            else {\n                retObj[key] = obj[key];\n            }\n        }\n        return retObj;\n    },\n    cloneArray: function (arr) {\n        return arr.slice(0);\n    },\n    _degToRad: function (deg) {\n        return deg * PI_OVER_DEG180;\n    },\n    _radToDeg: function (rad) {\n        return rad * DEG180_OVER_PI;\n    },\n    _getRotation: function (radians) {\n        return Global_1.Konva.angleDeg ? exports.Util._radToDeg(radians) : radians;\n    },\n    _capitalize: function (str) {\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n    throw: function (str) {\n        throw new Error(KONVA_ERROR + str);\n    },\n    error: function (str) {\n        console.error(KONVA_ERROR + str);\n    },\n    warn: function (str) {\n        if (!Global_1.Konva.showWarnings) {\n            return;\n        }\n        console.warn(KONVA_WARNING + str);\n    },\n    extend: function (child, parent) {\n        function Ctor() {\n            this.constructor = child;\n        }\n        Ctor.prototype = parent.prototype;\n        var oldProto = child.prototype;\n        child.prototype = new Ctor();\n        for (var key in oldProto) {\n            if (oldProto.hasOwnProperty(key)) {\n                child.prototype[key] = oldProto[key];\n            }\n        }\n        child.__super__ = parent.prototype;\n        child.super = parent;\n    },\n    _getControlPoints: function (x0, y0, x1, y1, x2, y2, t) {\n        var d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2)), d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)), fa = (t * d01) / (d01 + d12), fb = (t * d12) / (d01 + d12), p1x = x1 - fa * (x2 - x0), p1y = y1 - fa * (y2 - y0), p2x = x1 + fb * (x2 - x0), p2y = y1 + fb * (y2 - y0);\n        return [p1x, p1y, p2x, p2y];\n    },\n    _expandPoints: function (p, tension) {\n        var len = p.length, allPoints = [], n, cp;\n        for (n = 2; n < len - 2; n += 2) {\n            cp = exports.Util._getControlPoints(p[n - 2], p[n - 1], p[n], p[n + 1], p[n + 2], p[n + 3], tension);\n            allPoints.push(cp[0]);\n            allPoints.push(cp[1]);\n            allPoints.push(p[n]);\n            allPoints.push(p[n + 1]);\n            allPoints.push(cp[2]);\n            allPoints.push(cp[3]);\n        }\n        return allPoints;\n    },\n    each: function (obj, func) {\n        for (var key in obj) {\n            func(key, obj[key]);\n        }\n    },\n    _inRange: function (val, left, right) {\n        return left <= val && val < right;\n    },\n    _getProjectionToSegment: function (x1, y1, x2, y2, x3, y3) {\n        var x, y, dist;\n        var pd2 = (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n        if (pd2 == 0) {\n            x = x1;\n            y = y1;\n            dist = (x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2);\n        }\n        else {\n            var u = ((x3 - x1) * (x2 - x1) + (y3 - y1) * (y2 - y1)) / pd2;\n            if (u < 0) {\n                x = x1;\n                y = y1;\n                dist = (x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3);\n            }\n            else if (u > 1.0) {\n                x = x2;\n                y = y2;\n                dist = (x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3);\n            }\n            else {\n                x = x1 + u * (x2 - x1);\n                y = y1 + u * (y2 - y1);\n                dist = (x - x3) * (x - x3) + (y - y3) * (y - y3);\n            }\n        }\n        return [x, y, dist];\n    },\n    _getProjectionToLine: function (pt, line, isClosed) {\n        var pc = exports.Util.cloneObject(pt);\n        var dist = Number.MAX_VALUE;\n        line.forEach(function (p1, i) {\n            if (!isClosed && i === line.length - 1) {\n                return;\n            }\n            var p2 = line[(i + 1) % line.length];\n            var proj = exports.Util._getProjectionToSegment(p1.x, p1.y, p2.x, p2.y, pt.x, pt.y);\n            var px = proj[0], py = proj[1], pdist = proj[2];\n            if (pdist < dist) {\n                pc.x = px;\n                pc.y = py;\n                dist = pdist;\n            }\n        });\n        return pc;\n    },\n    _prepareArrayForTween: function (startArray, endArray, isClosed) {\n        var n, start = [], end = [];\n        if (startArray.length > endArray.length) {\n            var temp = endArray;\n            endArray = startArray;\n            startArray = temp;\n        }\n        for (n = 0; n < startArray.length; n += 2) {\n            start.push({\n                x: startArray[n],\n                y: startArray[n + 1]\n            });\n        }\n        for (n = 0; n < endArray.length; n += 2) {\n            end.push({\n                x: endArray[n],\n                y: endArray[n + 1]\n            });\n        }\n        var newStart = [];\n        end.forEach(function (point) {\n            var pr = exports.Util._getProjectionToLine(point, start, isClosed);\n            newStart.push(pr.x);\n            newStart.push(pr.y);\n        });\n        return newStart;\n    },\n    _prepareToStringify: function (obj) {\n        var desc;\n        obj.visitedByCircularReferenceRemoval = true;\n        for (var key in obj) {\n            if (!(obj.hasOwnProperty(key) && obj[key] && typeof obj[key] == 'object')) {\n                continue;\n            }\n            desc = Object.getOwnPropertyDescriptor(obj, key);\n            if (obj[key].visitedByCircularReferenceRemoval ||\n                exports.Util._isElement(obj[key])) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n            else if (exports.Util._prepareToStringify(obj[key]) === null) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        delete obj.visitedByCircularReferenceRemoval;\n        return obj;\n    },\n    _assign: function (target, source) {\n        for (var key in source) {\n            target[key] = source[key];\n        }\n        return target;\n    },\n    _getFirstPointerId: function (evt) {\n        if (!evt.touches) {\n            return 999;\n        }\n        else {\n            return evt.changedTouches[0].identifier;\n        }\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Util_1 = require(\"./Util\");\nfunction _formatValue(val) {\n    if (Util_1.Util._isString(val)) {\n        return '\"' + val + '\"';\n    }\n    if (Object.prototype.toString.call(val) === '[object Number]') {\n        return val;\n    }\n    if (Util_1.Util._isBoolean(val)) {\n        return val;\n    }\n    return Object.prototype.toString.call(val);\n}\nfunction RGBComponent(val) {\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    return Math.round(val);\n}\nexports.RGBComponent = RGBComponent;\nfunction alphaComponent(val) {\n    if (val > 1) {\n        return 1;\n    }\n    else if (val < 0.0001) {\n        return 0.0001;\n    }\n    return val;\n}\nexports.alphaComponent = alphaComponent;\nfunction getNumberValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isNumber(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number.');\n            }\n            return val;\n        };\n    }\n}\nexports.getNumberValidator = getNumberValidator;\nfunction getNumberOrAutoValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            var isNumber = Util_1.Util._isNumber(val);\n            var isAuto = val === 'auto';\n            if (!(isNumber || isAuto)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number or \"auto\".');\n            }\n            return val;\n        };\n    }\n}\nexports.getNumberOrAutoValidator = getNumberOrAutoValidator;\nfunction getStringValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isString(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a string.');\n            }\n            return val;\n        };\n    }\n}\nexports.getStringValidator = getStringValidator;\nfunction getFunctionValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isFunction(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a function.');\n            }\n            return val;\n        };\n    }\n}\nexports.getFunctionValidator = getFunctionValidator;\nfunction getNumberArrayValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isArray(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a array of numbers.');\n            }\n            else {\n                val.forEach(function (item) {\n                    if (!Util_1.Util._isNumber(item)) {\n                        Util_1.Util.warn('\"' +\n                            attr +\n                            '\" attribute has non numeric element ' +\n                            item +\n                            '. Make sure that all elements are numbers.');\n                    }\n                });\n            }\n            return val;\n        };\n    }\n}\nexports.getNumberArrayValidator = getNumberArrayValidator;\nfunction getBooleanValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            var isBool = val === true || val === false;\n            if (!isBool) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a boolean.');\n            }\n            return val;\n        };\n    }\n}\nexports.getBooleanValidator = getBooleanValidator;\nfunction getComponentValidator(components) {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util.isObject(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be an object with properties ' +\n                    components);\n            }\n            return val;\n        };\n    }\n}\nexports.getComponentValidator = getComponentValidator;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Validators_1 = require(\"./Validators\");\nvar GET = 'get', SET = 'set';\nexports.Factory = {\n    addGetterSetter: function (constructor, attr, def, validator, after) {\n        this.addGetter(constructor, attr, def);\n        this.addSetter(constructor, attr, validator, after);\n        this.addOverloadedGetterSetter(constructor, attr);\n    },\n    addGetter: function (constructor, attr, def) {\n        var method = GET + Util_1.Util._capitalize(attr);\n        constructor.prototype[method] =\n            constructor.prototype[method] ||\n                function () {\n                    var val = this.attrs[attr];\n                    return val === undefined ? def : val;\n                };\n    },\n    addSetter: function (constructor, attr, validator, after) {\n        var method = SET + Util_1.Util._capitalize(attr);\n        if (!constructor.prototype[method]) {\n            exports.Factory.overWriteSetter(constructor, attr, validator, after);\n        }\n    },\n    overWriteSetter: function (constructor, attr, validator, after) {\n        var method = SET + Util_1.Util._capitalize(attr);\n        constructor.prototype[method] = function (val) {\n            if (validator && val !== undefined && val !== null) {\n                val = validator.call(this, val, attr);\n            }\n            this._setAttr(attr, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n    },\n    addComponentsGetterSetter: function (constructor, attr, components, validator, after) {\n        var len = components.length, capitalize = Util_1.Util._capitalize, getter = GET + capitalize(attr), setter = SET + capitalize(attr), n, component;\n        constructor.prototype[getter] = function () {\n            var ret = {};\n            for (n = 0; n < len; n++) {\n                component = components[n];\n                ret[component] = this.getAttr(attr + capitalize(component));\n            }\n            return ret;\n        };\n        var basicValidator = Validators_1.getComponentValidator(components);\n        constructor.prototype[setter] = function (val) {\n            var oldVal = this.attrs[attr], key;\n            if (validator) {\n                val = validator.call(this, val);\n            }\n            if (basicValidator) {\n                basicValidator.call(this, val, attr);\n            }\n            for (key in val) {\n                if (!val.hasOwnProperty(key)) {\n                    continue;\n                }\n                this._setAttr(attr + capitalize(key), val[key]);\n            }\n            this._fireChangeEvent(attr, oldVal, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n        this.addOverloadedGetterSetter(constructor, attr);\n    },\n    addOverloadedGetterSetter: function (constructor, attr) {\n        var capitalizedAttr = Util_1.Util._capitalize(attr), setter = SET + capitalizedAttr, getter = GET + capitalizedAttr;\n        constructor.prototype[attr] = function () {\n            if (arguments.length) {\n                this[setter](arguments[0]);\n                return this;\n            }\n            return this[getter]();\n        };\n    },\n    addDeprecatedGetterSetter: function (constructor, attr, def, validator) {\n        Util_1.Util.error('Adding deprecated ' + attr);\n        var method = GET + Util_1.Util._capitalize(attr);\n        var message = attr +\n            ' property is deprecated and will be removed soon. Look at Konva change log for more information.';\n        constructor.prototype[method] = function () {\n            Util_1.Util.error(message);\n            var val = this.attrs[attr];\n            return val === undefined ? def : val;\n        };\n        this.addSetter(constructor, attr, validator, function () {\n            Util_1.Util.error(message);\n        });\n        this.addOverloadedGetterSetter(constructor, attr);\n    },\n    backCompat: function (constructor, methods) {\n        Util_1.Util.each(methods, function (oldMethodName, newMethodName) {\n            var method = constructor.prototype[newMethodName];\n            var oldGetter = GET + Util_1.Util._capitalize(oldMethodName);\n            var oldSetter = SET + Util_1.Util._capitalize(oldMethodName);\n            function deprecated() {\n                method.apply(this, arguments);\n                Util_1.Util.error('\"' +\n                    oldMethodName +\n                    '\" method is deprecated and will be removed soon. Use \"\"' +\n                    newMethodName +\n                    '\" instead.');\n            }\n            constructor.prototype[oldMethodName] = deprecated;\n            constructor.prototype[oldGetter] = deprecated;\n            constructor.prototype[oldSetter] = deprecated;\n        });\n    },\n    afterSetFilter: function () {\n        this._filterUpToDate = false;\n    }\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Global_1 = require(\"./Global\");\nvar COMMA = ',', OPEN_PAREN = '(', CLOSE_PAREN = ')', OPEN_PAREN_BRACKET = '([', CLOSE_BRACKET_PAREN = '])', SEMICOLON = ';', DOUBLE_PAREN = '()', EQUALS = '=', CONTEXT_METHODS = [\n    'arc',\n    'arcTo',\n    'beginPath',\n    'bezierCurveTo',\n    'clearRect',\n    'clip',\n    'closePath',\n    'createLinearGradient',\n    'createPattern',\n    'createRadialGradient',\n    'drawImage',\n    'ellipse',\n    'fill',\n    'fillText',\n    'getImageData',\n    'createImageData',\n    'lineTo',\n    'moveTo',\n    'putImageData',\n    'quadraticCurveTo',\n    'rect',\n    'restore',\n    'rotate',\n    'save',\n    'scale',\n    'setLineDash',\n    'setTransform',\n    'stroke',\n    'strokeText',\n    'transform',\n    'translate'\n];\nvar CONTEXT_PROPERTIES = [\n    'fillStyle',\n    'strokeStyle',\n    'shadowColor',\n    'shadowBlur',\n    'shadowOffsetX',\n    'shadowOffsetY',\n    'lineCap',\n    'lineDashOffset',\n    'lineJoin',\n    'lineWidth',\n    'miterLimit',\n    'font',\n    'textAlign',\n    'textBaseline',\n    'globalAlpha',\n    'globalCompositeOperation',\n    'imageSmoothingEnabled'\n];\nvar traceArrMax = 100;\nvar Context = (function () {\n    function Context(canvas) {\n        this.canvas = canvas;\n        this._context = canvas._canvas.getContext('2d');\n        if (Global_1.Konva.enableTrace) {\n            this.traceArr = [];\n            this._enableTrace();\n        }\n    }\n    Context.prototype.fillShape = function (shape) {\n        if (shape.fillEnabled()) {\n            this._fill(shape);\n        }\n    };\n    Context.prototype._fill = function (shape) {\n    };\n    Context.prototype.strokeShape = function (shape) {\n        if (shape.hasStroke()) {\n            this._stroke(shape);\n        }\n    };\n    Context.prototype._stroke = function (shape) {\n    };\n    Context.prototype.fillStrokeShape = function (shape) {\n        this.fillShape(shape);\n        this.strokeShape(shape);\n    };\n    Context.prototype.getTrace = function (relaxed) {\n        var traceArr = this.traceArr, len = traceArr.length, str = '', n, trace, method, args;\n        for (n = 0; n < len; n++) {\n            trace = traceArr[n];\n            method = trace.method;\n            if (method) {\n                args = trace.args;\n                str += method;\n                if (relaxed) {\n                    str += DOUBLE_PAREN;\n                }\n                else {\n                    if (Util_1.Util._isArray(args[0])) {\n                        str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n                    }\n                    else {\n                        str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n                    }\n                }\n            }\n            else {\n                str += trace.property;\n                if (!relaxed) {\n                    str += EQUALS + trace.val;\n                }\n            }\n            str += SEMICOLON;\n        }\n        return str;\n    };\n    Context.prototype.clearTrace = function () {\n        this.traceArr = [];\n    };\n    Context.prototype._trace = function (str) {\n        var traceArr = this.traceArr, len;\n        traceArr.push(str);\n        len = traceArr.length;\n        if (len >= traceArrMax) {\n            traceArr.shift();\n        }\n    };\n    Context.prototype.reset = function () {\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n    };\n    Context.prototype.getCanvas = function () {\n        return this.canvas;\n    };\n    Context.prototype.clear = function (bounds) {\n        var canvas = this.getCanvas();\n        if (bounds) {\n            this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n        }\n        else {\n            this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n        }\n    };\n    Context.prototype._applyLineCap = function (shape) {\n        var lineCap = shape.getLineCap();\n        if (lineCap) {\n            this.setAttr('lineCap', lineCap);\n        }\n    };\n    Context.prototype._applyOpacity = function (shape) {\n        var absOpacity = shape.getAbsoluteOpacity();\n        if (absOpacity !== 1) {\n            this.setAttr('globalAlpha', absOpacity);\n        }\n    };\n    Context.prototype._applyLineJoin = function (shape) {\n        var lineJoin = shape.getLineJoin();\n        if (lineJoin) {\n            this.setAttr('lineJoin', lineJoin);\n        }\n    };\n    Context.prototype.setAttr = function (attr, val) {\n        this._context[attr] = val;\n    };\n    Context.prototype.arc = function (a0, a1, a2, a3, a4, a5) {\n        this._context.arc(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.arcTo = function (a0, a1, a2, a3, a4) {\n        this._context.arcTo(a0, a1, a2, a3, a4);\n    };\n    Context.prototype.beginPath = function () {\n        this._context.beginPath();\n    };\n    Context.prototype.bezierCurveTo = function (a0, a1, a2, a3, a4, a5) {\n        this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.clearRect = function (a0, a1, a2, a3) {\n        this._context.clearRect(a0, a1, a2, a3);\n    };\n    Context.prototype.clip = function () {\n        this._context.clip();\n    };\n    Context.prototype.closePath = function () {\n        this._context.closePath();\n    };\n    Context.prototype.createImageData = function (a0, a1) {\n        var a = arguments;\n        if (a.length === 2) {\n            return this._context.createImageData(a0, a1);\n        }\n        else if (a.length === 1) {\n            return this._context.createImageData(a0);\n        }\n    };\n    Context.prototype.createLinearGradient = function (a0, a1, a2, a3) {\n        return this._context.createLinearGradient(a0, a1, a2, a3);\n    };\n    Context.prototype.createPattern = function (a0, a1) {\n        return this._context.createPattern(a0, a1);\n    };\n    Context.prototype.createRadialGradient = function (a0, a1, a2, a3, a4, a5) {\n        return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.drawImage = function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        var a = arguments, _context = this._context;\n        if (a.length === 3) {\n            _context.drawImage(a0, a1, a2);\n        }\n        else if (a.length === 5) {\n            _context.drawImage(a0, a1, a2, a3, a4);\n        }\n        else if (a.length === 9) {\n            _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n        }\n    };\n    Context.prototype.ellipse = function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n    };\n    Context.prototype.isPointInPath = function (x, y) {\n        return this._context.isPointInPath(x, y);\n    };\n    Context.prototype.fill = function () {\n        this._context.fill();\n    };\n    Context.prototype.fillRect = function (x, y, width, height) {\n        this._context.fillRect(x, y, width, height);\n    };\n    Context.prototype.strokeRect = function (x, y, width, height) {\n        this._context.strokeRect(x, y, width, height);\n    };\n    Context.prototype.fillText = function (a0, a1, a2) {\n        this._context.fillText(a0, a1, a2);\n    };\n    Context.prototype.measureText = function (text) {\n        return this._context.measureText(text);\n    };\n    Context.prototype.getImageData = function (a0, a1, a2, a3) {\n        return this._context.getImageData(a0, a1, a2, a3);\n    };\n    Context.prototype.lineTo = function (a0, a1) {\n        this._context.lineTo(a0, a1);\n    };\n    Context.prototype.moveTo = function (a0, a1) {\n        this._context.moveTo(a0, a1);\n    };\n    Context.prototype.rect = function (a0, a1, a2, a3) {\n        this._context.rect(a0, a1, a2, a3);\n    };\n    Context.prototype.putImageData = function (a0, a1, a2) {\n        this._context.putImageData(a0, a1, a2);\n    };\n    Context.prototype.quadraticCurveTo = function (a0, a1, a2, a3) {\n        this._context.quadraticCurveTo(a0, a1, a2, a3);\n    };\n    Context.prototype.restore = function () {\n        this._context.restore();\n    };\n    Context.prototype.rotate = function (a0) {\n        this._context.rotate(a0);\n    };\n    Context.prototype.save = function () {\n        this._context.save();\n    };\n    Context.prototype.scale = function (a0, a1) {\n        this._context.scale(a0, a1);\n    };\n    Context.prototype.setLineDash = function (a0) {\n        if (this._context.setLineDash) {\n            this._context.setLineDash(a0);\n        }\n        else if ('mozDash' in this._context) {\n            this._context['mozDash'] = a0;\n        }\n        else if ('webkitLineDash' in this._context) {\n            this._context['webkitLineDash'] = a0;\n        }\n    };\n    Context.prototype.getLineDash = function () {\n        return this._context.getLineDash();\n    };\n    Context.prototype.setTransform = function (a0, a1, a2, a3, a4, a5) {\n        this._context.setTransform(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.stroke = function () {\n        this._context.stroke();\n    };\n    Context.prototype.strokeText = function (a0, a1, a2, a3) {\n        this._context.strokeText(a0, a1, a2, a3);\n    };\n    Context.prototype.transform = function (a0, a1, a2, a3, a4, a5) {\n        this._context.transform(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.translate = function (a0, a1) {\n        this._context.translate(a0, a1);\n    };\n    Context.prototype._enableTrace = function () {\n        var that = this, len = CONTEXT_METHODS.length, _simplifyArray = Util_1.Util._simplifyArray, origSetter = this.setAttr, n, args;\n        var func = function (methodName) {\n            var origMethod = that[methodName], ret;\n            that[methodName] = function () {\n                args = _simplifyArray(Array.prototype.slice.call(arguments, 0));\n                ret = origMethod.apply(that, arguments);\n                that._trace({\n                    method: methodName,\n                    args: args\n                });\n                return ret;\n            };\n        };\n        for (n = 0; n < len; n++) {\n            func(CONTEXT_METHODS[n]);\n        }\n        that.setAttr = function () {\n            origSetter.apply(that, arguments);\n            var prop = arguments[0];\n            var val = arguments[1];\n            if (prop === 'shadowOffsetX' ||\n                prop === 'shadowOffsetY' ||\n                prop === 'shadowBlur') {\n                val = val / this.canvas.getPixelRatio();\n            }\n            that._trace({\n                property: prop,\n                val: val\n            });\n        };\n    };\n    Context.prototype._applyGlobalCompositeOperation = function (node) {\n        var globalCompositeOperation = node.getGlobalCompositeOperation();\n        if (globalCompositeOperation !== 'source-over') {\n            this.setAttr('globalCompositeOperation', globalCompositeOperation);\n        }\n    };\n    return Context;\n}());\nexports.Context = Context;\nCONTEXT_PROPERTIES.forEach(function (prop) {\n    Object.defineProperty(Context.prototype, prop, {\n        get: function () {\n            return this._context[prop];\n        },\n        set: function (val) {\n            this._context[prop] = val;\n        }\n    });\n});\nvar SceneContext = (function (_super) {\n    __extends(SceneContext, _super);\n    function SceneContext() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SceneContext.prototype._fillColor = function (shape) {\n        var fill = shape.fill();\n        this.setAttr('fillStyle', fill);\n        shape._fillFunc(this);\n    };\n    SceneContext.prototype._fillPattern = function (shape) {\n        var fillPatternX = shape.getFillPatternX(), fillPatternY = shape.getFillPatternY(), fillPatternRotation = Global_1.Konva.getAngle(shape.getFillPatternRotation()), fillPatternOffsetX = shape.getFillPatternOffsetX(), fillPatternOffsetY = shape.getFillPatternOffsetY(), fillPatternScaleX = shape.getFillPatternScaleX(), fillPatternScaleY = shape.getFillPatternScaleY();\n        if (fillPatternX || fillPatternY) {\n            this.translate(fillPatternX || 0, fillPatternY || 0);\n        }\n        if (fillPatternRotation) {\n            this.rotate(fillPatternRotation);\n        }\n        if (fillPatternScaleX || fillPatternScaleY) {\n            this.scale(fillPatternScaleX, fillPatternScaleY);\n        }\n        if (fillPatternOffsetX || fillPatternOffsetY) {\n            this.translate(-1 * fillPatternOffsetX, -1 * fillPatternOffsetY);\n        }\n        this.setAttr('fillStyle', shape._getFillPattern());\n        shape._fillFunc(this);\n    };\n    SceneContext.prototype._fillLinearGradient = function (shape) {\n        var grd = shape._getLinearGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    };\n    SceneContext.prototype._fillRadialGradient = function (shape) {\n        var grd = shape._getRadialGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    };\n    SceneContext.prototype._fill = function (shape) {\n        var hasColor = shape.fill(), fillPriority = shape.getFillPriority();\n        if (hasColor && fillPriority === 'color') {\n            this._fillColor(shape);\n            return;\n        }\n        var hasPattern = shape.getFillPatternImage();\n        if (hasPattern && fillPriority === 'pattern') {\n            this._fillPattern(shape);\n            return;\n        }\n        var hasLinearGradient = shape.getFillLinearGradientColorStops();\n        if (hasLinearGradient && fillPriority === 'linear-gradient') {\n            this._fillLinearGradient(shape);\n            return;\n        }\n        var hasRadialGradient = shape.getFillRadialGradientColorStops();\n        if (hasRadialGradient && fillPriority === 'radial-gradient') {\n            this._fillRadialGradient(shape);\n            return;\n        }\n        if (hasColor) {\n            this._fillColor(shape);\n        }\n        else if (hasPattern) {\n            this._fillPattern(shape);\n        }\n        else if (hasLinearGradient) {\n            this._fillLinearGradient(shape);\n        }\n        else if (hasRadialGradient) {\n            this._fillRadialGradient(shape);\n        }\n    };\n    SceneContext.prototype._strokeLinearGradient = function (shape) {\n        var start = shape.getStrokeLinearGradientStartPoint(), end = shape.getStrokeLinearGradientEndPoint(), colorStops = shape.getStrokeLinearGradientColorStops(), grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n        if (colorStops) {\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            this.setAttr('strokeStyle', grd);\n        }\n    };\n    SceneContext.prototype._stroke = function (shape) {\n        var dash = shape.dash(), strokeScaleEnabled = shape.getStrokeScaleEnabled();\n        if (shape.hasStroke()) {\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            if (dash && shape.dashEnabled()) {\n                this.setLineDash(dash);\n                this.setAttr('lineDashOffset', shape.dashOffset());\n            }\n            this.setAttr('lineWidth', shape.strokeWidth());\n            if (!shape.getShadowForStrokeEnabled()) {\n                this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n            }\n            var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n            if (hasLinearGradient) {\n                this._strokeLinearGradient(shape);\n            }\n            else {\n                this.setAttr('strokeStyle', shape.stroke());\n            }\n            shape._strokeFunc(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    };\n    SceneContext.prototype._applyShadow = function (shape) {\n        var util = Util_1.Util, color = util.get(shape.getShadowRGBA(), 'black'), blur = util.get(shape.getShadowBlur(), 5), offset = util.get(shape.getShadowOffset(), {\n            x: 0,\n            y: 0\n        }), scale = shape.getAbsoluteScale(), ratio = this.canvas.getPixelRatio(), scaleX = scale.x * ratio, scaleY = scale.y * ratio;\n        this.setAttr('shadowColor', color);\n        this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n        this.setAttr('shadowOffsetX', offset.x * scaleX);\n        this.setAttr('shadowOffsetY', offset.y * scaleY);\n    };\n    return SceneContext;\n}(Context));\nexports.SceneContext = SceneContext;\nvar HitContext = (function (_super) {\n    __extends(HitContext, _super);\n    function HitContext() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HitContext.prototype._fill = function (shape) {\n        this.save();\n        this.setAttr('fillStyle', shape.colorKey);\n        shape._fillFuncHit(this);\n        this.restore();\n    };\n    HitContext.prototype.strokeShape = function (shape) {\n        if (shape.hasHitStroke()) {\n            this._stroke(shape);\n        }\n    };\n    HitContext.prototype._stroke = function (shape) {\n        if (shape.hasHitStroke()) {\n            var strokeScaleEnabled = shape.getStrokeScaleEnabled();\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            var hitStrokeWidth = shape.hitStrokeWidth();\n            var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n            this.setAttr('lineWidth', strokeWidth);\n            this.setAttr('strokeStyle', shape.colorKey);\n            shape._strokeFuncHit(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    };\n    return HitContext;\n}(Context));\nexports.HitContext = HitContext;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Context_1 = require(\"./Context\");\nvar Global_1 = require(\"./Global\");\nvar Factory_1 = require(\"./Factory\");\nvar Validators_1 = require(\"./Validators\");\nvar _pixelRatio;\nfunction getDevicePixelRatio() {\n    if (_pixelRatio) {\n        return _pixelRatio;\n    }\n    var canvas = Util_1.Util.createCanvasElement();\n    var context = canvas.getContext('2d');\n    _pixelRatio = (function () {\n        var devicePixelRatio = Global_1.Konva._global.devicePixelRatio || 1, backingStoreRatio = context.webkitBackingStorePixelRatio ||\n            context.mozBackingStorePixelRatio ||\n            context.msBackingStorePixelRatio ||\n            context.oBackingStorePixelRatio ||\n            context.backingStorePixelRatio ||\n            1;\n        return devicePixelRatio / backingStoreRatio;\n    })();\n    return _pixelRatio;\n}\nvar Canvas = (function () {\n    function Canvas(config) {\n        this.pixelRatio = 1;\n        this.width = 0;\n        this.height = 0;\n        this.isCache = false;\n        var conf = config || {};\n        var pixelRatio = conf.pixelRatio || Global_1.Konva.pixelRatio || getDevicePixelRatio();\n        this.pixelRatio = pixelRatio;\n        this._canvas = Util_1.Util.createCanvasElement();\n        this._canvas.style.padding = '0';\n        this._canvas.style.margin = '0';\n        this._canvas.style.border = '0';\n        this._canvas.style.background = 'transparent';\n        this._canvas.style.position = 'absolute';\n        this._canvas.style.top = '0';\n        this._canvas.style.left = '0';\n    }\n    Canvas.prototype.getContext = function () {\n        return this.context;\n    };\n    Canvas.prototype.getPixelRatio = function () {\n        return this.pixelRatio;\n    };\n    Canvas.prototype.setPixelRatio = function (pixelRatio) {\n        var previousRatio = this.pixelRatio;\n        this.pixelRatio = pixelRatio;\n        this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n    };\n    Canvas.prototype.setWidth = function (width) {\n        this.width = this._canvas.width = width * this.pixelRatio;\n        this._canvas.style.width = width + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    };\n    Canvas.prototype.setHeight = function (height) {\n        this.height = this._canvas.height = height * this.pixelRatio;\n        this._canvas.style.height = height + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    };\n    Canvas.prototype.getWidth = function () {\n        return this.width;\n    };\n    Canvas.prototype.getHeight = function () {\n        return this.height;\n    };\n    Canvas.prototype.setSize = function (width, height) {\n        this.setWidth(width || 0);\n        this.setHeight(height || 0);\n    };\n    Canvas.prototype.toDataURL = function (mimeType, quality) {\n        try {\n            return this._canvas.toDataURL(mimeType, quality);\n        }\n        catch (e) {\n            try {\n                return this._canvas.toDataURL();\n            }\n            catch (err) {\n                Util_1.Util.error('Unable to get data URL. ' +\n                    err.message +\n                    ' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                return '';\n            }\n        }\n    };\n    return Canvas;\n}());\nexports.Canvas = Canvas;\nFactory_1.Factory.addGetterSetter(Canvas, 'pixelRatio', undefined, Validators_1.getNumberValidator());\nvar SceneCanvas = (function (_super) {\n    __extends(SceneCanvas, _super);\n    function SceneCanvas(config) {\n        if (config === void 0) { config = { width: 0, height: 0 }; }\n        var _this = _super.call(this, config) || this;\n        _this.context = new Context_1.SceneContext(_this);\n        _this.setSize(config.width, config.height);\n        return _this;\n    }\n    return SceneCanvas;\n}(Canvas));\nexports.SceneCanvas = SceneCanvas;\nvar HitCanvas = (function (_super) {\n    __extends(HitCanvas, _super);\n    function HitCanvas(config) {\n        if (config === void 0) { config = { width: 0, height: 0 }; }\n        var _this = _super.call(this, config) || this;\n        _this.hitCanvas = true;\n        _this.context = new Context_1.HitContext(_this);\n        _this.setSize(config.width, config.height);\n        return _this;\n    }\n    return HitCanvas;\n}(Canvas));\nexports.HitCanvas = HitCanvas;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Util_1 = require(\"./Util\");\nexports.DD = {\n    get isDragging() {\n        var flag = false;\n        exports.DD._dragElements.forEach(function (elem) {\n            if (elem.dragStatus === 'dragging') {\n                flag = true;\n            }\n        });\n        return flag;\n    },\n    justDragged: false,\n    get node() {\n        var node;\n        exports.DD._dragElements.forEach(function (elem) {\n            node = elem.node;\n        });\n        return node;\n    },\n    _dragElements: new Map(),\n    _drag: function (evt) {\n        exports.DD._dragElements.forEach(function (elem, key) {\n            var node = elem.node;\n            var stage = node.getStage();\n            stage.setPointersPositions(evt);\n            if (elem.pointerId === undefined) {\n                elem.pointerId = Util_1.Util._getFirstPointerId(evt);\n            }\n            var pos = stage._changedPointerPositions.find(function (pos) { return pos.id === elem.pointerId; });\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus !== 'dragging') {\n                var dragDistance = node.dragDistance();\n                var distance = Math.max(Math.abs(pos.x - elem.startPointerPos.x), Math.abs(pos.y - elem.startPointerPos.y));\n                if (distance < dragDistance) {\n                    return;\n                }\n                node.startDrag({ evt: evt });\n                if (!node.isDragging()) {\n                    return;\n                }\n            }\n            node._setDragPosition(evt, elem);\n            node.fire('dragmove', {\n                type: 'dragmove',\n                target: node,\n                evt: evt\n            }, true);\n        });\n    },\n    _endDragBefore: function (evt) {\n        exports.DD._dragElements.forEach(function (elem, key) {\n            var node = elem.node;\n            var stage = node.getStage();\n            if (evt) {\n                stage.setPointersPositions(evt);\n            }\n            var pos = stage._changedPointerPositions.find(function (pos) { return pos.id === elem.pointerId; });\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus === 'dragging' || elem.dragStatus === 'stopped') {\n                exports.DD.justDragged = true;\n                Global_1.Konva.listenClickTap = false;\n                elem.dragStatus = 'stopped';\n            }\n            var drawNode = elem.node.getLayer() ||\n                (elem.node instanceof Global_1.Konva['Stage'] && elem.node);\n            if (drawNode) {\n                drawNode.draw();\n            }\n        });\n    },\n    _endDragAfter: function (evt) {\n        exports.DD._dragElements.forEach(function (elem, key) {\n            if (elem.dragStatus === 'stopped') {\n                elem.node.fire('dragend', {\n                    type: 'dragend',\n                    target: elem.node,\n                    evt: evt\n                }, true);\n            }\n            if (elem.dragStatus !== 'dragging') {\n                exports.DD._dragElements.delete(key);\n            }\n        });\n    }\n};\nif (Global_1.Konva.isBrowser) {\n    window.addEventListener('mouseup', exports.DD._endDragBefore, true);\n    window.addEventListener('touchend', exports.DD._endDragBefore, true);\n    window.addEventListener('mousemove', exports.DD._drag);\n    window.addEventListener('touchmove', exports.DD._drag);\n    window.addEventListener('mouseup', exports.DD._endDragAfter, false);\n    window.addEventListener('touchend', exports.DD._endDragAfter, false);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Factory_1 = require(\"./Factory\");\nvar Canvas_1 = require(\"./Canvas\");\nvar Global_1 = require(\"./Global\");\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\nvar Validators_1 = require(\"./Validators\");\nexports.ids = {};\nexports.names = {};\nvar _addId = function (node, id) {\n    if (!id) {\n        return;\n    }\n    exports.ids[id] = node;\n};\nexports._removeId = function (id, node) {\n    if (!id) {\n        return;\n    }\n    if (exports.ids[id] !== node) {\n        return;\n    }\n    delete exports.ids[id];\n};\nexports._addName = function (node, name) {\n    if (name) {\n        if (!exports.names[name]) {\n            exports.names[name] = [];\n        }\n        exports.names[name].push(node);\n    }\n};\nexports._removeName = function (name, _id) {\n    if (!name) {\n        return;\n    }\n    var nodes = exports.names[name];\n    if (!nodes) {\n        return;\n    }\n    for (var n = 0; n < nodes.length; n++) {\n        var no = nodes[n];\n        if (no._id === _id) {\n            nodes.splice(n, 1);\n        }\n    }\n    if (nodes.length === 0) {\n        delete exports.names[name];\n    }\n};\nvar ABSOLUTE_OPACITY = 'absoluteOpacity', ABSOLUTE_TRANSFORM = 'absoluteTransform', ABSOLUTE_SCALE = 'absoluteScale', CANVAS = 'canvas', CHANGE = 'Change', CHILDREN = 'children', KONVA = 'konva', LISTENING = 'listening', MOUSEENTER = 'mouseenter', MOUSELEAVE = 'mouseleave', NAME = 'name', SET = 'set', SHAPE = 'Shape', SPACE = ' ', STAGE = 'stage', TRANSFORM = 'transform', UPPER_STAGE = 'Stage', VISIBLE = 'visible', TRANSFORM_CHANGE_STR = [\n    'xChange.konva',\n    'yChange.konva',\n    'scaleXChange.konva',\n    'scaleYChange.konva',\n    'skewXChange.konva',\n    'skewYChange.konva',\n    'rotationChange.konva',\n    'offsetXChange.konva',\n    'offsetYChange.konva',\n    'transformsEnabledChange.konva',\n].join(SPACE), SCALE_CHANGE_STR = ['scaleXChange.konva', 'scaleYChange.konva'].join(SPACE);\nvar emptyChildren = new Util_1.Collection();\nvar idCounter = 1;\nvar Node = (function () {\n    function Node(config) {\n        var _this = this;\n        this._id = idCounter++;\n        this.eventListeners = {};\n        this.attrs = {};\n        this.index = 0;\n        this.parent = null;\n        this._cache = new Map();\n        this._lastPos = null;\n        this._batchingTransformChange = false;\n        this._needClearTransformCache = false;\n        this._filterUpToDate = false;\n        this._isUnderCache = false;\n        this.children = emptyChildren;\n        this._dragEventId = null;\n        this.setAttrs(config);\n        this.on(TRANSFORM_CHANGE_STR, function () {\n            if (_this._batchingTransformChange) {\n                _this._needClearTransformCache = true;\n                return;\n            }\n            _this._clearCache(TRANSFORM);\n            _this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        });\n        this.on('visibleChange.konva', function () {\n            _this._clearSelfAndDescendantCache(VISIBLE);\n        });\n        this.on('listeningChange.konva', function () {\n            _this._clearSelfAndDescendantCache(LISTENING);\n        });\n        this.on('opacityChange.konva', function () {\n            _this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        });\n    }\n    Node.prototype.hasChildren = function () {\n        return false;\n    };\n    Node.prototype.getChildren = function () {\n        return emptyChildren;\n    };\n    Node.prototype._clearCache = function (attr) {\n        if (attr) {\n            this._cache.delete(attr);\n        }\n        else {\n            this._cache.clear();\n        }\n    };\n    Node.prototype._getCache = function (attr, privateGetter) {\n        var cache = this._cache.get(attr);\n        if (cache === undefined) {\n            cache = privateGetter.call(this);\n            this._cache.set(attr, cache);\n        }\n        return cache;\n    };\n    Node.prototype._getCanvasCache = function () {\n        return this._cache.get(CANVAS);\n    };\n    Node.prototype._clearSelfAndDescendantCache = function (attr, forceEvent) {\n        this._clearCache(attr);\n        if (forceEvent && attr === ABSOLUTE_TRANSFORM) {\n            this.fire('_clearTransformCache');\n        }\n        if (this.isCached()) {\n            return;\n        }\n        if (this.children) {\n            this.children.each(function (node) {\n                node._clearSelfAndDescendantCache(attr, true);\n            });\n        }\n    };\n    Node.prototype.clearCache = function () {\n        this._cache.delete(CANVAS);\n        this._clearSelfAndDescendantCache();\n        return this;\n    };\n    Node.prototype.cache = function (config) {\n        var conf = config || {};\n        var rect = {};\n        if (conf.x === undefined ||\n            conf.y === undefined ||\n            conf.width === undefined ||\n            conf.height === undefined) {\n            rect = this.getClientRect({\n                skipTransform: true,\n                relativeTo: this.getParent(),\n            });\n        }\n        var width = Math.ceil(conf.width || rect.width), height = Math.ceil(conf.height || rect.height), pixelRatio = conf.pixelRatio, x = conf.x === undefined ? rect.x : conf.x, y = conf.y === undefined ? rect.y : conf.y, offset = conf.offset || 0, drawBorder = conf.drawBorder || false;\n        if (!width || !height) {\n            Util_1.Util.error('Can not cache the node. Width or height of the node equals 0. Caching is skipped.');\n            return;\n        }\n        width += offset * 2;\n        height += offset * 2;\n        x -= offset;\n        y -= offset;\n        var cachedSceneCanvas = new Canvas_1.SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: width,\n            height: height,\n        }), cachedFilterCanvas = new Canvas_1.SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: 0,\n            height: 0,\n        }), cachedHitCanvas = new Canvas_1.HitCanvas({\n            pixelRatio: 1,\n            width: width,\n            height: height,\n        }), sceneContext = cachedSceneCanvas.getContext(), hitContext = cachedHitCanvas.getContext();\n        cachedHitCanvas.isCache = true;\n        this._cache.delete('canvas');\n        this._filterUpToDate = false;\n        if (conf.imageSmoothingEnabled === false) {\n            cachedSceneCanvas.getContext()._context.imageSmoothingEnabled = false;\n            cachedFilterCanvas.getContext()._context.imageSmoothingEnabled = false;\n        }\n        sceneContext.save();\n        hitContext.save();\n        sceneContext.translate(-x, -y);\n        hitContext.translate(-x, -y);\n        this._isUnderCache = true;\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this.drawScene(cachedSceneCanvas, this, true);\n        this.drawHit(cachedHitCanvas, this, true);\n        this._isUnderCache = false;\n        sceneContext.restore();\n        hitContext.restore();\n        if (drawBorder) {\n            sceneContext.save();\n            sceneContext.beginPath();\n            sceneContext.rect(0, 0, width, height);\n            sceneContext.closePath();\n            sceneContext.setAttr('strokeStyle', 'red');\n            sceneContext.setAttr('lineWidth', 5);\n            sceneContext.stroke();\n            sceneContext.restore();\n        }\n        this._cache.set(CANVAS, {\n            scene: cachedSceneCanvas,\n            filter: cachedFilterCanvas,\n            hit: cachedHitCanvas,\n            x: x,\n            y: y,\n        });\n        return this;\n    };\n    Node.prototype.isCached = function () {\n        return this._cache.has('canvas');\n    };\n    Node.prototype.getClientRect = function (config) {\n        throw new Error('abstract \"getClientRect\" method call');\n    };\n    Node.prototype._transformedRect = function (rect, top) {\n        var points = [\n            { x: rect.x, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y + rect.height },\n            { x: rect.x, y: rect.y + rect.height },\n        ];\n        var minX, minY, maxX, maxY;\n        var trans = this.getAbsoluteTransform(top);\n        points.forEach(function (point) {\n            var transformed = trans.point(point);\n            if (minX === undefined) {\n                minX = maxX = transformed.x;\n                minY = maxY = transformed.y;\n            }\n            minX = Math.min(minX, transformed.x);\n            minY = Math.min(minY, transformed.y);\n            maxX = Math.max(maxX, transformed.x);\n            maxY = Math.max(maxY, transformed.y);\n        });\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    };\n    Node.prototype._drawCachedSceneCanvas = function (context) {\n        context.save();\n        context._applyOpacity(this);\n        context._applyGlobalCompositeOperation(this);\n        var canvasCache = this._getCanvasCache();\n        context.translate(canvasCache.x, canvasCache.y);\n        var cacheCanvas = this._getCachedSceneCanvas();\n        var ratio = cacheCanvas.pixelRatio;\n        context.drawImage(cacheCanvas._canvas, 0, 0, cacheCanvas.width / ratio, cacheCanvas.height / ratio);\n        context.restore();\n    };\n    Node.prototype._drawCachedHitCanvas = function (context) {\n        var canvasCache = this._getCanvasCache(), hitCanvas = canvasCache.hit;\n        context.save();\n        context.translate(canvasCache.x, canvasCache.y);\n        context.drawImage(hitCanvas._canvas, 0, 0);\n        context.restore();\n    };\n    Node.prototype._getCachedSceneCanvas = function () {\n        var filters = this.filters(), cachedCanvas = this._getCanvasCache(), sceneCanvas = cachedCanvas.scene, filterCanvas = cachedCanvas.filter, filterContext = filterCanvas.getContext(), len, imageData, n, filter;\n        if (filters) {\n            if (!this._filterUpToDate) {\n                var ratio = sceneCanvas.pixelRatio;\n                filterCanvas.setSize(sceneCanvas.width / sceneCanvas.pixelRatio, sceneCanvas.height / sceneCanvas.pixelRatio);\n                try {\n                    len = filters.length;\n                    filterContext.clear();\n                    filterContext.drawImage(sceneCanvas._canvas, 0, 0, sceneCanvas.getWidth() / ratio, sceneCanvas.getHeight() / ratio);\n                    imageData = filterContext.getImageData(0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\n                    for (n = 0; n < len; n++) {\n                        filter = filters[n];\n                        if (typeof filter !== 'function') {\n                            Util_1.Util.error('Filter should be type of function, but got ' +\n                                typeof filter +\n                                ' instead. Please check correct filters');\n                            continue;\n                        }\n                        filter.call(this, imageData);\n                        filterContext.putImageData(imageData, 0, 0);\n                    }\n                }\n                catch (e) {\n                    Util_1.Util.error('Unable to apply filter. ' +\n                        e.message +\n                        ' This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                }\n                this._filterUpToDate = true;\n            }\n            return filterCanvas;\n        }\n        return sceneCanvas;\n    };\n    Node.prototype.on = function (evtStr, handler) {\n        if (arguments.length === 3) {\n            return this._delegate.apply(this, arguments);\n        }\n        var events = evtStr.split(SPACE), len = events.length, n, event, parts, baseEvent, name;\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1] || '';\n            if (!this.eventListeners[baseEvent]) {\n                this.eventListeners[baseEvent] = [];\n            }\n            this.eventListeners[baseEvent].push({\n                name: name,\n                handler: handler,\n            });\n        }\n        return this;\n    };\n    Node.prototype.off = function (evtStr, callback) {\n        var events = (evtStr || '').split(SPACE), len = events.length, n, t, event, parts, baseEvent, name;\n        if (!evtStr) {\n            for (t in this.eventListeners) {\n                this._off(t);\n            }\n        }\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1];\n            if (baseEvent) {\n                if (this.eventListeners[baseEvent]) {\n                    this._off(baseEvent, name, callback);\n                }\n            }\n            else {\n                for (t in this.eventListeners) {\n                    this._off(t, name, callback);\n                }\n            }\n        }\n        return this;\n    };\n    Node.prototype.dispatchEvent = function (evt) {\n        var e = {\n            target: this,\n            type: evt.type,\n            evt: evt,\n        };\n        this.fire(evt.type, e);\n        return this;\n    };\n    Node.prototype.addEventListener = function (type, handler) {\n        this.on(type, function (evt) {\n            handler.call(this, evt.evt);\n        });\n        return this;\n    };\n    Node.prototype.removeEventListener = function (type) {\n        this.off(type);\n        return this;\n    };\n    Node.prototype._delegate = function (event, selector, handler) {\n        var stopNode = this;\n        this.on(event, function (evt) {\n            var targets = evt.target.findAncestors(selector, true, stopNode);\n            for (var i = 0; i < targets.length; i++) {\n                evt = Util_1.Util.cloneObject(evt);\n                evt.currentTarget = targets[i];\n                handler.call(targets[i], evt);\n            }\n        });\n    };\n    Node.prototype.remove = function () {\n        if (this.isDragging()) {\n            this.stopDrag();\n        }\n        DragAndDrop_1.DD._dragElements.delete(this._id);\n        this._remove();\n        return this;\n    };\n    Node.prototype._clearCaches = function () {\n        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this._clearSelfAndDescendantCache(STAGE);\n        this._clearSelfAndDescendantCache(VISIBLE);\n        this._clearSelfAndDescendantCache(LISTENING);\n    };\n    Node.prototype._remove = function () {\n        this._clearCaches();\n        var parent = this.getParent();\n        if (parent && parent.children) {\n            parent.children.splice(this.index, 1);\n            parent._setChildrenIndices();\n            this.parent = null;\n        }\n    };\n    Node.prototype.destroy = function () {\n        exports._removeId(this.id(), this);\n        var names = (this.name() || '').split(/\\s/g);\n        for (var i = 0; i < names.length; i++) {\n            var subname = names[i];\n            exports._removeName(subname, this._id);\n        }\n        this.remove();\n        return this;\n    };\n    Node.prototype.getAttr = function (attr) {\n        var method = 'get' + Util_1.Util._capitalize(attr);\n        if (Util_1.Util._isFunction(this[method])) {\n            return this[method]();\n        }\n        return this.attrs[attr];\n    };\n    Node.prototype.getAncestors = function () {\n        var parent = this.getParent(), ancestors = new Util_1.Collection();\n        while (parent) {\n            ancestors.push(parent);\n            parent = parent.getParent();\n        }\n        return ancestors;\n    };\n    Node.prototype.getAttrs = function () {\n        return this.attrs || {};\n    };\n    Node.prototype.setAttrs = function (config) {\n        var key, method;\n        if (!config) {\n            return this;\n        }\n        for (key in config) {\n            if (key === CHILDREN) {\n                continue;\n            }\n            method = SET + Util_1.Util._capitalize(key);\n            if (Util_1.Util._isFunction(this[method])) {\n                this[method](config[key]);\n            }\n            else {\n                this._setAttr(key, config[key]);\n            }\n        }\n        return this;\n    };\n    Node.prototype.isListening = function () {\n        return this._getCache(LISTENING, this._isListening);\n    };\n    Node.prototype._isListening = function () {\n        var listening = this.listening(), parent = this.getParent();\n        if (listening === 'inherit') {\n            if (parent) {\n                return parent.isListening();\n            }\n            else {\n                return true;\n            }\n        }\n        else {\n            return listening;\n        }\n    };\n    Node.prototype.isVisible = function () {\n        return this._getCache(VISIBLE, this._isVisible);\n    };\n    Node.prototype._isVisible = function (relativeTo) {\n        var visible = this.visible(), parent = this.getParent();\n        if (visible === 'inherit') {\n            if (parent && parent !== relativeTo) {\n                return parent._isVisible(relativeTo);\n            }\n            else {\n                return true;\n            }\n        }\n        else if (relativeTo && relativeTo !== parent) {\n            return visible && parent._isVisible(relativeTo);\n        }\n        else {\n            return visible;\n        }\n    };\n    Node.prototype.shouldDrawHit = function () {\n        var layer = this.getLayer();\n        return ((!layer && this.isListening() && this.isVisible()) ||\n            (layer &&\n                layer.hitGraphEnabled() &&\n                this.isListening() &&\n                this.isVisible()));\n    };\n    Node.prototype.show = function () {\n        this.visible(true);\n        return this;\n    };\n    Node.prototype.hide = function () {\n        this.visible(false);\n        return this;\n    };\n    Node.prototype.getZIndex = function () {\n        return this.index || 0;\n    };\n    Node.prototype.getAbsoluteZIndex = function () {\n        var depth = this.getDepth(), that = this, index = 0, nodes, len, n, child;\n        function addChildren(children) {\n            nodes = [];\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                child = children[n];\n                index++;\n                if (child.nodeType !== SHAPE) {\n                    nodes = nodes.concat(child.getChildren().toArray());\n                }\n                if (child._id === that._id) {\n                    n = len;\n                }\n            }\n            if (nodes.length > 0 && nodes[0].getDepth() <= depth) {\n                addChildren(nodes);\n            }\n        }\n        if (that.nodeType !== UPPER_STAGE) {\n            addChildren(that.getStage().getChildren());\n        }\n        return index;\n    };\n    Node.prototype.getDepth = function () {\n        var depth = 0, parent = this.parent;\n        while (parent) {\n            depth++;\n            parent = parent.parent;\n        }\n        return depth;\n    };\n    Node.prototype._batchTransformChanges = function (func) {\n        this._batchingTransformChange = true;\n        func();\n        this._batchingTransformChange = false;\n        if (this._needClearTransformCache) {\n            this._clearCache(TRANSFORM);\n            this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM, true);\n        }\n        this._needClearTransformCache = false;\n    };\n    Node.prototype.setPosition = function (pos) {\n        var _this = this;\n        this._batchTransformChanges(function () {\n            _this.x(pos.x);\n            _this.y(pos.y);\n        });\n        return this;\n    };\n    Node.prototype.getPosition = function () {\n        return {\n            x: this.x(),\n            y: this.y(),\n        };\n    };\n    Node.prototype.getAbsolutePosition = function (top) {\n        var haveCachedParent = false;\n        var parent = this.parent;\n        while (parent) {\n            if (parent.isCached()) {\n                haveCachedParent = true;\n                break;\n            }\n            parent = parent.parent;\n        }\n        if (haveCachedParent && !top) {\n            top = true;\n        }\n        var absoluteMatrix = this.getAbsoluteTransform(top).getMatrix(), absoluteTransform = new Util_1.Transform(), offset = this.offset();\n        absoluteTransform.m = absoluteMatrix.slice();\n        absoluteTransform.translate(offset.x, offset.y);\n        return absoluteTransform.getTranslation();\n    };\n    Node.prototype.setAbsolutePosition = function (pos) {\n        var origTrans = this._clearTransform(), it;\n        this.attrs.x = origTrans.x;\n        this.attrs.y = origTrans.y;\n        delete origTrans.x;\n        delete origTrans.y;\n        this._clearCache(TRANSFORM);\n        it = this._getAbsoluteTransform();\n        it.invert();\n        it.translate(pos.x, pos.y);\n        pos = {\n            x: this.attrs.x + it.getTranslation().x,\n            y: this.attrs.y + it.getTranslation().y,\n        };\n        this._setTransform(origTrans);\n        this.setPosition({ x: pos.x, y: pos.y });\n        return this;\n    };\n    Node.prototype._setTransform = function (trans) {\n        var key;\n        for (key in trans) {\n            this.attrs[key] = trans[key];\n        }\n    };\n    Node.prototype._clearTransform = function () {\n        var trans = {\n            x: this.x(),\n            y: this.y(),\n            rotation: this.rotation(),\n            scaleX: this.scaleX(),\n            scaleY: this.scaleY(),\n            offsetX: this.offsetX(),\n            offsetY: this.offsetY(),\n            skewX: this.skewX(),\n            skewY: this.skewY(),\n        };\n        this.attrs.x = 0;\n        this.attrs.y = 0;\n        this.attrs.rotation = 0;\n        this.attrs.scaleX = 1;\n        this.attrs.scaleY = 1;\n        this.attrs.offsetX = 0;\n        this.attrs.offsetY = 0;\n        this.attrs.skewX = 0;\n        this.attrs.skewY = 0;\n        return trans;\n    };\n    Node.prototype.move = function (change) {\n        var changeX = change.x, changeY = change.y, x = this.x(), y = this.y();\n        if (changeX !== undefined) {\n            x += changeX;\n        }\n        if (changeY !== undefined) {\n            y += changeY;\n        }\n        this.setPosition({ x: x, y: y });\n        return this;\n    };\n    Node.prototype._eachAncestorReverse = function (func, top) {\n        var family = [], parent = this.getParent(), len, n;\n        if (top && top._id === this._id) {\n            func(this);\n            return;\n        }\n        family.unshift(this);\n        while (parent && (!top || parent._id !== top._id)) {\n            family.unshift(parent);\n            parent = parent.parent;\n        }\n        len = family.length;\n        for (n = 0; n < len; n++) {\n            func(family[n]);\n        }\n    };\n    Node.prototype.rotate = function (theta) {\n        this.rotation(this.rotation() + theta);\n        return this;\n    };\n    Node.prototype.moveToTop = function () {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveToTop function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        this.parent.children.splice(index, 1);\n        this.parent.children.push(this);\n        this.parent._setChildrenIndices();\n        return true;\n    };\n    Node.prototype.moveUp = function () {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveUp function is ignored.');\n            return false;\n        }\n        var index = this.index, len = this.parent.getChildren().length;\n        if (index < len - 1) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index + 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    };\n    Node.prototype.moveDown = function () {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveDown function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index - 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    };\n    Node.prototype.moveToBottom = function () {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveToBottom function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.unshift(this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    };\n    Node.prototype.setZIndex = function (zIndex) {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. zIndex parameter is ignored.');\n            return this;\n        }\n        if (zIndex < 0 || zIndex >= this.parent.children.length) {\n            Util_1.Util.warn('Unexpected value ' +\n                zIndex +\n                ' for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to ' +\n                (this.parent.children.length - 1) +\n                '.');\n        }\n        var index = this.index;\n        this.parent.children.splice(index, 1);\n        this.parent.children.splice(zIndex, 0, this);\n        this.parent._setChildrenIndices();\n        return this;\n    };\n    Node.prototype.getAbsoluteOpacity = function () {\n        return this._getCache(ABSOLUTE_OPACITY, this._getAbsoluteOpacity);\n    };\n    Node.prototype._getAbsoluteOpacity = function () {\n        var absOpacity = this.opacity();\n        var parent = this.getParent();\n        if (parent && !parent._isUnderCache) {\n            absOpacity *= parent.getAbsoluteOpacity();\n        }\n        return absOpacity;\n    };\n    Node.prototype.moveTo = function (newContainer) {\n        if (this.getParent() !== newContainer) {\n            this._remove();\n            newContainer.add(this);\n        }\n        return this;\n    };\n    Node.prototype.toObject = function () {\n        var obj = {}, attrs = this.getAttrs(), key, val, getter, defaultValue, nonPlainObject;\n        obj.attrs = {};\n        for (key in attrs) {\n            val = attrs[key];\n            nonPlainObject =\n                Util_1.Util.isObject(val) && !Util_1.Util._isPlainObject(val) && !Util_1.Util._isArray(val);\n            if (nonPlainObject) {\n                continue;\n            }\n            getter = typeof this[key] === 'function' && this[key];\n            delete attrs[key];\n            defaultValue = getter ? getter.call(this) : null;\n            attrs[key] = val;\n            if (defaultValue !== val) {\n                obj.attrs[key] = val;\n            }\n        }\n        obj.className = this.getClassName();\n        return Util_1.Util._prepareToStringify(obj);\n    };\n    Node.prototype.toJSON = function () {\n        return JSON.stringify(this.toObject());\n    };\n    Node.prototype.getParent = function () {\n        return this.parent;\n    };\n    Node.prototype.findAncestors = function (selector, includeSelf, stopNode) {\n        var res = [];\n        if (includeSelf && this._isMatch(selector)) {\n            res.push(this);\n        }\n        var ancestor = this.parent;\n        while (ancestor) {\n            if (ancestor === stopNode) {\n                return res;\n            }\n            if (ancestor._isMatch(selector)) {\n                res.push(ancestor);\n            }\n            ancestor = ancestor.parent;\n        }\n        return res;\n    };\n    Node.prototype.isAncestorOf = function (node) {\n        return false;\n    };\n    Node.prototype.findAncestor = function (selector, includeSelf, stopNode) {\n        return this.findAncestors(selector, includeSelf, stopNode)[0];\n    };\n    Node.prototype._isMatch = function (selector) {\n        if (!selector) {\n            return false;\n        }\n        if (typeof selector === 'function') {\n            return selector(this);\n        }\n        var selectorArr = selector.replace(/ /g, '').split(','), len = selectorArr.length, n, sel;\n        for (n = 0; n < len; n++) {\n            sel = selectorArr[n];\n            if (!Util_1.Util.isValidSelector(sel)) {\n                Util_1.Util.warn('Selector \"' +\n                    sel +\n                    '\" is invalid. Allowed selectors examples are \"#foo\", \".bar\" or \"Group\".');\n                Util_1.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like \"Triangle\".');\n                Util_1.Util.warn('Konva is awesome, right?');\n            }\n            if (sel.charAt(0) === '#') {\n                if (this.id() === sel.slice(1)) {\n                    return true;\n                }\n            }\n            else if (sel.charAt(0) === '.') {\n                if (this.hasName(sel.slice(1))) {\n                    return true;\n                }\n            }\n            else if (this.className === sel || this.nodeType === sel) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Node.prototype.getLayer = function () {\n        var parent = this.getParent();\n        return parent ? parent.getLayer() : null;\n    };\n    Node.prototype.getStage = function () {\n        return this._getCache(STAGE, this._getStage);\n    };\n    Node.prototype._getStage = function () {\n        var parent = this.getParent();\n        if (parent) {\n            return parent.getStage();\n        }\n        else {\n            return undefined;\n        }\n    };\n    Node.prototype.fire = function (eventType, evt, bubble) {\n        if (evt === void 0) { evt = {}; }\n        evt.target = evt.target || this;\n        if (bubble) {\n            this._fireAndBubble(eventType, evt);\n        }\n        else {\n            this._fire(eventType, evt);\n        }\n        return this;\n    };\n    Node.prototype.getAbsoluteTransform = function (top) {\n        if (top) {\n            return this._getAbsoluteTransform(top);\n        }\n        else {\n            return this._getCache(ABSOLUTE_TRANSFORM, this._getAbsoluteTransform);\n        }\n    };\n    Node.prototype._getAbsoluteTransform = function (top) {\n        var at;\n        if (top) {\n            at = new Util_1.Transform();\n            this._eachAncestorReverse(function (node) {\n                var transformsEnabled = node.transformsEnabled();\n                if (transformsEnabled === 'all') {\n                    at.multiply(node.getTransform());\n                }\n                else if (transformsEnabled === 'position') {\n                    at.translate(node.x() - node.offsetX(), node.y() - node.offsetY());\n                }\n            }, top);\n            return at;\n        }\n        else {\n            if (this.parent) {\n                at = this.parent.getAbsoluteTransform().copy();\n            }\n            else {\n                at = new Util_1.Transform();\n            }\n            var transformsEnabled = this.transformsEnabled();\n            if (transformsEnabled === 'all') {\n                at.multiply(this.getTransform());\n            }\n            else if (transformsEnabled === 'position') {\n                at.translate(this.x() - this.offsetX(), this.y() - this.offsetY());\n            }\n            return at;\n        }\n    };\n    Node.prototype.getAbsoluteScale = function (top) {\n        var parent = this;\n        while (parent) {\n            if (parent._isUnderCache) {\n                top = parent;\n            }\n            parent = parent.getParent();\n        }\n        var transform = this.getAbsoluteTransform(top);\n        var attrs = transform.decompose();\n        return {\n            x: attrs.scaleX,\n            y: attrs.scaleY,\n        };\n    };\n    Node.prototype.getAbsoluteRotation = function () {\n        return this.getAbsoluteTransform().decompose().rotation;\n    };\n    Node.prototype.getTransform = function () {\n        return this._getCache(TRANSFORM, this._getTransform);\n    };\n    Node.prototype._getTransform = function () {\n        var m = new Util_1.Transform(), x = this.x(), y = this.y(), rotation = Global_1.Konva.getAngle(this.rotation()), scaleX = this.scaleX(), scaleY = this.scaleY(), skewX = this.skewX(), skewY = this.skewY(), offsetX = this.offsetX(), offsetY = this.offsetY();\n        if (x !== 0 || y !== 0) {\n            m.translate(x, y);\n        }\n        if (rotation !== 0) {\n            m.rotate(rotation);\n        }\n        if (skewX !== 0 || skewY !== 0) {\n            m.skew(skewX, skewY);\n        }\n        if (scaleX !== 1 || scaleY !== 1) {\n            m.scale(scaleX, scaleY);\n        }\n        if (offsetX !== 0 || offsetY !== 0) {\n            m.translate(-1 * offsetX, -1 * offsetY);\n        }\n        return m;\n    };\n    Node.prototype.clone = function (obj) {\n        var attrs = Util_1.Util.cloneObject(this.attrs), key, allListeners, len, n, listener;\n        for (key in obj) {\n            attrs[key] = obj[key];\n        }\n        var node = new this.constructor(attrs);\n        for (key in this.eventListeners) {\n            allListeners = this.eventListeners[key];\n            len = allListeners.length;\n            for (n = 0; n < len; n++) {\n                listener = allListeners[n];\n                if (listener.name.indexOf(KONVA) < 0) {\n                    if (!node.eventListeners[key]) {\n                        node.eventListeners[key] = [];\n                    }\n                    node.eventListeners[key].push(listener);\n                }\n            }\n        }\n        return node;\n    };\n    Node.prototype._toKonvaCanvas = function (config) {\n        config = config || {};\n        var box = this.getClientRect();\n        var stage = this.getStage(), x = config.x !== undefined ? config.x : box.x, y = config.y !== undefined ? config.y : box.y, pixelRatio = config.pixelRatio || 1, canvas = new Canvas_1.SceneCanvas({\n            width: config.width || box.width || (stage ? stage.width() : 0),\n            height: config.height || box.height || (stage ? stage.height() : 0),\n            pixelRatio: pixelRatio,\n        }), context = canvas.getContext();\n        context.save();\n        if (x || y) {\n            context.translate(-1 * x, -1 * y);\n        }\n        this.drawScene(canvas);\n        context.restore();\n        return canvas;\n    };\n    Node.prototype.toCanvas = function (config) {\n        return this._toKonvaCanvas(config)._canvas;\n    };\n    Node.prototype.toDataURL = function (config) {\n        config = config || {};\n        var mimeType = config.mimeType || null, quality = config.quality || null;\n        var url = this._toKonvaCanvas(config).toDataURL(mimeType, quality);\n        if (config.callback) {\n            config.callback(url);\n        }\n        return url;\n    };\n    Node.prototype.toImage = function (config) {\n        if (!config || !config.callback) {\n            throw 'callback required for toImage method config argument';\n        }\n        var callback = config.callback;\n        delete config.callback;\n        Util_1.Util._urlToImage(this.toDataURL(config), function (img) {\n            callback(img);\n        });\n    };\n    Node.prototype.setSize = function (size) {\n        this.width(size.width);\n        this.height(size.height);\n        return this;\n    };\n    Node.prototype.getSize = function () {\n        return {\n            width: this.width(),\n            height: this.height(),\n        };\n    };\n    Node.prototype.getClassName = function () {\n        return this.className || this.nodeType;\n    };\n    Node.prototype.getType = function () {\n        return this.nodeType;\n    };\n    Node.prototype.getDragDistance = function () {\n        if (this.attrs.dragDistance !== undefined) {\n            return this.attrs.dragDistance;\n        }\n        else if (this.parent) {\n            return this.parent.getDragDistance();\n        }\n        else {\n            return Global_1.Konva.dragDistance;\n        }\n    };\n    Node.prototype._off = function (type, name, callback) {\n        var evtListeners = this.eventListeners[type], i, evtName, handler;\n        for (i = 0; i < evtListeners.length; i++) {\n            evtName = evtListeners[i].name;\n            handler = evtListeners[i].handler;\n            if ((evtName !== 'konva' || name === 'konva') &&\n                (!name || evtName === name) &&\n                (!callback || callback === handler)) {\n                evtListeners.splice(i, 1);\n                if (evtListeners.length === 0) {\n                    delete this.eventListeners[type];\n                    break;\n                }\n                i--;\n            }\n        }\n    };\n    Node.prototype._fireChangeEvent = function (attr, oldVal, newVal) {\n        this._fire(attr + CHANGE, {\n            oldVal: oldVal,\n            newVal: newVal,\n        });\n    };\n    Node.prototype.setId = function (id) {\n        var oldId = this.id();\n        exports._removeId(oldId, this);\n        _addId(this, id);\n        this._setAttr('id', id);\n        return this;\n    };\n    Node.prototype.setName = function (name) {\n        var oldNames = (this.name() || '').split(/\\s/g);\n        var newNames = (name || '').split(/\\s/g);\n        var subname, i;\n        for (i = 0; i < oldNames.length; i++) {\n            subname = oldNames[i];\n            if (newNames.indexOf(subname) === -1 && subname) {\n                exports._removeName(subname, this._id);\n            }\n        }\n        for (i = 0; i < newNames.length; i++) {\n            subname = newNames[i];\n            if (oldNames.indexOf(subname) === -1 && subname) {\n                exports._addName(this, subname);\n            }\n        }\n        this._setAttr(NAME, name);\n        return this;\n    };\n    Node.prototype.addName = function (name) {\n        if (!this.hasName(name)) {\n            var oldName = this.name();\n            var newName = oldName ? oldName + ' ' + name : name;\n            this.setName(newName);\n        }\n        return this;\n    };\n    Node.prototype.hasName = function (name) {\n        if (!name) {\n            return false;\n        }\n        var fullName = this.name();\n        if (!fullName) {\n            return false;\n        }\n        var names = (fullName || '').split(/\\s/g);\n        return names.indexOf(name) !== -1;\n    };\n    Node.prototype.removeName = function (name) {\n        var names = (this.name() || '').split(/\\s/g);\n        var index = names.indexOf(name);\n        if (index !== -1) {\n            names.splice(index, 1);\n            this.setName(names.join(' '));\n        }\n        return this;\n    };\n    Node.prototype.setAttr = function (attr, val) {\n        var func = this[SET + Util_1.Util._capitalize(attr)];\n        if (Util_1.Util._isFunction(func)) {\n            func.call(this, val);\n        }\n        else {\n            this._setAttr(attr, val);\n        }\n        return this;\n    };\n    Node.prototype._setAttr = function (key, val) {\n        var oldVal = this.attrs[key];\n        if (oldVal === val && !Util_1.Util.isObject(val)) {\n            return;\n        }\n        if (val === undefined || val === null) {\n            delete this.attrs[key];\n        }\n        else {\n            this.attrs[key] = val;\n        }\n        this._fireChangeEvent(key, oldVal, val);\n    };\n    Node.prototype._setComponentAttr = function (key, component, val) {\n        var oldVal;\n        if (val !== undefined) {\n            oldVal = this.attrs[key];\n            if (!oldVal) {\n                this.attrs[key] = this.getAttr(key);\n            }\n            this.attrs[key][component] = val;\n            this._fireChangeEvent(key, oldVal, val);\n        }\n    };\n    Node.prototype._fireAndBubble = function (eventType, evt, compareShape) {\n        if (evt && this.nodeType === SHAPE) {\n            evt.target = this;\n        }\n        var shouldStop = (eventType === MOUSEENTER || eventType === MOUSELEAVE) &&\n            ((compareShape &&\n                (this === compareShape ||\n                    (this.isAncestorOf && this.isAncestorOf(compareShape)))) ||\n                (this.nodeType === 'Stage' && !compareShape));\n        if (!shouldStop) {\n            this._fire(eventType, evt);\n            var stopBubble = (eventType === MOUSEENTER || eventType === MOUSELEAVE) &&\n                compareShape &&\n                compareShape.isAncestorOf &&\n                compareShape.isAncestorOf(this) &&\n                !compareShape.isAncestorOf(this.parent);\n            if (((evt && !evt.cancelBubble) || !evt) &&\n                this.parent &&\n                this.parent.isListening() &&\n                !stopBubble) {\n                if (compareShape && compareShape.parent) {\n                    this._fireAndBubble.call(this.parent, eventType, evt, compareShape);\n                }\n                else {\n                    this._fireAndBubble.call(this.parent, eventType, evt);\n                }\n            }\n        }\n    };\n    Node.prototype._fire = function (eventType, evt) {\n        var events = this.eventListeners[eventType], i;\n        if (events) {\n            evt = evt || {};\n            evt.currentTarget = this;\n            evt.type = eventType;\n            for (i = 0; i < events.length; i++) {\n                events[i].handler.call(this, evt);\n            }\n        }\n    };\n    Node.prototype.draw = function () {\n        this.drawScene();\n        this.drawHit();\n        return this;\n    };\n    Node.prototype._createDragElement = function (evt) {\n        var pointerId = evt ? evt.pointerId : undefined;\n        var stage = this.getStage();\n        var ap = this.getAbsolutePosition();\n        var pos = stage._getPointerById(pointerId) ||\n            stage._changedPointerPositions[0] ||\n            ap;\n        DragAndDrop_1.DD._dragElements.set(this._id, {\n            node: this,\n            startPointerPos: pos,\n            offset: {\n                x: pos.x - ap.x,\n                y: pos.y - ap.y,\n            },\n            dragStatus: 'ready',\n            pointerId: pointerId,\n        });\n    };\n    Node.prototype.startDrag = function (evt) {\n        if (!DragAndDrop_1.DD._dragElements.has(this._id)) {\n            this._createDragElement(evt);\n        }\n        var elem = DragAndDrop_1.DD._dragElements.get(this._id);\n        elem.dragStatus = 'dragging';\n        this.fire('dragstart', {\n            type: 'dragstart',\n            target: this,\n            evt: evt && evt.evt,\n        }, true);\n    };\n    Node.prototype._setDragPosition = function (evt, elem) {\n        var pos = this.getStage()._getPointerById(elem.pointerId);\n        if (!pos) {\n            return;\n        }\n        var newNodePos = {\n            x: pos.x - elem.offset.x,\n            y: pos.y - elem.offset.y,\n        };\n        var dbf = this.dragBoundFunc();\n        if (dbf !== undefined) {\n            var bounded = dbf.call(this, newNodePos, evt);\n            if (!bounded) {\n                Util_1.Util.warn('dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.');\n            }\n            else {\n                newNodePos = bounded;\n            }\n        }\n        if (!this._lastPos ||\n            this._lastPos.x !== newNodePos.x ||\n            this._lastPos.y !== newNodePos.y) {\n            this.setAbsolutePosition(newNodePos);\n            if (this.getLayer()) {\n                this.getLayer().batchDraw();\n            }\n            else if (this.getStage()) {\n                this.getStage().batchDraw();\n            }\n        }\n        this._lastPos = newNodePos;\n    };\n    Node.prototype.stopDrag = function (evt) {\n        var elem = DragAndDrop_1.DD._dragElements.get(this._id);\n        if (elem) {\n            elem.dragStatus = 'stopped';\n        }\n        DragAndDrop_1.DD._endDragBefore(evt);\n        DragAndDrop_1.DD._endDragAfter(evt);\n    };\n    Node.prototype.setDraggable = function (draggable) {\n        this._setAttr('draggable', draggable);\n        this._dragChange();\n    };\n    Node.prototype.isDragging = function () {\n        var elem = DragAndDrop_1.DD._dragElements.get(this._id);\n        return elem ? elem.dragStatus === 'dragging' : false;\n    };\n    Node.prototype._listenDrag = function () {\n        this._dragCleanup();\n        this.on('mousedown.konva touchstart.konva', function (evt) {\n            var _this = this;\n            var shouldCheckButton = evt.evt['button'] !== undefined;\n            var canDrag = !shouldCheckButton || Global_1.Konva.dragButtons.indexOf(evt.evt['button']) >= 0;\n            if (!canDrag) {\n                return;\n            }\n            if (this.isDragging()) {\n                return;\n            }\n            var hasDraggingChild = false;\n            DragAndDrop_1.DD._dragElements.forEach(function (elem) {\n                if (_this.isAncestorOf(elem.node)) {\n                    hasDraggingChild = true;\n                }\n            });\n            if (!hasDraggingChild) {\n                this._createDragElement(evt);\n            }\n        });\n    };\n    Node.prototype._dragChange = function () {\n        if (this.attrs.draggable) {\n            this._listenDrag();\n        }\n        else {\n            this._dragCleanup();\n            var stage = this.getStage();\n            if (stage && DragAndDrop_1.DD._dragElements.has(this._id)) {\n                this.stopDrag();\n            }\n        }\n    };\n    Node.prototype._dragCleanup = function () {\n        this.off('mousedown.konva');\n        this.off('touchstart.konva');\n    };\n    Node.create = function (data, container) {\n        if (Util_1.Util._isString(data)) {\n            data = JSON.parse(data);\n        }\n        return this._createNode(data, container);\n    };\n    Node._createNode = function (obj, container) {\n        var className = Node.prototype.getClassName.call(obj), children = obj.children, no, len, n;\n        if (container) {\n            obj.attrs.container = container;\n        }\n        if (!Global_1._NODES_REGISTRY[className]) {\n            Util_1.Util.warn('Can not find a node with class name \"' +\n                className +\n                '\". Fallback to \"Shape\".');\n            className = 'Shape';\n        }\n        var Class = Global_1._NODES_REGISTRY[className];\n        no = new Class(obj.attrs);\n        if (children) {\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                no.add(Node._createNode(children[n]));\n            }\n        }\n        return no;\n    };\n    return Node;\n}());\nexports.Node = Node;\nNode.prototype.nodeType = 'Node';\nNode.prototype._attrsAffectingSize = [];\nFactory_1.Factory.addGetterSetter(Node, 'zIndex');\nFactory_1.Factory.addGetterSetter(Node, 'absolutePosition');\nFactory_1.Factory.addGetterSetter(Node, 'position');\nFactory_1.Factory.addGetterSetter(Node, 'x', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'y', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'globalCompositeOperation', 'source-over', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'opacity', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'name', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'id', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'rotation', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'scale', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'scaleX', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'scaleY', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'skew', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'skewX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'skewY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'offset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'offsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'offsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'dragDistance', null, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'width', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'height', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'listening', 'inherit', function (val) {\n    var isValid = val === true || val === false || val === 'inherit';\n    if (!isValid) {\n        Util_1.Util.warn(val +\n            ' is a not valid value for \"listening\" attribute. The value may be true, false or \"inherit\".');\n    }\n    return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'preventDefault', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Node, 'filters', null, function (val) {\n    this._filterUpToDate = false;\n    return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'visible', 'inherit', function (val) {\n    var isValid = val === true || val === false || val === 'inherit';\n    if (!isValid) {\n        Util_1.Util.warn(val +\n            ' is a not valid value for \"visible\" attribute. The value may be true, false or \"inherit\".');\n    }\n    return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'transformsEnabled', 'all', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'size');\nFactory_1.Factory.addGetterSetter(Node, 'dragBoundFunc');\nFactory_1.Factory.addGetterSetter(Node, 'draggable', false, Validators_1.getBooleanValidator());\nFactory_1.Factory.backCompat(Node, {\n    rotateDeg: 'rotate',\n    setRotationDeg: 'setRotation',\n    getRotationDeg: 'getRotation',\n});\nUtil_1.Collection.mapMethods(Node);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Factory_1 = require(\"./Factory\");\nvar Node_1 = require(\"./Node\");\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\nvar Validators_1 = require(\"./Validators\");\nvar Global_1 = require(\"./Global\");\nvar Container = (function (_super) {\n    __extends(Container, _super);\n    function Container() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.children = new Util_1.Collection();\n        return _this;\n    }\n    Container.prototype.getChildren = function (filterFunc) {\n        if (!filterFunc) {\n            return this.children;\n        }\n        var results = new Util_1.Collection();\n        this.children.each(function (child) {\n            if (filterFunc(child)) {\n                results.push(child);\n            }\n        });\n        return results;\n    };\n    Container.prototype.hasChildren = function () {\n        return this.getChildren().length > 0;\n    };\n    Container.prototype.removeChildren = function () {\n        var child;\n        for (var i = 0; i < this.children.length; i++) {\n            child = this.children[i];\n            child.parent = null;\n            child.index = 0;\n            child.remove();\n        }\n        this.children = new Util_1.Collection();\n        return this;\n    };\n    Container.prototype.destroyChildren = function () {\n        var child;\n        for (var i = 0; i < this.children.length; i++) {\n            child = this.children[i];\n            child.parent = null;\n            child.index = 0;\n            child.destroy();\n        }\n        this.children = new Util_1.Collection();\n        return this;\n    };\n    Container.prototype.add = function () {\n        var children = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            children[_i] = arguments[_i];\n        }\n        if (arguments.length > 1) {\n            for (var i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        var child = children[0];\n        if (child.getParent()) {\n            child.moveTo(this);\n            return this;\n        }\n        var _children = this.children;\n        this._validateAdd(child);\n        child._clearCaches();\n        child.index = _children.length;\n        child.parent = this;\n        _children.push(child);\n        this._fire('add', {\n            child: child\n        });\n        return this;\n    };\n    Container.prototype.destroy = function () {\n        if (this.hasChildren()) {\n            this.destroyChildren();\n        }\n        _super.prototype.destroy.call(this);\n        return this;\n    };\n    Container.prototype.find = function (selector) {\n        return this._generalFind(selector, false);\n    };\n    Container.prototype.get = function (selector) {\n        Util_1.Util.warn('collection.get() method is deprecated. Please use collection.find() instead.');\n        return this.find(selector);\n    };\n    Container.prototype.findOne = function (selector) {\n        var result = this._generalFind(selector, true);\n        return result.length > 0 ? result[0] : undefined;\n    };\n    Container.prototype._generalFind = function (selector, findOne) {\n        var retArr = [];\n        this._descendants(function (node) {\n            var valid = node._isMatch(selector);\n            if (valid) {\n                retArr.push(node);\n            }\n            if (valid && findOne) {\n                return true;\n            }\n            return false;\n        });\n        return Util_1.Collection.toCollection(retArr);\n    };\n    Container.prototype._descendants = function (fn) {\n        var shouldStop = false;\n        for (var i = 0; i < this.children.length; i++) {\n            var child = this.children[i];\n            shouldStop = fn(child);\n            if (shouldStop) {\n                return true;\n            }\n            if (!child.hasChildren()) {\n                continue;\n            }\n            shouldStop = child._descendants(fn);\n            if (shouldStop) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Container.prototype.toObject = function () {\n        var obj = Node_1.Node.prototype.toObject.call(this);\n        obj.children = [];\n        var children = this.getChildren();\n        var len = children.length;\n        for (var n = 0; n < len; n++) {\n            var child = children[n];\n            obj.children.push(child.toObject());\n        }\n        return obj;\n    };\n    Container.prototype.isAncestorOf = function (node) {\n        var parent = node.getParent();\n        while (parent) {\n            if (parent._id === this._id) {\n                return true;\n            }\n            parent = parent.getParent();\n        }\n        return false;\n    };\n    Container.prototype.clone = function (obj) {\n        var node = Node_1.Node.prototype.clone.call(this, obj);\n        this.getChildren().each(function (no) {\n            node.add(no.clone());\n        });\n        return node;\n    };\n    Container.prototype.getAllIntersections = function (pos) {\n        var arr = [];\n        this.find('Shape').each(function (shape) {\n            if (shape.isVisible() && shape.intersects(pos)) {\n                arr.push(shape);\n            }\n        });\n        return arr;\n    };\n    Container.prototype._setChildrenIndices = function () {\n        this.children.each(function (child, n) {\n            child.index = n;\n        });\n    };\n    Container.prototype.drawScene = function (can, top, caching) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas()), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedSceneCanvas = cachedCanvas && cachedCanvas.scene;\n        if (this.isVisible() || caching) {\n            if (!caching && cachedSceneCanvas) {\n                context.save();\n                layer._applyTransform(this, context, top);\n                this._drawCachedSceneCanvas(context);\n                context.restore();\n            }\n            else {\n                this._drawChildren(canvas, 'drawScene', top, false, caching, caching);\n            }\n        }\n        return this;\n    };\n    Container.prototype.drawHit = function (can, top, caching) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (this.shouldDrawHit(canvas) || caching) {\n            if (!caching && cachedHitCanvas) {\n                context.save();\n                layer._applyTransform(this, context, top);\n                this._drawCachedHitCanvas(context);\n                context.restore();\n            }\n            else {\n                this._drawChildren(canvas, 'drawHit', top, false, caching, caching);\n            }\n        }\n        return this;\n    };\n    Container.prototype._drawChildren = function (canvas, drawMethod, top, caching, skipBuffer, skipComposition) {\n        var layer = this.getLayer(), context = canvas && canvas.getContext(), clipWidth = this.clipWidth(), clipHeight = this.clipHeight(), clipFunc = this.clipFunc(), hasClip = (clipWidth && clipHeight) || clipFunc, clipX, clipY;\n        if (hasClip && layer) {\n            context.save();\n            var transform = this.getAbsoluteTransform(top);\n            var m = transform.getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            context.beginPath();\n            if (clipFunc) {\n                clipFunc.call(this, context, this);\n            }\n            else {\n                clipX = this.clipX();\n                clipY = this.clipY();\n                context.rect(clipX, clipY, clipWidth, clipHeight);\n            }\n            context.clip();\n            m = transform\n                .copy()\n                .invert()\n                .getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        }\n        var hasComposition = this.globalCompositeOperation() !== 'source-over' &&\n            !skipComposition &&\n            drawMethod === 'drawScene';\n        if (hasComposition && layer) {\n            context.save();\n            context._applyGlobalCompositeOperation(this);\n        }\n        this.children.each(function (child) {\n            child[drawMethod](canvas, top, caching, skipBuffer);\n        });\n        if (hasComposition && layer) {\n            context.restore();\n        }\n        if (hasClip && layer) {\n            context.restore();\n        }\n    };\n    Container.prototype.shouldDrawHit = function (canvas) {\n        if (canvas && canvas.isCache) {\n            return true;\n        }\n        var layer = this.getLayer();\n        var layerUnderDrag = false;\n        DragAndDrop_1.DD._dragElements.forEach(function (elem) {\n            if (elem.dragStatus === 'dragging' && elem.node.getLayer() === layer) {\n                layerUnderDrag = true;\n            }\n        });\n        var dragSkip = !Global_1.Konva.hitOnDragEnabled && layerUnderDrag;\n        return layer && layer.hitGraphEnabled() && this.isVisible() && !dragSkip;\n    };\n    Container.prototype.getClientRect = function (config) {\n        config = config || {};\n        var skipTransform = config.skipTransform;\n        var relativeTo = config.relativeTo;\n        var minX, minY, maxX, maxY;\n        var selfRect = {\n            x: Infinity,\n            y: Infinity,\n            width: 0,\n            height: 0\n        };\n        var that = this;\n        this.children.each(function (child) {\n            if (!child.visible()) {\n                return;\n            }\n            var rect = child.getClientRect({\n                relativeTo: that,\n                skipShadow: config.skipShadow,\n                skipStroke: config.skipStroke\n            });\n            if (rect.width === 0 && rect.height === 0) {\n                return;\n            }\n            if (minX === undefined) {\n                minX = rect.x;\n                minY = rect.y;\n                maxX = rect.x + rect.width;\n                maxY = rect.y + rect.height;\n            }\n            else {\n                minX = Math.min(minX, rect.x);\n                minY = Math.min(minY, rect.y);\n                maxX = Math.max(maxX, rect.x + rect.width);\n                maxY = Math.max(maxY, rect.y + rect.height);\n            }\n        });\n        var shapes = this.find('Shape');\n        var hasVisible = false;\n        for (var i = 0; i < shapes.length; i++) {\n            var shape = shapes[i];\n            if (shape._isVisible(this)) {\n                hasVisible = true;\n                break;\n            }\n        }\n        if (hasVisible && minX !== undefined) {\n            selfRect = {\n                x: minX,\n                y: minY,\n                width: maxX - minX,\n                height: maxY - minY\n            };\n        }\n        else {\n            selfRect = {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0\n            };\n        }\n        if (!skipTransform) {\n            return this._transformedRect(selfRect, relativeTo);\n        }\n        return selfRect;\n    };\n    return Container;\n}(Node_1.Node));\nexports.Container = Container;\nFactory_1.Factory.addComponentsGetterSetter(Container, 'clip', [\n    'x',\n    'y',\n    'width',\n    'height'\n]);\nFactory_1.Factory.addGetterSetter(Container, 'clipX', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipY', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipWidth', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipHeight', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipFunc');\nUtil_1.Collection.mapMethods(Container);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Captures = new Map();\nvar SUPPORT_POINTER_EVENTS = Global_1.Konva._global['PointerEvent'] !== undefined;\nfunction getCapturedShape(pointerId) {\n    return Captures.get(pointerId);\n}\nexports.getCapturedShape = getCapturedShape;\nfunction createEvent(evt) {\n    return {\n        evt: evt,\n        pointerId: evt.pointerId\n    };\n}\nexports.createEvent = createEvent;\nfunction hasPointerCapture(pointerId, shape) {\n    return Captures.get(pointerId) === shape;\n}\nexports.hasPointerCapture = hasPointerCapture;\nfunction setPointerCapture(pointerId, shape) {\n    releaseCapture(pointerId);\n    var stage = shape.getStage();\n    if (!stage)\n        return;\n    Captures.set(pointerId, shape);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('gotpointercapture', createEvent(new PointerEvent('gotpointercapture')));\n    }\n}\nexports.setPointerCapture = setPointerCapture;\nfunction releaseCapture(pointerId, target) {\n    var shape = Captures.get(pointerId);\n    if (!shape)\n        return;\n    var stage = shape.getStage();\n    if (stage && stage.content) {\n    }\n    Captures.delete(pointerId);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('lostpointercapture', createEvent(new PointerEvent('lostpointercapture')));\n    }\n}\nexports.releaseCapture = releaseCapture;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Factory_1 = require(\"./Factory\");\nvar Container_1 = require(\"./Container\");\nvar Global_1 = require(\"./Global\");\nvar Canvas_1 = require(\"./Canvas\");\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\nvar Global_2 = require(\"./Global\");\nvar PointerEvents = require(\"./PointerEvents\");\nvar STAGE = 'Stage', STRING = 'string', PX = 'px', MOUSEOUT = 'mouseout', MOUSELEAVE = 'mouseleave', MOUSEOVER = 'mouseover', MOUSEENTER = 'mouseenter', MOUSEMOVE = 'mousemove', MOUSEDOWN = 'mousedown', MOUSEUP = 'mouseup', POINTERMOVE = 'pointermove', POINTERDOWN = 'pointerdown', POINTERUP = 'pointerup', POINTERCANCEL = 'pointercancel', LOSTPOINTERCAPTURE = 'lostpointercapture', CONTEXTMENU = 'contextmenu', CLICK = 'click', DBL_CLICK = 'dblclick', TOUCHSTART = 'touchstart', TOUCHEND = 'touchend', TAP = 'tap', DBL_TAP = 'dbltap', TOUCHMOVE = 'touchmove', WHEEL = 'wheel', CONTENT_MOUSEOUT = 'contentMouseout', CONTENT_MOUSEOVER = 'contentMouseover', CONTENT_MOUSEMOVE = 'contentMousemove', CONTENT_MOUSEDOWN = 'contentMousedown', CONTENT_MOUSEUP = 'contentMouseup', CONTENT_CONTEXTMENU = 'contentContextmenu', CONTENT_CLICK = 'contentClick', CONTENT_DBL_CLICK = 'contentDblclick', CONTENT_TOUCHSTART = 'contentTouchstart', CONTENT_TOUCHEND = 'contentTouchend', CONTENT_DBL_TAP = 'contentDbltap', CONTENT_TAP = 'contentTap', CONTENT_TOUCHMOVE = 'contentTouchmove', CONTENT_POINTERMOVE = 'contentPointermove', CONTENT_POINTERDOWN = 'contentPointerdown', CONTENT_POINTERUP = 'contentPointerup', CONTENT_WHEEL = 'contentWheel', RELATIVE = 'relative', KONVA_CONTENT = 'konvajs-content', SPACE = ' ', UNDERSCORE = '_', CONTAINER = 'container', MAX_LAYERS_NUMBER = 5, EMPTY_STRING = '', EVENTS = [\n    MOUSEENTER,\n    MOUSEDOWN,\n    MOUSEMOVE,\n    MOUSEUP,\n    MOUSEOUT,\n    TOUCHSTART,\n    TOUCHMOVE,\n    TOUCHEND,\n    MOUSEOVER,\n    WHEEL,\n    CONTEXTMENU,\n    POINTERDOWN,\n    POINTERMOVE,\n    POINTERUP,\n    POINTERCANCEL,\n    LOSTPOINTERCAPTURE\n], eventsLength = EVENTS.length;\nfunction addEvent(ctx, eventName) {\n    ctx.content.addEventListener(eventName, function (evt) {\n        ctx[UNDERSCORE + eventName](evt);\n    }, false);\n}\nvar NO_POINTERS_MESSAGE = \"Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);\";\nexports.stages = [];\nfunction checkNoClip(attrs) {\n    if (attrs === void 0) { attrs = {}; }\n    if (attrs.clipFunc || attrs.clipWidth || attrs.clipHeight) {\n        Util_1.Util.warn('Stage does not support clipping. Please use clip for Layers or Groups.');\n    }\n    return attrs;\n}\nvar Stage = (function (_super) {\n    __extends(Stage, _super);\n    function Stage(config) {\n        var _this = _super.call(this, checkNoClip(config)) || this;\n        _this._pointerPositions = [];\n        _this._changedPointerPositions = [];\n        _this._buildDOM();\n        _this._bindContentEvents();\n        exports.stages.push(_this);\n        _this.on('widthChange.konva heightChange.konva', _this._resizeDOM);\n        _this.on('visibleChange.konva', _this._checkVisibility);\n        _this.on('clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva', function () {\n            checkNoClip(_this.attrs);\n        });\n        _this._checkVisibility();\n        return _this;\n    }\n    Stage.prototype._validateAdd = function (child) {\n        var isLayer = child.getType() === 'Layer';\n        var isFastLayer = child.getType() === 'FastLayer';\n        var valid = isLayer || isFastLayer;\n        if (!valid) {\n            Util_1.Util.throw('You may only add layers to the stage.');\n        }\n    };\n    Stage.prototype._checkVisibility = function () {\n        if (!this.content) {\n            return;\n        }\n        var style = this.visible() ? '' : 'none';\n        this.content.style.display = style;\n    };\n    Stage.prototype.setContainer = function (container) {\n        if (typeof container === STRING) {\n            if (container.charAt(0) === '.') {\n                var className = container.slice(1);\n                container = document.getElementsByClassName(className)[0];\n            }\n            else {\n                var id;\n                if (container.charAt(0) !== '#') {\n                    id = container;\n                }\n                else {\n                    id = container.slice(1);\n                }\n                container = document.getElementById(id);\n            }\n            if (!container) {\n                throw 'Can not find container in document with id ' + id;\n            }\n        }\n        this._setAttr(CONTAINER, container);\n        if (this.content) {\n            if (this.content.parentElement) {\n                this.content.parentElement.removeChild(this.content);\n            }\n            container.appendChild(this.content);\n        }\n        return this;\n    };\n    Stage.prototype.shouldDrawHit = function () {\n        return true;\n    };\n    Stage.prototype.clear = function () {\n        var layers = this.children, len = layers.length, n;\n        for (n = 0; n < len; n++) {\n            layers[n].clear();\n        }\n        return this;\n    };\n    Stage.prototype.clone = function (obj) {\n        if (!obj) {\n            obj = {};\n        }\n        obj.container = document.createElement('div');\n        return Container_1.Container.prototype.clone.call(this, obj);\n    };\n    Stage.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        var content = this.content;\n        if (content && Util_1.Util._isInDocument(content)) {\n            this.container().removeChild(content);\n        }\n        var index = exports.stages.indexOf(this);\n        if (index > -1) {\n            exports.stages.splice(index, 1);\n        }\n        return this;\n    };\n    Stage.prototype.getPointerPosition = function () {\n        var pos = this._pointerPositions[0] || this._changedPointerPositions[0];\n        if (!pos) {\n            Util_1.Util.warn(NO_POINTERS_MESSAGE);\n            return null;\n        }\n        return {\n            x: pos.x,\n            y: pos.y\n        };\n    };\n    Stage.prototype._getPointerById = function (id) {\n        return this._pointerPositions.find(function (p) { return p.id === id; });\n    };\n    Stage.prototype.getPointersPositions = function () {\n        return this._pointerPositions;\n    };\n    Stage.prototype.getStage = function () {\n        return this;\n    };\n    Stage.prototype.getContent = function () {\n        return this.content;\n    };\n    Stage.prototype._toKonvaCanvas = function (config) {\n        config = config || {};\n        var x = config.x || 0, y = config.y || 0, canvas = new Canvas_1.SceneCanvas({\n            width: config.width || this.width(),\n            height: config.height || this.height(),\n            pixelRatio: config.pixelRatio || 1\n        }), _context = canvas.getContext()._context, layers = this.children;\n        if (x || y) {\n            _context.translate(-1 * x, -1 * y);\n        }\n        layers.each(function (layer) {\n            if (!layer.isVisible()) {\n                return;\n            }\n            var layerCanvas = layer._toKonvaCanvas(config);\n            _context.drawImage(layerCanvas._canvas, x, y, layerCanvas.getWidth() / layerCanvas.getPixelRatio(), layerCanvas.getHeight() / layerCanvas.getPixelRatio());\n        });\n        return canvas;\n    };\n    Stage.prototype.getIntersection = function (pos, selector) {\n        if (!pos) {\n            return null;\n        }\n        var layers = this.children, len = layers.length, end = len - 1, n, shape;\n        for (n = end; n >= 0; n--) {\n            shape = layers[n].getIntersection(pos, selector);\n            if (shape) {\n                return shape;\n            }\n        }\n        return null;\n    };\n    Stage.prototype._resizeDOM = function () {\n        var width = this.width();\n        var height = this.height();\n        if (this.content) {\n            this.content.style.width = width + PX;\n            this.content.style.height = height + PX;\n        }\n        this.bufferCanvas.setSize(width, height);\n        this.bufferHitCanvas.setSize(width, height);\n        this.children.each(function (layer) {\n            layer.setSize({ width: width, height: height });\n            layer.draw();\n        });\n    };\n    Stage.prototype.add = function (layer) {\n        if (arguments.length > 1) {\n            for (var i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        _super.prototype.add.call(this, layer);\n        var length = this.children.length;\n        if (length > MAX_LAYERS_NUMBER) {\n            Util_1.Util.warn('The stage has ' +\n                length +\n                ' layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group.');\n        }\n        layer.setSize({ width: this.width(), height: this.height() });\n        layer.draw();\n        if (Global_1.Konva.isBrowser) {\n            this.content.appendChild(layer.canvas._canvas);\n        }\n        return this;\n    };\n    Stage.prototype.getParent = function () {\n        return null;\n    };\n    Stage.prototype.getLayer = function () {\n        return null;\n    };\n    Stage.prototype.hasPointerCapture = function (pointerId) {\n        return PointerEvents.hasPointerCapture(pointerId, this);\n    };\n    Stage.prototype.setPointerCapture = function (pointerId) {\n        PointerEvents.setPointerCapture(pointerId, this);\n    };\n    Stage.prototype.releaseCapture = function (pointerId) {\n        PointerEvents.releaseCapture(pointerId, this);\n    };\n    Stage.prototype.getLayers = function () {\n        return this.getChildren();\n    };\n    Stage.prototype._bindContentEvents = function () {\n        if (!Global_1.Konva.isBrowser) {\n            return;\n        }\n        for (var n = 0; n < eventsLength; n++) {\n            addEvent(this, EVENTS[n]);\n        }\n    };\n    Stage.prototype._mouseenter = function (evt) {\n        this.setPointersPositions(evt);\n        this._fire(MOUSEENTER, { evt: evt, target: this, currentTarget: this });\n    };\n    Stage.prototype._mouseover = function (evt) {\n        this.setPointersPositions(evt);\n        this._fire(CONTENT_MOUSEOVER, { evt: evt });\n        this._fire(MOUSEOVER, { evt: evt, target: this, currentTarget: this });\n    };\n    Stage.prototype._mouseout = function (evt) {\n        var _a;\n        this.setPointersPositions(evt);\n        var targetShape = ((_a = this.targetShape) === null || _a === void 0 ? void 0 : _a.getStage()) ? this.targetShape : null;\n        var eventsEnabled = !DragAndDrop_1.DD.isDragging || Global_1.Konva.hitOnDragEnabled;\n        if (targetShape && eventsEnabled) {\n            targetShape._fireAndBubble(MOUSEOUT, { evt: evt });\n            targetShape._fireAndBubble(MOUSELEAVE, { evt: evt });\n            this._fire(MOUSELEAVE, { evt: evt, target: this, currentTarget: this });\n            this.targetShape = null;\n        }\n        else if (eventsEnabled) {\n            this._fire(MOUSELEAVE, {\n                evt: evt,\n                target: this,\n                currentTarget: this\n            });\n            this._fire(MOUSEOUT, {\n                evt: evt,\n                target: this,\n                currentTarget: this\n            });\n        }\n        this.pointerPos = undefined;\n        this._pointerPositions = [];\n        this._fire(CONTENT_MOUSEOUT, { evt: evt });\n    };\n    Stage.prototype._mousemove = function (evt) {\n        var _a;\n        if (Global_1.Konva.UA.ieMobile) {\n            return this._touchmove(evt);\n        }\n        this.setPointersPositions(evt);\n        var pointerId = Util_1.Util._getFirstPointerId(evt);\n        var shape;\n        var targetShape = ((_a = this.targetShape) === null || _a === void 0 ? void 0 : _a.getStage()) ? this.targetShape : null;\n        var eventsEnabled = !DragAndDrop_1.DD.isDragging || Global_1.Konva.hitOnDragEnabled;\n        if (eventsEnabled) {\n            shape = this.getIntersection(this.getPointerPosition());\n            if (shape && shape.isListening()) {\n                var differentTarget = targetShape !== shape;\n                if (eventsEnabled && differentTarget) {\n                    if (targetShape) {\n                        targetShape._fireAndBubble(MOUSEOUT, { evt: evt, pointerId: pointerId }, shape);\n                        targetShape._fireAndBubble(MOUSELEAVE, { evt: evt, pointerId: pointerId }, shape);\n                    }\n                    shape._fireAndBubble(MOUSEOVER, { evt: evt, pointerId: pointerId }, targetShape);\n                    shape._fireAndBubble(MOUSEENTER, { evt: evt, pointerId: pointerId }, targetShape);\n                    shape._fireAndBubble(MOUSEMOVE, { evt: evt, pointerId: pointerId });\n                    this.targetShape = shape;\n                }\n                else {\n                    shape._fireAndBubble(MOUSEMOVE, { evt: evt, pointerId: pointerId });\n                }\n            }\n            else {\n                if (targetShape && eventsEnabled) {\n                    targetShape._fireAndBubble(MOUSEOUT, { evt: evt, pointerId: pointerId });\n                    targetShape._fireAndBubble(MOUSELEAVE, { evt: evt, pointerId: pointerId });\n                    this._fire(MOUSEOVER, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId: pointerId\n                    });\n                    this.targetShape = null;\n                }\n                this._fire(MOUSEMOVE, {\n                    evt: evt,\n                    target: this,\n                    currentTarget: this,\n                    pointerId: pointerId\n                });\n            }\n            this._fire(CONTENT_MOUSEMOVE, { evt: evt });\n        }\n        if (evt.cancelable) {\n            evt.preventDefault();\n        }\n    };\n    Stage.prototype._mousedown = function (evt) {\n        if (Global_1.Konva.UA.ieMobile) {\n            return this._touchstart(evt);\n        }\n        this.setPointersPositions(evt);\n        var pointerId = Util_1.Util._getFirstPointerId(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        DragAndDrop_1.DD.justDragged = false;\n        Global_1.Konva.listenClickTap = true;\n        if (shape && shape.isListening()) {\n            this.clickStartShape = shape;\n            shape._fireAndBubble(MOUSEDOWN, { evt: evt, pointerId: pointerId });\n        }\n        else {\n            this._fire(MOUSEDOWN, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: pointerId\n            });\n        }\n        this._fire(CONTENT_MOUSEDOWN, { evt: evt });\n    };\n    Stage.prototype._mouseup = function (evt) {\n        if (Global_1.Konva.UA.ieMobile) {\n            return this._touchend(evt);\n        }\n        this.setPointersPositions(evt);\n        var pointerId = Util_1.Util._getFirstPointerId(evt);\n        var shape = this.getIntersection(this.getPointerPosition()), clickStartShape = this.clickStartShape, clickEndShape = this.clickEndShape, fireDblClick = false;\n        if (Global_1.Konva.inDblClickWindow) {\n            fireDblClick = true;\n            clearTimeout(this.dblTimeout);\n        }\n        else if (!DragAndDrop_1.DD.justDragged) {\n            Global_1.Konva.inDblClickWindow = true;\n            clearTimeout(this.dblTimeout);\n        }\n        this.dblTimeout = setTimeout(function () {\n            Global_1.Konva.inDblClickWindow = false;\n        }, Global_1.Konva.dblClickWindow);\n        if (shape && shape.isListening()) {\n            this.clickEndShape = shape;\n            shape._fireAndBubble(MOUSEUP, { evt: evt, pointerId: pointerId });\n            if (Global_1.Konva.listenClickTap &&\n                clickStartShape &&\n                clickStartShape._id === shape._id) {\n                shape._fireAndBubble(CLICK, { evt: evt, pointerId: pointerId });\n                if (fireDblClick && clickEndShape && clickEndShape === shape) {\n                    shape._fireAndBubble(DBL_CLICK, { evt: evt, pointerId: pointerId });\n                }\n            }\n        }\n        else {\n            this._fire(MOUSEUP, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: pointerId\n            });\n            if (Global_1.Konva.listenClickTap) {\n                this._fire(CLICK, {\n                    evt: evt,\n                    target: this,\n                    currentTarget: this,\n                    pointerId: pointerId\n                });\n            }\n            if (fireDblClick) {\n                this._fire(DBL_CLICK, {\n                    evt: evt,\n                    target: this,\n                    currentTarget: this,\n                    pointerId: pointerId\n                });\n            }\n        }\n        this._fire(CONTENT_MOUSEUP, { evt: evt });\n        if (Global_1.Konva.listenClickTap) {\n            this._fire(CONTENT_CLICK, { evt: evt });\n            if (fireDblClick) {\n                this._fire(CONTENT_DBL_CLICK, { evt: evt });\n            }\n        }\n        Global_1.Konva.listenClickTap = false;\n        if (evt.cancelable) {\n            evt.preventDefault();\n        }\n    };\n    Stage.prototype._contextmenu = function (evt) {\n        this.setPointersPositions(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(CONTEXTMENU, { evt: evt });\n        }\n        else {\n            this._fire(CONTEXTMENU, {\n                evt: evt,\n                target: this,\n                currentTarget: this\n            });\n        }\n        this._fire(CONTENT_CONTEXTMENU, { evt: evt });\n    };\n    Stage.prototype._touchstart = function (evt) {\n        var _this = this;\n        this.setPointersPositions(evt);\n        var triggeredOnShape = false;\n        this._changedPointerPositions.forEach(function (pos) {\n            var shape = _this.getIntersection(pos);\n            Global_1.Konva.listenClickTap = true;\n            DragAndDrop_1.DD.justDragged = false;\n            var hasShape = shape && shape.isListening();\n            if (!hasShape) {\n                return;\n            }\n            if (Global_1.Konva.captureTouchEventsEnabled) {\n                shape.setPointerCapture(pos.id);\n            }\n            _this.tapStartShape = shape;\n            shape._fireAndBubble(TOUCHSTART, { evt: evt, pointerId: pos.id }, _this);\n            triggeredOnShape = true;\n            if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n                evt.preventDefault();\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(TOUCHSTART, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id\n            });\n        }\n        this._fire(CONTENT_TOUCHSTART, { evt: evt });\n    };\n    Stage.prototype._touchmove = function (evt) {\n        var _this = this;\n        this.setPointersPositions(evt);\n        var eventsEnabled = !DragAndDrop_1.DD.isDragging || Global_1.Konva.hitOnDragEnabled;\n        if (eventsEnabled) {\n            var triggeredOnShape = false;\n            var processedShapesIds = {};\n            this._changedPointerPositions.forEach(function (pos) {\n                var shape = PointerEvents.getCapturedShape(pos.id) || _this.getIntersection(pos);\n                var hasShape = shape && shape.isListening();\n                if (!hasShape) {\n                    return;\n                }\n                if (processedShapesIds[shape._id]) {\n                    return;\n                }\n                processedShapesIds[shape._id] = true;\n                shape._fireAndBubble(TOUCHMOVE, { evt: evt, pointerId: pos.id });\n                triggeredOnShape = true;\n                if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n                    evt.preventDefault();\n                }\n            });\n            if (!triggeredOnShape) {\n                this._fire(TOUCHMOVE, {\n                    evt: evt,\n                    target: this,\n                    currentTarget: this,\n                    pointerId: this._changedPointerPositions[0].id\n                });\n            }\n            this._fire(CONTENT_TOUCHMOVE, { evt: evt });\n        }\n        if (DragAndDrop_1.DD.isDragging && DragAndDrop_1.DD.node.preventDefault() && evt.cancelable) {\n            evt.preventDefault();\n        }\n    };\n    Stage.prototype._touchend = function (evt) {\n        var _this = this;\n        this.setPointersPositions(evt);\n        var clickEndShape = this.clickEndShape, fireDblClick = false;\n        if (Global_1.Konva.inDblClickWindow) {\n            fireDblClick = true;\n            clearTimeout(this.dblTimeout);\n        }\n        else if (!DragAndDrop_1.DD.justDragged) {\n            Global_1.Konva.inDblClickWindow = true;\n            clearTimeout(this.dblTimeout);\n        }\n        this.dblTimeout = setTimeout(function () {\n            Global_1.Konva.inDblClickWindow = false;\n        }, Global_1.Konva.dblClickWindow);\n        var triggeredOnShape = false;\n        var processedShapesIds = {};\n        var tapTriggered = false;\n        var dblTapTriggered = false;\n        this._changedPointerPositions.forEach(function (pos) {\n            var shape = PointerEvents.getCapturedShape(pos.id) ||\n                _this.getIntersection(pos);\n            if (shape) {\n                shape.releaseCapture(pos.id);\n            }\n            var hasShape = shape && shape.isListening();\n            if (!hasShape) {\n                return;\n            }\n            if (processedShapesIds[shape._id]) {\n                return;\n            }\n            processedShapesIds[shape._id] = true;\n            _this.clickEndShape = shape;\n            shape._fireAndBubble(TOUCHEND, { evt: evt, pointerId: pos.id });\n            triggeredOnShape = true;\n            if (Global_1.Konva.listenClickTap && shape === _this.tapStartShape) {\n                tapTriggered = true;\n                shape._fireAndBubble(TAP, { evt: evt, pointerId: pos.id });\n                if (fireDblClick && clickEndShape && clickEndShape === shape) {\n                    dblTapTriggered = true;\n                    shape._fireAndBubble(DBL_TAP, { evt: evt, pointerId: pos.id });\n                }\n            }\n            if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n                evt.preventDefault();\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(TOUCHEND, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id\n            });\n        }\n        if (Global_1.Konva.listenClickTap && !tapTriggered) {\n            this._fire(TAP, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id\n            });\n        }\n        if (fireDblClick && !dblTapTriggered) {\n            this._fire(DBL_TAP, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id\n            });\n        }\n        this._fire(CONTENT_TOUCHEND, { evt: evt });\n        if (Global_1.Konva.listenClickTap) {\n            this._fire(CONTENT_TAP, { evt: evt });\n            if (fireDblClick) {\n                this._fire(CONTENT_DBL_TAP, { evt: evt });\n            }\n        }\n        Global_1.Konva.listenClickTap = false;\n    };\n    Stage.prototype._wheel = function (evt) {\n        this.setPointersPositions(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(WHEEL, { evt: evt });\n        }\n        else {\n            this._fire(WHEEL, {\n                evt: evt,\n                target: this,\n                currentTarget: this\n            });\n        }\n        this._fire(CONTENT_WHEEL, { evt: evt });\n    };\n    Stage.prototype._pointerdown = function (evt) {\n        if (!Global_1.Konva._pointerEventsEnabled) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERDOWN, PointerEvents.createEvent(evt));\n        }\n    };\n    Stage.prototype._pointermove = function (evt) {\n        if (!Global_1.Konva._pointerEventsEnabled) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERMOVE, PointerEvents.createEvent(evt));\n        }\n    };\n    Stage.prototype._pointerup = function (evt) {\n        if (!Global_1.Konva._pointerEventsEnabled) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n        }\n        PointerEvents.releaseCapture(evt.pointerId);\n    };\n    Stage.prototype._pointercancel = function (evt) {\n        if (!Global_1.Konva._pointerEventsEnabled) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n        }\n        PointerEvents.releaseCapture(evt.pointerId);\n    };\n    Stage.prototype._lostpointercapture = function (evt) {\n        PointerEvents.releaseCapture(evt.pointerId);\n    };\n    Stage.prototype.setPointersPositions = function (evt) {\n        var _this = this;\n        var contentPosition = this._getContentPosition(), x = null, y = null;\n        evt = evt ? evt : window.event;\n        if (evt.touches !== undefined) {\n            this._pointerPositions = [];\n            this._changedPointerPositions = [];\n            Util_1.Collection.prototype.each.call(evt.touches, function (touch) {\n                _this._pointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY\n                });\n            });\n            Util_1.Collection.prototype.each.call(evt.changedTouches || evt.touches, function (touch) {\n                _this._changedPointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY\n                });\n            });\n        }\n        else {\n            x = (evt.clientX - contentPosition.left) / contentPosition.scaleX;\n            y = (evt.clientY - contentPosition.top) / contentPosition.scaleY;\n            this.pointerPos = {\n                x: x,\n                y: y\n            };\n            this._pointerPositions = [{ x: x, y: y, id: Util_1.Util._getFirstPointerId(evt) }];\n            this._changedPointerPositions = [\n                { x: x, y: y, id: Util_1.Util._getFirstPointerId(evt) }\n            ];\n        }\n    };\n    Stage.prototype._setPointerPosition = function (evt) {\n        Util_1.Util.warn('Method _setPointerPosition is deprecated. Use \"stage.setPointersPositions(event)\" instead.');\n        this.setPointersPositions(evt);\n    };\n    Stage.prototype._getContentPosition = function () {\n        if (!this.content || !this.content.getBoundingClientRect) {\n            return {\n                top: 0,\n                left: 0,\n                scaleX: 1,\n                scaleY: 1\n            };\n        }\n        var rect = this.content.getBoundingClientRect();\n        return {\n            top: rect.top,\n            left: rect.left,\n            scaleX: rect.width / this.content.clientWidth || 1,\n            scaleY: rect.height / this.content.clientHeight || 1\n        };\n    };\n    Stage.prototype._buildDOM = function () {\n        this.bufferCanvas = new Canvas_1.SceneCanvas({\n            width: this.width(),\n            height: this.height()\n        });\n        this.bufferHitCanvas = new Canvas_1.HitCanvas({\n            pixelRatio: 1,\n            width: this.width(),\n            height: this.height()\n        });\n        if (!Global_1.Konva.isBrowser) {\n            return;\n        }\n        var container = this.container();\n        if (!container) {\n            throw 'Stage has no container. A container is required.';\n        }\n        container.innerHTML = EMPTY_STRING;\n        this.content = document.createElement('div');\n        this.content.style.position = RELATIVE;\n        this.content.style.userSelect = 'none';\n        this.content.className = KONVA_CONTENT;\n        this.content.setAttribute('role', 'presentation');\n        container.appendChild(this.content);\n        this._resizeDOM();\n    };\n    Stage.prototype.cache = function () {\n        Util_1.Util.warn('Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.');\n        return this;\n    };\n    Stage.prototype.clearCache = function () {\n        return this;\n    };\n    Stage.prototype.batchDraw = function () {\n        this.children.each(function (layer) {\n            layer.batchDraw();\n        });\n        return this;\n    };\n    return Stage;\n}(Container_1.Container));\nexports.Stage = Stage;\nStage.prototype.nodeType = STAGE;\nGlobal_2._registerNode(Stage);\nFactory_1.Factory.addGetterSetter(Stage, 'container');\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Container_1 = require(\"./Container\");\nvar Node_1 = require(\"./Node\");\nvar Factory_1 = require(\"./Factory\");\nvar Canvas_1 = require(\"./Canvas\");\nvar BaseLayer = (function (_super) {\n    __extends(BaseLayer, _super);\n    function BaseLayer(config) {\n        var _this = _super.call(this, config) || this;\n        _this.canvas = new Canvas_1.SceneCanvas();\n        _this._waitingForDraw = false;\n        _this.on('visibleChange', _this._checkVisibility);\n        _this._checkVisibility();\n        _this.on('imageSmoothingEnabledChange', _this._setSmoothEnabled);\n        _this._setSmoothEnabled();\n        return _this;\n    }\n    BaseLayer.prototype.createPNGStream = function () {\n        var c = this.canvas._canvas;\n        return c.createPNGStream();\n    };\n    BaseLayer.prototype.getCanvas = function () {\n        return this.canvas;\n    };\n    BaseLayer.prototype.getHitCanvas = function () {\n        return this.hitCanvas;\n    };\n    BaseLayer.prototype.getContext = function () {\n        return this.getCanvas().getContext();\n    };\n    BaseLayer.prototype.clear = function (bounds) {\n        this.getContext().clear(bounds);\n        return this;\n    };\n    BaseLayer.prototype.setZIndex = function (index) {\n        _super.prototype.setZIndex.call(this, index);\n        var stage = this.getStage();\n        if (stage) {\n            stage.content.removeChild(this.getCanvas()._canvas);\n            if (index < stage.children.length - 1) {\n                stage.content.insertBefore(this.getCanvas()._canvas, stage.children[index + 1].getCanvas()._canvas);\n            }\n            else {\n                stage.content.appendChild(this.getCanvas()._canvas);\n            }\n        }\n        return this;\n    };\n    BaseLayer.prototype.moveToTop = function () {\n        Node_1.Node.prototype.moveToTop.call(this);\n        var stage = this.getStage();\n        if (stage) {\n            stage.content.removeChild(this.getCanvas()._canvas);\n            stage.content.appendChild(this.getCanvas()._canvas);\n        }\n        return true;\n    };\n    BaseLayer.prototype.moveUp = function () {\n        var moved = Node_1.Node.prototype.moveUp.call(this);\n        if (!moved) {\n            return false;\n        }\n        var stage = this.getStage();\n        if (!stage) {\n            return false;\n        }\n        stage.content.removeChild(this.getCanvas()._canvas);\n        if (this.index < stage.children.length - 1) {\n            stage.content.insertBefore(this.getCanvas()._canvas, stage.children[this.index + 1].getCanvas()._canvas);\n        }\n        else {\n            stage.content.appendChild(this.getCanvas()._canvas);\n        }\n        return true;\n    };\n    BaseLayer.prototype.moveDown = function () {\n        if (Node_1.Node.prototype.moveDown.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                stage.content.removeChild(this.getCanvas()._canvas);\n                stage.content.insertBefore(this.getCanvas()._canvas, children[this.index + 1].getCanvas()._canvas);\n            }\n            return true;\n        }\n        return false;\n    };\n    BaseLayer.prototype.moveToBottom = function () {\n        if (Node_1.Node.prototype.moveToBottom.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                stage.content.removeChild(this.getCanvas()._canvas);\n                stage.content.insertBefore(this.getCanvas()._canvas, children[1].getCanvas()._canvas);\n            }\n            return true;\n        }\n        return false;\n    };\n    BaseLayer.prototype.getLayer = function () {\n        return this;\n    };\n    BaseLayer.prototype.hitGraphEnabled = function () {\n        return true;\n    };\n    BaseLayer.prototype.remove = function () {\n        var _canvas = this.getCanvas()._canvas;\n        Node_1.Node.prototype.remove.call(this);\n        if (_canvas && _canvas.parentNode && Util_1.Util._isInDocument(_canvas)) {\n            _canvas.parentNode.removeChild(_canvas);\n        }\n        return this;\n    };\n    BaseLayer.prototype.getStage = function () {\n        return this.parent;\n    };\n    BaseLayer.prototype.setSize = function (_a) {\n        var width = _a.width, height = _a.height;\n        this.canvas.setSize(width, height);\n        this._setSmoothEnabled();\n        return this;\n    };\n    BaseLayer.prototype._toKonvaCanvas = function (config) {\n        config = config || {};\n        config.width = config.width || this.getWidth();\n        config.height = config.height || this.getHeight();\n        config.x = config.x !== undefined ? config.x : this.x();\n        config.y = config.y !== undefined ? config.y : this.y();\n        return Node_1.Node.prototype._toKonvaCanvas.call(this, config);\n    };\n    BaseLayer.prototype._checkVisibility = function () {\n        var visible = this.visible();\n        if (visible) {\n            this.canvas._canvas.style.display = 'block';\n        }\n        else {\n            this.canvas._canvas.style.display = 'none';\n        }\n    };\n    BaseLayer.prototype._setSmoothEnabled = function () {\n        this.getContext()._context.imageSmoothingEnabled = this.imageSmoothingEnabled();\n    };\n    BaseLayer.prototype.getWidth = function () {\n        if (this.parent) {\n            return this.parent.width();\n        }\n    };\n    BaseLayer.prototype.setWidth = function () {\n        Util_1.Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.');\n    };\n    BaseLayer.prototype.getHeight = function () {\n        if (this.parent) {\n            return this.parent.height();\n        }\n    };\n    BaseLayer.prototype.setHeight = function () {\n        Util_1.Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.');\n    };\n    BaseLayer.prototype.getIntersection = function (pos, selector) {\n        return null;\n    };\n    BaseLayer.prototype.batchDraw = function () {\n        var _this = this;\n        if (!this._waitingForDraw) {\n            this._waitingForDraw = true;\n            Util_1.Util.requestAnimFrame(function () {\n                _this.draw();\n                _this._waitingForDraw = false;\n            });\n        }\n        return this;\n    };\n    BaseLayer.prototype._applyTransform = function (shape, context, top) {\n        var m = shape.getAbsoluteTransform(top).getMatrix();\n        context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n    };\n    return BaseLayer;\n}(Container_1.Container));\nexports.BaseLayer = BaseLayer;\nBaseLayer.prototype.nodeType = 'BaseLayer';\nFactory_1.Factory.addGetterSetter(BaseLayer, 'imageSmoothingEnabled', true);\nFactory_1.Factory.addGetterSetter(BaseLayer, 'clearBeforeDraw', true);\nUtil_1.Collection.mapMethods(BaseLayer);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Factory_1 = require(\"./Factory\");\nvar Node_1 = require(\"./Node\");\nvar Validators_1 = require(\"./Validators\");\nvar Global_1 = require(\"./Global\");\nvar PointerEvents = require(\"./PointerEvents\");\nvar HAS_SHADOW = 'hasShadow';\nvar SHADOW_RGBA = 'shadowRGBA';\nvar patternImage = 'patternImage';\nvar linearGradient = 'linearGradient';\nvar radialGradient = 'radialGradient';\nvar dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = Util_1.Util.createCanvasElement().getContext('2d');\n    return dummyContext;\n}\nexports.shapes = {};\nfunction _fillFunc(context) {\n    context.fill();\n}\nfunction _strokeFunc(context) {\n    context.stroke();\n}\nfunction _fillFuncHit(context) {\n    context.fill();\n}\nfunction _strokeFuncHit(context) {\n    context.stroke();\n}\nfunction _clearHasShadowCache() {\n    this._clearCache(HAS_SHADOW);\n}\nfunction _clearGetShadowRGBACache() {\n    this._clearCache(SHADOW_RGBA);\n}\nfunction _clearFillPatternCache() {\n    this._clearCache(patternImage);\n}\nfunction _clearLinearGradientCache() {\n    this._clearCache(linearGradient);\n}\nfunction _clearRadialGradientCache() {\n    this._clearCache(radialGradient);\n}\nvar Shape = (function (_super) {\n    __extends(Shape, _super);\n    function Shape(config) {\n        var _this = _super.call(this, config) || this;\n        var key;\n        while (true) {\n            key = Util_1.Util.getRandomColor();\n            if (key && !(key in exports.shapes)) {\n                break;\n            }\n        }\n        _this.colorKey = key;\n        exports.shapes[key] = _this;\n        _this.on('shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearHasShadowCache);\n        _this.on('shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearGetShadowRGBACache);\n        _this.on('fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva', _clearFillPatternCache);\n        _this.on('fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva', _clearLinearGradientCache);\n        _this.on('fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva', _clearRadialGradientCache);\n        return _this;\n    }\n    Shape.prototype.getContext = function () {\n        return this.getLayer().getContext();\n    };\n    Shape.prototype.getCanvas = function () {\n        return this.getLayer().getCanvas();\n    };\n    Shape.prototype.getSceneFunc = function () {\n        return this.attrs.sceneFunc || this['_sceneFunc'];\n    };\n    Shape.prototype.getHitFunc = function () {\n        return this.attrs.hitFunc || this['_hitFunc'];\n    };\n    Shape.prototype.hasShadow = function () {\n        return this._getCache(HAS_SHADOW, this._hasShadow);\n    };\n    Shape.prototype._hasShadow = function () {\n        return (this.shadowEnabled() &&\n            this.shadowOpacity() !== 0 &&\n            !!(this.shadowColor() ||\n                this.shadowBlur() ||\n                this.shadowOffsetX() ||\n                this.shadowOffsetY()));\n    };\n    Shape.prototype._getFillPattern = function () {\n        return this._getCache(patternImage, this.__getFillPattern);\n    };\n    Shape.prototype.__getFillPattern = function () {\n        if (this.fillPatternImage()) {\n            var ctx = getDummyContext();\n            var pattern = ctx.createPattern(this.fillPatternImage(), this.fillPatternRepeat() || 'repeat');\n            return pattern;\n        }\n    };\n    Shape.prototype._getLinearGradient = function () {\n        return this._getCache(linearGradient, this.__getLinearGradient);\n    };\n    Shape.prototype.__getLinearGradient = function () {\n        var colorStops = this.fillLinearGradientColorStops();\n        if (colorStops) {\n            var ctx = getDummyContext();\n            var start = this.fillLinearGradientStartPoint();\n            var end = this.fillLinearGradientEndPoint();\n            var grd = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    };\n    Shape.prototype._getRadialGradient = function () {\n        return this._getCache(radialGradient, this.__getRadialGradient);\n    };\n    Shape.prototype.__getRadialGradient = function () {\n        var colorStops = this.fillRadialGradientColorStops();\n        if (colorStops) {\n            var ctx = getDummyContext();\n            var start = this.fillRadialGradientStartPoint();\n            var end = this.fillRadialGradientEndPoint();\n            var grd = ctx.createRadialGradient(start.x, start.y, this.fillRadialGradientStartRadius(), end.x, end.y, this.fillRadialGradientEndRadius());\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    };\n    Shape.prototype.getShadowRGBA = function () {\n        return this._getCache(SHADOW_RGBA, this._getShadowRGBA);\n    };\n    Shape.prototype._getShadowRGBA = function () {\n        if (this.hasShadow()) {\n            var rgba = Util_1.Util.colorToRGBA(this.shadowColor());\n            return ('rgba(' +\n                rgba.r +\n                ',' +\n                rgba.g +\n                ',' +\n                rgba.b +\n                ',' +\n                rgba.a * (this.shadowOpacity() || 1) +\n                ')');\n        }\n    };\n    Shape.prototype.hasFill = function () {\n        return (this.fillEnabled() &&\n            !!(this.fill() ||\n                this.fillPatternImage() ||\n                this.fillLinearGradientColorStops() ||\n                this.fillRadialGradientColorStops()));\n    };\n    Shape.prototype.hasStroke = function () {\n        return (this.strokeEnabled() &&\n            this.strokeWidth() &&\n            !!(this.stroke() || this.strokeLinearGradientColorStops()));\n    };\n    Shape.prototype.hasHitStroke = function () {\n        var width = this.hitStrokeWidth();\n        if (width === 'auto') {\n            return this.hasStroke();\n        }\n        return this.strokeEnabled() && !!width;\n    };\n    Shape.prototype.intersects = function (point) {\n        var stage = this.getStage(), bufferHitCanvas = stage.bufferHitCanvas, p;\n        bufferHitCanvas.getContext().clear();\n        this.drawHit(bufferHitCanvas);\n        p = bufferHitCanvas.context.getImageData(Math.round(point.x), Math.round(point.y), 1, 1).data;\n        return p[3] > 0;\n    };\n    Shape.prototype.destroy = function () {\n        Node_1.Node.prototype.destroy.call(this);\n        delete exports.shapes[this.colorKey];\n        delete this.colorKey;\n        return this;\n    };\n    Shape.prototype._useBufferCanvas = function (caching) {\n        return !!((!caching || this.hasShadow()) &&\n            this.perfectDrawEnabled() &&\n            this.getAbsoluteOpacity() !== 1 &&\n            this.hasFill() &&\n            this.hasStroke() &&\n            this.getStage());\n    };\n    Shape.prototype.setStrokeHitEnabled = function (val) {\n        Util_1.Util.warn('strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead.');\n        if (val) {\n            this.hitStrokeWidth('auto');\n        }\n        else {\n            this.hitStrokeWidth(0);\n        }\n    };\n    Shape.prototype.getStrokeHitEnabled = function () {\n        if (this.hitStrokeWidth() === 0) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    };\n    Shape.prototype.getSelfRect = function () {\n        var size = this.size();\n        return {\n            x: this._centroid ? -size.width / 2 : 0,\n            y: this._centroid ? -size.height / 2 : 0,\n            width: size.width,\n            height: size.height\n        };\n    };\n    Shape.prototype.getClientRect = function (attrs) {\n        attrs = attrs || {};\n        var skipTransform = attrs.skipTransform;\n        var relativeTo = attrs.relativeTo;\n        var fillRect = this.getSelfRect();\n        var applyStroke = !attrs.skipStroke && this.hasStroke();\n        var strokeWidth = (applyStroke && this.strokeWidth()) || 0;\n        var fillAndStrokeWidth = fillRect.width + strokeWidth;\n        var fillAndStrokeHeight = fillRect.height + strokeWidth;\n        var applyShadow = !attrs.skipShadow && this.hasShadow();\n        var shadowOffsetX = applyShadow ? this.shadowOffsetX() : 0;\n        var shadowOffsetY = applyShadow ? this.shadowOffsetY() : 0;\n        var preWidth = fillAndStrokeWidth + Math.abs(shadowOffsetX);\n        var preHeight = fillAndStrokeHeight + Math.abs(shadowOffsetY);\n        var blurRadius = (applyShadow && this.shadowBlur()) || 0;\n        var width = preWidth + blurRadius * 2;\n        var height = preHeight + blurRadius * 2;\n        var roundingOffset = 0;\n        if (Math.round(strokeWidth / 2) !== strokeWidth / 2) {\n            roundingOffset = 1;\n        }\n        var rect = {\n            width: width + roundingOffset,\n            height: height + roundingOffset,\n            x: -Math.round(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetX, 0) +\n                fillRect.x,\n            y: -Math.round(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetY, 0) +\n                fillRect.y\n        };\n        if (!skipTransform) {\n            return this._transformedRect(rect, relativeTo);\n        }\n        return rect;\n    };\n    Shape.prototype.drawScene = function (can, top, caching, skipBuffer) {\n        var layer = this.getLayer(), canvas = can || layer.getCanvas(), context = canvas.getContext(), cachedCanvas = this._getCanvasCache(), drawFunc = this.sceneFunc(), hasShadow = this.hasShadow(), hasStroke = this.hasStroke(), stage, bufferCanvas, bufferContext;\n        if (!this.isVisible() && !caching) {\n            return this;\n        }\n        if (cachedCanvas) {\n            context.save();\n            layer._applyTransform(this, context, top);\n            this._drawCachedSceneCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        if (this._useBufferCanvas(caching) && !skipBuffer) {\n            stage = this.getStage();\n            bufferCanvas = stage.bufferCanvas;\n            bufferContext = bufferCanvas.getContext();\n            bufferContext.clear();\n            bufferContext.save();\n            bufferContext._applyLineJoin(this);\n            if (!caching) {\n                if (layer) {\n                    layer._applyTransform(this, bufferContext, top);\n                }\n                else {\n                    var m = this.getAbsoluteTransform(top).getMatrix();\n                    context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n                }\n            }\n            drawFunc.call(this, bufferContext, this);\n            bufferContext.restore();\n            var ratio = bufferCanvas.pixelRatio;\n            if (hasShadow && !canvas.hitCanvas) {\n                context.save();\n                context._applyShadow(this);\n                context._applyOpacity(this);\n                context._applyGlobalCompositeOperation(this);\n                context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n                context.restore();\n            }\n            else {\n                context._applyOpacity(this);\n                context._applyGlobalCompositeOperation(this);\n                context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n            }\n        }\n        else {\n            context._applyLineJoin(this);\n            if (!caching) {\n                if (layer) {\n                    layer._applyTransform(this, context, top);\n                }\n                else {\n                    var o = this.getAbsoluteTransform(top).getMatrix();\n                    context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n                }\n            }\n            if (hasShadow && hasStroke && !canvas.hitCanvas) {\n                context.save();\n                if (!caching) {\n                    context._applyOpacity(this);\n                    context._applyGlobalCompositeOperation(this);\n                }\n                context._applyShadow(this);\n                drawFunc.call(this, context, this);\n                context.restore();\n                if (this.hasFill() && this.shadowForStrokeEnabled()) {\n                    drawFunc.call(this, context, this);\n                }\n            }\n            else if (hasShadow && !canvas.hitCanvas) {\n                context.save();\n                if (!caching) {\n                    context._applyOpacity(this);\n                    context._applyGlobalCompositeOperation(this);\n                }\n                context._applyShadow(this);\n                drawFunc.call(this, context, this);\n                context.restore();\n            }\n            else {\n                if (!caching) {\n                    context._applyOpacity(this);\n                    context._applyGlobalCompositeOperation(this);\n                }\n                drawFunc.call(this, context, this);\n            }\n        }\n        context.restore();\n        return this;\n    };\n    Shape.prototype.drawHit = function (can, top, caching) {\n        var layer = this.getLayer(), canvas = can || layer.hitCanvas, context = canvas && canvas.getContext(), drawFunc = this.hitFunc() || this.sceneFunc(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (!this.colorKey) {\n            console.log(this);\n            Util_1.Util.warn('Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()');\n        }\n        if (!this.shouldDrawHit() && !caching) {\n            return this;\n        }\n        if (cachedHitCanvas) {\n            context.save();\n            layer._applyTransform(this, context, top);\n            this._drawCachedHitCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        context._applyLineJoin(this);\n        if (!caching) {\n            if (layer) {\n                layer._applyTransform(this, context, top);\n            }\n            else {\n                var o = this.getAbsoluteTransform(top).getMatrix();\n                context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n            }\n        }\n        drawFunc.call(this, context, this);\n        context.restore();\n        return this;\n    };\n    Shape.prototype.drawHitFromCache = function (alphaThreshold) {\n        if (alphaThreshold === void 0) { alphaThreshold = 0; }\n        var cachedCanvas = this._getCanvasCache(), sceneCanvas = this._getCachedSceneCanvas(), hitCanvas = cachedCanvas.hit, hitContext = hitCanvas.getContext(), hitWidth = hitCanvas.getWidth(), hitHeight = hitCanvas.getHeight(), hitImageData, hitData, len, rgbColorKey, i, alpha;\n        hitContext.clear();\n        hitContext.drawImage(sceneCanvas._canvas, 0, 0, hitWidth, hitHeight);\n        try {\n            hitImageData = hitContext.getImageData(0, 0, hitWidth, hitHeight);\n            hitData = hitImageData.data;\n            len = hitData.length;\n            rgbColorKey = Util_1.Util._hexToRgb(this.colorKey);\n            for (i = 0; i < len; i += 4) {\n                alpha = hitData[i + 3];\n                if (alpha > alphaThreshold) {\n                    hitData[i] = rgbColorKey.r;\n                    hitData[i + 1] = rgbColorKey.g;\n                    hitData[i + 2] = rgbColorKey.b;\n                    hitData[i + 3] = 255;\n                }\n                else {\n                    hitData[i + 3] = 0;\n                }\n            }\n            hitContext.putImageData(hitImageData, 0, 0);\n        }\n        catch (e) {\n            Util_1.Util.error('Unable to draw hit graph from cached scene canvas. ' + e.message);\n        }\n        return this;\n    };\n    Shape.prototype.hasPointerCapture = function (pointerId) {\n        return PointerEvents.hasPointerCapture(pointerId, this);\n    };\n    Shape.prototype.setPointerCapture = function (pointerId) {\n        PointerEvents.setPointerCapture(pointerId, this);\n    };\n    Shape.prototype.releaseCapture = function (pointerId) {\n        PointerEvents.releaseCapture(pointerId, this);\n    };\n    return Shape;\n}(Node_1.Node));\nexports.Shape = Shape;\nShape.prototype._fillFunc = _fillFunc;\nShape.prototype._strokeFunc = _strokeFunc;\nShape.prototype._fillFuncHit = _fillFuncHit;\nShape.prototype._strokeFuncHit = _strokeFuncHit;\nShape.prototype._centroid = false;\nShape.prototype.nodeType = 'Shape';\nGlobal_1._registerNode(Shape);\nFactory_1.Factory.addGetterSetter(Shape, 'stroke', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'strokeWidth', 2, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'hitStrokeWidth', 'auto', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'strokeHitEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'perfectDrawEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowForStrokeEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'lineJoin');\nFactory_1.Factory.addGetterSetter(Shape, 'lineCap');\nFactory_1.Factory.addGetterSetter(Shape, 'sceneFunc');\nFactory_1.Factory.addGetterSetter(Shape, 'hitFunc');\nFactory_1.Factory.addGetterSetter(Shape, 'dash');\nFactory_1.Factory.addGetterSetter(Shape, 'dashOffset', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowColor', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowBlur', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOpacity', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'shadowOffset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOffsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOffsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternImage');\nFactory_1.Factory.addGetterSetter(Shape, 'fill', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartRadius', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndRadius', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternRepeat', 'repeat');\nFactory_1.Factory.addGetterSetter(Shape, 'fillEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'shadowEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'dashEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeScaleEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPriority', 'color');\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillPatternOffset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternOffsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternOffsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillPatternScale', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternScaleX', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternScaleY', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientStartPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientStartPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientEndPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientEndPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientStartPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientEndPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternRotation', 0);\nFactory_1.Factory.backCompat(Shape, {\n    dashArray: 'dash',\n    getDashArray: 'getDash',\n    setDashArray: 'getDash',\n    drawFunc: 'sceneFunc',\n    getDrawFunc: 'getSceneFunc',\n    setDrawFunc: 'setSceneFunc',\n    drawHitFunc: 'hitFunc',\n    getDrawHitFunc: 'getHitFunc',\n    setDrawHitFunc: 'setHitFunc'\n});\nUtil_1.Collection.mapMethods(Shape);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Container_1 = require(\"./Container\");\nvar Factory_1 = require(\"./Factory\");\nvar BaseLayer_1 = require(\"./BaseLayer\");\nvar Canvas_1 = require(\"./Canvas\");\nvar Shape_1 = require(\"./Shape\");\nvar Validators_1 = require(\"./Validators\");\nvar Global_1 = require(\"./Global\");\nvar HASH = '#', BEFORE_DRAW = 'beforeDraw', DRAW = 'draw', INTERSECTION_OFFSETS = [\n    { x: 0, y: 0 },\n    { x: -1, y: -1 },\n    { x: 1, y: -1 },\n    { x: 1, y: 1 },\n    { x: -1, y: 1 }\n], INTERSECTION_OFFSETS_LEN = INTERSECTION_OFFSETS.length;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.hitCanvas = new Canvas_1.HitCanvas({\n            pixelRatio: 1\n        });\n        return _this;\n    }\n    Layer.prototype.setSize = function (_a) {\n        var width = _a.width, height = _a.height;\n        _super.prototype.setSize.call(this, { width: width, height: height });\n        this.hitCanvas.setSize(width, height);\n        return this;\n    };\n    Layer.prototype._validateAdd = function (child) {\n        var type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            Util_1.Util.throw('You may only add groups and shapes to a layer.');\n        }\n    };\n    Layer.prototype.getIntersection = function (pos, selector) {\n        var obj, i, intersectionOffset, shape;\n        if (!this.hitGraphEnabled() || !this.isVisible()) {\n            return null;\n        }\n        var spiralSearchDistance = 1;\n        var continueSearch = false;\n        while (true) {\n            for (i = 0; i < INTERSECTION_OFFSETS_LEN; i++) {\n                intersectionOffset = INTERSECTION_OFFSETS[i];\n                obj = this._getIntersection({\n                    x: pos.x + intersectionOffset.x * spiralSearchDistance,\n                    y: pos.y + intersectionOffset.y * spiralSearchDistance\n                });\n                shape = obj.shape;\n                if (shape && selector) {\n                    return shape.findAncestor(selector, true);\n                }\n                else if (shape) {\n                    return shape;\n                }\n                continueSearch = !!obj.antialiased;\n                if (!obj.antialiased) {\n                    break;\n                }\n            }\n            if (continueSearch) {\n                spiralSearchDistance += 1;\n            }\n            else {\n                return null;\n            }\n        }\n    };\n    Layer.prototype._getIntersection = function (pos) {\n        var ratio = this.hitCanvas.pixelRatio;\n        var p = this.hitCanvas.context.getImageData(Math.round(pos.x * ratio), Math.round(pos.y * ratio), 1, 1).data, p3 = p[3], colorKey, shape;\n        if (p3 === 255) {\n            colorKey = Util_1.Util._rgbToHex(p[0], p[1], p[2]);\n            shape = Shape_1.shapes[HASH + colorKey];\n            if (shape) {\n                return {\n                    shape: shape\n                };\n            }\n            return {\n                antialiased: true\n            };\n        }\n        else if (p3 > 0) {\n            return {\n                antialiased: true\n            };\n        }\n        return {};\n    };\n    Layer.prototype.drawScene = function (can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas());\n        this._fire(BEFORE_DRAW, {\n            node: this\n        });\n        if (this.clearBeforeDraw()) {\n            canvas.getContext().clear();\n        }\n        Container_1.Container.prototype.drawScene.call(this, canvas, top);\n        this._fire(DRAW, {\n            node: this\n        });\n        return this;\n    };\n    Layer.prototype.drawHit = function (can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas);\n        if (layer && layer.clearBeforeDraw()) {\n            layer\n                .getHitCanvas()\n                .getContext()\n                .clear();\n        }\n        Container_1.Container.prototype.drawHit.call(this, canvas, top);\n        return this;\n    };\n    Layer.prototype.clear = function (bounds) {\n        BaseLayer_1.BaseLayer.prototype.clear.call(this, bounds);\n        this.getHitCanvas()\n            .getContext()\n            .clear(bounds);\n        return this;\n    };\n    Layer.prototype.enableHitGraph = function () {\n        this.hitGraphEnabled(true);\n        return this;\n    };\n    Layer.prototype.disableHitGraph = function () {\n        this.hitGraphEnabled(false);\n        return this;\n    };\n    Layer.prototype.toggleHitCanvas = function () {\n        if (!this.parent) {\n            return;\n        }\n        var parent = this.parent;\n        var added = !!this.hitCanvas._canvas.parentNode;\n        if (added) {\n            parent.content.removeChild(this.hitCanvas._canvas);\n        }\n        else {\n            parent.content.appendChild(this.hitCanvas._canvas);\n        }\n    };\n    return Layer;\n}(BaseLayer_1.BaseLayer));\nexports.Layer = Layer;\nLayer.prototype.nodeType = 'Layer';\nGlobal_1._registerNode(Layer);\nFactory_1.Factory.addGetterSetter(Layer, 'hitGraphEnabled', true, Validators_1.getBooleanValidator());\nUtil_1.Collection.mapMethods(Layer);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Container_1 = require(\"./Container\");\nvar BaseLayer_1 = require(\"./BaseLayer\");\nvar Global_1 = require(\"./Global\");\nvar FastLayer = (function (_super) {\n    __extends(FastLayer, _super);\n    function FastLayer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FastLayer.prototype._validateAdd = function (child) {\n        var type = child.getType();\n        if (type !== 'Shape') {\n            Util_1.Util.throw('You may only add shapes to a fast layer.');\n        }\n    };\n    FastLayer.prototype.hitGraphEnabled = function () {\n        return false;\n    };\n    FastLayer.prototype.drawScene = function (can) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas());\n        if (this.clearBeforeDraw()) {\n            canvas.getContext().clear();\n        }\n        Container_1.Container.prototype.drawScene.call(this, canvas);\n        return this;\n    };\n    FastLayer.prototype.draw = function () {\n        this.drawScene();\n        return this;\n    };\n    return FastLayer;\n}(BaseLayer_1.BaseLayer));\nexports.FastLayer = FastLayer;\nFastLayer.prototype.nodeType = 'FastLayer';\nGlobal_1._registerNode(FastLayer);\nUtil_1.Collection.mapMethods(FastLayer);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Container_1 = require(\"./Container\");\nvar Global_1 = require(\"./Global\");\nvar Group = (function (_super) {\n    __extends(Group, _super);\n    function Group() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Group.prototype._validateAdd = function (child) {\n        var type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            Util_1.Util.throw('You may only add groups and shapes to groups.');\n        }\n    };\n    return Group;\n}(Container_1.Container));\nexports.Group = Group;\nGroup.prototype.nodeType = 'Group';\nGlobal_1._registerNode(Group);\nUtil_1.Collection.mapMethods(Group);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar now = (function () {\n    if (Global_1.glob.performance && Global_1.glob.performance.now) {\n        return function () {\n            return Global_1.glob.performance.now();\n        };\n    }\n    return function () {\n        return new Date().getTime();\n    };\n})();\nvar Animation = (function () {\n    function Animation(func, layers) {\n        this.id = Animation.animIdCounter++;\n        this.frame = {\n            time: 0,\n            timeDiff: 0,\n            lastTime: now(),\n            frameRate: 0\n        };\n        this.func = func;\n        this.setLayers(layers);\n    }\n    Animation.prototype.setLayers = function (layers) {\n        var lays = [];\n        if (!layers) {\n            lays = [];\n        }\n        else if (layers.length > 0) {\n            lays = layers;\n        }\n        else {\n            lays = [layers];\n        }\n        this.layers = lays;\n        return this;\n    };\n    Animation.prototype.getLayers = function () {\n        return this.layers;\n    };\n    Animation.prototype.addLayer = function (layer) {\n        var layers = this.layers, len = layers.length, n;\n        for (n = 0; n < len; n++) {\n            if (layers[n]._id === layer._id) {\n                return false;\n            }\n        }\n        this.layers.push(layer);\n        return true;\n    };\n    Animation.prototype.isRunning = function () {\n        var a = Animation, animations = a.animations, len = animations.length, n;\n        for (n = 0; n < len; n++) {\n            if (animations[n].id === this.id) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Animation.prototype.start = function () {\n        this.stop();\n        this.frame.timeDiff = 0;\n        this.frame.lastTime = now();\n        Animation._addAnimation(this);\n        return this;\n    };\n    Animation.prototype.stop = function () {\n        Animation._removeAnimation(this);\n        return this;\n    };\n    Animation.prototype._updateFrameObject = function (time) {\n        this.frame.timeDiff = time - this.frame.lastTime;\n        this.frame.lastTime = time;\n        this.frame.time += this.frame.timeDiff;\n        this.frame.frameRate = 1000 / this.frame.timeDiff;\n    };\n    Animation._addAnimation = function (anim) {\n        this.animations.push(anim);\n        this._handleAnimation();\n    };\n    Animation._removeAnimation = function (anim) {\n        var id = anim.id, animations = this.animations, len = animations.length, n;\n        for (n = 0; n < len; n++) {\n            if (animations[n].id === id) {\n                this.animations.splice(n, 1);\n                break;\n            }\n        }\n    };\n    Animation._runFrames = function () {\n        var layerHash = {}, animations = this.animations, anim, layers, func, n, i, layersLen, layer, key, needRedraw;\n        for (n = 0; n < animations.length; n++) {\n            anim = animations[n];\n            layers = anim.layers;\n            func = anim.func;\n            anim._updateFrameObject(now());\n            layersLen = layers.length;\n            if (func) {\n                needRedraw = func.call(anim, anim.frame) !== false;\n            }\n            else {\n                needRedraw = true;\n            }\n            if (!needRedraw) {\n                continue;\n            }\n            for (i = 0; i < layersLen; i++) {\n                layer = layers[i];\n                if (layer._id !== undefined) {\n                    layerHash[layer._id] = layer;\n                }\n            }\n        }\n        for (key in layerHash) {\n            if (!layerHash.hasOwnProperty(key)) {\n                continue;\n            }\n            layerHash[key].draw();\n        }\n    };\n    Animation._animationLoop = function () {\n        var Anim = Animation;\n        if (Anim.animations.length) {\n            Anim._runFrames();\n            requestAnimationFrame(Anim._animationLoop);\n        }\n        else {\n            Anim.animRunning = false;\n        }\n    };\n    Animation._handleAnimation = function () {\n        if (!this.animRunning) {\n            this.animRunning = true;\n            requestAnimationFrame(this._animationLoop);\n        }\n    };\n    Animation.animations = [];\n    Animation.animIdCounter = 0;\n    Animation.animRunning = false;\n    return Animation;\n}());\nexports.Animation = Animation;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Animation_1 = require(\"./Animation\");\nvar Node_1 = require(\"./Node\");\nvar Global_1 = require(\"./Global\");\nvar blacklist = {\n    node: 1,\n    duration: 1,\n    easing: 1,\n    onFinish: 1,\n    yoyo: 1\n}, PAUSED = 1, PLAYING = 2, REVERSING = 3, idCounter = 0, colorAttrs = ['fill', 'stroke', 'shadowColor'];\nvar TweenEngine = (function () {\n    function TweenEngine(prop, propFunc, func, begin, finish, duration, yoyo) {\n        this.prop = prop;\n        this.propFunc = propFunc;\n        this.begin = begin;\n        this._pos = begin;\n        this.duration = duration;\n        this._change = 0;\n        this.prevPos = 0;\n        this.yoyo = yoyo;\n        this._time = 0;\n        this._position = 0;\n        this._startTime = 0;\n        this._finish = 0;\n        this.func = func;\n        this._change = finish - this.begin;\n        this.pause();\n    }\n    TweenEngine.prototype.fire = function (str) {\n        var handler = this[str];\n        if (handler) {\n            handler();\n        }\n    };\n    TweenEngine.prototype.setTime = function (t) {\n        if (t > this.duration) {\n            if (this.yoyo) {\n                this._time = this.duration;\n                this.reverse();\n            }\n            else {\n                this.finish();\n            }\n        }\n        else if (t < 0) {\n            if (this.yoyo) {\n                this._time = 0;\n                this.play();\n            }\n            else {\n                this.reset();\n            }\n        }\n        else {\n            this._time = t;\n            this.update();\n        }\n    };\n    TweenEngine.prototype.getTime = function () {\n        return this._time;\n    };\n    TweenEngine.prototype.setPosition = function (p) {\n        this.prevPos = this._pos;\n        this.propFunc(p);\n        this._pos = p;\n    };\n    TweenEngine.prototype.getPosition = function (t) {\n        if (t === undefined) {\n            t = this._time;\n        }\n        return this.func(t, this.begin, this._change, this.duration);\n    };\n    TweenEngine.prototype.play = function () {\n        this.state = PLAYING;\n        this._startTime = this.getTimer() - this._time;\n        this.onEnterFrame();\n        this.fire('onPlay');\n    };\n    TweenEngine.prototype.reverse = function () {\n        this.state = REVERSING;\n        this._time = this.duration - this._time;\n        this._startTime = this.getTimer() - this._time;\n        this.onEnterFrame();\n        this.fire('onReverse');\n    };\n    TweenEngine.prototype.seek = function (t) {\n        this.pause();\n        this._time = t;\n        this.update();\n        this.fire('onSeek');\n    };\n    TweenEngine.prototype.reset = function () {\n        this.pause();\n        this._time = 0;\n        this.update();\n        this.fire('onReset');\n    };\n    TweenEngine.prototype.finish = function () {\n        this.pause();\n        this._time = this.duration;\n        this.update();\n        this.fire('onFinish');\n    };\n    TweenEngine.prototype.update = function () {\n        this.setPosition(this.getPosition(this._time));\n    };\n    TweenEngine.prototype.onEnterFrame = function () {\n        var t = this.getTimer() - this._startTime;\n        if (this.state === PLAYING) {\n            this.setTime(t);\n        }\n        else if (this.state === REVERSING) {\n            this.setTime(this.duration - t);\n        }\n    };\n    TweenEngine.prototype.pause = function () {\n        this.state = PAUSED;\n        this.fire('onPause');\n    };\n    TweenEngine.prototype.getTimer = function () {\n        return new Date().getTime();\n    };\n    return TweenEngine;\n}());\nvar Tween = (function () {\n    function Tween(config) {\n        var that = this, node = config.node, nodeId = node._id, duration, easing = config.easing || exports.Easings.Linear, yoyo = !!config.yoyo, key;\n        if (typeof config.duration === 'undefined') {\n            duration = 0.3;\n        }\n        else if (config.duration === 0) {\n            duration = 0.001;\n        }\n        else {\n            duration = config.duration;\n        }\n        this.node = node;\n        this._id = idCounter++;\n        var layers = node.getLayer() ||\n            (node instanceof Global_1.Konva['Stage'] ? node.getLayers() : null);\n        if (!layers) {\n            Util_1.Util.error('Tween constructor have `node` that is not in a layer. Please add node into layer first.');\n        }\n        this.anim = new Animation_1.Animation(function () {\n            that.tween.onEnterFrame();\n        }, layers);\n        this.tween = new TweenEngine(key, function (i) {\n            that._tweenFunc(i);\n        }, easing, 0, 1, duration * 1000, yoyo);\n        this._addListeners();\n        if (!Tween.attrs[nodeId]) {\n            Tween.attrs[nodeId] = {};\n        }\n        if (!Tween.attrs[nodeId][this._id]) {\n            Tween.attrs[nodeId][this._id] = {};\n        }\n        if (!Tween.tweens[nodeId]) {\n            Tween.tweens[nodeId] = {};\n        }\n        for (key in config) {\n            if (blacklist[key] === undefined) {\n                this._addAttr(key, config[key]);\n            }\n        }\n        this.reset();\n        this.onFinish = config.onFinish;\n        this.onReset = config.onReset;\n    }\n    Tween.prototype._addAttr = function (key, end) {\n        var node = this.node, nodeId = node._id, start, diff, tweenId, n, len, trueEnd, trueStart, endRGBA;\n        tweenId = Tween.tweens[nodeId][key];\n        if (tweenId) {\n            delete Tween.attrs[nodeId][tweenId][key];\n        }\n        start = node.getAttr(key);\n        if (Util_1.Util._isArray(end)) {\n            diff = [];\n            len = Math.max(end.length, start.length);\n            if (key === 'points' && end.length !== start.length) {\n                if (end.length > start.length) {\n                    trueStart = start;\n                    start = Util_1.Util._prepareArrayForTween(start, end, node.closed());\n                }\n                else {\n                    trueEnd = end;\n                    end = Util_1.Util._prepareArrayForTween(end, start, node.closed());\n                }\n            }\n            if (key.indexOf('fill') === 0) {\n                for (n = 0; n < len; n++) {\n                    if (n % 2 === 0) {\n                        diff.push(end[n] - start[n]);\n                    }\n                    else {\n                        var startRGBA = Util_1.Util.colorToRGBA(start[n]);\n                        endRGBA = Util_1.Util.colorToRGBA(end[n]);\n                        start[n] = startRGBA;\n                        diff.push({\n                            r: endRGBA.r - startRGBA.r,\n                            g: endRGBA.g - startRGBA.g,\n                            b: endRGBA.b - startRGBA.b,\n                            a: endRGBA.a - startRGBA.a\n                        });\n                    }\n                }\n            }\n            else {\n                for (n = 0; n < len; n++) {\n                    diff.push(end[n] - start[n]);\n                }\n            }\n        }\n        else if (colorAttrs.indexOf(key) !== -1) {\n            start = Util_1.Util.colorToRGBA(start);\n            endRGBA = Util_1.Util.colorToRGBA(end);\n            diff = {\n                r: endRGBA.r - start.r,\n                g: endRGBA.g - start.g,\n                b: endRGBA.b - start.b,\n                a: endRGBA.a - start.a\n            };\n        }\n        else {\n            diff = end - start;\n        }\n        Tween.attrs[nodeId][this._id][key] = {\n            start: start,\n            diff: diff,\n            end: end,\n            trueEnd: trueEnd,\n            trueStart: trueStart\n        };\n        Tween.tweens[nodeId][key] = this._id;\n    };\n    Tween.prototype._tweenFunc = function (i) {\n        var node = this.node, attrs = Tween.attrs[node._id][this._id], key, attr, start, diff, newVal, n, len, end;\n        for (key in attrs) {\n            attr = attrs[key];\n            start = attr.start;\n            diff = attr.diff;\n            end = attr.end;\n            if (Util_1.Util._isArray(start)) {\n                newVal = [];\n                len = Math.max(start.length, end.length);\n                if (key.indexOf('fill') === 0) {\n                    for (n = 0; n < len; n++) {\n                        if (n % 2 === 0) {\n                            newVal.push((start[n] || 0) + diff[n] * i);\n                        }\n                        else {\n                            newVal.push('rgba(' +\n                                Math.round(start[n].r + diff[n].r * i) +\n                                ',' +\n                                Math.round(start[n].g + diff[n].g * i) +\n                                ',' +\n                                Math.round(start[n].b + diff[n].b * i) +\n                                ',' +\n                                (start[n].a + diff[n].a * i) +\n                                ')');\n                        }\n                    }\n                }\n                else {\n                    for (n = 0; n < len; n++) {\n                        newVal.push((start[n] || 0) + diff[n] * i);\n                    }\n                }\n            }\n            else if (colorAttrs.indexOf(key) !== -1) {\n                newVal =\n                    'rgba(' +\n                        Math.round(start.r + diff.r * i) +\n                        ',' +\n                        Math.round(start.g + diff.g * i) +\n                        ',' +\n                        Math.round(start.b + diff.b * i) +\n                        ',' +\n                        (start.a + diff.a * i) +\n                        ')';\n            }\n            else {\n                newVal = start + diff * i;\n            }\n            node.setAttr(key, newVal);\n        }\n    };\n    Tween.prototype._addListeners = function () {\n        var _this = this;\n        this.tween.onPlay = function () {\n            _this.anim.start();\n        };\n        this.tween.onReverse = function () {\n            _this.anim.start();\n        };\n        this.tween.onPause = function () {\n            _this.anim.stop();\n        };\n        this.tween.onFinish = function () {\n            var node = _this.node;\n            var attrs = Tween.attrs[node._id][_this._id];\n            if (attrs.points && attrs.points.trueEnd) {\n                node.setAttr('points', attrs.points.trueEnd);\n            }\n            if (_this.onFinish) {\n                _this.onFinish.call(_this);\n            }\n        };\n        this.tween.onReset = function () {\n            var node = _this.node;\n            var attrs = Tween.attrs[node._id][_this._id];\n            if (attrs.points && attrs.points.trueStart) {\n                node.points(attrs.points.trueStart);\n            }\n            if (_this.onReset) {\n                _this.onReset();\n            }\n        };\n    };\n    Tween.prototype.play = function () {\n        this.tween.play();\n        return this;\n    };\n    Tween.prototype.reverse = function () {\n        this.tween.reverse();\n        return this;\n    };\n    Tween.prototype.reset = function () {\n        this.tween.reset();\n        return this;\n    };\n    Tween.prototype.seek = function (t) {\n        this.tween.seek(t * 1000);\n        return this;\n    };\n    Tween.prototype.pause = function () {\n        this.tween.pause();\n        return this;\n    };\n    Tween.prototype.finish = function () {\n        this.tween.finish();\n        return this;\n    };\n    Tween.prototype.destroy = function () {\n        var nodeId = this.node._id, thisId = this._id, attrs = Tween.tweens[nodeId], key;\n        this.pause();\n        for (key in attrs) {\n            delete Tween.tweens[nodeId][key];\n        }\n        delete Tween.attrs[nodeId][thisId];\n    };\n    Tween.attrs = {};\n    Tween.tweens = {};\n    return Tween;\n}());\nexports.Tween = Tween;\nNode_1.Node.prototype.to = function (params) {\n    var onFinish = params.onFinish;\n    params.node = this;\n    params.onFinish = function () {\n        this.destroy();\n        if (onFinish) {\n            onFinish();\n        }\n    };\n    var tween = new Tween(params);\n    tween.play();\n};\nexports.Easings = {\n    BackEaseIn: function (t, b, c, d) {\n        var s = 1.70158;\n        return c * (t /= d) * t * ((s + 1) * t - s) + b;\n    },\n    BackEaseOut: function (t, b, c, d) {\n        var s = 1.70158;\n        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n    },\n    BackEaseInOut: function (t, b, c, d) {\n        var s = 1.70158;\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n        }\n        return (c / 2) * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n    },\n    ElasticEaseIn: function (t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) === 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        return (-(a *\n            Math.pow(2, 10 * (t -= 1)) *\n            Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b);\n    },\n    ElasticEaseOut: function (t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) === 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        return (a * Math.pow(2, -10 * t) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) +\n            c +\n            b);\n    },\n    ElasticEaseInOut: function (t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d / 2) === 2) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * (0.3 * 1.5);\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        if (t < 1) {\n            return (-0.5 *\n                (a *\n                    Math.pow(2, 10 * (t -= 1)) *\n                    Math.sin(((t * d - s) * (2 * Math.PI)) / p)) +\n                b);\n        }\n        return (a *\n            Math.pow(2, -10 * (t -= 1)) *\n            Math.sin(((t * d - s) * (2 * Math.PI)) / p) *\n            0.5 +\n            c +\n            b);\n    },\n    BounceEaseOut: function (t, b, c, d) {\n        if ((t /= d) < 1 / 2.75) {\n            return c * (7.5625 * t * t) + b;\n        }\n        else if (t < 2 / 2.75) {\n            return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n        }\n        else if (t < 2.5 / 2.75) {\n            return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n        }\n        else {\n            return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n        }\n    },\n    BounceEaseIn: function (t, b, c, d) {\n        return c - exports.Easings.BounceEaseOut(d - t, 0, c, d) + b;\n    },\n    BounceEaseInOut: function (t, b, c, d) {\n        if (t < d / 2) {\n            return exports.Easings.BounceEaseIn(t * 2, 0, c, d) * 0.5 + b;\n        }\n        else {\n            return exports.Easings.BounceEaseOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n        }\n    },\n    EaseIn: function (t, b, c, d) {\n        return c * (t /= d) * t + b;\n    },\n    EaseOut: function (t, b, c, d) {\n        return -c * (t /= d) * (t - 2) + b;\n    },\n    EaseInOut: function (t, b, c, d) {\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * t * t + b;\n        }\n        return (-c / 2) * (--t * (t - 2) - 1) + b;\n    },\n    StrongEaseIn: function (t, b, c, d) {\n        return c * (t /= d) * t * t * t * t + b;\n    },\n    StrongEaseOut: function (t, b, c, d) {\n        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n    },\n    StrongEaseInOut: function (t, b, c, d) {\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * t * t * t * t * t + b;\n        }\n        return (c / 2) * ((t -= 2) * t * t * t * t + 2) + b;\n    },\n    Linear: function (t, b, c, d) {\n        return (c * t) / d + b;\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Util_1 = require(\"./Util\");\nvar Node_1 = require(\"./Node\");\nvar Container_1 = require(\"./Container\");\nvar Stage_1 = require(\"./Stage\");\nvar Layer_1 = require(\"./Layer\");\nvar FastLayer_1 = require(\"./FastLayer\");\nvar Group_1 = require(\"./Group\");\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\nvar Shape_1 = require(\"./Shape\");\nvar Animation_1 = require(\"./Animation\");\nvar Tween_1 = require(\"./Tween\");\nvar Context_1 = require(\"./Context\");\nvar Canvas_1 = require(\"./Canvas\");\nexports.Konva = Util_1.Util._assign(Global_1.Konva, {\n    Collection: Util_1.Collection,\n    Util: Util_1.Util,\n    Transform: Util_1.Transform,\n    Node: Node_1.Node,\n    ids: Node_1.ids,\n    names: Node_1.names,\n    Container: Container_1.Container,\n    Stage: Stage_1.Stage,\n    stages: Stage_1.stages,\n    Layer: Layer_1.Layer,\n    FastLayer: FastLayer_1.FastLayer,\n    Group: Group_1.Group,\n    DD: DragAndDrop_1.DD,\n    Shape: Shape_1.Shape,\n    shapes: Shape_1.shapes,\n    Animation: Animation_1.Animation,\n    Tween: Tween_1.Tween,\n    Easings: Tween_1.Easings,\n    Context: Context_1.Context,\n    Canvas: Canvas_1.Canvas\n});\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Global_1 = require(\"../Global\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_2 = require(\"../Global\");\nvar Arc = (function (_super) {\n    __extends(Arc, _super);\n    function Arc() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Arc.prototype._sceneFunc = function (context) {\n        var angle = Global_1.Konva.getAngle(this.angle()), clockwise = this.clockwise();\n        context.beginPath();\n        context.arc(0, 0, this.outerRadius(), 0, angle, clockwise);\n        context.arc(0, 0, this.innerRadius(), angle, 0, !clockwise);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Arc.prototype.getWidth = function () {\n        return this.outerRadius() * 2;\n    };\n    Arc.prototype.getHeight = function () {\n        return this.outerRadius() * 2;\n    };\n    Arc.prototype.setWidth = function (width) {\n        this.outerRadius(width / 2);\n    };\n    Arc.prototype.setHeight = function (height) {\n        this.outerRadius(height / 2);\n    };\n    return Arc;\n}(Shape_1.Shape));\nexports.Arc = Arc;\nArc.prototype._centroid = true;\nArc.prototype.className = 'Arc';\nArc.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\nGlobal_2._registerNode(Arc);\nFactory_1.Factory.addGetterSetter(Arc, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'outerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'angle', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'clockwise', false, Validators_1.getBooleanValidator());\nUtil_1.Collection.mapMethods(Arc);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Line = (function (_super) {\n    __extends(Line, _super);\n    function Line(config) {\n        var _this = _super.call(this, config) || this;\n        _this.on('pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva', function () {\n            this._clearCache('tensionPoints');\n        });\n        return _this;\n    }\n    Line.prototype._sceneFunc = function (context) {\n        var points = this.points(), length = points.length, tension = this.tension(), closed = this.closed(), bezier = this.bezier(), tp, len, n;\n        if (!length) {\n            return;\n        }\n        context.beginPath();\n        context.moveTo(points[0], points[1]);\n        if (tension !== 0 && length > 4) {\n            tp = this.getTensionPoints();\n            len = tp.length;\n            n = closed ? 0 : 4;\n            if (!closed) {\n                context.quadraticCurveTo(tp[0], tp[1], tp[2], tp[3]);\n            }\n            while (n < len - 2) {\n                context.bezierCurveTo(tp[n++], tp[n++], tp[n++], tp[n++], tp[n++], tp[n++]);\n            }\n            if (!closed) {\n                context.quadraticCurveTo(tp[len - 2], tp[len - 1], points[length - 2], points[length - 1]);\n            }\n        }\n        else if (bezier) {\n            n = 2;\n            while (n < length) {\n                context.bezierCurveTo(points[n++], points[n++], points[n++], points[n++], points[n++], points[n++]);\n            }\n        }\n        else {\n            for (n = 2; n < length; n += 2) {\n                context.lineTo(points[n], points[n + 1]);\n            }\n        }\n        if (closed) {\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        else {\n            context.strokeShape(this);\n        }\n    };\n    Line.prototype.getTensionPoints = function () {\n        return this._getCache('tensionPoints', this._getTensionPoints);\n    };\n    Line.prototype._getTensionPoints = function () {\n        if (this.closed()) {\n            return this._getTensionPointsClosed();\n        }\n        else {\n            return Util_1.Util._expandPoints(this.points(), this.tension());\n        }\n    };\n    Line.prototype._getTensionPointsClosed = function () {\n        var p = this.points(), len = p.length, tension = this.tension(), firstControlPoints = Util_1.Util._getControlPoints(p[len - 2], p[len - 1], p[0], p[1], p[2], p[3], tension), lastControlPoints = Util_1.Util._getControlPoints(p[len - 4], p[len - 3], p[len - 2], p[len - 1], p[0], p[1], tension), middle = Util_1.Util._expandPoints(p, tension), tp = [firstControlPoints[2], firstControlPoints[3]]\n            .concat(middle)\n            .concat([\n            lastControlPoints[0],\n            lastControlPoints[1],\n            p[len - 2],\n            p[len - 1],\n            lastControlPoints[2],\n            lastControlPoints[3],\n            firstControlPoints[0],\n            firstControlPoints[1],\n            p[0],\n            p[1]\n        ]);\n        return tp;\n    };\n    Line.prototype.getWidth = function () {\n        return this.getSelfRect().width;\n    };\n    Line.prototype.getHeight = function () {\n        return this.getSelfRect().height;\n    };\n    Line.prototype.getSelfRect = function () {\n        var points = this.points();\n        if (points.length < 4) {\n            return {\n                x: points[0] || 0,\n                y: points[1] || 0,\n                width: 0,\n                height: 0\n            };\n        }\n        if (this.tension() !== 0) {\n            points = __spreadArrays([\n                points[0],\n                points[1]\n            ], this._getTensionPoints(), [\n                points[points.length - 2],\n                points[points.length - 1]\n            ]);\n        }\n        else {\n            points = this.points();\n        }\n        var minX = points[0];\n        var maxX = points[0];\n        var minY = points[1];\n        var maxY = points[1];\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY\n        };\n    };\n    return Line;\n}(Shape_1.Shape));\nexports.Line = Line;\nLine.prototype.className = 'Line';\nLine.prototype._attrsAffectingSize = ['points', 'bezier', 'tension'];\nGlobal_1._registerNode(Line);\nFactory_1.Factory.addGetterSetter(Line, 'closed', false);\nFactory_1.Factory.addGetterSetter(Line, 'bezier', false);\nFactory_1.Factory.addGetterSetter(Line, 'tension', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Line, 'points', [], Validators_1.getNumberArrayValidator());\nUtil_1.Collection.mapMethods(Line);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Line_1 = require(\"./Line\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Arrow = (function (_super) {\n    __extends(Arrow, _super);\n    function Arrow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Arrow.prototype._sceneFunc = function (ctx) {\n        _super.prototype._sceneFunc.call(this, ctx);\n        var PI2 = Math.PI * 2;\n        var points = this.points();\n        var tp = points;\n        var fromTension = this.tension() !== 0 && points.length > 4;\n        if (fromTension) {\n            tp = this.getTensionPoints();\n        }\n        var n = points.length;\n        var dx, dy;\n        if (fromTension) {\n            dx = points[n - 2] - (tp[tp.length - 2] + tp[tp.length - 4]) / 2;\n            dy = points[n - 1] - (tp[tp.length - 1] + tp[tp.length - 3]) / 2;\n        }\n        else {\n            dx = points[n - 2] - points[n - 4];\n            dy = points[n - 1] - points[n - 3];\n        }\n        var radians = (Math.atan2(dy, dx) + PI2) % PI2;\n        var length = this.pointerLength();\n        var width = this.pointerWidth();\n        ctx.save();\n        ctx.beginPath();\n        ctx.translate(points[n - 2], points[n - 1]);\n        ctx.rotate(radians);\n        ctx.moveTo(0, 0);\n        ctx.lineTo(-length, width / 2);\n        ctx.lineTo(-length, -width / 2);\n        ctx.closePath();\n        ctx.restore();\n        if (this.pointerAtBeginning()) {\n            ctx.save();\n            ctx.translate(points[0], points[1]);\n            if (fromTension) {\n                dx = (tp[0] + tp[2]) / 2 - points[0];\n                dy = (tp[1] + tp[3]) / 2 - points[1];\n            }\n            else {\n                dx = points[2] - points[0];\n                dy = points[3] - points[1];\n            }\n            ctx.rotate((Math.atan2(-dy, -dx) + PI2) % PI2);\n            ctx.moveTo(0, 0);\n            ctx.lineTo(-length, width / 2);\n            ctx.lineTo(-length, -width / 2);\n            ctx.closePath();\n            ctx.restore();\n        }\n        var isDashEnabled = this.dashEnabled();\n        if (isDashEnabled) {\n            this.attrs.dashEnabled = false;\n            ctx.setLineDash([]);\n        }\n        ctx.fillStrokeShape(this);\n        if (isDashEnabled) {\n            this.attrs.dashEnabled = true;\n        }\n    };\n    Arrow.prototype.getSelfRect = function () {\n        var lineRect = _super.prototype.getSelfRect.call(this);\n        var offset = this.pointerWidth() / 2;\n        return {\n            x: lineRect.x - offset,\n            y: lineRect.y - offset,\n            width: lineRect.width + offset * 2,\n            height: lineRect.height + offset * 2\n        };\n    };\n    return Arrow;\n}(Line_1.Line));\nexports.Arrow = Arrow;\nArrow.prototype.className = 'Arrow';\nGlobal_1._registerNode(Arrow);\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerLength', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerWidth', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerAtBeginning', false);\nUtil_1.Collection.mapMethods(Arrow);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Circle = (function (_super) {\n    __extends(Circle, _super);\n    function Circle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Circle.prototype._sceneFunc = function (context) {\n        context.beginPath();\n        context.arc(0, 0, this.radius(), 0, Math.PI * 2, false);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Circle.prototype.getWidth = function () {\n        return this.radius() * 2;\n    };\n    Circle.prototype.getHeight = function () {\n        return this.radius() * 2;\n    };\n    Circle.prototype.setWidth = function (width) {\n        if (this.radius() !== width / 2) {\n            this.radius(width / 2);\n        }\n    };\n    Circle.prototype.setHeight = function (height) {\n        if (this.radius() !== height / 2) {\n            this.radius(height / 2);\n        }\n    };\n    return Circle;\n}(Shape_1.Shape));\nexports.Circle = Circle;\nCircle.prototype._centroid = true;\nCircle.prototype.className = 'Circle';\nCircle.prototype._attrsAffectingSize = ['radius'];\nGlobal_1._registerNode(Circle);\nFactory_1.Factory.addGetterSetter(Circle, 'radius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Circle);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Ellipse = (function (_super) {\n    __extends(Ellipse, _super);\n    function Ellipse() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Ellipse.prototype._sceneFunc = function (context) {\n        var rx = this.radiusX(), ry = this.radiusY();\n        context.beginPath();\n        context.save();\n        if (rx !== ry) {\n            context.scale(1, ry / rx);\n        }\n        context.arc(0, 0, rx, 0, Math.PI * 2, false);\n        context.restore();\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Ellipse.prototype.getWidth = function () {\n        return this.radiusX() * 2;\n    };\n    Ellipse.prototype.getHeight = function () {\n        return this.radiusY() * 2;\n    };\n    Ellipse.prototype.setWidth = function (width) {\n        this.radiusX(width / 2);\n    };\n    Ellipse.prototype.setHeight = function (height) {\n        this.radiusY(height / 2);\n    };\n    return Ellipse;\n}(Shape_1.Shape));\nexports.Ellipse = Ellipse;\nEllipse.prototype.className = 'Ellipse';\nEllipse.prototype._centroid = true;\nEllipse.prototype._attrsAffectingSize = ['radiusX', 'radiusY'];\nGlobal_1._registerNode(Ellipse);\nFactory_1.Factory.addComponentsGetterSetter(Ellipse, 'radius', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Ellipse, 'radiusX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Ellipse, 'radiusY', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Ellipse);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Image = (function (_super) {\n    __extends(Image, _super);\n    function Image() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Image.prototype._useBufferCanvas = function () {\n        return !!((this.hasShadow() || this.getAbsoluteOpacity() !== 1) &&\n            this.hasStroke() &&\n            this.getStage());\n    };\n    Image.prototype._sceneFunc = function (context) {\n        var width = this.width(), height = this.height(), image = this.image(), cropWidth, cropHeight, params;\n        if (image) {\n            cropWidth = this.cropWidth();\n            cropHeight = this.cropHeight();\n            if (cropWidth && cropHeight) {\n                params = [\n                    image,\n                    this.cropX(),\n                    this.cropY(),\n                    cropWidth,\n                    cropHeight,\n                    0,\n                    0,\n                    width,\n                    height\n                ];\n            }\n            else {\n                params = [image, 0, 0, width, height];\n            }\n        }\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            context.drawImage.apply(context, params);\n        }\n    };\n    Image.prototype._hitFunc = function (context) {\n        var width = this.width(), height = this.height();\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Image.prototype.getWidth = function () {\n        var _a;\n        var image = this.image();\n        return (_a = this.attrs.width) !== null && _a !== void 0 ? _a : (image ? image.width : 0);\n    };\n    Image.prototype.getHeight = function () {\n        var _a;\n        var image = this.image();\n        return (_a = this.attrs.height) !== null && _a !== void 0 ? _a : (image ? image.height : 0);\n    };\n    Image.fromURL = function (url, callback) {\n        var img = Util_1.Util.createImageElement();\n        img.onload = function () {\n            var image = new Image({\n                image: img\n            });\n            callback(image);\n        };\n        img.crossOrigin = 'Anonymous';\n        img.src = url;\n    };\n    return Image;\n}(Shape_1.Shape));\nexports.Image = Image;\nImage.prototype.className = 'Image';\nGlobal_1._registerNode(Image);\nFactory_1.Factory.addGetterSetter(Image, 'image');\nFactory_1.Factory.addComponentsGetterSetter(Image, 'crop', ['x', 'y', 'width', 'height']);\nFactory_1.Factory.addGetterSetter(Image, 'cropX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropWidth', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropHeight', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Image);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Group_1 = require(\"../Group\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar ATTR_CHANGE_LIST = [\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'padding',\n    'lineHeight',\n    'text',\n    'width'\n], CHANGE_KONVA = 'Change.konva', NONE = 'none', UP = 'up', RIGHT = 'right', DOWN = 'down', LEFT = 'left', attrChangeListLen = ATTR_CHANGE_LIST.length;\nvar Label = (function (_super) {\n    __extends(Label, _super);\n    function Label(config) {\n        var _this = _super.call(this, config) || this;\n        _this.on('add.konva', function (evt) {\n            this._addListeners(evt.child);\n            this._sync();\n        });\n        return _this;\n    }\n    Label.prototype.getText = function () {\n        return this.find('Text')[0];\n    };\n    Label.prototype.getTag = function () {\n        return this.find('Tag')[0];\n    };\n    Label.prototype._addListeners = function (text) {\n        var that = this, n;\n        var func = function () {\n            that._sync();\n        };\n        for (n = 0; n < attrChangeListLen; n++) {\n            text.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, func);\n        }\n    };\n    Label.prototype.getWidth = function () {\n        return this.getText().width();\n    };\n    Label.prototype.getHeight = function () {\n        return this.getText().height();\n    };\n    Label.prototype._sync = function () {\n        var text = this.getText(), tag = this.getTag(), width, height, pointerDirection, pointerWidth, x, y, pointerHeight;\n        if (text && tag) {\n            width = text.width();\n            height = text.height();\n            pointerDirection = tag.pointerDirection();\n            pointerWidth = tag.pointerWidth();\n            pointerHeight = tag.pointerHeight();\n            x = 0;\n            y = 0;\n            switch (pointerDirection) {\n                case UP:\n                    x = width / 2;\n                    y = -1 * pointerHeight;\n                    break;\n                case RIGHT:\n                    x = width + pointerWidth;\n                    y = height / 2;\n                    break;\n                case DOWN:\n                    x = width / 2;\n                    y = height + pointerHeight;\n                    break;\n                case LEFT:\n                    x = -1 * pointerWidth;\n                    y = height / 2;\n                    break;\n            }\n            tag.setAttrs({\n                x: -1 * x,\n                y: -1 * y,\n                width: width,\n                height: height\n            });\n            text.setAttrs({\n                x: -1 * x,\n                y: -1 * y\n            });\n        }\n    };\n    return Label;\n}(Group_1.Group));\nexports.Label = Label;\nLabel.prototype.className = 'Label';\nGlobal_1._registerNode(Label);\nUtil_1.Collection.mapMethods(Label);\nvar Tag = (function (_super) {\n    __extends(Tag, _super);\n    function Tag() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Tag.prototype._sceneFunc = function (context) {\n        var width = this.width(), height = this.height(), pointerDirection = this.pointerDirection(), pointerWidth = this.pointerWidth(), pointerHeight = this.pointerHeight(), cornerRadius = Math.min(this.cornerRadius(), width / 2, height / 2);\n        context.beginPath();\n        if (!cornerRadius) {\n            context.moveTo(0, 0);\n        }\n        else {\n            context.moveTo(cornerRadius, 0);\n        }\n        if (pointerDirection === UP) {\n            context.lineTo((width - pointerWidth) / 2, 0);\n            context.lineTo(width / 2, -1 * pointerHeight);\n            context.lineTo((width + pointerWidth) / 2, 0);\n        }\n        if (!cornerRadius) {\n            context.lineTo(width, 0);\n        }\n        else {\n            context.lineTo(width - cornerRadius, 0);\n            context.arc(width - cornerRadius, cornerRadius, cornerRadius, (Math.PI * 3) / 2, 0, false);\n        }\n        if (pointerDirection === RIGHT) {\n            context.lineTo(width, (height - pointerHeight) / 2);\n            context.lineTo(width + pointerWidth, height / 2);\n            context.lineTo(width, (height + pointerHeight) / 2);\n        }\n        if (!cornerRadius) {\n            context.lineTo(width, height);\n        }\n        else {\n            context.lineTo(width, height - cornerRadius);\n            context.arc(width - cornerRadius, height - cornerRadius, cornerRadius, 0, Math.PI / 2, false);\n        }\n        if (pointerDirection === DOWN) {\n            context.lineTo((width + pointerWidth) / 2, height);\n            context.lineTo(width / 2, height + pointerHeight);\n            context.lineTo((width - pointerWidth) / 2, height);\n        }\n        if (!cornerRadius) {\n            context.lineTo(0, height);\n        }\n        else {\n            context.lineTo(cornerRadius, height);\n            context.arc(cornerRadius, height - cornerRadius, cornerRadius, Math.PI / 2, Math.PI, false);\n        }\n        if (pointerDirection === LEFT) {\n            context.lineTo(0, (height + pointerHeight) / 2);\n            context.lineTo(-1 * pointerWidth, height / 2);\n            context.lineTo(0, (height - pointerHeight) / 2);\n        }\n        if (cornerRadius) {\n            context.lineTo(0, cornerRadius);\n            context.arc(cornerRadius, cornerRadius, cornerRadius, Math.PI, (Math.PI * 3) / 2, false);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Tag.prototype.getSelfRect = function () {\n        var x = 0, y = 0, pointerWidth = this.pointerWidth(), pointerHeight = this.pointerHeight(), direction = this.pointerDirection(), width = this.width(), height = this.height();\n        if (direction === UP) {\n            y -= pointerHeight;\n            height += pointerHeight;\n        }\n        else if (direction === DOWN) {\n            height += pointerHeight;\n        }\n        else if (direction === LEFT) {\n            x -= pointerWidth * 1.5;\n            width += pointerWidth;\n        }\n        else if (direction === RIGHT) {\n            width += pointerWidth * 1.5;\n        }\n        return {\n            x: x,\n            y: y,\n            width: width,\n            height: height\n        };\n    };\n    return Tag;\n}(Shape_1.Shape));\nexports.Tag = Tag;\nTag.prototype.className = 'Tag';\nGlobal_1._registerNode(Tag);\nFactory_1.Factory.addGetterSetter(Tag, 'pointerDirection', NONE);\nFactory_1.Factory.addGetterSetter(Tag, 'pointerWidth', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Tag, 'pointerHeight', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Tag, 'cornerRadius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Tag);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Global_1 = require(\"../Global\");\nvar Path = (function (_super) {\n    __extends(Path, _super);\n    function Path(config) {\n        var _this = _super.call(this, config) || this;\n        _this.dataArray = [];\n        _this.pathLength = 0;\n        _this.dataArray = Path.parsePathData(_this.data());\n        _this.pathLength = 0;\n        for (var i = 0; i < _this.dataArray.length; ++i) {\n            _this.pathLength += _this.dataArray[i].pathLength;\n        }\n        _this.on('dataChange.konva', function () {\n            this.dataArray = Path.parsePathData(this.data());\n            this.pathLength = 0;\n            for (var i = 0; i < this.dataArray.length; ++i) {\n                this.pathLength += this.dataArray[i].pathLength;\n            }\n        });\n        return _this;\n    }\n    Path.prototype._sceneFunc = function (context) {\n        var ca = this.dataArray;\n        context.beginPath();\n        var isClosed = false;\n        for (var n = 0; n < ca.length; n++) {\n            var c = ca[n].command;\n            var p = ca[n].points;\n            switch (c) {\n                case 'L':\n                    context.lineTo(p[0], p[1]);\n                    break;\n                case 'M':\n                    context.moveTo(p[0], p[1]);\n                    break;\n                case 'C':\n                    context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n                    break;\n                case 'Q':\n                    context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n                    break;\n                case 'A':\n                    var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6], fs = p[7];\n                    var r = rx > ry ? rx : ry;\n                    var scaleX = rx > ry ? 1 : rx / ry;\n                    var scaleY = rx > ry ? ry / rx : 1;\n                    context.translate(cx, cy);\n                    context.rotate(psi);\n                    context.scale(scaleX, scaleY);\n                    context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n                    context.scale(1 / scaleX, 1 / scaleY);\n                    context.rotate(-psi);\n                    context.translate(-cx, -cy);\n                    break;\n                case 'z':\n                    isClosed = true;\n                    context.closePath();\n                    break;\n            }\n        }\n        if (!isClosed && !this.hasFill()) {\n            context.strokeShape(this);\n        }\n        else {\n            context.fillStrokeShape(this);\n        }\n    };\n    Path.prototype.getSelfRect = function () {\n        var points = [];\n        this.dataArray.forEach(function (data) {\n            if (data.command === 'A') {\n                var start = data.points[4];\n                var dTheta = data.points[5];\n                var end = data.points[4] + dTheta;\n                var inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                if (dTheta < 0) {\n                    for (var t = start - inc; t > end; t -= inc) {\n                        var point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n                        points.push(point.x, point.y);\n                    }\n                }\n                else {\n                    for (var t = start + inc; t < end; t += inc) {\n                        var point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n                        points.push(point.x, point.y);\n                    }\n                }\n            }\n            else if (data.command === 'C') {\n                for (var t = 0.0; t <= 1; t += 0.01) {\n                    var point = Path.getPointOnCubicBezier(t, data.start.x, data.start.y, data.points[0], data.points[1], data.points[2], data.points[3], data.points[4], data.points[5]);\n                    points.push(point.x, point.y);\n                }\n            }\n            else {\n                points = points.concat(data.points);\n            }\n        });\n        var minX = points[0];\n        var maxX = points[0];\n        var minY = points[1];\n        var maxY = points[1];\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            if (!isNaN(x)) {\n                minX = Math.min(minX, x);\n                maxX = Math.max(maxX, x);\n            }\n            if (!isNaN(y)) {\n                minY = Math.min(minY, y);\n                maxY = Math.max(maxY, y);\n            }\n        }\n        return {\n            x: Math.round(minX),\n            y: Math.round(minY),\n            width: Math.round(maxX - minX),\n            height: Math.round(maxY - minY)\n        };\n    };\n    Path.prototype.getLength = function () {\n        return this.pathLength;\n    };\n    Path.prototype.getPointAtLength = function (length) {\n        var point, i = 0, ii = this.dataArray.length;\n        if (!ii) {\n            return null;\n        }\n        while (i < ii && length > this.dataArray[i].pathLength) {\n            length -= this.dataArray[i].pathLength;\n            ++i;\n        }\n        if (i === ii) {\n            point = this.dataArray[i - 1].points.slice(-2);\n            return {\n                x: point[0],\n                y: point[1]\n            };\n        }\n        if (length < 0.01) {\n            point = this.dataArray[i].points.slice(0, 2);\n            return {\n                x: point[0],\n                y: point[1]\n            };\n        }\n        var cp = this.dataArray[i];\n        var p = cp.points;\n        switch (cp.command) {\n            case 'L':\n                return Path.getPointOnLine(length, cp.start.x, cp.start.y, p[0], p[1]);\n            case 'C':\n                return Path.getPointOnCubicBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3], p[4], p[5]);\n            case 'Q':\n                return Path.getPointOnQuadraticBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3]);\n            case 'A':\n                var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6];\n                theta += (dTheta * length) / cp.pathLength;\n                return Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi);\n        }\n        return null;\n    };\n    Path.getLineLength = function (x1, y1, x2, y2) {\n        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    };\n    Path.getPointOnLine = function (dist, P1x, P1y, P2x, P2y, fromX, fromY) {\n        if (fromX === undefined) {\n            fromX = P1x;\n        }\n        if (fromY === undefined) {\n            fromY = P1y;\n        }\n        var m = (P2y - P1y) / (P2x - P1x + 0.00000001);\n        var run = Math.sqrt((dist * dist) / (1 + m * m));\n        if (P2x < P1x) {\n            run *= -1;\n        }\n        var rise = m * run;\n        var pt;\n        if (P2x === P1x) {\n            pt = {\n                x: fromX,\n                y: fromY + rise\n            };\n        }\n        else if ((fromY - P1y) / (fromX - P1x + 0.00000001) === m) {\n            pt = {\n                x: fromX + run,\n                y: fromY + rise\n            };\n        }\n        else {\n            var ix, iy;\n            var len = this.getLineLength(P1x, P1y, P2x, P2y);\n            if (len < 0.00000001) {\n                return undefined;\n            }\n            var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n            u = u / (len * len);\n            ix = P1x + u * (P2x - P1x);\n            iy = P1y + u * (P2y - P1y);\n            var pRise = this.getLineLength(fromX, fromY, ix, iy);\n            var pRun = Math.sqrt(dist * dist - pRise * pRise);\n            run = Math.sqrt((pRun * pRun) / (1 + m * m));\n            if (P2x < P1x) {\n                run *= -1;\n            }\n            rise = m * run;\n            pt = {\n                x: ix + run,\n                y: iy + rise\n            };\n        }\n        return pt;\n    };\n    Path.getPointOnCubicBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n        function CB1(t) {\n            return t * t * t;\n        }\n        function CB2(t) {\n            return 3 * t * t * (1 - t);\n        }\n        function CB3(t) {\n            return 3 * t * (1 - t) * (1 - t);\n        }\n        function CB4(t) {\n            return (1 - t) * (1 - t) * (1 - t);\n        }\n        var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n        var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n        return {\n            x: x,\n            y: y\n        };\n    };\n    Path.getPointOnQuadraticBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n        function QB1(t) {\n            return t * t;\n        }\n        function QB2(t) {\n            return 2 * t * (1 - t);\n        }\n        function QB3(t) {\n            return (1 - t) * (1 - t);\n        }\n        var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n        var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n        return {\n            x: x,\n            y: y\n        };\n    };\n    Path.getPointOnEllipticalArc = function (cx, cy, rx, ry, theta, psi) {\n        var cosPsi = Math.cos(psi), sinPsi = Math.sin(psi);\n        var pt = {\n            x: rx * Math.cos(theta),\n            y: ry * Math.sin(theta)\n        };\n        return {\n            x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n            y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n        };\n    };\n    Path.parsePathData = function (data) {\n        if (!data) {\n            return [];\n        }\n        var cs = data;\n        var cc = [\n            'm',\n            'M',\n            'l',\n            'L',\n            'v',\n            'V',\n            'h',\n            'H',\n            'z',\n            'Z',\n            'c',\n            'C',\n            'q',\n            'Q',\n            't',\n            'T',\n            's',\n            'S',\n            'a',\n            'A'\n        ];\n        cs = cs.replace(new RegExp(' ', 'g'), ',');\n        for (var n = 0; n < cc.length; n++) {\n            cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n        }\n        var arr = cs.split('|');\n        var ca = [];\n        var coords = [];\n        var cpx = 0;\n        var cpy = 0;\n        var re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/gi;\n        var match;\n        for (n = 1; n < arr.length; n++) {\n            var str = arr[n];\n            var c = str.charAt(0);\n            str = str.slice(1);\n            coords.length = 0;\n            while ((match = re.exec(str))) {\n                coords.push(match[0]);\n            }\n            var p = [];\n            for (var j = 0, jlen = coords.length; j < jlen; j++) {\n                var parsed = parseFloat(coords[j]);\n                if (!isNaN(parsed)) {\n                    p.push(parsed);\n                }\n                else {\n                    p.push(0);\n                }\n            }\n            while (p.length > 0) {\n                if (isNaN(p[0])) {\n                    break;\n                }\n                var cmd = null;\n                var points = [];\n                var startX = cpx, startY = cpy;\n                var prevCmd, ctlPtx, ctlPty;\n                var rx, ry, psi, fa, fs, x1, y1;\n                switch (c) {\n                    case 'l':\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'L':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'm':\n                        var dx = p.shift();\n                        var dy = p.shift();\n                        cpx += dx;\n                        cpy += dy;\n                        cmd = 'M';\n                        if (ca.length > 2 && ca[ca.length - 1].command === 'z') {\n                            for (var idx = ca.length - 2; idx >= 0; idx--) {\n                                if (ca[idx].command === 'M') {\n                                    cpx = ca[idx].points[0] + dx;\n                                    cpy = ca[idx].points[1] + dy;\n                                    break;\n                                }\n                            }\n                        }\n                        points.push(cpx, cpy);\n                        c = 'l';\n                        break;\n                    case 'M':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'M';\n                        points.push(cpx, cpy);\n                        c = 'L';\n                        break;\n                    case 'h':\n                        cpx += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'H':\n                        cpx = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'v':\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'V':\n                        cpy = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'C':\n                        points.push(p.shift(), p.shift(), p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'c':\n                        points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'S':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 's':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'Q':\n                        points.push(p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'q':\n                        points.push(cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'T':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 't':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 'A':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                    case 'a':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                }\n                ca.push({\n                    command: cmd || c,\n                    points: points,\n                    start: {\n                        x: startX,\n                        y: startY\n                    },\n                    pathLength: this.calcLength(startX, startY, cmd || c, points)\n                });\n            }\n            if (c === 'z' || c === 'Z') {\n                ca.push({\n                    command: 'z',\n                    points: [],\n                    start: undefined,\n                    pathLength: 0\n                });\n            }\n        }\n        return ca;\n    };\n    Path.calcLength = function (x, y, cmd, points) {\n        var len, p1, p2, t;\n        var path = Path;\n        switch (cmd) {\n            case 'L':\n                return path.getLineLength(x, y, points[0], points[1]);\n            case 'C':\n                len = 0.0;\n                p1 = path.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                for (t = 0.01; t <= 1; t += 0.01) {\n                    p2 = path.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n                return len;\n            case 'Q':\n                len = 0.0;\n                p1 = path.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n                for (t = 0.01; t <= 1; t += 0.01) {\n                    p2 = path.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n                return len;\n            case 'A':\n                len = 0.0;\n                var start = points[4];\n                var dTheta = points[5];\n                var end = points[4] + dTheta;\n                var inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n                if (dTheta < 0) {\n                    for (t = start - inc; t > end; t -= inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                else {\n                    for (t = start + inc; t < end; t += inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n                len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                return len;\n        }\n        return 0;\n    };\n    Path.convertEndpointToCenterParameterization = function (x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n        var psi = psiDeg * (Math.PI / 180.0);\n        var xp = (Math.cos(psi) * (x1 - x2)) / 2.0 + (Math.sin(psi) * (y1 - y2)) / 2.0;\n        var yp = (-1 * Math.sin(psi) * (x1 - x2)) / 2.0 +\n            (Math.cos(psi) * (y1 - y2)) / 2.0;\n        var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n        if (lambda > 1) {\n            rx *= Math.sqrt(lambda);\n            ry *= Math.sqrt(lambda);\n        }\n        var f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) /\n            (rx * rx * (yp * yp) + ry * ry * (xp * xp)));\n        if (fa === fs) {\n            f *= -1;\n        }\n        if (isNaN(f)) {\n            f = 0;\n        }\n        var cxp = (f * rx * yp) / ry;\n        var cyp = (f * -ry * xp) / rx;\n        var cx = (x1 + x2) / 2.0 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\n        var cy = (y1 + y2) / 2.0 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\n        var vMag = function (v) {\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n        };\n        var vRatio = function (u, v) {\n            return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n        };\n        var vAngle = function (u, v) {\n            return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n        };\n        var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n        var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n        var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n        var dTheta = vAngle(u, v);\n        if (vRatio(u, v) <= -1) {\n            dTheta = Math.PI;\n        }\n        if (vRatio(u, v) >= 1) {\n            dTheta = 0;\n        }\n        if (fs === 0 && dTheta > 0) {\n            dTheta = dTheta - 2 * Math.PI;\n        }\n        if (fs === 1 && dTheta < 0) {\n            dTheta = dTheta + 2 * Math.PI;\n        }\n        return [cx, cy, rx, ry, theta, dTheta, psi, fs];\n    };\n    return Path;\n}(Shape_1.Shape));\nexports.Path = Path;\nPath.prototype.className = 'Path';\nPath.prototype._attrsAffectingSize = ['data'];\nGlobal_1._registerNode(Path);\nFactory_1.Factory.addGetterSetter(Path, 'data');\nUtil_1.Collection.mapMethods(Path);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Global_1 = require(\"../Global\");\nvar Rect = (function (_super) {\n    __extends(Rect, _super);\n    function Rect() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Rect.prototype._sceneFunc = function (context) {\n        var cornerRadius = this.cornerRadius(), width = this.width(), height = this.height();\n        context.beginPath();\n        if (!cornerRadius) {\n            context.rect(0, 0, width, height);\n        }\n        else {\n            var topLeft = 0;\n            var topRight = 0;\n            var bottomLeft = 0;\n            var bottomRight = 0;\n            if (typeof cornerRadius === 'number') {\n                topLeft = topRight = bottomLeft = bottomRight = Math.min(cornerRadius, width / 2, height / 2);\n            }\n            else {\n                topLeft = Math.min(cornerRadius[0], width / 2, height / 2);\n                topRight = Math.min(cornerRadius[1], width / 2, height / 2);\n                bottomRight = Math.min(cornerRadius[2], width / 2, height / 2);\n                bottomLeft = Math.min(cornerRadius[3], width / 2, height / 2);\n            }\n            context.moveTo(topLeft, 0);\n            context.lineTo(width - topRight, 0);\n            context.arc(width - topRight, topRight, topRight, (Math.PI * 3) / 2, 0, false);\n            context.lineTo(width, height - bottomRight);\n            context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n            context.lineTo(bottomLeft, height);\n            context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n            context.lineTo(0, topLeft);\n            context.arc(topLeft, topLeft, topLeft, Math.PI, (Math.PI * 3) / 2, false);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    return Rect;\n}(Shape_1.Shape));\nexports.Rect = Rect;\nRect.prototype.className = 'Rect';\nGlobal_1._registerNode(Rect);\nFactory_1.Factory.addGetterSetter(Rect, 'cornerRadius', 0);\nUtil_1.Collection.mapMethods(Rect);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar RegularPolygon = (function (_super) {\n    __extends(RegularPolygon, _super);\n    function RegularPolygon() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RegularPolygon.prototype._sceneFunc = function (context) {\n        var sides = this.sides(), radius = this.radius(), n, x, y;\n        context.beginPath();\n        context.moveTo(0, 0 - radius);\n        for (n = 1; n < sides; n++) {\n            x = radius * Math.sin((n * 2 * Math.PI) / sides);\n            y = -1 * radius * Math.cos((n * 2 * Math.PI) / sides);\n            context.lineTo(x, y);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    RegularPolygon.prototype.getWidth = function () {\n        return this.radius() * 2;\n    };\n    RegularPolygon.prototype.getHeight = function () {\n        return this.radius() * 2;\n    };\n    RegularPolygon.prototype.setWidth = function (width) {\n        this.radius(width / 2);\n    };\n    RegularPolygon.prototype.setHeight = function (height) {\n        this.radius(height / 2);\n    };\n    return RegularPolygon;\n}(Shape_1.Shape));\nexports.RegularPolygon = RegularPolygon;\nRegularPolygon.prototype.className = 'RegularPolygon';\nRegularPolygon.prototype._centroid = true;\nRegularPolygon.prototype._attrsAffectingSize = ['radius'];\nGlobal_1._registerNode(RegularPolygon);\nFactory_1.Factory.addGetterSetter(RegularPolygon, 'radius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(RegularPolygon, 'sides', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(RegularPolygon);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar PIx2 = Math.PI * 2;\nvar Ring = (function (_super) {\n    __extends(Ring, _super);\n    function Ring() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Ring.prototype._sceneFunc = function (context) {\n        context.beginPath();\n        context.arc(0, 0, this.innerRadius(), 0, PIx2, false);\n        context.moveTo(this.outerRadius(), 0);\n        context.arc(0, 0, this.outerRadius(), PIx2, 0, true);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Ring.prototype.getWidth = function () {\n        return this.outerRadius() * 2;\n    };\n    Ring.prototype.getHeight = function () {\n        return this.outerRadius() * 2;\n    };\n    Ring.prototype.setWidth = function (width) {\n        this.outerRadius(width / 2);\n    };\n    Ring.prototype.setHeight = function (height) {\n        this.outerRadius(height / 2);\n    };\n    return Ring;\n}(Shape_1.Shape));\nexports.Ring = Ring;\nRing.prototype.className = 'Ring';\nRing.prototype._centroid = true;\nRing.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\nGlobal_1._registerNode(Ring);\nFactory_1.Factory.addGetterSetter(Ring, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Ring, 'outerRadius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Ring);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Animation_1 = require(\"../Animation\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Sprite = (function (_super) {\n    __extends(Sprite, _super);\n    function Sprite(config) {\n        var _this = _super.call(this, config) || this;\n        _this._updated = true;\n        _this.anim = new Animation_1.Animation(function () {\n            var updated = _this._updated;\n            _this._updated = false;\n            return updated;\n        });\n        _this.on('animationChange.konva', function () {\n            this.frameIndex(0);\n        });\n        _this.on('frameIndexChange.konva', function () {\n            this._updated = true;\n        });\n        _this.on('frameRateChange.konva', function () {\n            if (!this.anim.isRunning()) {\n                return;\n            }\n            clearInterval(this.interval);\n            this._setInterval();\n        });\n        return _this;\n    }\n    Sprite.prototype._sceneFunc = function (context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), x = set[ix4 + 0], y = set[ix4 + 1], width = set[ix4 + 2], height = set[ix4 + 3], image = this.image();\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            if (offsets) {\n                var offset = offsets[anim], ix2 = index * 2;\n                context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);\n            }\n            else {\n                context.drawImage(image, x, y, width, height, 0, 0, width, height);\n            }\n        }\n    };\n    Sprite.prototype._hitFunc = function (context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), width = set[ix4 + 2], height = set[ix4 + 3];\n        context.beginPath();\n        if (offsets) {\n            var offset = offsets[anim];\n            var ix2 = index * 2;\n            context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);\n        }\n        else {\n            context.rect(0, 0, width, height);\n        }\n        context.closePath();\n        context.fillShape(this);\n    };\n    Sprite.prototype._useBufferCanvas = function () {\n        return ((this.hasShadow() || this.getAbsoluteOpacity() !== 1) && this.hasStroke());\n    };\n    Sprite.prototype._setInterval = function () {\n        var that = this;\n        this.interval = setInterval(function () {\n            that._updateIndex();\n        }, 1000 / this.frameRate());\n    };\n    Sprite.prototype.start = function () {\n        if (this.isRunning()) {\n            return;\n        }\n        var layer = this.getLayer();\n        this.anim.setLayers(layer);\n        this._setInterval();\n        this.anim.start();\n    };\n    Sprite.prototype.stop = function () {\n        this.anim.stop();\n        clearInterval(this.interval);\n    };\n    Sprite.prototype.isRunning = function () {\n        return this.anim.isRunning();\n    };\n    Sprite.prototype._updateIndex = function () {\n        var index = this.frameIndex(), animation = this.animation(), animations = this.animations(), anim = animations[animation], len = anim.length / 4;\n        if (index < len - 1) {\n            this.frameIndex(index + 1);\n        }\n        else {\n            this.frameIndex(0);\n        }\n    };\n    return Sprite;\n}(Shape_1.Shape));\nexports.Sprite = Sprite;\nSprite.prototype.className = 'Sprite';\nGlobal_1._registerNode(Sprite);\nFactory_1.Factory.addGetterSetter(Sprite, 'animation');\nFactory_1.Factory.addGetterSetter(Sprite, 'animations');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameOffsets');\nFactory_1.Factory.addGetterSetter(Sprite, 'image');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameIndex', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Sprite, 'frameRate', 17, Validators_1.getNumberValidator());\nFactory_1.Factory.backCompat(Sprite, {\n    index: 'frameIndex',\n    getIndex: 'getFrameIndex',\n    setIndex: 'setFrameIndex'\n});\nUtil_1.Collection.mapMethods(Sprite);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Star = (function (_super) {\n    __extends(Star, _super);\n    function Star() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Star.prototype._sceneFunc = function (context) {\n        var innerRadius = this.innerRadius(), outerRadius = this.outerRadius(), numPoints = this.numPoints();\n        context.beginPath();\n        context.moveTo(0, 0 - outerRadius);\n        for (var n = 1; n < numPoints * 2; n++) {\n            var radius = n % 2 === 0 ? outerRadius : innerRadius;\n            var x = radius * Math.sin((n * Math.PI) / numPoints);\n            var y = -1 * radius * Math.cos((n * Math.PI) / numPoints);\n            context.lineTo(x, y);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Star.prototype.getWidth = function () {\n        return this.outerRadius() * 2;\n    };\n    Star.prototype.getHeight = function () {\n        return this.outerRadius() * 2;\n    };\n    Star.prototype.setWidth = function (width) {\n        this.outerRadius(width / 2);\n    };\n    Star.prototype.setHeight = function (height) {\n        this.outerRadius(height / 2);\n    };\n    return Star;\n}(Shape_1.Shape));\nexports.Star = Star;\nStar.prototype.className = 'Star';\nStar.prototype._centroid = true;\nStar.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\nGlobal_1._registerNode(Star);\nFactory_1.Factory.addGetterSetter(Star, 'numPoints', 5, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Star, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Star, 'outerRadius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Star);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Global_1 = require(\"../Global\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_2 = require(\"../Global\");\nvar AUTO = 'auto', CENTER = 'center', JUSTIFY = 'justify', CHANGE_KONVA = 'Change.konva', CONTEXT_2D = '2d', DASH = '-', LEFT = 'left', TEXT = 'text', TEXT_UPPER = 'Text', TOP = 'top', BOTTOM = 'bottom', MIDDLE = 'middle', NORMAL = 'normal', PX_SPACE = 'px ', SPACE = ' ', RIGHT = 'right', WORD = 'word', CHAR = 'char', NONE = 'none', ELLIPSIS = '…', ATTR_CHANGE_LIST = [\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'fontVariant',\n    'padding',\n    'align',\n    'verticalAlign',\n    'lineHeight',\n    'text',\n    'width',\n    'height',\n    'wrap',\n    'ellipsis',\n    'letterSpacing'\n], attrChangeListLen = ATTR_CHANGE_LIST.length;\nvar dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = Util_1.Util.createCanvasElement().getContext(CONTEXT_2D);\n    return dummyContext;\n}\nfunction _fillFunc(context) {\n    context.fillText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction _strokeFunc(context) {\n    context.strokeText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction checkDefaultFill(config) {\n    config = config || {};\n    if (!config.fillLinearGradientColorStops &&\n        !config.fillRadialGradientColorStops &&\n        !config.fillPatternImage) {\n        config.fill = config.fill || 'black';\n    }\n    return config;\n}\nvar trimRight = String.prototype.trimRight ||\n    function polyfill() {\n        return this.replace(/[\\s\\xa0]+$/, '');\n    };\nvar Text = (function (_super) {\n    __extends(Text, _super);\n    function Text(config) {\n        var _this = _super.call(this, checkDefaultFill(config)) || this;\n        _this._partialTextX = 0;\n        _this._partialTextY = 0;\n        for (var n = 0; n < attrChangeListLen; n++) {\n            _this.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, _this._setTextData);\n        }\n        _this._setTextData();\n        return _this;\n    }\n    Text.prototype._sceneFunc = function (context) {\n        var padding = this.padding(), fontSize = this.fontSize(), lineHeightPx = this.lineHeight() * fontSize, textArr = this.textArr, textArrLen = textArr.length, verticalAlign = this.verticalAlign(), alignY = 0, align = this.align(), totalWidth = this.getWidth(), letterSpacing = this.letterSpacing(), fill = this.fill(), textDecoration = this.textDecoration(), shouldUnderline = textDecoration.indexOf('underline') !== -1, shouldLineThrough = textDecoration.indexOf('line-through') !== -1, n;\n        var translateY = 0;\n        var translateY = lineHeightPx / 2;\n        var lineTranslateX = 0;\n        var lineTranslateY = 0;\n        context.setAttr('font', this._getContextFont());\n        context.setAttr('textBaseline', MIDDLE);\n        context.setAttr('textAlign', LEFT);\n        if (verticalAlign === MIDDLE) {\n            alignY = (this.getHeight() - textArrLen * lineHeightPx - padding * 2) / 2;\n        }\n        else if (verticalAlign === BOTTOM) {\n            alignY = this.getHeight() - textArrLen * lineHeightPx - padding * 2;\n        }\n        context.translate(padding, alignY + padding);\n        for (n = 0; n < textArrLen; n++) {\n            var lineTranslateX = 0;\n            var lineTranslateY = 0;\n            var obj = textArr[n], text = obj.text, width = obj.width, lastLine = n !== textArrLen - 1, spacesNumber, oneWord, lineWidth;\n            context.save();\n            if (align === RIGHT) {\n                lineTranslateX += totalWidth - width - padding * 2;\n            }\n            else if (align === CENTER) {\n                lineTranslateX += (totalWidth - width - padding * 2) / 2;\n            }\n            if (shouldUnderline) {\n                context.save();\n                context.beginPath();\n                context.moveTo(lineTranslateX, translateY + lineTranslateY + Math.round(fontSize / 2));\n                spacesNumber = text.split(' ').length - 1;\n                oneWord = spacesNumber === 0;\n                lineWidth =\n                    align === JUSTIFY && lastLine && !oneWord\n                        ? totalWidth - padding * 2\n                        : width;\n                context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY + Math.round(fontSize / 2));\n                context.lineWidth = fontSize / 15;\n                context.strokeStyle = fill;\n                context.stroke();\n                context.restore();\n            }\n            if (shouldLineThrough) {\n                context.save();\n                context.beginPath();\n                context.moveTo(lineTranslateX, translateY + lineTranslateY);\n                spacesNumber = text.split(' ').length - 1;\n                oneWord = spacesNumber === 0;\n                lineWidth =\n                    align === JUSTIFY && lastLine && !oneWord\n                        ? totalWidth - padding * 2\n                        : width;\n                context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY);\n                context.lineWidth = fontSize / 15;\n                context.strokeStyle = fill;\n                context.stroke();\n                context.restore();\n            }\n            if (letterSpacing !== 0 || align === JUSTIFY) {\n                spacesNumber = text.split(' ').length - 1;\n                for (var li = 0; li < text.length; li++) {\n                    var letter = text[li];\n                    if (letter === ' ' && n !== textArrLen - 1 && align === JUSTIFY) {\n                        lineTranslateX += Math.floor((totalWidth - padding * 2 - width) / spacesNumber);\n                    }\n                    this._partialTextX = lineTranslateX;\n                    this._partialTextY = translateY + lineTranslateY;\n                    this._partialText = letter;\n                    context.fillStrokeShape(this);\n                    lineTranslateX +=\n                        Math.round(this.measureSize(letter).width) + letterSpacing;\n                }\n            }\n            else {\n                this._partialTextX = lineTranslateX;\n                this._partialTextY = translateY + lineTranslateY;\n                this._partialText = text;\n                context.fillStrokeShape(this);\n            }\n            context.restore();\n            if (textArrLen > 1) {\n                translateY += lineHeightPx;\n            }\n        }\n    };\n    Text.prototype._hitFunc = function (context) {\n        var width = this.getWidth(), height = this.getHeight();\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Text.prototype.setText = function (text) {\n        var str = Util_1.Util._isString(text)\n            ? text\n            : text === null || text === undefined\n                ? ''\n                : text + '';\n        this._setAttr(TEXT, str);\n        return this;\n    };\n    Text.prototype.getWidth = function () {\n        var isAuto = this.attrs.width === AUTO || this.attrs.width === undefined;\n        return isAuto ? this.getTextWidth() + this.padding() * 2 : this.attrs.width;\n    };\n    Text.prototype.getHeight = function () {\n        var isAuto = this.attrs.height === AUTO || this.attrs.height === undefined;\n        return isAuto\n            ? this.fontSize() * this.textArr.length * this.lineHeight() +\n                this.padding() * 2\n            : this.attrs.height;\n    };\n    Text.prototype.getTextWidth = function () {\n        return this.textWidth;\n    };\n    Text.prototype.getTextHeight = function () {\n        Util_1.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n        return this.textHeight;\n    };\n    Text.prototype.measureSize = function (text) {\n        var _context = getDummyContext(), fontSize = this.fontSize(), metrics;\n        _context.save();\n        _context.font = this._getContextFont();\n        metrics = _context.measureText(text);\n        _context.restore();\n        return {\n            width: metrics.width,\n            height: fontSize\n        };\n    };\n    Text.prototype._getContextFont = function () {\n        if (Global_1.Konva.UA.isIE) {\n            return (this.fontStyle() +\n                SPACE +\n                this.fontSize() +\n                PX_SPACE +\n                this.fontFamily());\n        }\n        return (this.fontStyle() +\n            SPACE +\n            this.fontVariant() +\n            SPACE +\n            this.fontSize() +\n            PX_SPACE +\n            this.fontFamily());\n    };\n    Text.prototype._addTextLine = function (line) {\n        if (this.align() === JUSTIFY) {\n            line = line.trim();\n        }\n        var width = this._getTextWidth(line);\n        return this.textArr.push({ text: line, width: width });\n    };\n    Text.prototype._getTextWidth = function (text) {\n        var letterSpacing = this.letterSpacing();\n        var length = text.length;\n        return (getDummyContext().measureText(text).width +\n            (length ? letterSpacing * (length - 1) : 0));\n    };\n    Text.prototype._setTextData = function () {\n        var lines = this.text().split('\\n'), fontSize = +this.fontSize(), textWidth = 0, lineHeightPx = this.lineHeight() * fontSize, width = this.attrs.width, height = this.attrs.height, fixedWidth = width !== AUTO && width !== undefined, fixedHeight = height !== AUTO && height !== undefined, padding = this.padding(), maxWidth = width - padding * 2, maxHeightPx = height - padding * 2, currentHeightPx = 0, wrap = this.wrap(), shouldWrap = wrap !== NONE, wrapAtWord = wrap !== CHAR && shouldWrap, shouldAddEllipsis = this.ellipsis() && !shouldWrap;\n        this.textArr = [];\n        getDummyContext().font = this._getContextFont();\n        var additionalWidth = shouldAddEllipsis ? this._getTextWidth(ELLIPSIS) : 0;\n        for (var i = 0, max = lines.length; i < max; ++i) {\n            var line = lines[i];\n            var lineWidth = this._getTextWidth(line);\n            if (fixedWidth && lineWidth > maxWidth) {\n                while (line.length > 0) {\n                    var low = 0, high = line.length, match = '', matchWidth = 0;\n                    while (low < high) {\n                        var mid = (low + high) >>> 1, substr = line.slice(0, mid + 1), substrWidth = this._getTextWidth(substr) + additionalWidth;\n                        if (substrWidth <= maxWidth) {\n                            low = mid + 1;\n                            match = substr + (shouldAddEllipsis ? ELLIPSIS : '');\n                            matchWidth = substrWidth;\n                        }\n                        else {\n                            high = mid;\n                        }\n                    }\n                    if (match) {\n                        if (wrapAtWord) {\n                            var wrapIndex;\n                            var nextChar = line[match.length];\n                            var nextIsSpaceOrDash = nextChar === SPACE || nextChar === DASH;\n                            if (nextIsSpaceOrDash && matchWidth <= maxWidth) {\n                                wrapIndex = match.length;\n                            }\n                            else {\n                                wrapIndex =\n                                    Math.max(match.lastIndexOf(SPACE), match.lastIndexOf(DASH)) +\n                                        1;\n                            }\n                            if (wrapIndex > 0) {\n                                low = wrapIndex;\n                                match = match.slice(0, low);\n                                matchWidth = this._getTextWidth(match);\n                            }\n                        }\n                        match = match.trimRight();\n                        this._addTextLine(match);\n                        textWidth = Math.max(textWidth, matchWidth);\n                        currentHeightPx += lineHeightPx;\n                        if (!shouldWrap ||\n                            (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx)) {\n                            break;\n                        }\n                        line = line.slice(low);\n                        line = line.trimLeft();\n                        if (line.length > 0) {\n                            lineWidth = this._getTextWidth(line);\n                            if (lineWidth <= maxWidth) {\n                                this._addTextLine(line);\n                                currentHeightPx += lineHeightPx;\n                                textWidth = Math.max(textWidth, lineWidth);\n                                break;\n                            }\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            else {\n                this._addTextLine(line);\n                currentHeightPx += lineHeightPx;\n                textWidth = Math.max(textWidth, lineWidth);\n            }\n            if (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n                break;\n            }\n        }\n        this.textHeight = fontSize;\n        this.textWidth = textWidth;\n    };\n    Text.prototype.getStrokeScaleEnabled = function () {\n        return true;\n    };\n    return Text;\n}(Shape_1.Shape));\nexports.Text = Text;\nText.prototype._fillFunc = _fillFunc;\nText.prototype._strokeFunc = _strokeFunc;\nText.prototype.className = TEXT_UPPER;\nText.prototype._attrsAffectingSize = [\n    'text',\n    'fontSize',\n    'padding',\n    'wrap',\n    'lineHeight'\n];\nGlobal_2._registerNode(Text);\nFactory_1.Factory.overWriteSetter(Text, 'width', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.overWriteSetter(Text, 'height', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.addGetterSetter(Text, 'fontFamily', 'Arial');\nFactory_1.Factory.addGetterSetter(Text, 'fontSize', 12, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'fontStyle', NORMAL);\nFactory_1.Factory.addGetterSetter(Text, 'fontVariant', NORMAL);\nFactory_1.Factory.addGetterSetter(Text, 'padding', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'align', LEFT);\nFactory_1.Factory.addGetterSetter(Text, 'verticalAlign', TOP);\nFactory_1.Factory.addGetterSetter(Text, 'lineHeight', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'wrap', WORD);\nFactory_1.Factory.addGetterSetter(Text, 'ellipsis', false);\nFactory_1.Factory.addGetterSetter(Text, 'letterSpacing', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'text', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Text, 'textDecoration', '');\nUtil_1.Collection.mapMethods(Text);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Path_1 = require(\"./Path\");\nvar Text_1 = require(\"./Text\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar EMPTY_STRING = '', NORMAL = 'normal';\nfunction _fillFunc(context) {\n    context.fillText(this.partialText, 0, 0);\n}\nfunction _strokeFunc(context) {\n    context.strokeText(this.partialText, 0, 0);\n}\nvar TextPath = (function (_super) {\n    __extends(TextPath, _super);\n    function TextPath(config) {\n        var _this = _super.call(this, config) || this;\n        _this.dummyCanvas = Util_1.Util.createCanvasElement();\n        _this.dataArray = [];\n        _this.dataArray = Path_1.Path.parsePathData(_this.attrs.data);\n        _this.on('dataChange.konva', function () {\n            this.dataArray = Path_1.Path.parsePathData(this.attrs.data);\n            this._setTextData();\n        });\n        _this.on('textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva', _this._setTextData);\n        if (config && config['getKerning']) {\n            Util_1.Util.warn('getKerning TextPath API is deprecated. Please use \"kerningFunc\" instead.');\n            _this.kerningFunc(config['getKerning']);\n        }\n        _this._setTextData();\n        return _this;\n    }\n    TextPath.prototype._sceneFunc = function (context) {\n        context.setAttr('font', this._getContextFont());\n        context.setAttr('textBaseline', this.textBaseline());\n        context.setAttr('textAlign', 'left');\n        context.save();\n        var textDecoration = this.textDecoration();\n        var fill = this.fill();\n        var fontSize = this.fontSize();\n        var glyphInfo = this.glyphInfo;\n        if (textDecoration === 'underline') {\n            context.beginPath();\n        }\n        for (var i = 0; i < glyphInfo.length; i++) {\n            context.save();\n            var p0 = glyphInfo[i].p0;\n            context.translate(p0.x, p0.y);\n            context.rotate(glyphInfo[i].rotation);\n            this.partialText = glyphInfo[i].text;\n            context.fillStrokeShape(this);\n            if (textDecoration === 'underline') {\n                if (i === 0) {\n                    context.moveTo(0, fontSize / 2 + 1);\n                }\n                context.lineTo(fontSize, fontSize / 2 + 1);\n            }\n            context.restore();\n        }\n        if (textDecoration === 'underline') {\n            context.strokeStyle = fill;\n            context.lineWidth = fontSize / 20;\n            context.stroke();\n        }\n        context.restore();\n    };\n    TextPath.prototype._hitFunc = function (context) {\n        context.beginPath();\n        var glyphInfo = this.glyphInfo;\n        if (glyphInfo.length >= 1) {\n            var p0 = glyphInfo[0].p0;\n            context.moveTo(p0.x, p0.y);\n        }\n        for (var i = 0; i < glyphInfo.length; i++) {\n            var p1 = glyphInfo[i].p1;\n            context.lineTo(p1.x, p1.y);\n        }\n        context.setAttr('lineWidth', this.fontSize());\n        context.setAttr('strokeStyle', this.colorKey);\n        context.stroke();\n    };\n    TextPath.prototype.getTextWidth = function () {\n        return this.textWidth;\n    };\n    TextPath.prototype.getTextHeight = function () {\n        Util_1.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n        return this.textHeight;\n    };\n    TextPath.prototype.setText = function (text) {\n        return Text_1.Text.prototype.setText.call(this, text);\n    };\n    TextPath.prototype._getContextFont = function () {\n        return Text_1.Text.prototype._getContextFont.call(this);\n    };\n    TextPath.prototype._getTextSize = function (text) {\n        var dummyCanvas = this.dummyCanvas;\n        var _context = dummyCanvas.getContext('2d');\n        _context.save();\n        _context.font = this._getContextFont();\n        var metrics = _context.measureText(text);\n        _context.restore();\n        return {\n            width: metrics.width,\n            height: parseInt(this.attrs.fontSize, 10)\n        };\n    };\n    TextPath.prototype._setTextData = function () {\n        var that = this;\n        var size = this._getTextSize(this.attrs.text);\n        var letterSpacing = this.letterSpacing();\n        var align = this.align();\n        var kerningFunc = this.kerningFunc();\n        this.textWidth = size.width;\n        this.textHeight = size.height;\n        var textFullWidth = Math.max(this.textWidth + ((this.attrs.text || '').length - 1) * letterSpacing, 0);\n        this.glyphInfo = [];\n        var fullPathWidth = 0;\n        for (var l = 0; l < that.dataArray.length; l++) {\n            if (that.dataArray[l].pathLength > 0) {\n                fullPathWidth += that.dataArray[l].pathLength;\n            }\n        }\n        var offset = 0;\n        if (align === 'center') {\n            offset = Math.max(0, fullPathWidth / 2 - textFullWidth / 2);\n        }\n        if (align === 'right') {\n            offset = Math.max(0, fullPathWidth - textFullWidth);\n        }\n        var charArr = this.text().split('');\n        var spacesNumber = this.text().split(' ').length - 1;\n        var p0, p1, pathCmd;\n        var pIndex = -1;\n        var currentT = 0;\n        var getNextPathSegment = function () {\n            currentT = 0;\n            var pathData = that.dataArray;\n            for (var j = pIndex + 1; j < pathData.length; j++) {\n                if (pathData[j].pathLength > 0) {\n                    pIndex = j;\n                    return pathData[j];\n                }\n                else if (pathData[j].command === 'M') {\n                    p0 = {\n                        x: pathData[j].points[0],\n                        y: pathData[j].points[1]\n                    };\n                }\n            }\n            return {};\n        };\n        var findSegmentToFitCharacter = function (c) {\n            var glyphWidth = that._getTextSize(c).width + letterSpacing;\n            if (c === ' ' && align === 'justify') {\n                glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber;\n            }\n            var currLen = 0;\n            var attempts = 0;\n            p1 = undefined;\n            while (Math.abs(glyphWidth - currLen) / glyphWidth > 0.01 &&\n                attempts < 25) {\n                attempts++;\n                var cumulativePathLength = currLen;\n                while (pathCmd === undefined) {\n                    pathCmd = getNextPathSegment();\n                    if (pathCmd &&\n                        cumulativePathLength + pathCmd.pathLength < glyphWidth) {\n                        cumulativePathLength += pathCmd.pathLength;\n                        pathCmd = undefined;\n                    }\n                }\n                if (pathCmd === {} || p0 === undefined) {\n                    return undefined;\n                }\n                var needNewSegment = false;\n                switch (pathCmd.command) {\n                    case 'L':\n                        if (Path_1.Path.getLineLength(p0.x, p0.y, pathCmd.points[0], pathCmd.points[1]) > glyphWidth) {\n                            p1 = Path_1.Path.getPointOnLine(glyphWidth, p0.x, p0.y, pathCmd.points[0], pathCmd.points[1], p0.x, p0.y);\n                        }\n                        else {\n                            pathCmd = undefined;\n                        }\n                        break;\n                    case 'A':\n                        var start = pathCmd.points[4];\n                        var dTheta = pathCmd.points[5];\n                        var end = pathCmd.points[4] + dTheta;\n                        if (currentT === 0) {\n                            currentT = start + 0.00000001;\n                        }\n                        else if (glyphWidth > currLen) {\n                            currentT += ((Math.PI / 180.0) * dTheta) / Math.abs(dTheta);\n                        }\n                        else {\n                            currentT -= ((Math.PI / 360.0) * dTheta) / Math.abs(dTheta);\n                        }\n                        if ((dTheta < 0 && currentT < end) ||\n                            (dTheta >= 0 && currentT > end)) {\n                            currentT = end;\n                            needNewSegment = true;\n                        }\n                        p1 = Path_1.Path.getPointOnEllipticalArc(pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], currentT, pathCmd.points[6]);\n                        break;\n                    case 'C':\n                        if (currentT === 0) {\n                            if (glyphWidth > pathCmd.pathLength) {\n                                currentT = 0.00000001;\n                            }\n                            else {\n                                currentT = glyphWidth / pathCmd.pathLength;\n                            }\n                        }\n                        else if (glyphWidth > currLen) {\n                            currentT += (glyphWidth - currLen) / pathCmd.pathLength;\n                        }\n                        else {\n                            currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\n                        }\n                        if (currentT > 1.0) {\n                            currentT = 1.0;\n                            needNewSegment = true;\n                        }\n                        p1 = Path_1.Path.getPointOnCubicBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], pathCmd.points[4], pathCmd.points[5]);\n                        break;\n                    case 'Q':\n                        if (currentT === 0) {\n                            currentT = glyphWidth / pathCmd.pathLength;\n                        }\n                        else if (glyphWidth > currLen) {\n                            currentT += (glyphWidth - currLen) / pathCmd.pathLength;\n                        }\n                        else {\n                            currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\n                        }\n                        if (currentT > 1.0) {\n                            currentT = 1.0;\n                            needNewSegment = true;\n                        }\n                        p1 = Path_1.Path.getPointOnQuadraticBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3]);\n                        break;\n                }\n                if (p1 !== undefined) {\n                    currLen = Path_1.Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n                }\n                if (needNewSegment) {\n                    needNewSegment = false;\n                    pathCmd = undefined;\n                }\n            }\n        };\n        var testChar = 'C';\n        var glyphWidth = that._getTextSize(testChar).width + letterSpacing;\n        var lettersInOffset = offset / glyphWidth - 1;\n        for (var k = 0; k < lettersInOffset; k++) {\n            findSegmentToFitCharacter(testChar);\n            if (p0 === undefined || p1 === undefined) {\n                break;\n            }\n            p0 = p1;\n        }\n        for (var i = 0; i < charArr.length; i++) {\n            findSegmentToFitCharacter(charArr[i]);\n            if (p0 === undefined || p1 === undefined) {\n                break;\n            }\n            var width = Path_1.Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n            var kern = 0;\n            if (kerningFunc) {\n                try {\n                    kern = kerningFunc(charArr[i - 1], charArr[i]) * this.fontSize();\n                }\n                catch (e) {\n                    kern = 0;\n                }\n            }\n            p0.x += kern;\n            p1.x += kern;\n            this.textWidth += kern;\n            var midpoint = Path_1.Path.getPointOnLine(kern + width / 2.0, p0.x, p0.y, p1.x, p1.y);\n            var rotation = Math.atan2(p1.y - p0.y, p1.x - p0.x);\n            this.glyphInfo.push({\n                transposeX: midpoint.x,\n                transposeY: midpoint.y,\n                text: charArr[i],\n                rotation: rotation,\n                p0: p0,\n                p1: p1\n            });\n            p0 = p1;\n        }\n    };\n    TextPath.prototype.getSelfRect = function () {\n        if (!this.glyphInfo.length) {\n            return {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0\n            };\n        }\n        var points = [];\n        this.glyphInfo.forEach(function (info) {\n            points.push(info.p0.x);\n            points.push(info.p0.y);\n            points.push(info.p1.x);\n            points.push(info.p1.y);\n        });\n        var minX = points[0] || 0;\n        var maxX = points[0] || 0;\n        var minY = points[1] || 0;\n        var maxY = points[1] || 0;\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        var fontSize = this.fontSize();\n        return {\n            x: minX - fontSize / 2,\n            y: minY - fontSize / 2,\n            width: maxX - minX + fontSize,\n            height: maxY - minY + fontSize\n        };\n    };\n    return TextPath;\n}(Shape_1.Shape));\nexports.TextPath = TextPath;\nTextPath.prototype._fillFunc = _fillFunc;\nTextPath.prototype._strokeFunc = _strokeFunc;\nTextPath.prototype._fillFuncHit = _fillFunc;\nTextPath.prototype._strokeFuncHit = _strokeFunc;\nTextPath.prototype.className = 'TextPath';\nTextPath.prototype._attrsAffectingSize = ['text', 'fontSize', 'data'];\nGlobal_1._registerNode(TextPath);\nFactory_1.Factory.addGetterSetter(TextPath, 'data');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontFamily', 'Arial');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontSize', 12, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(TextPath, 'fontStyle', NORMAL);\nFactory_1.Factory.addGetterSetter(TextPath, 'align', 'left');\nFactory_1.Factory.addGetterSetter(TextPath, 'letterSpacing', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(TextPath, 'textBaseline', 'middle');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontVariant', NORMAL);\nFactory_1.Factory.addGetterSetter(TextPath, 'text', EMPTY_STRING);\nFactory_1.Factory.addGetterSetter(TextPath, 'textDecoration', null);\nFactory_1.Factory.addGetterSetter(TextPath, 'kerningFunc', null);\nUtil_1.Collection.mapMethods(TextPath);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Shape_1 = require(\"../Shape\");\nvar Rect_1 = require(\"./Rect\");\nvar Group_1 = require(\"../Group\");\nvar Global_1 = require(\"../Global\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_2 = require(\"../Global\");\nvar EVENTS_NAME = 'tr-konva';\nvar ATTR_CHANGE_LIST = [\n    'resizeEnabledChange',\n    'rotateAnchorOffsetChange',\n    'rotateEnabledChange',\n    'enabledAnchorsChange',\n    'anchorSizeChange',\n    'borderEnabledChange',\n    'borderStrokeChange',\n    'borderStrokeWidthChange',\n    'borderDashChange',\n    'anchorStrokeChange',\n    'anchorStrokeWidthChange',\n    'anchorFillChange',\n    'anchorCornerRadiusChange',\n    'ignoreStrokeChange',\n]\n    .map(function (e) { return e + (\".\" + EVENTS_NAME); })\n    .join(' ');\nvar NODES_RECT = 'nodesRect';\nvar TRANSFORM_CHANGE_STR = [\n    'widthChange',\n    'heightChange',\n    'scaleXChange',\n    'scaleYChange',\n    'skewXChange',\n    'skewYChange',\n    'rotationChange',\n    'offsetXChange',\n    'offsetYChange',\n    'transformsEnabledChange',\n    'strokeWidthChange',\n]\n    .map(function (e) { return e + (\".\" + EVENTS_NAME); })\n    .join(' ');\nvar ANGLES = {\n    'top-left': -45,\n    'top-center': 0,\n    'top-right': 45,\n    'middle-right': -90,\n    'middle-left': 90,\n    'bottom-left': -135,\n    'bottom-center': 180,\n    'bottom-right': 135,\n};\nvar TOUCH_DEVICE = 'ontouchstart' in Global_1.Konva._global;\nfunction getCursor(anchorName, rad) {\n    if (anchorName === 'rotater') {\n        return 'crosshair';\n    }\n    rad += Util_1.Util._degToRad(ANGLES[anchorName] || 0);\n    var angle = ((Util_1.Util._radToDeg(rad) % 360) + 360) % 360;\n    if (Util_1.Util._inRange(angle, 315 + 22.5, 360) || Util_1.Util._inRange(angle, 0, 22.5)) {\n        return 'ns-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 45 - 22.5, 45 + 22.5)) {\n        return 'nesw-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 90 - 22.5, 90 + 22.5)) {\n        return 'ew-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 135 - 22.5, 135 + 22.5)) {\n        return 'nwse-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 180 - 22.5, 180 + 22.5)) {\n        return 'ns-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 225 - 22.5, 225 + 22.5)) {\n        return 'nesw-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 270 - 22.5, 270 + 22.5)) {\n        return 'ew-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 315 - 22.5, 315 + 22.5)) {\n        return 'nwse-resize';\n    }\n    else {\n        Util_1.Util.error('Transformer has unknown angle for cursor detection: ' + angle);\n        return 'pointer';\n    }\n}\nvar ANCHORS_NAMES = [\n    'top-left',\n    'top-center',\n    'top-right',\n    'middle-right',\n    'middle-left',\n    'bottom-left',\n    'bottom-center',\n    'bottom-right',\n];\nvar MAX_SAFE_INTEGER = 100000000;\nfunction getCenter(shape) {\n    return {\n        x: shape.x +\n            (shape.width / 2) * Math.cos(shape.rotation) +\n            (shape.height / 2) * Math.sin(-shape.rotation),\n        y: shape.y +\n            (shape.height / 2) * Math.cos(shape.rotation) +\n            (shape.width / 2) * Math.sin(shape.rotation),\n    };\n}\nfunction rotateAroundPoint(shape, angleRad, point) {\n    var x = point.x +\n        (shape.x - point.x) * Math.cos(angleRad) -\n        (shape.y - point.y) * Math.sin(angleRad);\n    var y = point.y +\n        (shape.x - point.x) * Math.sin(angleRad) +\n        (shape.y - point.y) * Math.cos(angleRad);\n    return __assign(__assign({}, shape), { rotation: shape.rotation + angleRad, x: x,\n        y: y });\n}\nfunction rotateAroundCenter(shape, deltaRad) {\n    var center = getCenter(shape);\n    return rotateAroundPoint(shape, deltaRad, center);\n}\nfunction getSnap(snaps, newRotationRad, tol) {\n    var snapped = newRotationRad;\n    for (var i = 0; i < snaps.length; i++) {\n        var angle = Global_1.Konva.getAngle(snaps[i]);\n        var absDiff = Math.abs(angle - newRotationRad) % (Math.PI * 2);\n        var dif = Math.min(absDiff, Math.PI * 2 - absDiff);\n        if (dif < tol) {\n            snapped = angle;\n        }\n    }\n    return snapped;\n}\nvar Transformer = (function (_super) {\n    __extends(Transformer, _super);\n    function Transformer(config) {\n        var _this = _super.call(this, config) || this;\n        _this._transforming = false;\n        _this._createElements();\n        _this._handleMouseMove = _this._handleMouseMove.bind(_this);\n        _this._handleMouseUp = _this._handleMouseUp.bind(_this);\n        _this.update = _this.update.bind(_this);\n        _this.on(ATTR_CHANGE_LIST, _this.update);\n        if (_this.getNode()) {\n            _this.update();\n        }\n        return _this;\n    }\n    Transformer.prototype.attachTo = function (node) {\n        this.setNode(node);\n        return this;\n    };\n    Transformer.prototype.setNode = function (node) {\n        Util_1.Util.warn('tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead.');\n        return this.setNodes([node]);\n    };\n    Transformer.prototype.getNode = function () {\n        return this._nodes && this._nodes[0];\n    };\n    Transformer.prototype.setNodes = function (nodes) {\n        var _this = this;\n        if (nodes === void 0) { nodes = []; }\n        if (this._nodes && this._nodes.length) {\n            this.detach();\n        }\n        this._nodes = nodes;\n        if (nodes.length === 1) {\n            this.rotation(nodes[0].rotation());\n        }\n        else {\n            this.rotation(0);\n        }\n        this._nodes.forEach(function (node) {\n            var additionalEvents = node._attrsAffectingSize\n                .map(function (prop) { return prop + 'Change.' + EVENTS_NAME; })\n                .join(' ');\n            var onChange = function () {\n                _this._resetTransformCache();\n                if (!_this._transforming) {\n                    _this.update();\n                }\n            };\n            node.on(additionalEvents, onChange);\n            node.on(TRANSFORM_CHANGE_STR, onChange);\n            node.on(\"_clearTransformCache.\" + EVENTS_NAME, onChange);\n            node.on(\"xChange.\" + EVENTS_NAME + \" yChange.\" + EVENTS_NAME, onChange);\n            _this._proxyDrag(node);\n        });\n        this._resetTransformCache();\n        var elementsCreated = !!this.findOne('.top-left');\n        if (elementsCreated) {\n            this.update();\n        }\n        return this;\n    };\n    Transformer.prototype._proxyDrag = function (node) {\n        var _this = this;\n        var lastPos;\n        node.on(\"dragstart.\" + EVENTS_NAME, function () {\n            lastPos = node.getAbsolutePosition();\n        });\n        node.on(\"dragmove.\" + EVENTS_NAME, function () {\n            if (!lastPos) {\n                return;\n            }\n            var abs = node.getAbsolutePosition();\n            var dx = abs.x - lastPos.x;\n            var dy = abs.y - lastPos.y;\n            _this.nodes().forEach(function (otherNode) {\n                if (otherNode === node) {\n                    return;\n                }\n                if (otherNode.isDragging()) {\n                    return;\n                }\n                var otherAbs = otherNode.getAbsolutePosition();\n                otherNode.setAbsolutePosition({\n                    x: otherAbs.x + dx,\n                    y: otherAbs.y + dy,\n                });\n                otherNode.startDrag();\n            });\n            lastPos = null;\n        });\n    };\n    Transformer.prototype.getNodes = function () {\n        return this._nodes;\n    };\n    Transformer.prototype.getActiveAnchor = function () {\n        return this._movingAnchorName;\n    };\n    Transformer.prototype.detach = function () {\n        if (this._nodes) {\n            this._nodes.forEach(function (node) {\n                node.off('.' + EVENTS_NAME);\n            });\n        }\n        this._nodes = [];\n        this._resetTransformCache();\n    };\n    Transformer.prototype._resetTransformCache = function () {\n        this._clearCache(NODES_RECT);\n        this._clearCache('transform');\n        this._clearSelfAndDescendantCache('absoluteTransform');\n    };\n    Transformer.prototype._getNodeRect = function () {\n        return this._getCache(NODES_RECT, this.__getNodeRect);\n    };\n    Transformer.prototype.__getNodeShape = function (node, rot, relative) {\n        if (rot === void 0) { rot = this.rotation(); }\n        var rect = node.getClientRect({\n            skipTransform: true,\n            skipShadow: true,\n            skipStroke: this.ignoreStroke(),\n        });\n        var absScale = node.getAbsoluteScale(relative);\n        var absPos = node.getAbsolutePosition(relative);\n        var dx = rect.x * absScale.x - node.offsetX() * absScale.x;\n        var dy = rect.y * absScale.y - node.offsetY() * absScale.y;\n        var rotation = (Global_1.Konva.getAngle(node.getAbsoluteRotation()) + Math.PI * 2) %\n            (Math.PI * 2);\n        var box = {\n            x: absPos.x + dx * Math.cos(rotation) + dy * Math.sin(-rotation),\n            y: absPos.y + dy * Math.cos(rotation) + dx * Math.sin(rotation),\n            width: rect.width * absScale.x,\n            height: rect.height * absScale.y,\n            rotation: rotation,\n        };\n        return rotateAroundPoint(box, -Global_1.Konva.getAngle(rot), {\n            x: 0,\n            y: 0,\n        });\n    };\n    Transformer.prototype.__getNodeRect = function () {\n        var _this = this;\n        var node = this.getNode();\n        if (!node) {\n            return {\n                x: -MAX_SAFE_INTEGER,\n                y: -MAX_SAFE_INTEGER,\n                width: 0,\n                height: 0,\n                rotation: 0,\n            };\n        }\n        var totalPoints = [];\n        this.nodes().map(function (node) {\n            var box = node.getClientRect({\n                skipTransform: true,\n                skipShadow: true,\n                skipStroke: _this.ignoreStroke(),\n            });\n            var points = [\n                { x: box.x, y: box.y },\n                { x: box.x + box.width, y: box.y },\n                { x: box.x + box.width, y: box.y + box.height },\n                { x: box.x, y: box.y + box.height },\n            ];\n            var trans = node.getAbsoluteTransform();\n            points.forEach(function (point) {\n                var transformed = trans.point(point);\n                totalPoints.push(transformed);\n            });\n        });\n        var tr = new Util_1.Transform();\n        tr.rotate(-Global_1.Konva.getAngle(this.rotation()));\n        var minX, minY, maxX, maxY;\n        totalPoints.forEach(function (point) {\n            var transformed = tr.point(point);\n            if (minX === undefined) {\n                minX = maxX = transformed.x;\n                minY = maxY = transformed.y;\n            }\n            minX = Math.min(minX, transformed.x);\n            minY = Math.min(minY, transformed.y);\n            maxX = Math.max(maxX, transformed.x);\n            maxY = Math.max(maxY, transformed.y);\n        });\n        tr.invert();\n        var p = tr.point({ x: minX, y: minY });\n        return {\n            x: p.x,\n            y: p.y,\n            width: maxX - minX,\n            height: maxY - minY,\n            rotation: Global_1.Konva.getAngle(this.rotation()),\n        };\n    };\n    Transformer.prototype.getX = function () {\n        return this._getNodeRect().x;\n    };\n    Transformer.prototype.getY = function () {\n        return this._getNodeRect().y;\n    };\n    Transformer.prototype.getWidth = function () {\n        return this._getNodeRect().width;\n    };\n    Transformer.prototype.getHeight = function () {\n        return this._getNodeRect().height;\n    };\n    Transformer.prototype._createElements = function () {\n        this._createBack();\n        ANCHORS_NAMES.forEach(function (name) {\n            this._createAnchor(name);\n        }.bind(this));\n        this._createAnchor('rotater');\n    };\n    Transformer.prototype._createAnchor = function (name) {\n        var _this = this;\n        var anchor = new Rect_1.Rect({\n            stroke: 'rgb(0, 161, 255)',\n            fill: 'white',\n            strokeWidth: 1,\n            name: name + ' _anchor',\n            dragDistance: 0,\n            draggable: true,\n            hitStrokeWidth: TOUCH_DEVICE ? 10 : 'auto',\n        });\n        var self = this;\n        anchor.on('mousedown touchstart', function (e) {\n            self._handleMouseDown(e);\n        });\n        anchor.on('dragstart', function (e) {\n            anchor.stopDrag();\n            e.cancelBubble = true;\n        });\n        anchor.on('dragend', function (e) {\n            e.cancelBubble = true;\n        });\n        anchor.on('mouseenter', function () {\n            var rad = Global_1.Konva.getAngle(_this.rotation());\n            var cursor = getCursor(name, rad);\n            anchor.getStage().content.style.cursor = cursor;\n            _this._cursorChange = true;\n        });\n        anchor.on('mouseout', function () {\n            anchor.getStage().content.style.cursor = '';\n            _this._cursorChange = false;\n        });\n        this.add(anchor);\n    };\n    Transformer.prototype._createBack = function () {\n        var _this = this;\n        var back = new Shape_1.Shape({\n            name: 'back',\n            width: 0,\n            height: 0,\n            draggable: true,\n            sceneFunc: function (ctx) {\n                var tr = this.getParent();\n                var padding = tr.padding();\n                ctx.beginPath();\n                ctx.rect(-padding, -padding, this.width() + padding * 2, this.height() + padding * 2);\n                ctx.moveTo(this.width() / 2, -padding);\n                if (tr.rotateEnabled()) {\n                    ctx.lineTo(this.width() / 2, -tr.rotateAnchorOffset() * Util_1.Util._sign(this.height()) - padding);\n                }\n                ctx.fillStrokeShape(this);\n            },\n            hitFunc: function (ctx, shape) {\n                if (!_this.shouldOverdrawWholeArea()) {\n                    return;\n                }\n                var padding = _this.padding();\n                ctx.beginPath();\n                ctx.rect(-padding, -padding, shape.width() + padding * 2, shape.height() + padding * 2);\n                ctx.fillStrokeShape(shape);\n            },\n        });\n        this.add(back);\n        this._proxyDrag(back);\n    };\n    Transformer.prototype._handleMouseDown = function (e) {\n        this._movingAnchorName = e.target.name().split(' ')[0];\n        var attrs = this._getNodeRect();\n        var width = attrs.width;\n        var height = attrs.height;\n        var hypotenuse = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n        this.sin = Math.abs(height / hypotenuse);\n        this.cos = Math.abs(width / hypotenuse);\n        window.addEventListener('mousemove', this._handleMouseMove);\n        window.addEventListener('touchmove', this._handleMouseMove);\n        window.addEventListener('mouseup', this._handleMouseUp, true);\n        window.addEventListener('touchend', this._handleMouseUp, true);\n        this._transforming = true;\n        var ap = e.target.getAbsolutePosition();\n        var pos = e.target.getStage().getPointerPosition();\n        this._anchorDragOffset = {\n            x: pos.x - ap.x,\n            y: pos.y - ap.y,\n        };\n        this._fire('transformstart', { evt: e, target: this.getNode() });\n        this.getNode()._fire('transformstart', { evt: e, target: this.getNode() });\n    };\n    Transformer.prototype._handleMouseMove = function (e) {\n        var x, y, newHypotenuse;\n        var anchorNode = this.findOne('.' + this._movingAnchorName);\n        var stage = anchorNode.getStage();\n        stage.setPointersPositions(e);\n        var pp = stage.getPointerPosition();\n        var newNodePos = {\n            x: pp.x - this._anchorDragOffset.x,\n            y: pp.y - this._anchorDragOffset.y,\n        };\n        var oldAbs = anchorNode.getAbsolutePosition();\n        anchorNode.setAbsolutePosition(newNodePos);\n        var newAbs = anchorNode.getAbsolutePosition();\n        if (oldAbs.x === newAbs.x && oldAbs.y === newAbs.y) {\n            return;\n        }\n        if (this._movingAnchorName === 'rotater') {\n            var attrs = this._getNodeRect();\n            x = anchorNode.x() - attrs.width / 2;\n            y = -anchorNode.y() + attrs.height / 2;\n            var delta = Math.atan2(-y, x) + Math.PI / 2;\n            if (attrs.height < 0) {\n                delta -= Math.PI;\n            }\n            var oldRotation = Global_1.Konva.getAngle(this.rotation());\n            var newRotation = oldRotation + delta;\n            var tol = Global_1.Konva.getAngle(this.rotationSnapTolerance());\n            var snappedRot = getSnap(this.rotationSnaps(), newRotation, tol);\n            var diff = snappedRot - attrs.rotation;\n            var shape = rotateAroundCenter(attrs, diff);\n            this._fitNodesInto(shape, e);\n            return;\n        }\n        var keepProportion = this.keepRatio() || e.shiftKey;\n        var centeredScaling = this.centeredScaling() || e.altKey;\n        if (this._movingAnchorName === 'top-left') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.bottom-right').x(),\n                        y: this.findOne('.bottom-right').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) +\n                    Math.pow(comparePoint.y - anchorNode.y(), 2));\n                var reverseX = this.findOne('.top-left').x() > comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.top-left').y() > comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.top-left').x(comparePoint.x - x);\n                this.findOne('.top-left').y(comparePoint.y - y);\n            }\n        }\n        else if (this._movingAnchorName === 'top-center') {\n            this.findOne('.top-left').y(anchorNode.y());\n        }\n        else if (this._movingAnchorName === 'top-right') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.bottom-left').x(),\n                        y: this.findOne('.bottom-left').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) +\n                    Math.pow(comparePoint.y - anchorNode.y(), 2));\n                var reverseX = this.findOne('.top-right').x() < comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.top-right').y() > comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.top-right').x(comparePoint.x + x);\n                this.findOne('.top-right').y(comparePoint.y - y);\n            }\n            var pos = anchorNode.position();\n            this.findOne('.top-left').y(pos.y);\n            this.findOne('.bottom-right').x(pos.x);\n        }\n        else if (this._movingAnchorName === 'middle-left') {\n            this.findOne('.top-left').x(anchorNode.x());\n        }\n        else if (this._movingAnchorName === 'middle-right') {\n            this.findOne('.bottom-right').x(anchorNode.x());\n        }\n        else if (this._movingAnchorName === 'bottom-left') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.top-right').x(),\n                        y: this.findOne('.top-right').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) +\n                    Math.pow(anchorNode.y() - comparePoint.y, 2));\n                var reverseX = comparePoint.x < anchorNode.x() ? -1 : 1;\n                var reverseY = anchorNode.y() < comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                anchorNode.x(comparePoint.x - x);\n                anchorNode.y(comparePoint.y + y);\n            }\n            pos = anchorNode.position();\n            this.findOne('.top-left').x(pos.x);\n            this.findOne('.bottom-right').y(pos.y);\n        }\n        else if (this._movingAnchorName === 'bottom-center') {\n            this.findOne('.bottom-right').y(anchorNode.y());\n        }\n        else if (this._movingAnchorName === 'bottom-right') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.top-left').x(),\n                        y: this.findOne('.top-left').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) +\n                    Math.pow(anchorNode.y() - comparePoint.y, 2));\n                var reverseX = this.findOne('.bottom-right').x() < comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.bottom-right').y() < comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.bottom-right').x(comparePoint.x + x);\n                this.findOne('.bottom-right').y(comparePoint.y + y);\n            }\n        }\n        else {\n            console.error(new Error('Wrong position argument of selection resizer: ' +\n                this._movingAnchorName));\n        }\n        var centeredScaling = this.centeredScaling() || e.altKey;\n        if (centeredScaling) {\n            var topLeft = this.findOne('.top-left');\n            var bottomRight = this.findOne('.bottom-right');\n            var topOffsetX = topLeft.x();\n            var topOffsetY = topLeft.y();\n            var bottomOffsetX = this.getWidth() - bottomRight.x();\n            var bottomOffsetY = this.getHeight() - bottomRight.y();\n            bottomRight.move({\n                x: -topOffsetX,\n                y: -topOffsetY,\n            });\n            topLeft.move({\n                x: bottomOffsetX,\n                y: bottomOffsetY,\n            });\n        }\n        var absPos = this.findOne('.top-left').getAbsolutePosition();\n        x = absPos.x;\n        y = absPos.y;\n        var width = this.findOne('.bottom-right').x() - this.findOne('.top-left').x();\n        var height = this.findOne('.bottom-right').y() - this.findOne('.top-left').y();\n        this._fitNodesInto({\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n            rotation: Global_1.Konva.getAngle(this.rotation()),\n        }, e);\n    };\n    Transformer.prototype._handleMouseUp = function (e) {\n        this._removeEvents(e);\n    };\n    Transformer.prototype.getAbsoluteTransform = function () {\n        return this.getTransform();\n    };\n    Transformer.prototype._removeEvents = function (e) {\n        if (this._transforming) {\n            this._transforming = false;\n            window.removeEventListener('mousemove', this._handleMouseMove);\n            window.removeEventListener('touchmove', this._handleMouseMove);\n            window.removeEventListener('mouseup', this._handleMouseUp, true);\n            window.removeEventListener('touchend', this._handleMouseUp, true);\n            var node = this.getNode();\n            this._fire('transformend', { evt: e, target: node });\n            if (node) {\n                node.fire('transformend', { evt: e, target: node });\n            }\n            this._movingAnchorName = null;\n        }\n    };\n    Transformer.prototype._fitNodesInto = function (newAttrs, evt) {\n        var _this = this;\n        var oldAttrs = this._getNodeRect();\n        var minSize = 1;\n        if (Util_1.Util._inRange(newAttrs.width, -this.padding() * 2 - minSize, minSize)) {\n            this.update();\n            return;\n        }\n        if (Util_1.Util._inRange(newAttrs.height, -this.padding() * 2 - minSize, minSize)) {\n            this.update();\n            return;\n        }\n        var allowNegativeScale = true;\n        var t = new Util_1.Transform();\n        t.rotate(Global_1.Konva.getAngle(this.rotation()));\n        if (this._movingAnchorName &&\n            newAttrs.width < 0 &&\n            this._movingAnchorName.indexOf('left') >= 0) {\n            var offset = t.point({\n                x: -this.padding() * 2,\n                y: 0,\n            });\n            newAttrs.x += offset.x;\n            newAttrs.y += offset.y;\n            newAttrs.width += this.padding() * 2;\n            this._movingAnchorName = this._movingAnchorName.replace('left', 'right');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        else if (this._movingAnchorName &&\n            newAttrs.width < 0 &&\n            this._movingAnchorName.indexOf('right') >= 0) {\n            var offset = t.point({\n                x: this.padding() * 2,\n                y: 0,\n            });\n            this._movingAnchorName = this._movingAnchorName.replace('right', 'left');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.width += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        if (this._movingAnchorName &&\n            newAttrs.height < 0 &&\n            this._movingAnchorName.indexOf('top') >= 0) {\n            var offset = t.point({\n                x: 0,\n                y: -this.padding() * 2,\n            });\n            newAttrs.x += offset.x;\n            newAttrs.y += offset.y;\n            this._movingAnchorName = this._movingAnchorName.replace('top', 'bottom');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.height += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        else if (this._movingAnchorName &&\n            newAttrs.height < 0 &&\n            this._movingAnchorName.indexOf('bottom') >= 0) {\n            var offset = t.point({\n                x: 0,\n                y: this.padding() * 2,\n            });\n            this._movingAnchorName = this._movingAnchorName.replace('bottom', 'top');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.height += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        if (this.boundBoxFunc()) {\n            var bounded = this.boundBoxFunc()(oldAttrs, newAttrs);\n            if (bounded) {\n                newAttrs = bounded;\n            }\n            else {\n                Util_1.Util.warn('boundBoxFunc returned falsy. You should return new bound rect from it!');\n            }\n        }\n        var baseSize = 10000000;\n        var oldTr = new Util_1.Transform();\n        oldTr.translate(oldAttrs.x, oldAttrs.y);\n        oldTr.rotate(oldAttrs.rotation);\n        oldTr.scale(oldAttrs.width / baseSize, oldAttrs.height / baseSize);\n        var newTr = new Util_1.Transform();\n        newTr.translate(newAttrs.x, newAttrs.y);\n        newTr.rotate(newAttrs.rotation);\n        newTr.scale(newAttrs.width / baseSize, newAttrs.height / baseSize);\n        var delta = newTr.multiply(oldTr.invert());\n        this._nodes.forEach(function (node) {\n            var parentTransform = node.getParent().getAbsoluteTransform();\n            var localTransform = node.getTransform().copy();\n            localTransform.translate(node.offsetX(), node.offsetY());\n            var newLocalTransform = new Util_1.Transform();\n            newLocalTransform\n                .multiply(parentTransform.copy().invert())\n                .multiply(delta)\n                .multiply(parentTransform)\n                .multiply(localTransform);\n            var attrs = newLocalTransform.decompose();\n            node._batchTransformChanges(function () {\n                node.setAttrs(attrs);\n            });\n            _this._fire('transform', { evt: evt, target: node });\n            node._fire('transform', { evt: evt, target: node });\n        });\n        this.rotation(Util_1.Util._getRotation(newAttrs.rotation));\n        this._resetTransformCache();\n        this.update();\n        this.getLayer().batchDraw();\n    };\n    Transformer.prototype.forceUpdate = function () {\n        this._resetTransformCache();\n        this.update();\n    };\n    Transformer.prototype._batchChangeChild = function (selector, attrs) {\n        var anchor = this.findOne(selector);\n        anchor._batchTransformChanges(function () {\n            anchor.setAttrs(attrs);\n        });\n    };\n    Transformer.prototype.update = function () {\n        var _this = this;\n        var attrs = this._getNodeRect();\n        this.rotation(Util_1.Util._getRotation(attrs.rotation));\n        var width = attrs.width;\n        var height = attrs.height;\n        var enabledAnchors = this.enabledAnchors();\n        var resizeEnabled = this.resizeEnabled();\n        var padding = this.padding();\n        var anchorSize = this.anchorSize();\n        this.find('._anchor').each(function (node) {\n            node._batchTransformChanges(function () {\n                node.setAttrs({\n                    width: anchorSize,\n                    height: anchorSize,\n                    offsetX: anchorSize / 2,\n                    offsetY: anchorSize / 2,\n                    stroke: _this.anchorStroke(),\n                    strokeWidth: _this.anchorStrokeWidth(),\n                    fill: _this.anchorFill(),\n                    cornerRadius: _this.anchorCornerRadius(),\n                });\n            });\n        });\n        this._batchChangeChild('.top-left', {\n            x: 0,\n            y: 0,\n            offsetX: anchorSize / 2 + padding,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-left') >= 0,\n        });\n        this._batchChangeChild('.top-center', {\n            x: width / 2,\n            y: 0,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-center') >= 0,\n        });\n        this._batchChangeChild('.top-right', {\n            x: width,\n            y: 0,\n            offsetX: anchorSize / 2 - padding,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-right') >= 0,\n        });\n        this._batchChangeChild('.middle-left', {\n            x: 0,\n            y: height / 2,\n            offsetX: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-left') >= 0,\n        });\n        this._batchChangeChild('.middle-right', {\n            x: width,\n            y: height / 2,\n            offsetX: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-right') >= 0,\n        });\n        this._batchChangeChild('.bottom-left', {\n            x: 0,\n            y: height,\n            offsetX: anchorSize / 2 + padding,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-left') >= 0,\n        });\n        this._batchChangeChild('.bottom-center', {\n            x: width / 2,\n            y: height,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-center') >= 0,\n        });\n        this._batchChangeChild('.bottom-right', {\n            x: width,\n            y: height,\n            offsetX: anchorSize / 2 - padding,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-right') >= 0,\n        });\n        this._batchChangeChild('.rotater', {\n            x: width / 2,\n            y: -this.rotateAnchorOffset() * Util_1.Util._sign(height) - padding,\n            visible: this.rotateEnabled(),\n        });\n        this._batchChangeChild('.back', {\n            width: width,\n            height: height,\n            visible: this.borderEnabled(),\n            stroke: this.borderStroke(),\n            strokeWidth: this.borderStrokeWidth(),\n            dash: this.borderDash(),\n            x: 0,\n            y: 0,\n        });\n    };\n    Transformer.prototype.isTransforming = function () {\n        return this._transforming;\n    };\n    Transformer.prototype.stopTransform = function () {\n        if (this._transforming) {\n            this._removeEvents();\n            var anchorNode = this.findOne('.' + this._movingAnchorName);\n            if (anchorNode) {\n                anchorNode.stopDrag();\n            }\n        }\n    };\n    Transformer.prototype.destroy = function () {\n        if (this.getStage() && this._cursorChange) {\n            this.getStage().content.style.cursor = '';\n        }\n        Group_1.Group.prototype.destroy.call(this);\n        this.detach();\n        this._removeEvents();\n        return this;\n    };\n    Transformer.prototype.toObject = function () {\n        return Node_1.Node.prototype.toObject.call(this);\n    };\n    return Transformer;\n}(Group_1.Group));\nexports.Transformer = Transformer;\nfunction validateAnchors(val) {\n    if (!(val instanceof Array)) {\n        Util_1.Util.warn('enabledAnchors value should be an array');\n    }\n    if (val instanceof Array) {\n        val.forEach(function (name) {\n            if (ANCHORS_NAMES.indexOf(name) === -1) {\n                Util_1.Util.warn('Unknown anchor name: ' +\n                    name +\n                    '. Available names are: ' +\n                    ANCHORS_NAMES.join(', '));\n            }\n        });\n    }\n    return val || [];\n}\nTransformer.prototype.className = 'Transformer';\nGlobal_2._registerNode(Transformer);\nFactory_1.Factory.addGetterSetter(Transformer, 'enabledAnchors', ANCHORS_NAMES, validateAnchors);\nFactory_1.Factory.addGetterSetter(Transformer, 'resizeEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorSize', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'rotationSnaps', []);\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateAnchorOffset', 50, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'rotationSnapTolerance', 5, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStroke', 'rgb(0, 161, 255)');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStrokeWidth', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorFill', 'white');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorCornerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStroke', 'rgb(0, 161, 255)');\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStrokeWidth', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderDash');\nFactory_1.Factory.addGetterSetter(Transformer, 'keepRatio', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'centeredScaling', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'ignoreStroke', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'padding', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'node');\nFactory_1.Factory.addGetterSetter(Transformer, 'nodes');\nFactory_1.Factory.addGetterSetter(Transformer, 'boundBoxFunc');\nFactory_1.Factory.addGetterSetter(Transformer, 'shouldOverdrawWholeArea', false);\nFactory_1.Factory.backCompat(Transformer, {\n    lineEnabled: 'borderEnabled',\n    rotateHandlerOffset: 'rotateAnchorOffset',\n    enabledHandlers: 'enabledAnchors',\n});\nUtil_1.Collection.mapMethods(Transformer);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Global_1 = require(\"../Global\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_2 = require(\"../Global\");\nvar Wedge = (function (_super) {\n    __extends(Wedge, _super);\n    function Wedge() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Wedge.prototype._sceneFunc = function (context) {\n        context.beginPath();\n        context.arc(0, 0, this.radius(), 0, Global_1.Konva.getAngle(this.angle()), this.clockwise());\n        context.lineTo(0, 0);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Wedge.prototype.getWidth = function () {\n        return this.radius() * 2;\n    };\n    Wedge.prototype.getHeight = function () {\n        return this.radius() * 2;\n    };\n    Wedge.prototype.setWidth = function (width) {\n        this.radius(width / 2);\n    };\n    Wedge.prototype.setHeight = function (height) {\n        this.radius(height / 2);\n    };\n    return Wedge;\n}(Shape_1.Shape));\nexports.Wedge = Wedge;\nWedge.prototype.className = 'Wedge';\nWedge.prototype._centroid = true;\nWedge.prototype._attrsAffectingSize = ['radius'];\nGlobal_2._registerNode(Wedge);\nFactory_1.Factory.addGetterSetter(Wedge, 'radius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Wedge, 'angle', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Wedge, 'clockwise', false);\nFactory_1.Factory.backCompat(Wedge, {\n    angleDeg: 'angle',\n    getAngleDeg: 'getAngle',\n    setAngleDeg: 'setAngle'\n});\nUtil_1.Collection.mapMethods(Wedge);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nfunction BlurStack() {\n    this.r = 0;\n    this.g = 0;\n    this.b = 0;\n    this.a = 0;\n    this.next = null;\n}\nvar mul_table = [\n    512,\n    512,\n    456,\n    512,\n    328,\n    456,\n    335,\n    512,\n    405,\n    328,\n    271,\n    456,\n    388,\n    335,\n    292,\n    512,\n    454,\n    405,\n    364,\n    328,\n    298,\n    271,\n    496,\n    456,\n    420,\n    388,\n    360,\n    335,\n    312,\n    292,\n    273,\n    512,\n    482,\n    454,\n    428,\n    405,\n    383,\n    364,\n    345,\n    328,\n    312,\n    298,\n    284,\n    271,\n    259,\n    496,\n    475,\n    456,\n    437,\n    420,\n    404,\n    388,\n    374,\n    360,\n    347,\n    335,\n    323,\n    312,\n    302,\n    292,\n    282,\n    273,\n    265,\n    512,\n    497,\n    482,\n    468,\n    454,\n    441,\n    428,\n    417,\n    405,\n    394,\n    383,\n    373,\n    364,\n    354,\n    345,\n    337,\n    328,\n    320,\n    312,\n    305,\n    298,\n    291,\n    284,\n    278,\n    271,\n    265,\n    259,\n    507,\n    496,\n    485,\n    475,\n    465,\n    456,\n    446,\n    437,\n    428,\n    420,\n    412,\n    404,\n    396,\n    388,\n    381,\n    374,\n    367,\n    360,\n    354,\n    347,\n    341,\n    335,\n    329,\n    323,\n    318,\n    312,\n    307,\n    302,\n    297,\n    292,\n    287,\n    282,\n    278,\n    273,\n    269,\n    265,\n    261,\n    512,\n    505,\n    497,\n    489,\n    482,\n    475,\n    468,\n    461,\n    454,\n    447,\n    441,\n    435,\n    428,\n    422,\n    417,\n    411,\n    405,\n    399,\n    394,\n    389,\n    383,\n    378,\n    373,\n    368,\n    364,\n    359,\n    354,\n    350,\n    345,\n    341,\n    337,\n    332,\n    328,\n    324,\n    320,\n    316,\n    312,\n    309,\n    305,\n    301,\n    298,\n    294,\n    291,\n    287,\n    284,\n    281,\n    278,\n    274,\n    271,\n    268,\n    265,\n    262,\n    259,\n    257,\n    507,\n    501,\n    496,\n    491,\n    485,\n    480,\n    475,\n    470,\n    465,\n    460,\n    456,\n    451,\n    446,\n    442,\n    437,\n    433,\n    428,\n    424,\n    420,\n    416,\n    412,\n    408,\n    404,\n    400,\n    396,\n    392,\n    388,\n    385,\n    381,\n    377,\n    374,\n    370,\n    367,\n    363,\n    360,\n    357,\n    354,\n    350,\n    347,\n    344,\n    341,\n    338,\n    335,\n    332,\n    329,\n    326,\n    323,\n    320,\n    318,\n    315,\n    312,\n    310,\n    307,\n    304,\n    302,\n    299,\n    297,\n    294,\n    292,\n    289,\n    287,\n    285,\n    282,\n    280,\n    278,\n    275,\n    273,\n    271,\n    269,\n    267,\n    265,\n    263,\n    261,\n    259\n];\nvar shg_table = [\n    9,\n    11,\n    12,\n    13,\n    13,\n    14,\n    14,\n    15,\n    15,\n    15,\n    15,\n    16,\n    16,\n    16,\n    16,\n    17,\n    17,\n    17,\n    17,\n    17,\n    17,\n    17,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24\n];\nfunction filterGaussBlurRGBA(imageData, radius) {\n    var pixels = imageData.data, width = imageData.width, height = imageData.height;\n    var x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum, r_out_sum, g_out_sum, b_out_sum, a_out_sum, r_in_sum, g_in_sum, b_in_sum, a_in_sum, pr, pg, pb, pa, rbs;\n    var div = radius + radius + 1, widthMinus1 = width - 1, heightMinus1 = height - 1, radiusPlus1 = radius + 1, sumFactor = (radiusPlus1 * (radiusPlus1 + 1)) / 2, stackStart = new BlurStack(), stackEnd = null, stack = stackStart, stackIn = null, stackOut = null, mul_sum = mul_table[radius], shg_sum = shg_table[radius];\n    for (i = 1; i < div; i++) {\n        stack = stack.next = new BlurStack();\n        if (i === radiusPlus1) {\n            stackEnd = stack;\n        }\n    }\n    stack.next = stackStart;\n    yw = yi = 0;\n    for (y = 0; y < height; y++) {\n        r_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n        a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        a_sum += sumFactor * pa;\n        stack = stackStart;\n        for (i = 0; i < radiusPlus1; i++) {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack.a = pa;\n            stack = stack.next;\n        }\n        for (i = 1; i < radiusPlus1; i++) {\n            p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n            r_sum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = pg = pixels[p + 1]) * rbs;\n            b_sum += (stack.b = pb = pixels[p + 2]) * rbs;\n            a_sum += (stack.a = pa = pixels[p + 3]) * rbs;\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            a_in_sum += pa;\n            stack = stack.next;\n        }\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (x = 0; x < width; x++) {\n            pixels[yi + 3] = pa = (a_sum * mul_sum) >> shg_sum;\n            if (pa !== 0) {\n                pa = 255 / pa;\n                pixels[yi] = ((r_sum * mul_sum) >> shg_sum) * pa;\n                pixels[yi + 1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n                pixels[yi + 2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n            }\n            else {\n                pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n            }\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            a_sum -= a_out_sum;\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            a_out_sum -= stackIn.a;\n            p = (yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1)) << 2;\n            r_in_sum += stackIn.r = pixels[p];\n            g_in_sum += stackIn.g = pixels[p + 1];\n            b_in_sum += stackIn.b = pixels[p + 2];\n            a_in_sum += stackIn.a = pixels[p + 3];\n            r_sum += r_in_sum;\n            g_sum += g_in_sum;\n            b_sum += b_in_sum;\n            a_sum += a_in_sum;\n            stackIn = stackIn.next;\n            r_out_sum += pr = stackOut.r;\n            g_out_sum += pg = stackOut.g;\n            b_out_sum += pb = stackOut.b;\n            a_out_sum += pa = stackOut.a;\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            a_in_sum -= pa;\n            stackOut = stackOut.next;\n            yi += 4;\n        }\n        yw += width;\n    }\n    for (x = 0; x < width; x++) {\n        g_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\n        yi = x << 2;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n        a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        a_sum += sumFactor * pa;\n        stack = stackStart;\n        for (i = 0; i < radiusPlus1; i++) {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack.a = pa;\n            stack = stack.next;\n        }\n        yp = width;\n        for (i = 1; i <= radius; i++) {\n            yi = (yp + x) << 2;\n            r_sum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = pg = pixels[yi + 1]) * rbs;\n            b_sum += (stack.b = pb = pixels[yi + 2]) * rbs;\n            a_sum += (stack.a = pa = pixels[yi + 3]) * rbs;\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            a_in_sum += pa;\n            stack = stack.next;\n            if (i < heightMinus1) {\n                yp += width;\n            }\n        }\n        yi = x;\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (y = 0; y < height; y++) {\n            p = yi << 2;\n            pixels[p + 3] = pa = (a_sum * mul_sum) >> shg_sum;\n            if (pa > 0) {\n                pa = 255 / pa;\n                pixels[p] = ((r_sum * mul_sum) >> shg_sum) * pa;\n                pixels[p + 1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n                pixels[p + 2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n            }\n            else {\n                pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;\n            }\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            a_sum -= a_out_sum;\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            a_out_sum -= stackIn.a;\n            p =\n                (x +\n                    ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width) <<\n                    2;\n            r_sum += r_in_sum += stackIn.r = pixels[p];\n            g_sum += g_in_sum += stackIn.g = pixels[p + 1];\n            b_sum += b_in_sum += stackIn.b = pixels[p + 2];\n            a_sum += a_in_sum += stackIn.a = pixels[p + 3];\n            stackIn = stackIn.next;\n            r_out_sum += pr = stackOut.r;\n            g_out_sum += pg = stackOut.g;\n            b_out_sum += pb = stackOut.b;\n            a_out_sum += pa = stackOut.a;\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            a_in_sum -= pa;\n            stackOut = stackOut.next;\n            yi += width;\n        }\n    }\n}\nexports.Blur = function Blur(imageData) {\n    var radius = Math.round(this.blurRadius());\n    if (radius > 0) {\n        filterGaussBlurRGBA(imageData, radius);\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blurRadius', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.Brighten = function (imageData) {\n    var brightness = this.brightness() * 255, data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 4) {\n        data[i] += brightness;\n        data[i + 1] += brightness;\n        data[i + 2] += brightness;\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'brightness', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.Contrast = function (imageData) {\n    var adjust = Math.pow((this.contrast() + 100) / 100, 2);\n    var data = imageData.data, nPixels = data.length, red = 150, green = 150, blue = 150, i;\n    for (i = 0; i < nPixels; i += 4) {\n        red = data[i];\n        green = data[i + 1];\n        blue = data[i + 2];\n        red /= 255;\n        red -= 0.5;\n        red *= adjust;\n        red += 0.5;\n        red *= 255;\n        green /= 255;\n        green -= 0.5;\n        green *= adjust;\n        green += 0.5;\n        green *= 255;\n        blue /= 255;\n        blue -= 0.5;\n        blue *= adjust;\n        blue += 0.5;\n        blue *= 255;\n        red = red < 0 ? 0 : red > 255 ? 255 : red;\n        green = green < 0 ? 0 : green > 255 ? 255 : green;\n        blue = blue < 0 ? 0 : blue > 255 ? 255 : blue;\n        data[i] = red;\n        data[i + 1] = green;\n        data[i + 2] = blue;\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'contrast', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Util_1 = require(\"../Util\");\nvar Validators_1 = require(\"../Validators\");\nexports.Emboss = function (imageData) {\n    var strength = this.embossStrength() * 10, greyLevel = this.embossWhiteLevel() * 255, direction = this.embossDirection(), blend = this.embossBlend(), dirY = 0, dirX = 0, data = imageData.data, w = imageData.width, h = imageData.height, w4 = w * 4, y = h;\n    switch (direction) {\n        case 'top-left':\n            dirY = -1;\n            dirX = -1;\n            break;\n        case 'top':\n            dirY = -1;\n            dirX = 0;\n            break;\n        case 'top-right':\n            dirY = -1;\n            dirX = 1;\n            break;\n        case 'right':\n            dirY = 0;\n            dirX = 1;\n            break;\n        case 'bottom-right':\n            dirY = 1;\n            dirX = 1;\n            break;\n        case 'bottom':\n            dirY = 1;\n            dirX = 0;\n            break;\n        case 'bottom-left':\n            dirY = 1;\n            dirX = -1;\n            break;\n        case 'left':\n            dirY = 0;\n            dirX = -1;\n            break;\n        default:\n            Util_1.Util.error('Unknown emboss direction: ' + direction);\n    }\n    do {\n        var offsetY = (y - 1) * w4;\n        var otherY = dirY;\n        if (y + otherY < 1) {\n            otherY = 0;\n        }\n        if (y + otherY > h) {\n            otherY = 0;\n        }\n        var offsetYOther = (y - 1 + otherY) * w * 4;\n        var x = w;\n        do {\n            var offset = offsetY + (x - 1) * 4;\n            var otherX = dirX;\n            if (x + otherX < 1) {\n                otherX = 0;\n            }\n            if (x + otherX > w) {\n                otherX = 0;\n            }\n            var offsetOther = offsetYOther + (x - 1 + otherX) * 4;\n            var dR = data[offset] - data[offsetOther];\n            var dG = data[offset + 1] - data[offsetOther + 1];\n            var dB = data[offset + 2] - data[offsetOther + 2];\n            var dif = dR;\n            var absDif = dif > 0 ? dif : -dif;\n            var absG = dG > 0 ? dG : -dG;\n            var absB = dB > 0 ? dB : -dB;\n            if (absG > absDif) {\n                dif = dG;\n            }\n            if (absB > absDif) {\n                dif = dB;\n            }\n            dif *= strength;\n            if (blend) {\n                var r = data[offset] + dif;\n                var g = data[offset + 1] + dif;\n                var b = data[offset + 2] + dif;\n                data[offset] = r > 255 ? 255 : r < 0 ? 0 : r;\n                data[offset + 1] = g > 255 ? 255 : g < 0 ? 0 : g;\n                data[offset + 2] = b > 255 ? 255 : b < 0 ? 0 : b;\n            }\n            else {\n                var grey = greyLevel - dif;\n                if (grey < 0) {\n                    grey = 0;\n                }\n                else if (grey > 255) {\n                    grey = 255;\n                }\n                data[offset] = data[offset + 1] = data[offset + 2] = grey;\n            }\n        } while (--x);\n    } while (--y);\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossStrength', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossWhiteLevel', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossDirection', 'top-left', null, Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossBlend', false, null, Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nfunction remap(fromValue, fromMin, fromMax, toMin, toMax) {\n    var fromRange = fromMax - fromMin, toRange = toMax - toMin, toValue;\n    if (fromRange === 0) {\n        return toMin + toRange / 2;\n    }\n    if (toRange === 0) {\n        return toMin;\n    }\n    toValue = (fromValue - fromMin) / fromRange;\n    toValue = toRange * toValue + toMin;\n    return toValue;\n}\nexports.Enhance = function (imageData) {\n    var data = imageData.data, nSubPixels = data.length, rMin = data[0], rMax = rMin, r, gMin = data[1], gMax = gMin, g, bMin = data[2], bMax = bMin, b, i;\n    var enhanceAmount = this.enhance();\n    if (enhanceAmount === 0) {\n        return;\n    }\n    for (i = 0; i < nSubPixels; i += 4) {\n        r = data[i + 0];\n        if (r < rMin) {\n            rMin = r;\n        }\n        else if (r > rMax) {\n            rMax = r;\n        }\n        g = data[i + 1];\n        if (g < gMin) {\n            gMin = g;\n        }\n        else if (g > gMax) {\n            gMax = g;\n        }\n        b = data[i + 2];\n        if (b < bMin) {\n            bMin = b;\n        }\n        else if (b > bMax) {\n            bMax = b;\n        }\n    }\n    if (rMax === rMin) {\n        rMax = 255;\n        rMin = 0;\n    }\n    if (gMax === gMin) {\n        gMax = 255;\n        gMin = 0;\n    }\n    if (bMax === bMin) {\n        bMax = 255;\n        bMin = 0;\n    }\n    var rMid, rGoalMax, rGoalMin, gMid, gGoalMax, gGoalMin, bMid, bGoalMax, bGoalMin;\n    if (enhanceAmount > 0) {\n        rGoalMax = rMax + enhanceAmount * (255 - rMax);\n        rGoalMin = rMin - enhanceAmount * (rMin - 0);\n        gGoalMax = gMax + enhanceAmount * (255 - gMax);\n        gGoalMin = gMin - enhanceAmount * (gMin - 0);\n        bGoalMax = bMax + enhanceAmount * (255 - bMax);\n        bGoalMin = bMin - enhanceAmount * (bMin - 0);\n    }\n    else {\n        rMid = (rMax + rMin) * 0.5;\n        rGoalMax = rMax + enhanceAmount * (rMax - rMid);\n        rGoalMin = rMin + enhanceAmount * (rMin - rMid);\n        gMid = (gMax + gMin) * 0.5;\n        gGoalMax = gMax + enhanceAmount * (gMax - gMid);\n        gGoalMin = gMin + enhanceAmount * (gMin - gMid);\n        bMid = (bMax + bMin) * 0.5;\n        bGoalMax = bMax + enhanceAmount * (bMax - bMid);\n        bGoalMin = bMin + enhanceAmount * (bMin - bMid);\n    }\n    for (i = 0; i < nSubPixels; i += 4) {\n        data[i + 0] = remap(data[i + 0], rMin, rMax, rGoalMin, rGoalMax);\n        data[i + 1] = remap(data[i + 1], gMin, gMax, gGoalMin, gGoalMax);\n        data[i + 2] = remap(data[i + 2], bMin, bMax, bGoalMin, bGoalMax);\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'enhance', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Grayscale = function (imageData) {\n    var data = imageData.data, len = data.length, i, brightness;\n    for (i = 0; i < len; i += 4) {\n        brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];\n        data[i] = brightness;\n        data[i + 1] = brightness;\n        data[i + 2] = brightness;\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'hue', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'saturation', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'luminance', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nexports.HSL = function (imageData) {\n    var data = imageData.data, nPixels = data.length, v = 1, s = Math.pow(2, this.saturation()), h = Math.abs(this.hue() + 360) % 360, l = this.luminance() * 127, i;\n    var vsu = v * s * Math.cos((h * Math.PI) / 180), vsw = v * s * Math.sin((h * Math.PI) / 180);\n    var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw, rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw, rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n    var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw, gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw, gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n    var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw, bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw, bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n    var r, g, b, a;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n        data[i + 0] = rr * r + rg * g + rb * b + l;\n        data[i + 1] = gr * r + gg * g + gb * b + l;\n        data[i + 2] = br * r + bg * g + bb * b + l;\n        data[i + 3] = a;\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.HSV = function (imageData) {\n    var data = imageData.data, nPixels = data.length, v = Math.pow(2, this.value()), s = Math.pow(2, this.saturation()), h = Math.abs(this.hue() + 360) % 360, i;\n    var vsu = v * s * Math.cos((h * Math.PI) / 180), vsw = v * s * Math.sin((h * Math.PI) / 180);\n    var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw, rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw, rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n    var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw, gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw, gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n    var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw, bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw, bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n    var r, g, b, a;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n        data[i + 0] = rr * r + rg * g + rb * b;\n        data[i + 1] = gr * r + gg * g + gb * b;\n        data[i + 2] = br * r + bg * g + bb * b;\n        data[i + 3] = a;\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'hue', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'saturation', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'value', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Invert = function (imageData) {\n    var data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 4) {\n        data[i] = 255 - data[i];\n        data[i + 1] = 255 - data[i + 1];\n        data[i + 2] = 255 - data[i + 2];\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Util_1 = require(\"../Util\");\nvar Validators_1 = require(\"../Validators\");\nvar ToPolar = function (src, dst, opt) {\n    var srcPixels = src.data, dstPixels = dst.data, xSize = src.width, ySize = src.height, xMid = opt.polarCenterX || xSize / 2, yMid = opt.polarCenterY || ySize / 2, i, x, y, r = 0, g = 0, b = 0, a = 0;\n    var rad, rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n    x = xSize - xMid;\n    y = ySize - yMid;\n    rad = Math.sqrt(x * x + y * y);\n    rMax = rad > rMax ? rad : rMax;\n    var rSize = ySize, tSize = xSize, radius, theta;\n    var conversion = ((360 / tSize) * Math.PI) / 180, sin, cos;\n    for (theta = 0; theta < tSize; theta += 1) {\n        sin = Math.sin(theta * conversion);\n        cos = Math.cos(theta * conversion);\n        for (radius = 0; radius < rSize; radius += 1) {\n            x = Math.floor(xMid + ((rMax * radius) / rSize) * cos);\n            y = Math.floor(yMid + ((rMax * radius) / rSize) * sin);\n            i = (y * xSize + x) * 4;\n            r = srcPixels[i + 0];\n            g = srcPixels[i + 1];\n            b = srcPixels[i + 2];\n            a = srcPixels[i + 3];\n            i = (theta + radius * xSize) * 4;\n            dstPixels[i + 0] = r;\n            dstPixels[i + 1] = g;\n            dstPixels[i + 2] = b;\n            dstPixels[i + 3] = a;\n        }\n    }\n};\nvar FromPolar = function (src, dst, opt) {\n    var srcPixels = src.data, dstPixels = dst.data, xSize = src.width, ySize = src.height, xMid = opt.polarCenterX || xSize / 2, yMid = opt.polarCenterY || ySize / 2, i, x, y, dx, dy, r = 0, g = 0, b = 0, a = 0;\n    var rad, rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n    x = xSize - xMid;\n    y = ySize - yMid;\n    rad = Math.sqrt(x * x + y * y);\n    rMax = rad > rMax ? rad : rMax;\n    var rSize = ySize, tSize = xSize, radius, theta, phaseShift = opt.polarRotation || 0;\n    var x1, y1;\n    for (x = 0; x < xSize; x += 1) {\n        for (y = 0; y < ySize; y += 1) {\n            dx = x - xMid;\n            dy = y - yMid;\n            radius = (Math.sqrt(dx * dx + dy * dy) * rSize) / rMax;\n            theta = ((Math.atan2(dy, dx) * 180) / Math.PI + 360 + phaseShift) % 360;\n            theta = (theta * tSize) / 360;\n            x1 = Math.floor(theta);\n            y1 = Math.floor(radius);\n            i = (y1 * xSize + x1) * 4;\n            r = srcPixels[i + 0];\n            g = srcPixels[i + 1];\n            b = srcPixels[i + 2];\n            a = srcPixels[i + 3];\n            i = (y * xSize + x) * 4;\n            dstPixels[i + 0] = r;\n            dstPixels[i + 1] = g;\n            dstPixels[i + 2] = b;\n            dstPixels[i + 3] = a;\n        }\n    }\n};\nexports.Kaleidoscope = function (imageData) {\n    var xSize = imageData.width, ySize = imageData.height;\n    var x, y, xoff, i, r, g, b, a, srcPos, dstPos;\n    var power = Math.round(this.kaleidoscopePower());\n    var angle = Math.round(this.kaleidoscopeAngle());\n    var offset = Math.floor((xSize * (angle % 360)) / 360);\n    if (power < 1) {\n        return;\n    }\n    var tempCanvas = Util_1.Util.createCanvasElement();\n    tempCanvas.width = xSize;\n    tempCanvas.height = ySize;\n    var scratchData = tempCanvas\n        .getContext('2d')\n        .getImageData(0, 0, xSize, ySize);\n    ToPolar(imageData, scratchData, {\n        polarCenterX: xSize / 2,\n        polarCenterY: ySize / 2\n    });\n    var minSectionSize = xSize / Math.pow(2, power);\n    while (minSectionSize <= 8) {\n        minSectionSize = minSectionSize * 2;\n        power -= 1;\n    }\n    minSectionSize = Math.ceil(minSectionSize);\n    var sectionSize = minSectionSize;\n    var xStart = 0, xEnd = sectionSize, xDelta = 1;\n    if (offset + minSectionSize > xSize) {\n        xStart = sectionSize;\n        xEnd = 0;\n        xDelta = -1;\n    }\n    for (y = 0; y < ySize; y += 1) {\n        for (x = xStart; x !== xEnd; x += xDelta) {\n            xoff = Math.round(x + offset) % xSize;\n            srcPos = (xSize * y + xoff) * 4;\n            r = scratchData.data[srcPos + 0];\n            g = scratchData.data[srcPos + 1];\n            b = scratchData.data[srcPos + 2];\n            a = scratchData.data[srcPos + 3];\n            dstPos = (xSize * y + x) * 4;\n            scratchData.data[dstPos + 0] = r;\n            scratchData.data[dstPos + 1] = g;\n            scratchData.data[dstPos + 2] = b;\n            scratchData.data[dstPos + 3] = a;\n        }\n    }\n    for (y = 0; y < ySize; y += 1) {\n        sectionSize = Math.floor(minSectionSize);\n        for (i = 0; i < power; i += 1) {\n            for (x = 0; x < sectionSize + 1; x += 1) {\n                srcPos = (xSize * y + x) * 4;\n                r = scratchData.data[srcPos + 0];\n                g = scratchData.data[srcPos + 1];\n                b = scratchData.data[srcPos + 2];\n                a = scratchData.data[srcPos + 3];\n                dstPos = (xSize * y + sectionSize * 2 - x - 1) * 4;\n                scratchData.data[dstPos + 0] = r;\n                scratchData.data[dstPos + 1] = g;\n                scratchData.data[dstPos + 2] = b;\n                scratchData.data[dstPos + 3] = a;\n            }\n            sectionSize *= 2;\n        }\n    }\n    FromPolar(scratchData, imageData, { polarRotation: 0 });\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'kaleidoscopePower', 2, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'kaleidoscopeAngle', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nfunction pixelAt(idata, x, y) {\n    var idx = (y * idata.width + x) * 4;\n    var d = [];\n    d.push(idata.data[idx++], idata.data[idx++], idata.data[idx++], idata.data[idx++]);\n    return d;\n}\nfunction rgbDistance(p1, p2) {\n    return Math.sqrt(Math.pow(p1[0] - p2[0], 2) +\n        Math.pow(p1[1] - p2[1], 2) +\n        Math.pow(p1[2] - p2[2], 2));\n}\nfunction rgbMean(pTab) {\n    var m = [0, 0, 0];\n    for (var i = 0; i < pTab.length; i++) {\n        m[0] += pTab[i][0];\n        m[1] += pTab[i][1];\n        m[2] += pTab[i][2];\n    }\n    m[0] /= pTab.length;\n    m[1] /= pTab.length;\n    m[2] /= pTab.length;\n    return m;\n}\nfunction backgroundMask(idata, threshold) {\n    var rgbv_no = pixelAt(idata, 0, 0);\n    var rgbv_ne = pixelAt(idata, idata.width - 1, 0);\n    var rgbv_so = pixelAt(idata, 0, idata.height - 1);\n    var rgbv_se = pixelAt(idata, idata.width - 1, idata.height - 1);\n    var thres = threshold || 10;\n    if (rgbDistance(rgbv_no, rgbv_ne) < thres &&\n        rgbDistance(rgbv_ne, rgbv_se) < thres &&\n        rgbDistance(rgbv_se, rgbv_so) < thres &&\n        rgbDistance(rgbv_so, rgbv_no) < thres) {\n        var mean = rgbMean([rgbv_ne, rgbv_no, rgbv_se, rgbv_so]);\n        var mask = [];\n        for (var i = 0; i < idata.width * idata.height; i++) {\n            var d = rgbDistance(mean, [\n                idata.data[i * 4],\n                idata.data[i * 4 + 1],\n                idata.data[i * 4 + 2]\n            ]);\n            mask[i] = d < thres ? 0 : 255;\n        }\n        return mask;\n    }\n}\nfunction applyMask(idata, mask) {\n    for (var i = 0; i < idata.width * idata.height; i++) {\n        idata.data[4 * i + 3] = mask[i];\n    }\n}\nfunction erodeMask(mask, sw, sh) {\n    var weights = [1, 1, 1, 1, 0, 1, 1, 1, 1];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a === 255 * 8 ? 255 : 0;\n        }\n    }\n    return maskResult;\n}\nfunction dilateMask(mask, sw, sh) {\n    var weights = [1, 1, 1, 1, 1, 1, 1, 1, 1];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a >= 255 * 4 ? 255 : 0;\n        }\n    }\n    return maskResult;\n}\nfunction smoothEdgeMask(mask, sw, sh) {\n    var weights = [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a;\n        }\n    }\n    return maskResult;\n}\nexports.Mask = function (imageData) {\n    var threshold = this.threshold(), mask = backgroundMask(imageData, threshold);\n    if (mask) {\n        mask = erodeMask(mask, imageData.width, imageData.height);\n        mask = dilateMask(mask, imageData.width, imageData.height);\n        mask = smoothEdgeMask(mask, imageData.width, imageData.height);\n        applyMask(imageData, mask);\n    }\n    return imageData;\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'threshold', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.Noise = function (imageData) {\n    var amount = this.noise() * 255, data = imageData.data, nPixels = data.length, half = amount / 2, i;\n    for (i = 0; i < nPixels; i += 4) {\n        data[i + 0] += half - 2 * half * Math.random();\n        data[i + 1] += half - 2 * half * Math.random();\n        data[i + 2] += half - 2 * half * Math.random();\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'noise', 0.2, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Util_1 = require(\"../Util\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.Pixelate = function (imageData) {\n    var pixelSize = Math.ceil(this.pixelSize()), width = imageData.width, height = imageData.height, x, y, i, red, green, blue, alpha, nBinsX = Math.ceil(width / pixelSize), nBinsY = Math.ceil(height / pixelSize), xBinStart, xBinEnd, yBinStart, yBinEnd, xBin, yBin, pixelsInBin, data = imageData.data;\n    if (pixelSize <= 0) {\n        Util_1.Util.error('pixelSize value can not be <= 0');\n        return;\n    }\n    for (xBin = 0; xBin < nBinsX; xBin += 1) {\n        for (yBin = 0; yBin < nBinsY; yBin += 1) {\n            red = 0;\n            green = 0;\n            blue = 0;\n            alpha = 0;\n            xBinStart = xBin * pixelSize;\n            xBinEnd = xBinStart + pixelSize;\n            yBinStart = yBin * pixelSize;\n            yBinEnd = yBinStart + pixelSize;\n            pixelsInBin = 0;\n            for (x = xBinStart; x < xBinEnd; x += 1) {\n                if (x >= width) {\n                    continue;\n                }\n                for (y = yBinStart; y < yBinEnd; y += 1) {\n                    if (y >= height) {\n                        continue;\n                    }\n                    i = (width * y + x) * 4;\n                    red += data[i + 0];\n                    green += data[i + 1];\n                    blue += data[i + 2];\n                    alpha += data[i + 3];\n                    pixelsInBin += 1;\n                }\n            }\n            red = red / pixelsInBin;\n            green = green / pixelsInBin;\n            blue = blue / pixelsInBin;\n            alpha = alpha / pixelsInBin;\n            for (x = xBinStart; x < xBinEnd; x += 1) {\n                if (x >= width) {\n                    continue;\n                }\n                for (y = yBinStart; y < yBinEnd; y += 1) {\n                    if (y >= height) {\n                        continue;\n                    }\n                    i = (width * y + x) * 4;\n                    data[i + 0] = red;\n                    data[i + 1] = green;\n                    data[i + 2] = blue;\n                    data[i + 3] = alpha;\n                }\n            }\n        }\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'pixelSize', 8, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.Posterize = function (imageData) {\n    var levels = Math.round(this.levels() * 254) + 1, data = imageData.data, len = data.length, scale = 255 / levels, i;\n    for (i = 0; i < len; i += 1) {\n        data[i] = Math.floor(data[i] / scale) * scale;\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'levels', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.RGB = function (imageData) {\n    var data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue(), i, brightness;\n    for (i = 0; i < nPixels; i += 4) {\n        brightness =\n            (0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2]) / 255;\n        data[i] = brightness * red;\n        data[i + 1] = brightness * green;\n        data[i + 2] = brightness * blue;\n        data[i + 3] = data[i + 3];\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'red', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'green', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blue', 0, Validators_1.RGBComponent, Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.RGBA = function (imageData) {\n    var data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue(), alpha = this.alpha(), i, ia;\n    for (i = 0; i < nPixels; i += 4) {\n        ia = 1 - alpha;\n        data[i] = red * alpha + data[i] * ia;\n        data[i + 1] = green * alpha + data[i + 1] * ia;\n        data[i + 2] = blue * alpha + data[i + 2] * ia;\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'red', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'green', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blue', 0, Validators_1.RGBComponent, Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'alpha', 1, function (val) {\n    this._filterUpToDate = false;\n    if (val > 1) {\n        return 1;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return val;\n    }\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sepia = function (imageData) {\n    var data = imageData.data, nPixels = data.length, i, r, g, b;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        data[i + 0] = Math.min(255, r * 0.393 + g * 0.769 + b * 0.189);\n        data[i + 1] = Math.min(255, r * 0.349 + g * 0.686 + b * 0.168);\n        data[i + 2] = Math.min(255, r * 0.272 + g * 0.534 + b * 0.131);\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Solarize = function (imageData) {\n    var data = imageData.data, w = imageData.width, h = imageData.height, w4 = w * 4, y = h;\n    do {\n        var offsetY = (y - 1) * w4;\n        var x = w;\n        do {\n            var offset = offsetY + (x - 1) * 4;\n            var r = data[offset];\n            var g = data[offset + 1];\n            var b = data[offset + 2];\n            if (r > 127) {\n                r = 255 - r;\n            }\n            if (g > 127) {\n                g = 255 - g;\n            }\n            if (b > 127) {\n                b = 255 - b;\n            }\n            data[offset] = r;\n            data[offset + 1] = g;\n            data[offset + 2] = b;\n        } while (--x);\n    } while (--y);\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.Threshold = function (imageData) {\n    var level = this.threshold() * 255, data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 1) {\n        data[i] = data[i] < level ? 0 : 255;\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'threshold', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _CoreInternals_1 = require(\"./_CoreInternals\");\nvar Arc_1 = require(\"./shapes/Arc\");\nvar Arrow_1 = require(\"./shapes/Arrow\");\nvar Circle_1 = require(\"./shapes/Circle\");\nvar Ellipse_1 = require(\"./shapes/Ellipse\");\nvar Image_1 = require(\"./shapes/Image\");\nvar Label_1 = require(\"./shapes/Label\");\nvar Line_1 = require(\"./shapes/Line\");\nvar Path_1 = require(\"./shapes/Path\");\nvar Rect_1 = require(\"./shapes/Rect\");\nvar RegularPolygon_1 = require(\"./shapes/RegularPolygon\");\nvar Ring_1 = require(\"./shapes/Ring\");\nvar Sprite_1 = require(\"./shapes/Sprite\");\nvar Star_1 = require(\"./shapes/Star\");\nvar Text_1 = require(\"./shapes/Text\");\nvar TextPath_1 = require(\"./shapes/TextPath\");\nvar Transformer_1 = require(\"./shapes/Transformer\");\nvar Wedge_1 = require(\"./shapes/Wedge\");\nvar Blur_1 = require(\"./filters/Blur\");\nvar Brighten_1 = require(\"./filters/Brighten\");\nvar Contrast_1 = require(\"./filters/Contrast\");\nvar Emboss_1 = require(\"./filters/Emboss\");\nvar Enhance_1 = require(\"./filters/Enhance\");\nvar Grayscale_1 = require(\"./filters/Grayscale\");\nvar HSL_1 = require(\"./filters/HSL\");\nvar HSV_1 = require(\"./filters/HSV\");\nvar Invert_1 = require(\"./filters/Invert\");\nvar Kaleidoscope_1 = require(\"./filters/Kaleidoscope\");\nvar Mask_1 = require(\"./filters/Mask\");\nvar Noise_1 = require(\"./filters/Noise\");\nvar Pixelate_1 = require(\"./filters/Pixelate\");\nvar Posterize_1 = require(\"./filters/Posterize\");\nvar RGB_1 = require(\"./filters/RGB\");\nvar RGBA_1 = require(\"./filters/RGBA\");\nvar Sepia_1 = require(\"./filters/Sepia\");\nvar Solarize_1 = require(\"./filters/Solarize\");\nvar Threshold_1 = require(\"./filters/Threshold\");\nexports.Konva = _CoreInternals_1.Konva.Util._assign(_CoreInternals_1.Konva, {\n    Arc: Arc_1.Arc,\n    Arrow: Arrow_1.Arrow,\n    Circle: Circle_1.Circle,\n    Ellipse: Ellipse_1.Ellipse,\n    Image: Image_1.Image,\n    Label: Label_1.Label,\n    Tag: Label_1.Tag,\n    Line: Line_1.Line,\n    Path: Path_1.Path,\n    Rect: Rect_1.Rect,\n    RegularPolygon: RegularPolygon_1.RegularPolygon,\n    Ring: Ring_1.Ring,\n    Sprite: Sprite_1.Sprite,\n    Star: Star_1.Star,\n    Text: Text_1.Text,\n    TextPath: TextPath_1.TextPath,\n    Transformer: Transformer_1.Transformer,\n    Wedge: Wedge_1.Wedge,\n    Filters: {\n        Blur: Blur_1.Blur,\n        Brighten: Brighten_1.Brighten,\n        Contrast: Contrast_1.Contrast,\n        Emboss: Emboss_1.Emboss,\n        Enhance: Enhance_1.Enhance,\n        Grayscale: Grayscale_1.Grayscale,\n        HSL: HSL_1.HSL,\n        HSV: HSV_1.HSV,\n        Invert: Invert_1.Invert,\n        Kaleidoscope: Kaleidoscope_1.Kaleidoscope,\n        Mask: Mask_1.Mask,\n        Noise: Noise_1.Noise,\n        Pixelate: Pixelate_1.Pixelate,\n        Posterize: Posterize_1.Posterize,\n        RGB: RGB_1.RGB,\n        RGBA: RGBA_1.RGBA,\n        Sepia: Sepia_1.Sepia,\n        Solarize: Solarize_1.Solarize,\n        Threshold: Threshold_1.Threshold\n    }\n});\n","var Konva = require('./_FullInternals').Konva;\nKonva._injectGlobal(Konva);\nexports['default'] = Konva;\nmodule.exports = exports['default'];\n","import Konva                from 'konva';\r\nimport PseudoClass          from './PseudoClass';\r\nimport SmartPallet          from './SmartPallet';\r\nimport {ancestorOfLayer,\r\n        containerSizeFudge} from './konvaUtil';\r\nimport verify               from '../util/verify';\r\nimport checkUnknownArgs     from '../util/checkUnknownArgs';\r\nimport {isNumber, isEqual}  from '../util/typeCheck';\r\nimport pkgManager           from './pkgManager';\r\nimport DispMode             from './DispMode';\r\nimport {toast}              from '../util/ui/notify';\r\n\r\n/**\r\n * Scene is a SmartPallet derivation that models a single Scene to be\r\n * displayed/visualized.\r\n *\r\n * A Scene represents a graphical perspective that visualizes a system\r\n * (either in part or whole).\r\n *\r\n * - a scene contains visual components, arranged in a way that\r\n *   resembles a system\r\n *\r\n * - a scene can DIRECTLY mange it's x/y properties (this is used in\r\n *   the context of a Collage, where multiple scenes are offset within\r\n *   a viewport).\r\n *\r\n * - different scenes may visualize various aspects of a system (for\r\n *   example a functional breakdown)\r\n *   * each scene INTERNALLY correlates to a separate Konva.Layer\r\n *\r\n * - FUTURE: support of user-defined functional layers:\r\n *   - scene may be further sub-divided into MULTIPLE functional layers\r\n *   - components of a scene will belong to one of these functional layers\r\n *     ... Quest: is this a direct containment, or some logical tagging?\r\n *   - this allows the visualization of these functional layers to be toggled on/off\r\n *\r\n * - FUTURE: Animation Consideration:\r\n *   - internally each scene (and their functional layers) is\r\n *     sub-divided into two Konva layers:\r\n *     - a static layer\r\n *     - an animation layer\r\n *     > NEEDS WORK: may want to do things in our static layer (like change component color)\r\n *\r\n * **NOTE**: Scene objects are pseudoClasses.  In other words Scene\r\n *           instances are considered logical types.  Take for example\r\n *           `Foo`: a Scene instance with an id of `Foo`.  The master\r\n *           `Foo` object can be defined and edited, however `Foo`\r\n *           instances (copies of the `Foo` object) may be may created\r\n *           and referenced many times within the various Collages.\r\n */\r\nexport default class Scene extends SmartPallet {\r\n\r\n  /**\r\n   * Create a Scene.\r\n   *\r\n   * **Please Note** this constructor uses named parameters.\r\n   *\r\n   * @param {string} id - the unique identifier of this scene.\r\n   * @param {string} [name=id] - the human interpretable name of this\r\n   * scene (DEFAULT to id).\r\n   *\r\n   * @param {int} [x=0] - the optional x offset of this scene within it's container (used by Collage container - managing multiple Scenes)\r\n   * @param {int} [y=0] - the optional y offset of this scene within it's container (used by Collage container - managing multiple Scenes)\r\n   *\r\n   * @param {SmartComp[]} comps - the set of components (SmartComp) that \r\n   * make up this scene (logically our display list).\r\n   */\r\n  constructor({id,\r\n               name,\r\n               x=0,\r\n               y=0,\r\n               comps,\r\n               ...unknownArgs}={}) {\r\n\r\n    super({id, name});\r\n\r\n    // validate Scene() constructor parameters\r\n    const check = verify.prefix(`${this.diagClassName()}() constructor parameter violation: `);\r\n\r\n    // ... id/name validated by base class\r\n\r\n    // ... comps\r\n    check(comps,                'comps is required');\r\n    check(Array.isArray(comps), 'comps must be a SmartComp[] array');\r\n\r\n    // ... x\r\n    check(isNumber(x), `x must be a number (when supplied), NOT: ${x}`);\r\n\r\n    // ... y\r\n    check(isNumber(y), `y must be a number (when supplied), NOT: ${y}`);\r\n\r\n    // ... unknown arguments\r\n    checkUnknownArgs(check, unknownArgs, arguments);\r\n\r\n    //***\r\n    //*** maintain self state (instance vars)\r\n    //***\r\n\r\n    // Scene objects are pseudoClasses (see NOTE above)\r\n    this.pseudoClass = new PseudoClass();\r\n\r\n    // retain parameters in self\r\n    this.x     = x;\r\n    this.y     = y;\r\n    this.comps = comps;\r\n\r\n    // maintain our parentage\r\n    this.comps.forEach( (comp) => comp.setParent(this) );\r\n  }\r\n\r\n  // support persistance by encoding needed props of self\r\n  getEncodingProps() {\r\n\r\n    // define our \"baseline\"\r\n    const encodingProps = [['x',0], ['y',0]];\r\n\r\n    // for pseudoClass MASTERs, include non-temporal props\r\n    // ... see JavaDoc for: SmartModel.getEncodingProps()\r\n    if (this.pseudoClass.isType()) {\r\n      encodingProps.push('comps');\r\n    }\r\n\r\n    return [...super.getEncodingProps(), ...encodingProps];\r\n  }      \r\n\r\n  /**\r\n   * Promote the material icon \"name\" representing self's OO classification.\r\n   */\r\n  getIconName() {\r\n    return 'photo'; // ALSO CONSIDER: crop_original\r\n  }\r\n\r\n  /**\r\n   * Add the supplied comp to this scene.\r\n   *\r\n   * @param {SmartComp} comp - the comp to add.\r\n   */\r\n  addComp(comp) {\r\n    this.comps.push(comp);\r\n    comp.setParent(this);\r\n  }\r\n\r\n  /**\r\n   * Remove self's comp as identified through the supplied compId.\r\n   *\r\n   * @param {string} compId - the id of the comp to remove.\r\n   */\r\n  removeComp(compId) {\r\n    const indx = this.comps.findIndex( (comp) => comp.id === compId);\r\n    if (indx > -1) {\r\n      this.comps.splice(indx, 1);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Enable self's \"view\" DispMode (used in top-level objects targeted by a tab).\r\n   *\r\n   * NOTE: this is also invoked prior to other display modes, as a neutral reset :-)\r\n   */\r\n  enableViewMode() {\r\n    // clear everything from any of the other DispModes\r\n    // ... sequentially follow each item in the \"other\" DispModes\r\n    this.konvaSceneLayer.getChildren().each( (konvaComp, n) => konvaComp.draggable(false) );\r\n    this.konvaSceneLayer.off('dragend');\r\n    this.containingKonvaStage.off('click tap');\r\n    this.containingKonvaStage.find('Transformer').destroy(); // remove any outstanding transformers\r\n    this.konvaSceneLayer.getChildren().each( (konvaComp, n) => konvaComp.off('transformend') );\r\n    this.konvaSceneLayer.draw();\r\n  }\r\n\r\n  /**\r\n   * Enable self's \"edit\" DispMode (used in top-level objects targeted by a tab).\r\n   */\r\n  enableEditMode() {\r\n\r\n    //***\r\n    //*** enable dragging ... to all top-level konvaComps\r\n    //***\r\n\r\n    // draggable: enable (propagate into each top-level shape/group)\r\n    this.konvaSceneLayer.getChildren().each( (konvaComp, n) => konvaComp.draggable(true) );\r\n\r\n    // monitor events at the Konva Scene Layer level (using Event Delegation and Propagation)\r\n    // ... dragend: monitor x/y changes - syncing KonvaLayer INTO our Scene SmartObject\r\n    this.konvaSceneLayer.on('dragend', (e) => {\r\n\r\n      // locate our component matching the target Konva.Group\r\n      // ... we correlate the id's between Konva/SmartObject\r\n      const konvaObj = e.target;\r\n      const id       = konvaObj.id();\r\n      const comp     = this.comps.find( (comp) => comp.id === id );\r\n      // console.log(`xx Konva Scene Layer dragend: index: ${konvaObj.index}, id: ${konvaObj.id()}, name: ${konvaObj.name()} x: ${konvaObj.x()}, y: ${konvaObj.y()} ... e:\\n`, {e, comp});\r\n\r\n      // helpers to service undo/redo\r\n      // NOTE: we use this.konvaSceneLayer (a lower-level obj) NOT this.containingKonvaStage\r\n      // IMPORTANT: all updates must be written in such a way that DOES NOT reference stale objects\r\n      //            - when using undo/redo (over the course of time) objects may be \"swapped out\" via the synchronization process\r\n      //            - SOLUTION: resolve all objects from the \"id\" string AT RUN-TIME!!\r\n      const oldLoc = {\r\n        x: comp.x,\r\n        y: comp.y\r\n      };\r\n      const newLoc = {\r\n        x: konvaObj.x(),\r\n        y: konvaObj.y()\r\n      };\r\n      const applySmartObjectChange = (loc) => {\r\n        const comp = this.comps.find( (comp) => comp.id === id );\r\n        comp.x = loc.x;\r\n        comp.y = loc.y;\r\n        return comp;\r\n      }\r\n\r\n      // apply our change\r\n      this.changeManager.applyChange({\r\n        changeFn() {\r\n          return applySmartObjectChange(newLoc);\r\n        },\r\n        undoFn() {\r\n          return applySmartObjectChange(oldLoc);\r\n        }\r\n      });\r\n\r\n    });\r\n\r\n\r\n    //***\r\n    //*** enable transformations ... to all top-level konvaComps\r\n    //***\r\n\r\n    // monitor component selection via click events\r\n    // NOTE: a click event will not trigger on Layer but on the Stage object instead\r\n    //       ... see: https://konvajs.org/docs/events/Stage_Events.html\r\n    this.containingKonvaStage.on('click tap', (e) => {\r\n\r\n      // console.log(`xx TRANSFORM: target:\\n`, e.target);\r\n\r\n      // on void click: remove all transformers\r\n      if (e.target === this.containingKonvaStage) {\r\n        this.containingKonvaStage.find('Transformer').destroy();\r\n        this.konvaSceneLayer.draw();\r\n        return;\r\n      }\r\n\r\n      // remove old transformers\r\n      this.containingKonvaStage.find('Transformer').destroy();\r\n\r\n      // our real target is the top-level group (the konva representation of our component)\r\n      const konvaComp = ancestorOfLayer(e.target);\r\n\r\n      // create/manage new transformer\r\n      var transformer = new Konva.Transformer();\r\n      this.konvaSceneLayer.add(transformer);\r\n      transformer.nodes([konvaComp]);\r\n      this.konvaSceneLayer.draw();\r\n\r\n      // sync Konva changes to Object Model\r\n      konvaComp.on('transformend', (e) => { // ... NOTE: updates x/y/rotation/scaleX/scaleY ... NOT width/height at all\r\n\r\n        // AI: there is a Konva BUG: where the 'transformend' is fired multiple times per event\r\n        //     - not only is this bad from a performance perspective\r\n        //     - BUT IT HAS BAD side-effects related to undo\r\n        //     - research this:\r\n        //       KJB: appears to be related to \"deselecting\" the transformer when undo occurs\r\n        //            ... this is the normal scenario\r\n        //            ... KJB: I really don't like how Konva does selection in it's Transformer\r\n        //     - KJB: WORK-AROUND: no-op when Konva/SmartObject have the same transformation\r\n\r\n        // locate our component matching the target Konva.Group\r\n        // ... we correlate the id's between Konva/SmartObject\r\n        const konvaObj = e.target;\r\n        const id       = konvaObj.id();\r\n        const comp     = this.comps.find( (comp) => comp.id === id );\r\n        // console.log(`xx Konva Scene Layer transformend: x: ${konvaObj.x()}, y: ${konvaObj.y()}, rotation: ${konvaObj.rotation()}, scaleX: ${konvaObj.scaleX()}, scaleY: ${konvaObj.scaleY()},  ... matching comp: `, comp);\r\n\r\n        // helpers to service undo/redo\r\n        // NOTE: we use this.konvaSceneLayer (a lower-level obj) NOT this.containingKonvaStage\r\n        // IMPORTANT: all updates must be written in such a way that DOES NOT reference stale objects\r\n        //            - when using undo/redo (over the course of time) objects may be \"swapped out\" via the synchronization process\r\n        //            - SOLUTION: resolve all objects from the \"id\" string AT RUN-TIME!!\r\n        const oldTrans = {\r\n          x:        comp.x,\r\n          y:        comp.y,\r\n          rotation: comp.rotation,\r\n          scaleX:   comp.scaleX,\r\n          scaleY:   comp.scaleY,\r\n        };\r\n        const newTrans = {\r\n          x:        konvaObj.x(),\r\n          y:        konvaObj.y(),\r\n          rotation: konvaObj.rotation(),\r\n          scaleX:   konvaObj.scaleX(),\r\n          scaleY:   konvaObj.scaleY(),\r\n        };\r\n\r\n        // no-op when Konva/SmartObject have the same transformation\r\n        // ... see: WORK-AROUND Konva BUG (above)\r\n        if (isEqual(oldTrans, newTrans)) {\r\n          // console.log('xx Scene: transformEnd NO-OP (identical transformation to self) *********************');\r\n          return;\r\n        }\r\n\r\n        const applySmartObjectChange = (trans) => {\r\n          const comp    = this.comps.find( (comp) => comp.id === id );\r\n          comp.x        = trans.x;\r\n          comp.y        = trans.y;\r\n          comp.rotation = trans.rotation;\r\n          comp.scaleX   = trans.scaleX;\r\n          comp.scaleY   = trans.scaleY;\r\n          return comp;\r\n        }\r\n\r\n        // apply our change\r\n        this.changeManager.applyChange({\r\n          changeFn() {\r\n            return applySmartObjectChange(newTrans);\r\n          },\r\n          undoFn() {\r\n            return applySmartObjectChange(oldTrans);\r\n          }\r\n        });\r\n\r\n      });\r\n\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Enable self's \"animate\" DispMode (used in top-level objects targeted by a tab).\r\n   */\r\n  enableAnimateMode() {\r\n    // yet to do\r\n  }\r\n\r\n\r\n  /**\r\n   * Provide indicator as to whether self can be copied to other sources (i.e. a DnD source)\r\n   *\r\n   * API: DnD\r\n   *\r\n   * @returns {CopySrc} a CopySrc: {type, key} ... null when NOT copyable\r\n   */\r\n  copyable() {\r\n    return {\r\n      type: 'visualize-it/Scene'.toLowerCase(), // self represents a Scene\r\n      key:  this.getPkgEntryId(),               // ex: 'com.astx.ACME/scene1'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Is the content of the supplied DnD event pastable in self (i.e. a DnD target)\r\n   *\r\n   * API: DnD\r\n   *\r\n   * @param {Event} e - the DnD event\r\n   *\r\n   * @returns {boolean} `true`: content of DnD event IS pastable, `false` otherwise\r\n   */\r\n  pastable(e) {\r\n    return e.dataTransfer.types.includes(DnDPastableType);\r\n  }\r\n\r\n  /**\r\n   * Perform the DnD paste operation of the supplied DnD event.\r\n   *\r\n   * API: DnD\r\n   *\r\n   * @param {Event} e - the DnD event\r\n   */\r\n  paste(e) {\r\n    // verify we are in edit mode\r\n    if (this.getPkgEntry().getDispMode() !== DispMode.edit) {\r\n      toast({msg: 'Drops require package entry to be in edit mode.'});\r\n      return;\r\n    }\r\n\r\n    // reconstitute our copySrc from the DnD event\r\n    const copySrc = {\r\n      type: DnDPastableType,\r\n      key:  e.dataTransfer.getData(DnDPastableType), // ... will exist based on `pastable(e)` (above)\r\n    };\r\n    // console.log(`xx pasting: `, {copySrc, onto: this});\r\n\r\n    // NOTE: we know the supplied copySrc references a SmartComp class (see pastable() method)\r\n\r\n    // helpers to service undo/redo\r\n    // IMPORTANT: all updates must be written in such a way that DOES NOT reference stale objects\r\n    //            - when using undo/redo (over the course of time) objects may be \"swapped out\" via the synchronization process\r\n    //            - SOLUTION: resolve all objects from the \"id\" string AT RUN-TIME!!\r\n    const [pkgId, className] = copySrc.key.split('/');\r\n    const compClassRef       = pkgManager.getClassRef(pkgId, className);\r\n    const compId             = `${className}-copy-${Date.now()}`; // ... unique id (for now use current time)\r\n    \r\n    // retain selfScene `this` alias\r\n    // ... NOTE: `this` IS retained in our closure, \r\n    //           HOWEVER unless changeFn() is an arrow function, it has a different `this` context\r\n    const selfScene = this;\r\n\r\n    // apply our change\r\n    this.changeManager.applyChange({\r\n      changeFn() {\r\n        // translate the DnD event's absolute page coordinates to canvas coordinates for our scene\r\n        const canvasCoord = selfScene.dndCanvasCoord(e);\r\n\r\n        // add a new comp (from the DnD drop) to our scene\r\n        const newComp = compClassRef.createSmartObject({\r\n          id: compId,\r\n          x:  canvasCoord.x,\r\n          y:  canvasCoord.y,\r\n        });\r\n        selfScene.addComp(newComp);\r\n\r\n        return newComp; // promote the new comp as our change target\r\n      },\r\n\r\n      undoFn() {\r\n        // remove the scene from our collage\r\n        selfScene.removeComp(compId);\r\n\r\n        return selfScene; // promote our scene as our change target\r\n      }\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * Verify self has been mounted.\r\n   * @param {string} [method] - the method name on which behalf we are checking.\r\n   */\r\n  checkMounted(method) {\r\n    verify(this.isMounted(), `${this.diagClassName()}.${method}() can only be invoked after mounting.`);\r\n  }\r\n\r\n  /**\r\n   * Mount the visuals of this scene, binding the graphics to the\r\n   * underlying canvas.\r\n   *\r\n   * Prior to `mount()` execution, the visualize-it object\r\n   * representation is very lightweight.\r\n   *\r\n   * @param {Konva.Stage} containingKonvaStage - the container of\r\n   * this scene (a Konva.Stage).\r\n   */\r\n  mount(containingKonvaStage) { \r\n\r\n    // retain our stage for selected event processing\r\n    this.containingKonvaStage = containingKonvaStage;\r\n\r\n    // create our layer where our components will be mounted\r\n    this.konvaSceneLayer = new Konva.Layer({\r\n      id: this.id,\r\n      x:  this.x,\r\n      y:  this.y,\r\n    });\r\n\r\n    // mount our components into this layer\r\n    this.comps.forEach( (comp) => comp.mount(this.konvaSceneLayer) );\r\n\r\n    // wire our layer into the supplied containingKonvaStage\r\n    // ... NOTE: This must be added AFTER the layer is populated :-(\r\n    //           UNSURE WHY: seems like a Konva limitation :-(\r\n    containingKonvaStage.add(this.konvaSceneLayer)\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self is mounted (i.e. bound to the Konva graphics).\r\n   *\r\n   * @returns {boolean} `true`: self is mounted, `false` otherwise\r\n   */\r\n  isMounted() {\r\n    return this.konvaSceneLayer ? true : false;\r\n  }\r\n\r\n  /**\r\n   * Unmount the visuals of this scene, unbinding the graphics to the\r\n   * underlying canvas.\r\n   *\r\n   * @param {boolean} [konvaPreDestroyed=false] - an internal\r\n   * parameter that indicates if konva nodes have already been\r\n   * destroyed (when a parent Konva.Node has already issued the\r\n   * konvaNode.destroy()).\r\n   */\r\n  unmount(konvaPreDestroyed=false) {\r\n    // destroy our Konva representation\r\n    // ... the Konva.destroy() is deep (clearing all containment)\r\n    // ... therefore, we do it conditionally, when not already accomplished by our parent\r\n    if (!konvaPreDestroyed) {\r\n      this.konvaSceneLayer.destroy();\r\n    }\r\n\r\n    // clear our konva state (established in our mount())\r\n    this.containingKonvaStage = null;\r\n    this.konvaSceneLayer      = null;\r\n    \r\n    // propagate request into our children\r\n    this.comps.forEach( (comp) => comp.unmount(true/*konvaPreDestroyed*/) );\r\n  }\r\n\r\n\r\n  /**\r\n   * Get self's current size (dynamically calculated).\r\n   *\r\n   * @returns {Size} self's current size ... {width, height}.\r\n   */\r\n  getSize() {\r\n    // cached size takes precedence\r\n    // ... this sizeCache will be re-set whenever size has the potential of changing:\r\n    //     - both in our initial mount (replacing \"approximation\" with \"exact\" size)\r\n    //     - and during interactive edit changes (reflecting an updated size)\r\n    // ... see: SmartModel.trickleUpChange()\r\n    if (this.sizeCache) {\r\n      return this.sizeCache;\r\n    }\r\n\r\n    // compute size\r\n    if (this.konvaSceneLayer) { // ... when mounted\r\n      // dynamically calculate the size from our Layer/Canvas content\r\n      const size = this.sizeCache = {width: 10, height: 10}; // ... minimum size\r\n      this.konvaSceneLayer.getChildren().each( (shape,n) => {\r\n        if (shape.getClassName() !== 'Transformer') { // ... really dislike how Konva does Transformer (making it part of our display list)\r\n          const shapeBounds = shape.getClientRect();  // ... consider transformation\r\n          size.width  = Math.max(size.width,  shapeBounds.x + shapeBounds.width   + containerSizeFudge);\r\n          size.height = Math.max(size.height, shapeBounds.y + shapeBounds.height  + containerSizeFudge); \r\n        }\r\n      });\r\n    }\r\n    else { // ... when NOT mounted\r\n      // provide initial size approximation (will be re-set when mounted)\r\n      // ... AI: depending on initial flicker (of size changing when mounted)\r\n      //         - OP1: persist the sizeCache\r\n      //                ... although doesn't help component classes (the class may contain an .approxSize property)\r\n      //         - OP1: hide content till fully mounted\r\n      //         - OP2: some polymorphic API for initialSize()/approxSize()/guesstimateSize()\r\n      //                ... UNSURE: in what object ... more research needed\r\n      this.sizeCache = {width: 100, height: 100};\r\n    }\r\n\r\n    return this.sizeCache;\r\n  }\r\n\r\n  /**\r\n   * Perform any static binding of self's size change (such as HTML or\r\n   * Konva bindings).\r\n   *\r\n   * @param {Size} oldSize - the previous size ... {width, height}.\r\n   * @param {Size} newSize - the new size ... {width, height}.\r\n   */\r\n  bindSizeChanges(oldSize, newSize) {\r\n    // sync our newSize to our Konva.Layer\r\n    // NOTE: This is NOT needed (even though originally I thought it was)\r\n    //        - according to the Konva docs, the width/height are taken from the parent stage\r\n    //          ... NOT the Layer/Canvas\r\n    //        - makes sense, because size is NOT set in any of our Layer/Canvas context\r\n    //          ... in our constructor() or our mount()\r\n    //       We must however define this method (as a no-op) to fulfill the SmartView.bindSizeChanges() abstraction\r\n    // no-op:\r\n    // this.konvaSceneLayer.size(newSize);\r\n    // this.konvaSceneLayer.draw();\r\n  }\r\n\r\n}\r\nScene.unmangledName = 'Scene';\r\n\r\n// Scene allows SmartComp objects to be pasted\r\nconst DnDPastableType = 'visualize-it/smartcomp';\r\n","//***\r\n//*** Various Konva utils\r\n//***\r\n\r\n/**\r\n * Return the supplied node's ancestor that is in the top-level Layer.\r\n */\r\nexport function ancestorOfLayer(node) {\r\n  const parentNode = node.getParent();\r\n  return parentNode.getClassName() === 'Layer' ? node : ancestorOfLayer(parentNode);\r\n}\r\n\r\n\r\n//***\r\n//*** Useful Defined Constants\r\n//***\r\n\r\nexport const containerSizeFudge = 10; // container size fudge factor increase (for good measure)\r\n","import SmartPallet       from './SmartPallet';\r\nimport Scene             from './Scene';\r\nimport verify            from '../util/verify.js';\r\nimport checkUnknownArgs  from '../util/checkUnknownArgs';\r\nimport pkgManager        from './pkgManager';\r\nimport DispMode          from './DispMode';\r\nimport {toast}           from '../util/ui/notify';\r\n\r\n/**\r\n * Collage is a SmartPallet derivation in which multiple Scenes are displayed/visualized.\r\n */\r\nexport default class Collage extends SmartPallet {\r\n\r\n  /**\r\n   * Create a Collage.\r\n   *\r\n   * **Please Note** this constructor uses named parameters.\r\n   *\r\n   * @param {string} id - the unique identifier of this  collage.\r\n   * @param {string} [name=id] - The name of this collage (DEFAULT to id).\r\n   * @param {Scene[]} scenes - the scenes visualized by this collage.\r\n   */\r\n  constructor({id, name, scenes, ...unknownArgs}={}) {\r\n    super({id, name});\r\n\r\n    // validate Collage() constructor parameters\r\n    const check = verify.prefix(`${this.diagClassName()}(id:'${id}', name:'${name}') constructor parameter violation: `);\r\n\r\n    // ... id/name validated by base class\r\n\r\n    // ... scenes\r\n    check(scenes,                 'scenes is required');\r\n    check(Array.isArray(scenes),  'scenes must be an Scene[] array');\r\n    scenes.forEach( (scene, indx) => {\r\n      check(scene instanceof Scene, `scenes[${indx}] must be a Scene instance`);\r\n    });\r\n\r\n    // ... unknown arguments\r\n    checkUnknownArgs(check, unknownArgs, arguments);\r\n\r\n    // retain derivation-specific parameters in self\r\n    this.scenes = scenes;\r\n\r\n    // maintain our parentage\r\n    this.scenes.forEach( (scene) => scene.setParent(this) );\r\n  }\r\n\r\n  // support persistance by encoding needed props of self\r\n  getEncodingProps() {\r\n    return [...super.getEncodingProps(), ...['scenes']];\r\n  }\r\n\r\n  /**\r\n   * Promote the material icon \"name\" representing self's OO classification.\r\n   */\r\n  getIconName() {\r\n    return 'filter'; // ALSO CONSIDER: dynamic_feed\r\n  }\r\n\r\n  /**\r\n   * Add the supplied scene to this collage.\r\n   *\r\n   * @param {Scene} scene - the scene to add.\r\n   */\r\n  addScene(scene) {\r\n    this.scenes.push(scene);\r\n    scene.setParent(this);\r\n  }\r\n\r\n  /**\r\n   * Remove self's scene as identified through the supplied sceneId.\r\n   *\r\n   * @param {string} sceneId - the id of the scene to remove.\r\n   */\r\n  removeScene(sceneId) {\r\n    const indx = this.scenes.findIndex( (scene) => scene.id === sceneId);\r\n    if (indx > -1) {\r\n      this.scenes.splice(indx, 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Enable self's \"view\" DispMode (used in top-level objects targeted by a tab).\r\n   *\r\n   * NOTE: this is also invoked prior to other display modes, as a neutral reset :-)\r\n   */\r\n  enableViewMode() {\r\n    // clear everything from any of the other DispModes\r\n    // ... sequentially follow each item in the \"other\" DispModes\r\n    this.scenes.forEach( (scene) => scene.konvaSceneLayer.draggable(false) );\r\n    this.containingKonvaStage.off('dragend');\r\n  }\r\n\r\n  /**\r\n   * Enable self's \"edit\" DispMode (used in top-level objects targeted by a tab).\r\n   */\r\n  enableEditMode() {\r\n    // draggable: enable (propagate into each top-level scene)\r\n    this.scenes.forEach( (scene) => scene.konvaSceneLayer.draggable(true) );\r\n\r\n    // monitor events at the Konva Stage level (using Event Delegation and Propagation)\r\n    // ... dragend: monitor x/y changes - syncing KonvaLayer INTO our Scene SmartObject\r\n    this.containingKonvaStage.on('dragend', (e) => {\r\n\r\n      // locate our scene matching the event target Konva.Layer\r\n      // ... we correlate the id's between Konva/SmartObject\r\n      const konvaObj = e.target;\r\n      const id       = konvaObj.id();\r\n      const scene    = this.scenes.find( (scene) => scene.id === id );\r\n      // console.log(`xx Konva Stage dragend: index: ${konvaObj.index}, id: ${konvaObj.id()}, name: ${konvaObj.name()} x: ${konvaObj.x()}, y: ${konvaObj.y()} ... e:\\n`, {e, scene});\r\n\r\n      // helpers to service undo/redo\r\n      // IMPORTANT: all updates must be written in such a way that DOES NOT reference stale objects\r\n      //            - when using undo/redo (over the course of time) objects may be \"swapped out\" via the synchronization process\r\n      //            - SOLUTION: resolve all objects from the \"id\" string AT RUN-TIME!!\r\n      const oldLoc = {\r\n        x: scene.x,\r\n        y: scene.y\r\n      };\r\n      const newLoc = {\r\n        x: konvaObj.x(),\r\n        y: konvaObj.y()\r\n      };\r\n\r\n      const applySmartObjectChange = (loc) => {\r\n        const scene = this.scenes.find( (scene) => scene.id === id );\r\n        scene.x = loc.x;\r\n        scene.y = loc.y;\r\n        return scene;\r\n      }\r\n\r\n      // apply our change\r\n      this.changeManager.applyChange({\r\n        changeFn() {\r\n          return applySmartObjectChange(newLoc);\r\n        },\r\n        undoFn() {\r\n          return applySmartObjectChange(oldLoc);\r\n        }\r\n      });\r\n\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Enable self's \"animate\" DispMode (used in top-level objects targeted by a tab).\r\n   */\r\n  enableAnimateMode() {\r\n    // yet to do\r\n  }\r\n\r\n  /**\r\n   * Is the content of the supplied DnD event pastable in self (i.e. a DnD target)\r\n   *\r\n   * API: DnD\r\n   *\r\n   * @param {Event} e - the DnD event\r\n   *\r\n   * @returns {boolean} `true`: content of DnD event IS pastable, `false` otherwise\r\n   */\r\n  pastable(e) {\r\n    return e.dataTransfer.types.includes(DnDPastableType);\r\n  }\r\n\r\n  /**\r\n   * Perform the DnD paste operation of the supplied DnD event.\r\n   *\r\n   * API: DnD\r\n   *\r\n   * @param {Event} e - the DnD event\r\n   */\r\n  paste(e) {\r\n    // verify we are in edit mode\r\n    if (this.getPkgEntry().getDispMode() !== DispMode.edit) {\r\n      toast({msg: 'Drops require package entry to be in edit mode.'});\r\n      return;\r\n    }\r\n\r\n    // reconstitute our copySrc from the DnD event\r\n    const copySrc = {\r\n      type: DnDPastableType,\r\n      key:  e.dataTransfer.getData(DnDPastableType), // ... will exist based on `pastable(e)` (above)\r\n    };\r\n    // console.log(`xx pasting: `, {copySrc, onto: this});\r\n\r\n    // NOTE: we know the supplied copySrc references a Scene pseudo class master (see pastable() method)\r\n\r\n    // helpers to service undo/redo\r\n    // IMPORTANT: all updates must be written in such a way that DOES NOT reference stale objects\r\n    //            - when using undo/redo (over the course of time) objects may be \"swapped out\" via the synchronization process\r\n    //            - SOLUTION: resolve all objects from the \"id\" string AT RUN-TIME!!\r\n    const [pkgId, className] = copySrc.key.split('/');\r\n    const sceneClassRef      = pkgManager.getClassRef(pkgId, className);\r\n    const sceneId            = `${className}-copy-${Date.now()}`; // ... unique id (for now use current time)\r\n    \r\n    // retain selfCollage `this` alias\r\n    // ... NOTE: `this` IS retained in our closure, \r\n    //           HOWEVER unless changeFn() is an arrow function, it has a different `this` context\r\n    const selfCollage = this;\r\n\r\n    // apply our change\r\n    this.changeManager.applyChange({\r\n      changeFn() {\r\n\r\n        // translate the DnD event's absolute page coordinates to canvas coordinates for our collage\r\n        const canvasCoord = selfCollage.dndCanvasCoord(e);\r\n\r\n        // add a new scene (from the DnD drop) to our collage\r\n        const newScene = sceneClassRef.createSmartObject({\r\n          id: sceneId,\r\n          x:  canvasCoord.x,\r\n          y:  canvasCoord.y,\r\n        });\r\n        selfCollage.addScene(newScene);\r\n\r\n        return newScene; // promote the new scene as our change target\r\n      },\r\n\r\n      undoFn() {\r\n        // remove the scene from our collage\r\n        selfCollage.removeScene(sceneId);\r\n\r\n        return selfCollage; // promote our collage as our change target\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Mount the visuals of this collage, binding the graphics to the\r\n   * underlying canvas.\r\n   *\r\n   * Prior to `mount()` execution, the visualize-it object\r\n   * representation is very lightweight.\r\n   *\r\n   * @param {Konva.Stage} containingKonvaStage - The container of\r\n   * this collage (a Konva.Stage).\r\n   */\r\n  mount(containingKonvaStage) {\r\n    // retain containingKonvaStage for event handling\r\n    this.containingKonvaStage = containingKonvaStage;\r\n\r\n    // propagate this request to each of our scenes (one canvas per scene)\r\n    this.scenes.forEach( (scene) => scene.mount(containingKonvaStage) );\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self is mounted (i.e. bound to the Konva graphics).\r\n   *\r\n   * @returns {boolean} `true`: self is mounted, `false` otherwise\r\n   */\r\n  isMounted() {\r\n    return this.containingKonvaStage ? true : false;\r\n  }\r\n\r\n  /**\r\n   * Unmount the visuals of this collage, unbinding the graphics to the\r\n   * underlying canvas.\r\n   *\r\n   * @param {boolean} [konvaPreDestroyed=false] - an internal\r\n   * parameter that indicates if konva nodes have already been\r\n   * destroyed (when a parent Konva.Node has already issued the\r\n   * konvaNode.destroy()).\r\n   */\r\n  unmount(konvaPreDestroyed=false) {\r\n    // clear our konva state (established in our mount())\r\n    this.containingKonvaStage = null;\r\n    \r\n    // propagate request into our children\r\n    this.scenes.forEach( (scene) => scene.unmount(konvaPreDestroyed) );\r\n  }\r\n\r\n  /**\r\n   * Replace self's child reference, defined by the specified params.\r\n   *\r\n   * @param {any} oldRef - the existing child to be replaced with\r\n   * `newRef`.\r\n   *\r\n   * @param {any} newRef - the new child to replace `oldRef`.\r\n   */\r\n  changeChildRef(oldRef, newRef) {\r\n    const indx = this.scenes.indexOf(oldRef);\r\n    if (indx !== -1) {\r\n      // console.log(`xx Collage.changeChildRef() ... replacing indx: ${indx}\\n`, {oldRef, newRef});\r\n      this.scenes[indx] = newRef;\r\n    }\r\n    else {\r\n      const msg = `***ERROR*** ${this.diagClassName()}.changeChildRef() [id:${this.id}]: could NOT find oldRef to replace (see logs for details)`;\r\n      console.error(msg+'\\n', {oldRef, newRef});\r\n      throw new Error(msg);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get self's current size (dynamically calculated).\r\n   *\r\n   * @returns {Size} self's current size ... {width, height}.\r\n   */\r\n  getSize() {\r\n    // cached size takes precedence\r\n    // ... this sizeCache will be re-set whenever size has the potential of changing:\r\n    //     - both in our initial mount (replacing \"approximation\" with \"exact\" size)\r\n    //     - and during interactive edit changes (reflecting an updated size)\r\n    // ... see: SmartModel.trickleUpChange()\r\n    if (this.sizeCache) {\r\n      return this.sizeCache;\r\n    }\r\n\r\n    // compute size\r\n    if (this.isMounted()) { // ... when mounted\r\n      // dynamically accumulate the size from our scenes\r\n      this.sizeCache = this.scenes.reduce( (accum, scene) => {\r\n\r\n        // recalculate this scene size\r\n        // KEY: we force the scene to recalculate it's size\r\n        //      ... by clearing it's sizeCache\r\n        //      BECAUSE our sizeCache has NOT been established (see above)\r\n        //      ... either first time, or something has changed\r\n        scene.sizeCache = undefined;\r\n        const sceneSize = scene.getSize();\r\n\r\n        // accumulate this scene size\r\n        // ... NOTE: the sceneSize already contains the scene.x/y offset\r\n        accum.width  = Math.max(accum.width,  sceneSize.width); \r\n        accum.height = Math.max(accum.height, sceneSize.height);\r\n        return accum;\r\n      }, {width:100, height:100}); // ... minimum size\r\n    }\r\n    else { // ... when NOT mounted\r\n      // provide initial size approximation (will be re-set when mounted)\r\n      // ... AI: depending on initial flicker (of size changing when mounted)\r\n      //         - OP1: persist the sizeCache\r\n      //                ... although doesn't help component classes (the class may contain an .approxSize property)\r\n      //         - OP1: hide content till fully mounted\r\n      //         - OP2: some polymorphic API for initialSize()/approxSize()/guesstimateSize()\r\n      //                ... UNSURE: in what object ... more research needed\r\n      this.sizeCache = {width: 200, height: 200};\r\n    }\r\n\r\n    return this.sizeCache;\r\n  }\r\n\r\n  /**\r\n   * Perform any static binding of self's size change (such as HTML or\r\n   * Konva bindings).\r\n   *\r\n   * @param {Size} oldSize - the previous size ... {width, height}.\r\n   * @param {Size} newSize - the new size ... {width, height}.\r\n   */\r\n  bindSizeChanges(oldSize, newSize) {\r\n    // propagate this to our scenes\r\n    // ... not really needed because our Scene currently no-ops (but that's OK)\r\n    this.scenes.forEach( (scene) => scene.bindSizeChanges(oldSize, newSize) );\r\n  }\r\n\r\n}\r\nCollage.unmangledName = 'Collage';\r\n\r\n\r\n// Collage allows Scene objects to be pasted\r\nconst DnDPastableType = 'visualize-it/scene';\r\n","import SmartPallet          from './SmartPallet';\r\nimport Scene                from './Scene';\r\nimport SmartClassRef        from './SmartClassRef';\r\nimport DispMode             from './DispMode';\r\nimport {containerSizeFudge} from './konvaUtil';\r\n\r\nimport verify               from '../util/verify';\r\nimport checkUnknownArgs     from '../util/checkUnknownArgs';\r\n\r\n\r\n/**\r\n * CompRef (a SmartPallet derivation) is a component classRef\r\n * container that can be packaged (in SmartPkg) and\r\n * displayed/visualized.  It wraps either a real class [a SmartComp\r\n * derivation], or a resource-based pseudoClass [a DynamicComp].\r\n */\r\nexport default class CompRef extends SmartPallet {\r\n\r\n  /**\r\n   * Create a CompRef.\r\n   *\r\n   * **Please Note** this constructor uses named parameters.\r\n   *\r\n   * @param {SmartClassRef} compClassRef - the compClassRef visualized by this\r\n   * compRef.\r\n   */\r\n  constructor({compClassRef, ...unknownArgs}={}) {\r\n    // derive id/name from supplied compClassRef's class name\r\n    // ... coded defensively when bad compClassRef supplied (will error in our validation - below)\r\n    const className = (compClassRef && compClassRef.getClassName) ? compClassRef.getClassName() : 'INVALID compClassRef';\r\n    super({id: className, name: className});\r\n\r\n    // validate CompRef() constructor parameters\r\n    const check = verify.prefix(`${this.diagClassName()}(id:'${this.getId()}', name:'${this.getName()}') constructor parameter violation: `);\r\n\r\n    // ... id/name validated by base class\r\n\r\n    // ... compClassRef\r\n    check(compClassRef,                          'compClassRef is required');\r\n    check(compClassRef instanceof SmartClassRef, 'compClassRef must be a SmartClassRef type');\r\n\r\n    // ... unknown arguments\r\n    checkUnknownArgs(check, unknownArgs, arguments);\r\n\r\n    // retain derivation-specific parameters in self\r\n    // this.compClassRef = compClassRef; // ... currently no need for this (except eventually for persistence - see: getEncodingProps())\r\n\r\n\r\n    //***\r\n    //*** establish the structure that gives visibility to our component\r\n    //*** ... a scene with a single component in it\r\n    //***\r\n\r\n    // instantiate a single component from self's class\r\n    // ... this is what we will visualize :-)\r\n    const compName = compClassRef.getClassName();\r\n    this.comp      = compClassRef.createSmartObject({id: `comp-${compName}`, // I think we are OK ... hopefully no other param context is needed\r\n                                                     x:  containerSizeFudge,\r\n                                                     y:  containerSizeFudge});\r\n\r\n    // wrap our single component in a scene (see NOTE above)\r\n    this.scene = new Scene({\r\n      id: `view-${compName}`,\r\n      comps: [this.comp],\r\n    });\r\n\r\n    // maintain our parentage\r\n    // ... our comp parentage is maintained by the Scene constructor (above)\r\n    this.scene.setParent(this);\r\n  }\r\n\r\n  /**\r\n   * Return the component instance being visualized.  This API is\r\n   * specific to CompRef.  It is promoted as the target of our\r\n   * visualized tab (see: TabControllerCompRef).\r\n   *\r\n   * @returns {SmartComp} the component instance being visualized via\r\n   * this CompRef.\r\n   */\r\n  getCompInstance() {\r\n    return this.comp;\r\n  }\r\n\r\n  // support persistance by encoding needed props of self\r\n  getEncodingProps() { \r\n    // AI: currently class-based CompRefs are NOT persisted\r\n    //     - this is a hard-coded assumption (as of now) found in SmartPkg.canPersist()\r\n    //     - technically, CompRef is NOT capable of persistence\r\n    //       * even though it has defined getEncodingProps() (i.e. this method)\r\n    //       * BECAUSE our compClassRef member (a SmartClassRef type) is NOT even a SmartModel\r\n    //         CURRENTLY, compClassRef will ALWAYS represent raw class (with code)\r\n    //         ... i.e. smartClassRef.isClass() === true\r\n    //     - we will have to deal with persistence once we introduce resource-based DynamicComp pseudoClass\r\n    //       ... i.e. smartClassRef.isPseudoClass() === true\r\n    //     - SOOO, technically this method is NEVER executed (again, it would not work with compClassRef)\r\n    //     - CONSIDER: it may be possible to implement the needed methods (locally) when persistence is needed\r\n    return [...super.getEncodingProps(), ...['compClassRef']];\r\n  }\r\n\r\n  /**\r\n   * Promote the material icon \"name\" representing self's OO classification.\r\n   */\r\n  getIconName() {\r\n    return 'donut_small';\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self supports the supplied `dispMode`.\r\n   *\r\n   * @param {DispMode} dispMode - the display mode to evaluate.\r\n   *\r\n   * @returns {boolean} true: can handle, false: not supported.\r\n   */\r\n  canHandleDispMode(dispMode) {\r\n    return dispMode !== DispMode.edit; // by default, SmartComps cannot be edited\r\n  }\r\n\r\n  /**\r\n   * Enable self's \"view\" DispMode (used in top-level objects targeted by a tab).\r\n   *\r\n   * NOTE: this is also invoked prior to other display modes, as a neutral reset :-)\r\n   */\r\n  enableViewMode() {\r\n    // clear everything from any of the other DispModes\r\n    // ... sequentially follow each item in the \"other\" DispModes\r\n    // L8TR: do something when edit/animate is supported\r\n  }\r\n\r\n  /**\r\n   * Enable self's \"edit\" DispMode (used in top-level objects targeted by a tab).\r\n   */\r\n  enableEditMode() {\r\n    // L8TR: do something when we support edit of DynamicComp\r\n  }\r\n\r\n  /**\r\n   * Enable self's \"animate\" DispMode (used in top-level objects targeted by a tab).\r\n   */\r\n  enableAnimateMode() {\r\n    // L8TR: do something when animate is supported\r\n  }\r\n\r\n  /**\r\n   * Provide indicator as to whether self can be copied to other sources (i.e. a DnD source)\r\n   *\r\n   * API: DnD\r\n   *\r\n   * @returns {CopySrc} a CopySrc: {type, key} ... null when NOT copyable\r\n   */\r\n  copyable() {\r\n    return {\r\n      type: 'visualize-it/SmartComp'.toLowerCase(), // self represents a SmartComp\r\n      key:  this.getPkgEntryId(),                   // ex: 'com.astx.ACME/valve1'\r\n    };\r\n  }\r\n  \r\n  /**\r\n   * Mount the visuals of this compRef, binding the graphics to the\r\n   * underlying canvas.\r\n   *\r\n   * Prior to `mount()` execution, the visualize-it object\r\n   * representation is very lightweight.\r\n   *\r\n   * @param {Konva.Stage} containingKonvaStage - The container of\r\n   * this compRef (a Konva.Stage).\r\n   */\r\n  mount(containingKonvaStage) {\r\n    // retain containingKonvaStage for event handling\r\n    this.containingKonvaStage = containingKonvaStage;\r\n\r\n    // propagate this request to our contained scene\r\n    this.scene.mount(containingKonvaStage);\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self is mounted (i.e. bound to the Konva graphics).\r\n   *\r\n   * @returns {boolean} `true`: self is mounted, `false` otherwise\r\n   */\r\n  isMounted() {\r\n    return this.containingKonvaStage ? true : false;\r\n  }\r\n\r\n  /**\r\n   * Unmount the visuals of this compRef, unbinding the graphics to the\r\n   * underlying canvas.\r\n   *\r\n   * @param {boolean} [konvaPreDestroyed=false] - an internal\r\n   * parameter that indicates if konva nodes have already been\r\n   * destroyed (when a parent Konva.Node has already issued the\r\n   * konvaNode.destroy()).\r\n   */\r\n  unmount(konvaPreDestroyed=false) {\r\n    // clear our konva state (established in our mount())\r\n    this.containingKonvaStage = null;\r\n    \r\n    // propagate request into our children\r\n    this.scene.unmount(konvaPreDestroyed);\r\n  }\r\n\r\n\r\n  /**\r\n   * Get self's current size (dynamically calculated).\r\n   *\r\n   * @returns {Size} self's current size ... {width, height}.\r\n   */\r\n  getSize() {\r\n    // cached size takes precedence\r\n    // ... this sizeCache will be re-set whenever size has the potential of changing:\r\n    //     - both in our initial mount (replacing \"approximation\" with \"exact\" size)\r\n    //     - and during interactive edit changes (reflecting an updated size)\r\n    // ... see: SmartModel.trickleUpChange()\r\n    if (this.sizeCache) {\r\n      return this.sizeCache;\r\n    }\r\n\r\n    // recalculate our size\r\n    // KEY: we force the scene to recalculate it's size\r\n    //      ... by clearing it's sizeCache\r\n    //      BECAUSE our sizeCache has NOT been established (see above)\r\n    //      ... either first time, or something has changed\r\n    this.scene.sizeCache = undefined;\r\n    this.sizeCache = this.scene.getSize(); // propagate this request to our contained scene\r\n    return this.sizeCache;\r\n  }\r\n\r\n  /**\r\n   * Perform any static binding of self's size change (such as HTML or\r\n   * Konva bindings).\r\n   *\r\n   * @param {Size} oldSize - the previous size ... {width, height}.\r\n   * @param {Size} newSize - the new size ... {width, height}.\r\n   */\r\n  bindSizeChanges(oldSize, newSize) {\r\n    // propagate this request to our contained scene\r\n    this.scene.bindSizeChanges(oldSize, newSize);\r\n  }\r\n\r\n}\r\nCompRef.unmangledName = 'CompRef';\r\n","import SmartModel        from './SmartModel';\r\nimport SmartClassRef     from './SmartClassRef';\r\nimport PseudoClass       from './PseudoClass';\r\nimport SmartPallet       from './SmartPallet';\r\nimport {ChangeManager}   from './changeManager';\r\nimport DispMode          from './DispMode';\r\nimport {isString,\r\n        isArray,\r\n        isPkg,\r\n        isPkgTree}       from '../util/typeCheck';\r\nimport verify            from '../util/verify';\r\nimport checkUnknownArgs  from '../util/checkUnknownArgs';\r\nimport {toast}           from '../util/ui/notify';\r\n\r\n/**\r\n * SmartPkg models visualize-it packages.\r\n *\r\n * SmartPkgs:\r\n *   - are cataloged by pkgManager\r\n *     ... the basis resolving classRefs in our persistence model\r\n *   - and optionally viewed in the LeftNav\r\n *     ... the basis of the builder app management (viewing/editing\r\n *         entries, including entries in other entries, etc.)\r\n *     ... LeftNav exposure is optional because some packages are NOT visual\r\n *         (such as \"core\") ... just needed for pkgManager promotion\r\n *\r\n * SmartPkg is a concrete class that can model ANY visualize-it package:\r\n *   - a component package (holding component definitions)\r\n *   - a system package (holding scenes and collages)\r\n *   - even a hybrid package (combining both component and system resources)\r\n *\r\n * A SmartPkg can represent EITHER:\r\n *   - code-based packages (containing class references)\r\n *     * NOT editable (unless we decide to dynamically manage and persist code)\r\n *     * NOT persistable ... save/retrieve (ditto)\r\n *   - resource-based packages (with NO class references)\r\n *     * editable\r\n *     * persistable ... save/retrieve\r\n *\r\n * Entries from one package can have dependencies on other external\r\n * packages (for example, a \"system\" package may contain component\r\n * instances from classes defined in a \"component\" package).\r\n *\r\n * All SmartPkgs have an ID (pkgId):\r\n *   - the ID qualifies the package through which classRefs are distributed\r\n *     * so the pkgId belongs to classRefs ONLY, NOT entries\r\n *       ... because entries are NOT shared across packages\r\n *     * SmartPkg will auto-inject it's package ID in all classRefs\r\n *       it contains!\r\n *       - this allows our persistence process to record BOTH the\r\n *         pkgId and className from which each object is\r\n *         instantiated\r\n *         ... allowing it to be re-hydrated (because we can locate the\r\n *             class - via pkgManager)\r\n *   - object instances contained in a package can be based on classes\r\n *     from external packages (i.e. dependent packages)\r\n *     ... this point is more related to persistence characteristic\r\n *         (not so much dealing with SmartPkg itself)\r\n *     * typically top-level objects are from the core package, which\r\n *       is globally available (however that is a minor point)\r\n *     * in addition, objects can be instances of classes defined\r\n *       within the same package (as you would expect)\r\n *   - SO IN SUMMARY: the distinction between \"classRef\" and \"object instance\":\r\n *     * \"instances\" ALWAYS belong to the \"self-contained\" package\r\n *     * \"instances\" can be created from types that belong to either self's package or \"other\" packages\r\n * \r\n * SmartPkg entries are held in a directory structure (with depth),\r\n * representing a visual hierarchy by which they are promoted for\r\n * human consumption.  This is defined through the PkgTree class, with\r\n * directories (a PkgTreeDir derivation) and entries (a PkgTreeEntry\r\n * derivation). Please refer to `src/sandbox` for some samples:\r\n *  - generalComps.js\r\n *  - konvaSandboxSmartPkg.js\r\n *\r\n * SmartPkg entries are promoted through two internal catalogs,\r\n * providing easy access independent of the visual directory.\r\n * The two catalogs are:\r\n * \r\n * ```\r\n *  + getClassRef(className): SmartClassRef ... used by pkgManager in it's low-level promotion of class definitions\r\n *  + getPkgEntry(entryId):   entry         ... not currently used - suspect may be needed for pseudoClass modification sync in other PkgEntries\r\n * ```\r\n */\r\nexport default class SmartPkg extends SmartModel {\r\n\r\n  /**\r\n   * Create a SmartPkg.\r\n   *\r\n   * **Please Note** this constructor uses named parameters.\r\n   *\r\n   * @param {string} id - the unique identifier of this SmartPkg\r\n   * (i.e. the package ID).  Because this must be fully unique\r\n   * across all other in-memory packages, it is recommended to use a\r\n   * \"java like\" package name (ex: com.astx.acme).\r\n   * @param {string} [name=id] - The SmartPkg name (for human consumption).\r\n   * @param {PkgTreeDir} [rootDir=emptyDir] - the optional root\r\n   * directory containing the entries of this SmartPkg.\r\n   */\r\n  constructor({id, name, rootDir=new PkgTreeDir({name:'/'}), ...unknownArgs}={}) {\r\n    super({id, name});\r\n\r\n    // validate SmartPkg() constructor parameters\r\n    const check = verify.prefix(`${this.diagClassName()}(id:'${id}', name:'${name}') constructor parameter violation: `);\r\n\r\n    // ... id/name validated by base class\r\n\r\n    // ... rootDir\r\n    check(rootDir,                       'rootDir is required');\r\n    check(rootDir instanceof PkgTreeDir, 'rootDir must be a PkgTreeDir');\r\n\r\n    // ... unknown arguments\r\n    checkUnknownArgs(check, unknownArgs, arguments);\r\n\r\n    // retain derivation-specific parameters in self\r\n    this.rootDir = rootDir;\r\n\r\n    // maintain our parentage\r\n    this.rootDir.setParent(this);\r\n\r\n    // remaining logic\r\n    // ... hook into the standard SmartModel.constructorConfig()\r\n    //     so this will be accomplished in pseudo construction too!\r\n    // ?? DO THIS -and- call it in our pseudo construction\r\n\r\n    // initialize our catalogs\r\n    this.initializeCatalogs(this.rootDir);\r\n\r\n    // introduce the value-added meta API to all our classes (including package registration)\r\n    this.adornContainedClasses();\r\n\r\n    // mark our top-level entries as PkgEntries\r\n    Object.values(this._entryCatalog).forEach( (entry) => {\r\n      entry.markAsPkgEntry(); // ... internally markAsPkgEntry() will register them to changeManager\r\n    });\r\n\r\n    // register self (EPkg/SmartPkg) to changeManager\r\n    // this maintains our this.changeManager linkage\r\n    new ChangeManager(this);\r\n\r\n    // reset the baseline crc throughout our containment tree\r\n    this.resetBaseCrc();\r\n\r\n    // console.log(`xx HERE IS A SmartPkg: `, this);\r\n  }\r\n\r\n  // support persistance by encoding needed props of self\r\n  getEncodingProps() {\r\n    return [...super.getEncodingProps(), ...['rootDir']];\r\n  }\r\n\r\n  /**\r\n   * Promote the material icon \"name\" representing self's OO classification.\r\n   */\r\n  getIconName() {\r\n    return 'bubble_chart'; // alternate: bubble_chart, group_work, color_lense (for some reason wider), dashboard, widgets, blur_circular, ballot\r\n  }\r\n\r\n  /**\r\n   * Return self's package ID (ex: 'com.astx.acme').\r\n   */\r\n  getPkgId() {\r\n    return this.id;\r\n  }\r\n\r\n  /**\r\n   * Return self's package name (ex: 'ACME System').\r\n   */\r\n  getPkgName() {\r\n    return this.name;\r\n  }\r\n\r\n  // change isaPkg() to indicate we are SmartPkg instances\r\n  isaPkg() {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Return self's pkgResourcePath (if any).\r\n   * \r\n   * When a SmartPkg is persisted (i.e. pulled from, or saved to a\r\n   * file/url), it will contain a pkgResourcePath.\r\n   * - this merely identifies it's persistent form and provides a\r\n   *   convenient means by which changes can be saved\r\n   * \r\n   * NOTE: The `pkgResourcePath` attribute is NOT persisted, rather\r\n   *       it is retained as a result of an open/save operation\r\n   *       (see: pkgPersist.js open/save operators).\r\n   *\r\n   * @returns {PkgResourcePath} the pkgResourcePath (if any),\r\n   * undefined for none.\r\n   */\r\n  getPkgResourcePath() {\r\n    return this.pkgResourcePath;\r\n  }\r\n\r\n  /**\r\n   * Set self's pkgResourcePath (see notes in getPkgResourcePath()).\r\n   *\r\n   * @param {PkgResourcePath} pkgResourcePath - the resource path\r\n   * where self is persisted.\r\n   */\r\n  setPkgResourcePath(pkgResourcePath) {\r\n    this.pkgResourcePath = pkgResourcePath;\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether this package can be persisted.\r\n   * \r\n   * NOTE: Packages that contain code cannot be persisted.\r\n   *\r\n   * @returns {boolean} true: can persist, false otherwise.\r\n   */\r\n  canPersist() {\r\n    return !this.entriesContainCode;\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self supports the supplied `dispMode`.\r\n   *\r\n   * @param {DispMode} dispMode - the display mode to evaluate.\r\n   *\r\n   * @returns {boolean} true: can handle, false: not supported.\r\n   */\r\n  canHandleDispMode(dispMode) {\r\n    return dispMode !== DispMode.animate; // SmartPkg can be viewed and edited - NOT animated\r\n  }\r\n\r\n  /**\r\n   * Enable self's \"view\" DispMode (used in top-level objects targeted by a tab).\r\n   *\r\n   * NOTE: this is also invoked prior to other display modes, as a neutral reset :-)\r\n   */\r\n  enableViewMode() {\r\n    // nothing to do, other than to enable this abstract method\r\n    // ... unlike PkgEntry objects (that setup various event handlers)\r\n    // ... SmartPkg objects merely utilize the getDispMode()\r\n  }\r\n\r\n  /**\r\n   * Enable self's \"edit\" DispMode (used in top-level objects targeted by a tab).\r\n   */\r\n  enableEditMode() {\r\n    // nothing to do, other than to enable this abstract method\r\n    // ... unlike PkgEntry objects (that setup various event handlers)\r\n    // ... SmartPkg objects merely utilize the getDispMode()\r\n  }\r\n\r\n  /**\r\n   * An internal method that recurses through self's entries,\r\n   * initializing our two catalogs.\r\n   *\r\n   * @param {PkgTree} treeNode - the current node in our directory\r\n   * being processed.\r\n   *\r\n   * @private\r\n   */\r\n  initializeCatalogs(treeNode) {\r\n\r\n    // reset our catalogs on the top-level invocation\r\n    if (treeNode === this.rootDir) {\r\n      this._classRefCatalog = {}; // key: className,   value: smartObj (a PseudoClassMaster) -OR- a raw class\r\n      this._entryCatalog    = {}; // key: smartObj.id, value: smartObj\r\n\r\n      // prime our indicator as to whether our content contains code\r\n      // ... used in determining if this package can be persisted\r\n      //     (see: `canPersist()`).\r\n      this.entriesContainCode = false; // ... start out assuming NO code\r\n    }\r\n\r\n    // for PkgTreeDirs, recurse into each node\r\n    if (treeNode.isDir()) {\r\n      const dirEntries = treeNode.getChildren();\r\n      dirEntries.forEach( (subNode) => this.initializeCatalogs(subNode) );\r\n    }\r\n\r\n    // for PkgTreeEntries, catalog them (covering BOTH entries and classes)\r\n    else if (treeNode.isEntry()) {\r\n      const smartPallet = treeNode.getEntry(); // ... Scene/Collage/CompRef\r\n\r\n      // ***\r\n      // *** catalog entries\r\n      // ***\r\n\r\n      this._entryCatalog[smartPallet.getId()] = smartPallet;\r\n\r\n\r\n      // ***\r\n      // *** catalog classes\r\n      // ***\r\n  \r\n      // both pseudo classes\r\n      if (PseudoClass.isPseudoClassMaster(smartPallet)) { // ex: Scene (master)\r\n        const pseudoClass = smartPallet;\r\n\r\n        const className = PseudoClass.getClassName(pseudoClass);\r\n        this._classRefCatalog[className] = pseudoClass;\r\n      }\r\n\r\n      // and real classes\r\n      else if (smartPallet.getCompInstance) { // isA CompRef\r\n        // components are their own proprietary class ... AI: must account for DynamicComp (once implemented)\r\n        const comp      = smartPallet.getCompInstance();\r\n        const realClass = comp.constructor;\r\n\r\n        // mark our package as containing code\r\n        this.entriesContainCode = true;\r\n\r\n        // catalog classes in our _classRefCatalog\r\n        const className = PseudoClass.getClassName(realClass);\r\n        this._classRefCatalog[className] = realClass;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * An internal method that introduces the `.smartClassRef` on all our classes, providing\r\n   * value-added utility that unifies the meta API for both real\r\n   * classes and pseudoClasses.\r\n   *\r\n   * This process ties self's package to the each class for the first time\r\n   * (registering self's package ID)!\r\n   *\r\n   * @private\r\n   */\r\n  adornContainedClasses() {\r\n    Object.values(this._classRefCatalog).forEach( (clazz) => { // clazz can be 1. smartObj (a PseudoClassMaster), or 2. a raw class\r\n      // AI: ?? what do we do if this clazz is already registered to some other package?\r\n      clazz.smartClassRef = new SmartClassRef(clazz, this.getPkgId());\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Return self's classRef matching the supplied `className` (undefined for\r\n   * not-found).\r\n   *\r\n   * NOTE: This method is a key aspect that makes pkgManager work.\r\n   *\r\n   * @param {string} className - the class name of the classRef to return.\r\n   *\r\n   * @returns {SmartClassRef} the classRef matching the supplied `className`\r\n   * (undefined for not-found).\r\n   */\r\n  getClassRef(className) {\r\n    // NOTE: To avoid name clash with SmartModel.getClassRef(), \r\n    //       an unrelated method to ours:\r\n    //       - we redirect to it based on the distinct param signature!!\r\n    //       - I really wanted to use this \"getClassRef\" in both cases\r\n    //       - This is analogous to \"Static Polymorphism\" in Java/C++,\r\n    //         where the entire method signature is employed in it's\r\n    //         polymorphic behavior :-)\r\n    if (arguments.length === 0) {\r\n      return super.getClassRef();\r\n    }\r\n\r\n    // this methods real implementation :-)\r\n    return this._classRefCatalog[className].smartClassRef;\r\n  }\r\n\r\n  /**\r\n   * Return the entry matching the supplied `entryId` (undefined for\r\n   * not-found).\r\n   *\r\n   * NOTE: Currently (as of 8/25/2020(, this method NOT being used.\r\n   *       >>> suspect may be needed for pseudoClass modification sync in other PkgEntries\r\n   *\r\n   * @param {string} entryId - the entry ID of the entry to return.\r\n   *\r\n   * @returns {PkgEntry} the entry matching the supplied `entryId`,\r\n   * `undefined` for not-found.\r\n   */\r\n  getPkgEntry(entryId) {\r\n    // NOTE: To avoid name clash with SmartModel.getPkgEntry(), \r\n    //       an unrelated method to ours:\r\n    //       - we redirect to it based on the distinct param signature!!\r\n    //       - I really wanted to use this \"getPkgEntry\" in both cases\r\n    //       - This is analogous to \"Static Polymorphism\" in Java/C++,\r\n    //         where the entire method signature is employed in it's\r\n    //         polymorphic behavior :-)\r\n    //       - NOTE: I do NOT believe this is required, due to the natural\r\n    //               invocation pattern however, we do it for good measure.\r\n    if (arguments.length === 0) {\r\n      return super.getPkgEntry();\r\n    }\r\n\r\n    // this methods real implementation :-)\r\n    return this._entryCatalog[entryId];\r\n  }\r\n\r\n  /**\r\n   * Locate the PkgTree (Entry or Dir) from the specified key.\r\n   * \r\n   * @param {string} key - the PkgTree key to find.\r\n   * \r\n   * @returns {PkgTree} the PkgTreeEntry/PkgTreeDir matching the\r\n   * supplied `key`, `undefined` for not-found.\r\n   */\r\n  findPkgTree(key) {\r\n    // validate parameters\r\n    const check = verify.prefix(`${this.diagClassName()}.findPkgTree() for obj: {id:'${this.id}', name:'${this.name}'} parameter violation: `);\r\n    // ... key\r\n    check(key,           'key is required');\r\n    check(isString(key), 'key must be a string');\r\n\r\n    // forward on to our root directory\r\n    return this.rootDir.findPkgTree(key);\r\n  }\r\n\r\n  /**\r\n   * Provide symbolic representation of self.\r\n   *\r\n   * @param {string} [treeDirective] a proprietary directive that when\r\n   * set to 'tree', will emit the PkgTree structure.\r\n   * \r\n   * @returns {string} a human consumable representation of self\r\n   */\r\n  toString(treeDirective) {\r\n    let selfStr = `SmartPkg: ${this.getPkgId()} (${this.getPkgName()})`;\r\n    if (treeDirective === 'tree') {\r\n      selfStr += '\\n' + this.rootDir.toString(1);\r\n    }\r\n    return selfStr;\r\n  }\r\n\r\n}\r\nSmartPkg.unmangledName = 'SmartPkg';\r\n\r\n\r\n\r\n/**\r\n * A tree-based structure cataloging entries and directories (with\r\n * depth) of a SmartPkg.\r\n */\r\nclass PkgTree extends SmartModel {\r\n\r\n  /**\r\n   * Create a PkgTree.\r\n   */\r\n  constructor({id, name}) {\r\n    super({id, name});\r\n\r\n    // maintain our unique and unchanging key\r\n    this.key = `PkgTreeKey-${nextPkgTreeKey++}`;\r\n  }\r\n\r\n  /**\r\n   * Self's unique and unchanging key (analogous to a memory address).\r\n   * @returns {string} self's unique and unchanging key (analogous to a memory address).\r\n   */\r\n  getKey() {\r\n    return this.key;\r\n  }\r\n\r\n\r\n  /**\r\n   * Self's PkgTree name, visualized in UI.\r\n   * NOTE: Technically this API is promoted by SmartModel, and will work (since\r\n   *       the correct name is promoted to SmartModel), HOWEVER this implementation \r\n   *       is MORE explicit!\r\n   * @returns {string} the PkgTree node name (for human consumption).\r\n   */\r\n  getName() {\r\n    throw new Error(`***ERROR*** PkgTree interface-violation: ${this.diagClassName()}.getName() is an abstract method that MUST BE implemented!`);\r\n  }\r\n\r\n  /**\r\n   * The children of self (for Dir nodes).\r\n   * @returns {PkgTree[] | undefined} the children of self's Dir node (undefined for Entry node).\r\n   */\r\n  getChildren() {\r\n    return undefined; // default implementation is: NO children\r\n  }\r\n\r\n  /**\r\n   * Self's entry (for Entry nodes).\r\n   * @returns {SmartPallet | undefined} self's Entry node (undefined for Dir nodes).\r\n   */\r\n  getEntry() {\r\n    return undefined; // default implementation is: NO entry\r\n  }\r\n\r\n  /**\r\n   * Indicator as to whether self is a PkgTree Dir node (i.e. a PkgTreeDir).\r\n   * @returns {boolean} true: PkgTreeDir, false: PkgTreeEntry\r\n   */\r\n  isDir() {\r\n    return this.getChildren() ? true : false;\r\n  }\r\n\r\n  /**\r\n   * Indicator as to whether self is a PkgTree Entry node (i.e. a PkgTreeEntry).\r\n   * @returns {boolean} true: PkgTreeEntry, false: PkgTreeDir\r\n   */\r\n  isEntry() {\r\n    return !this.isDir();\r\n  }\r\n\r\n  /**\r\n   * Indicator as to whether self is the tree root of all PkgTree entry nodes.\r\n   * @returns {boolean} true: root node, false: non-root node\r\n   */\r\n  isRoot() {\r\n    return isPkg(this.getParent()); // ... if our parent is the SmartPkg, we are the root!\r\n  }\r\n\r\n  /**\r\n   * Convenience utility returning DnD type restricting PkgTree DnD to same package.\r\n   *\r\n   * API: DnD\r\n   *\r\n   * @returns {string} a CopySrc: {type, key} ... null when NOT copyable\r\n   */\r\n  dndPastableTypeType() {\r\n    return `visualize-it/PkgTree#${this.getPkg().getPkgId()}`.toLowerCase();\r\n  }\r\n\r\n  /**\r\n   * Provide indicator as to whether self can be copied to other sources (i.e. a DnD source)\r\n   *\r\n   * API: DnD\r\n   *\r\n   * @returns {CopySrc} a CopySrc: {type, key} ... null when NOT copyable\r\n   */\r\n  copyable() {\r\n    // self is copyable ONLY when it's pkg is in edit mode\r\n    if (this.getPkg().getDispMode() !== DispMode.edit) {\r\n      return null;\r\n    }\r\n\r\n    // self represents PkgTree instance of a specific Pkg (both PkgTreeDir/PkgTreeEntry handled consistently)\r\n    return {\r\n      type: this.dndPastableTypeType(),\r\n      key:  this.getKey(),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Is the content of the supplied DnD event pastable in self (i.e. a DnD target)\r\n   *\r\n   * API: DnD\r\n   *\r\n   * @param {Event} e - the DnD event\r\n   *\r\n   * @returns {boolean} `true`: content of DnD event IS pastable, `false` otherwise\r\n   */\r\n  pastable(e) {\r\n    // console.log(`xx PkgTree.pastable(e): `, {lookingFor: this.dndPastableTypeType(), inTypes: e.dataTransfer.types});\r\n    return e.dataTransfer.types.includes(this.dndPastableTypeType());\r\n  }\r\n\r\n  /**\r\n   * Perform the DnD paste operation of the supplied DnD event.\r\n   *\r\n   * API: DnD\r\n   *\r\n   * @param {Event} e - the DnD event\r\n   * @param {string} dropZone - a directive qualifying where to place the drop (before/in/after)\r\n   */\r\n  paste(e, dropZone) {\r\n    // verify we are in edit mode\r\n    // ... NOT NEEDED: Package Edit takes a different tact\r\n    //                 disabling DnD when NOT in edit mode\r\n\r\n    // reconstitute our copySrc from the DnD event\r\n    // NOTE: we know the supplied copySrc references a PkgTree object (see pastable() method above)\r\n    const type    = this.dndPastableTypeType();\r\n    const copySrc = {\r\n      type,\r\n      key: e.dataTransfer.getData(type), // ... will exist based on `pastable(e)` (above)\r\n    };\r\n    // console.log(`XX PkgTree.paste(e): `, {copySrc});\r\n\r\n    // define our DnD from/to (both PkgTree objects)\r\n    const fromPkgTree = this.getPkg().findPkgTree(copySrc.key);\r\n    const toPkgTree   = this;\r\n    // console.log(`XX pasting more info: `, {copySrc, fromPkgTree, toPkgTree});\r\n\r\n    // NO-OP when to/from are the same (i.e. dropped on self)\r\n    // ... technically it doesn't hurt to process this\r\n    //     HOWEVER: it injects an additional/unneeded entry in the undo/redo stack\r\n    // ... AI: we could catch this earlier in the pastable(e) method above (but would be a bit more involved)\r\n    if (fromPkgTree === toPkgTree) {\r\n      return;\r\n    }\r\n\r\n    // NO-OP when duplicate paste events are detected\r\n    // BUG: There is an obscure condition where DUPLICATE paste events are registered\r\n    //      in some cases, AFTER a PkgTree directory structure changes.\r\n    //      - it is UNCLEAR if this is an app logic bug, or a svelte bug\r\n    //      - TO RECREATE (this is one, there are many):\r\n    //        1. DRAG \"More Depth\" ON \"Scene1\" (placing \"More Depth\" dir BEFORE Scene1 entry)\r\n    //        2. DRAG \"Scene1\" ON \"Scene2\"     (placing \"Scene1\" entry   BEFORE Scene2 entry -AND- moving it to a diff dir)\r\n    //           - see duplicate event (here)\r\n    //           - NOTE: Does NOT occur if you collapse/expand \"scenes\" OR \"More Depth\" node between steps 1/2\r\n    //                   This is due to the fact that we delete and re-create all DOM/events from scratch\r\n    //      - SUSPECT:\r\n    //        1. potential BUG in svelte\r\n    //           * it is unclear what is causing the dup events (it could be svelte)\r\n    //        2. some app-specific reflexivity issue in ViewPkgTree.svelte\r\n    //           * I have tried several things, but cannot find it\r\n    //           * for example:\r\n    //             - some #each/key issue\r\n    //      - WORK-AROUND:\r\n    //        * THIS NO-OP logic has circumvented the issue (for now)\r\n    //        * When there were DUP EVENTS (before this detection), you could clear the dups by:\r\n    //          - simply collapse/expand entire package (this destroys the DOM and starts over)\r\n    if (lastPkgTreePasteEvent === e) {\r\n      console.warn('*** WARNING *** PkgTree.paste(e): NO-OP: Detected duplicate paste event, ' + \r\n                   'WORK-AROUND IN PLACE (should be OK) ... see: BUG in SmartPkg.js):', {copySrc, fromPkgTree, toPkgTree});\r\n      // NO-OP\r\n      // ... NOTE: Since the retrofit using the non-changing pkgTreeKey (vs. accumulative and changing tree id)\r\n      //           it appears this no-op is no longer needed (i.e. the return)\r\n      //           HOWEVER, I'm leaving it in for now.\r\n      //           One side-effect I can think of is an additional/unneeded entry in the undo/redo stack\r\n      return;\r\n    }\r\n    else {\r\n      lastPkgTreePasteEvent = e;\r\n    }\r\n\r\n    // helpers to service undo/redo\r\n    // IMPORTANT: all updates must be written in such a way that DOES NOT reference stale objects\r\n    //            - when using undo/redo (over the course of time) objects may be \"swapped out\" via the synchronization process\r\n    //            - SOLUTION: resolve all objects from the \"id\" string AT RUN-TIME!!\r\n    const pkg = this.getPkg(); // ... the SmartPkg instance should NOT change (so we can hold onto it here)\r\n                               //     ... if not, retain the pkgId and reconstitute with pkgManager\r\n    const fromKey = fromPkgTree.getKey();\r\n    const toKey   = toPkgTree.getKey();\r\n    // ... original FROM positions are needed for undo operation\r\n    const original_fromParentKey   = fromPkgTree.getParent().getKey();\r\n    const original_fromParentIndex = fromPkgTree.getParent().getChildren().indexOf(fromPkgTree);\r\n\r\n    // apply our change\r\n    this.getPkg().changeManager.applyChange({\r\n      changeFn() {\r\n        // console.log(`\\n\\nXX PkgTree CHANGE/REDO BEFORE: ${pkg.toString('tree')}Closure Context: `, {fromKey, toKey});\r\n\r\n        // reconstitute needed object instances from our closure state\r\n        const fromNode             = pkg.findPkgTree(fromKey);\r\n        const toNode               = pkg.findPkgTree(toKey);\r\n        const prior_fromNodeParent = fromNode.getParent();\r\n\r\n        // apply the move - adjusting Package Directory structure!\r\n        // console.log(`XX in PkgTree.paste() INVOKING move(): `, {from: fromNode, to: toNode});\r\n        toNode.move(fromNode, dropZone);\r\n    \r\n        // communicate the nodes required for UI/CRC synchronization\r\n        // NOTE: CRC sync must account for PRIOR parent of fromNode\r\n        //       ... in the event we are moving it OUT of this directory\r\n        // console.log(`XX PkgTree CHANGE/REDO AFTER: ${pkg.toString('tree')}`);\r\n        return [fromNode, prior_fromNodeParent];\r\n      },\r\n    \r\n      undoFn() {\r\n        // console.log(`\\n\\nXX PkgTree UNDO BEFORE: ${pkg.toString('tree')}Closure Context: `, {fromKey, original_fromParentKey, original_fromParentIndex});\r\n\r\n        // reconstitute needed object instances from our closure state\r\n        const fromNode             = pkg.findPkgTree(fromKey);\r\n        const prior_fromNodeParent = fromNode.getParent();\r\n\r\n        // remove `fromNode` out of it's PRIOR (i.e. current) position\r\n        const prior_fromNodeIndx = prior_fromNodeParent.getChildren().indexOf(fromNode);\r\n        prior_fromNodeParent.getChildren().splice(prior_fromNodeIndx, 1);\r\n\r\n        // re-insert `fromNode` back to it's ORIGINAL position (before this change operation)\r\n        const original_fromParentNode = pkg.findPkgTree(original_fromParentKey);\r\n        original_fromParentNode.getChildren().splice(original_fromParentIndex, 0, fromNode);\r\n\r\n        // communicate the nodes required for UI/CRC synchronization\r\n        // NOTE: CRC sync must account for PRIOR parent of fromNode\r\n        //       ... in the event we are moving it OUT of this directory\r\n        // console.log(`XX PkgTree UNDO AFTER:  ${pkg.toString('tree')}`);\r\n        return [fromNode, prior_fromNodeParent];\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Move the supplied `fromPkgTree` node before self.  Both nodes must be in\r\n   * the same package, and a directory cannot be moved into it's descendant path.\r\n   *\r\n   * @param {PkgTree} fromPkgTree - the node to move (relative to self).\r\n   * @param {string} dropZone - a directive qualifying where to place the drop (before/in/after)\r\n   */\r\n  move(fromPkgTree, dropZone) {\r\n    // console.log(`XX in PkgTree.move(): `, {from: fromPkgTree, to: this, dropZone});\r\n\r\n    // validate parameters\r\n    const check = verify.prefix(`${this.diagClassName()}.move() parameter violation: `);\r\n    // ... fromPkgTree\r\n    check(fromPkgTree,            'fromPkgTree is required');\r\n    check(isPkgTree(fromPkgTree), 'fromPkgTree must be a PkgTree');\r\n    check(this.getPkg() === fromPkgTree.getPkg(), 'fromPkgTree must be in same SmartPkg as self');\r\n\r\n    // setup needed state\r\n    const fromNode   = fromPkgTree;\r\n    const fromParent = fromNode.getParent();\r\n    const toNode     = this;\r\n    const toParent   = toNode.getParent();\r\n\r\n    // no-op when fromNode/toNode are the same\r\n    // ... NOTE: this is also caught earlier (in paste() method) \r\n    //           which prevents an additional/unneeded entry in the undo/redo stack\r\n    if (fromNode === toNode) {\r\n      return;\r\n    }\r\n\r\n    // prevent the following invalid condition: a from directory cannot be moved into it's descendant path\r\n    // ... NOTE: We choose to make this check here (vs. preventing it in the DnD)\r\n    //           so as to give the user insight as to why it is not allowed.\r\n    if (fromNode.isDir() && toNode.isDescendantOf(fromNode)) {\r\n      toast({msg: `A directory CANNOT be moved into it's descendant tree.`});\r\n      return;\r\n    }\r\n\r\n    // Part I: remove fromNode from it's original source\r\n    // ... MUST be done first to accommodate cleanup when from/to share same parent\r\n    const fromNodeIndx = fromParent.getChildren().indexOf(fromNode);\r\n    fromParent.getChildren().splice(fromNodeIndx, 1);\r\n\r\n    // Part II: position toNode relative to fromNode (interpreting dropZone directive)\r\n    // ... for toNode directories with an 'in' dropZone: place fromNode as the first child of toNode directory\r\n    //     NOTE: only directories support an 'in' dropZone\r\n    if (toNode.isDir() && dropZone === 'in') {\r\n      toNode.getChildren().splice(0, 0, fromNode);\r\n    }\r\n    // ... for all other cases (a toNode directory or entry): place fromNode before/after toNode\r\n    else {\r\n      const toNodeIndx = toParent.getChildren().indexOf(toNode) + (dropZone === 'after' ? 1 : 0);\r\n      toParent.getChildren().splice(toNodeIndx, 0, fromNode);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Resync the PkgTree parentage after Pkg directory structure\r\n   * changes (used by changeManager).\r\n   *\r\n   * @param {SmartPkg|PkgTree} parent the parent of self.\r\n   */\r\n  syncParent(parent) {\r\n    this.parent = parent;\r\n    // recurse into any sub-directories\r\n    if (this.isDir()) {\r\n      this.getChildren().forEach( (child) => child.syncParent(this) );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return indicator as to whether self is a descendant of the\r\n   * supplied ancestorPkgTree.\r\n   *\r\n   * @param {PkgTree} ancestorPkgTree the ancestor to check.\r\n   * \r\n   * @returns {boolean} true: self is a decedent of ancestorPkgTree,\r\n   * false: otherwise.\r\n   */\r\n  isDescendantOf(ancestorPkgTree) {\r\n    // if self is the supplied ancestorPkgTree, we ARE a descendant\r\n    if (this === ancestorPkgTree) return true;\r\n\r\n    // if we hit the top, we are NOT a descendant\r\n    if (this.isRoot()) return false;\r\n\r\n    // keep looking up recursively\r\n    return this.getParent().isDescendantOf(ancestorPkgTree);\r\n  }\r\n\r\n  /**\r\n   * Locate the PkgTree (Entry or Dir) from the specified key.\r\n   * \r\n   * @param {string} key - the PkgTree key to find.\r\n   * \r\n   * @returns {PkgTree} the PkgTreeEntry/PkgTreeDir matching the\r\n   * supplied `key`, `undefined` for not-found.\r\n   */\r\n  findPkgTree(key) {\r\n    // NOTE: for NOT-FOUND conditions, this algorithm uses implicit returns (yielding undefined)\r\n    if (this.getKey() === key) { // found it\r\n      return this;\r\n    }\r\n    else if (this.isDir()) { // recursively keep searching directory entries\r\n      const children = this.getChildren();\r\n      for (let i=0; i<children.length; i++) {\r\n        const child   = children[i];\r\n        const pkgTree = child.findPkgTree(key);\r\n        if (pkgTree) {\r\n          return pkgTree;  // found it\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Provide symbolic representation of self - a visual indented tree\r\n   * (useful in diagnostics).\r\n   *\r\n   * @param {int} [indentLvl=0] an internal indicator as to the tree\r\n   * indentation level in effect.\r\n   * \r\n   * @returns {string} a human consumable visual indented tree of self.\r\n   */\r\n  toString(indentLvl=0) {\r\n    const indentStr = ''.padStart(indentLvl*2, ' '); // 2 spaces per indention level\r\n    let   selfStr   = indentStr + this.getName() + (this.isDir() ? '/' : '') + ` (${this.getKey()})\\n`; // basic name (with '/' on dirs)\r\n    if (this.isDir()) { // recurse on directory children\r\n      selfStr = this.getChildren().reduce( (accumStr, child) => accumStr + child.toString(indentLvl+1), selfStr );\r\n    }\r\n    return selfStr;\r\n  }\r\n\r\n}\r\nPkgTree.unmangledName = 'PkgTree';\r\n\r\n// the next PkgTree unique and unchanging key\r\nlet nextPkgTreeKey = 1;\r\n\r\n// last PkgTree paste event (used in detecting duplicate paste events\r\nlet lastPkgTreePasteEvent = null;\r\n\r\n\r\n/**\r\n * A PkgTree derivation modeling named directories.\r\n */\r\nexport class PkgTreeDir extends PkgTree { // ... a directory of PkgTree entries (PkgTree[])\r\n\r\n  /**\r\n   * Create a PkgTreeDir.\r\n   *\r\n   * **Please Note** this constructor uses named parameters.\r\n   *\r\n   * @param {string} name - the name of this directory (for human consumption).\r\n   * @param {PkgTree[]} [entries] - the optional entries of this directory.\r\n   */\r\n  constructor({name, entries=[], ...unknownArgs}={}) {\r\n    super({id: name, name});\r\n\r\n    // validate parameters\r\n    const check = verify.prefix(`${this.diagClassName()}(name:'${name}') constructor parameter violation: `);\r\n    // ... name\r\n    check(name,             'name is required');\r\n    check(isString(name),   'name must be a string');\r\n    // ... entries\r\n    check(isArray(entries), 'entries must be an array (when supplied)');\r\n    entries.forEach((entry) => check(entry instanceof PkgTree, 'entries must be a PkgTree[] array'));\r\n    // ... unknown arguments\r\n    checkUnknownArgs(check, unknownArgs, arguments);\r\n\r\n    // retain parameters in self\r\n    this.name    = name;\r\n    this.entries = entries;\r\n\r\n    // maintain our parentage\r\n    this.entries.forEach( (pkgTree) => pkgTree.setParent(this) );\r\n  }\r\n\r\n  // support persistance by encoding needed props of self\r\n  getEncodingProps() {\r\n    // because our id is derived from the supplied name, we do not want our base class encoding\r\n    // NO:\r\n//  return [...super.getEncodingProps(), ...['name', 'entries']];\r\n    // YES:\r\n    return ['name', 'entries'];\r\n  }\r\n\r\n  /**\r\n   * Self's PkgTree name, visualized in UI.\r\n   * NOTE: Technically this API is promoted by SmartModel, and will work (since\r\n   *       the correct name is promoted to SmartModel), HOWEVER this implementation \r\n   *       is MORE explicit!\r\n   * @returns {string} the PkgTree node name (for human consumption).\r\n   */\r\n  getName() {\r\n    return this.name;\r\n  }\r\n\r\n  /**\r\n   * The children of self (for Dir nodes).\r\n   * @returns {PkgTree[] | undefined} the children of self's Dir node (undefined for Entry node).\r\n   */\r\n  getChildren() {\r\n    return this.entries;\r\n  }\r\n}\r\nPkgTreeDir.unmangledName = 'PkgTreeDir';\r\n\r\n\r\n\r\n/**\r\n * A PkgTree derivation modeling concrete entries (SmartPallet entries\r\n * that are in turn PkgEntries).\r\n */\r\nexport class PkgTreeEntry extends PkgTree {\r\n\r\n  /**\r\n   * Create a PkgTreeEntry.\r\n   *\r\n   * **Please Note** this constructor uses named parameters.\r\n   *\r\n   * @param {SmartPallet} entry - the SmartPallet promoted as self's entry.\r\n   */\r\n  constructor({entry, ...unknownArgs}={}) {\r\n    // id/name coded defensively (for invalid entry param: will error out in check below)\r\n    const id   = entry.getId   ? `Wrapping SmartPallet: ${entry.getId()}`   : 'INVALID: NOT wrapping a SmartPallet';\r\n    const name = entry.getName ? `Wrapping SmartPallet: ${entry.getName()}` : 'INVALID: NOT wrapping a SmartPallet';\r\n    super({id, name});\r\n\r\n    // validate parameters\r\n    const check = verify.prefix(`${this.diagClassName()} constructor parameter violation: `);\r\n    check(entry,                         'entry is required');\r\n    check(entry instanceof SmartPallet,  'entry must be a SmartPallet');\r\n    // ... unknown arguments\r\n    checkUnknownArgs(check, unknownArgs, arguments);\r\n\r\n    // retain parameters in self\r\n    this.entry = entry;\r\n\r\n    // maintain our parentage\r\n    this.entry.setParent(this);\r\n  }\r\n\r\n  // support persistance by encoding needed props of self\r\n  getEncodingProps() {\r\n    // because our id/name is derived from the supplied SmartPallet entry, we do not want our base class encoding\r\n    // NO:\r\n//  return [...super.getEncodingProps(), ...['entry']];\r\n    // YES:\r\n    return ['entry'];\r\n  }\r\n\r\n  /**\r\n   * Self's PkgTree name, visualized in UI.\r\n   * @returns {string} the PkgTree node name (for human consumption).\r\n   */\r\n  getName() {\r\n    return this.entry.getName();\r\n  }\r\n\r\n  /**\r\n   * Self's entry (for Entry nodes).\r\n   * @returns {SmartPallet | undefined} self's Entry node (undefined for Dir nodes).\r\n   */\r\n  getEntry() {\r\n    return this.entry;\r\n  }\r\n}\r\nPkgTreeEntry.unmangledName = 'PkgTreeEntry';\r\n","import SmartModel        from './SmartModel';\r\nimport SmartPallet       from './SmartPallet';\r\nimport Konva             from 'konva';\r\nimport verify            from '../util/verify';\r\nimport checkUnknownArgs  from '../util/checkUnknownArgs';\r\nimport {createLogger}    from '../util/logger';\r\n\r\n// our internal diagnostic logger (normally disabled, but keep enabled for a while)\r\nconst log = createLogger('***DIAG*** SmartView ... ').disable();\r\n\r\n/**\r\n * SmartView is a viewport in which pallet(s) are displayed/visualized.\r\n * \r\n * Derivations of the contained SmartPallet will handle the specifics\r\n * of visualizing a single scene (Scene obj) or multiple scenes\r\n * (Collage obj).\r\n * \r\n * In all cases, this visualization can be \"displayed\":\r\n *   - in-line:  within the \"contained\" HTML DOM container\r\n *   - external: using an external browser window\r\n * TODO: this MAY BE more of a run-time consideration (rather than\r\n *       specified/retained by constructor params driven by our editor)\r\n */\r\nexport default class SmartView extends SmartModel {\r\n\r\n  /**\r\n   * Create a SmartView.\r\n   *\r\n   * **Please Note** this constructor uses named parameters.\r\n   *\r\n   * @param {string} id - the unique identifier of this view.\r\n   * @param {string} [name=id] - the human interpretable name of this\r\n   * view (DEFAULT to id).\r\n   * @param {SmartPallet} pallet - the pallet visualized in this view\r\n   * (can be a single scene (Scene obj) or multiple scenes (Collage\r\n   * obj) or a component (CompRef obj).\r\n   */\r\n  constructor({id, name, pallet, ...unknownArgs}={}) {\r\n\r\n    super({id, name});\r\n\r\n    // validate SmartView() constructor parameters\r\n    const check = verify.prefix(`${this.diagClassName()}(id:'${id}', name:'${name}') constructor parameter violation: `);\r\n    \r\n    // ... id/name validated by base class\r\n\r\n    // ... pallet\r\n    check(pallet,                        'pallet is required');\r\n    check(pallet instanceof SmartPallet, 'pallet must be a SmartPallet instance');\r\n\r\n    // ... unknown arguments\r\n    checkUnknownArgs(check, unknownArgs, arguments);\r\n    \r\n    // retain parameters in self\r\n    this.pallet = pallet;\r\n\r\n    // maintain our \"view\" containment tree parentage\r\n    this.pallet.setViewParent(this);\r\n  }\r\n\r\n  // support persistance by encoding needed props of self\r\n  // ... currently SmartView is NOT persisted\r\n  //     - the persistance entry point is SmartPkg -to- SmartPallet (skipping SmartView)\r\n  //     - however we support `getEncodingProps()` should it be needed\r\n  //       ... either a smartClone() operation or future needs of persistence\r\n  getEncodingProps() {\r\n    return [...super.getEncodingProps(), ...['pallet']];\r\n  }\r\n\r\n  // change isaView() to indicate we are SmartView instances\r\n  isaView() {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Verify self has been mounted.\r\n   * @param {string} [method] - the method name on which behalf we are checking.\r\n   */\r\n  checkMounted(method) {\r\n    verify(this.isMounted(), `${this.diagClassName()}.${method}() can only be invoked after mounting.`);\r\n  }\r\n\r\n  /**\r\n   * Get self's size.\r\n   *\r\n   * @returns {Size} our current size: {width, height}\r\n   */\r\n  getSize() {\r\n    // simply defer to our pallet size\r\n    // ... use our pallet's sizeCache (no need for our own)\r\n    return this.pallet.getSize();\r\n  }\r\n\r\n  /**\r\n   * Perform any static binding of self's size change (such as HTML or\r\n   * Konva bindings).\r\n   *\r\n   * @param {Size} oldSize - the previous size ... {width, height}.\r\n   * @param {Size} newSize - the new size ... {width, height}.\r\n   */\r\n  bindSizeChanges(oldSize, newSize) {\r\n    log(`bindSizeChanges(oldSize, newSize) id: ${this.id} ... executing`);\r\n\r\n    // sync size to our Konva.Stage\r\n    this.konvaStage.size(newSize);\r\n    this.konvaStage.draw();\r\n\r\n    // sync size to our containingHtmlElm\r\n    this.containingHtmlElm.style.width  = `${newSize.width}px`;\r\n    this.containingHtmlElm.style.height = `${newSize.height}px`;\r\n  }\r\n\r\n\r\n  /**\r\n   * Mount the visuals of this view, binding the graphics to the\r\n   * underlying canvas.\r\n   *\r\n   * Prior to `mount()` execution, the visualize-it object\r\n   * representation is very lightweight.\r\n   *\r\n   * @param {HtmlElm} containingHtmlElm - The container of this view\r\n   * (an HTML Element).\r\n   */\r\n  mount(containingHtmlElm) {\r\n    log(`mount(containingHtmlElm) id: ${this.id} ... executing`);\r\n    \r\n    // retain our containingHtmlElm\r\n    this.containingHtmlElm = containingHtmlElm;\r\n\r\n    // create our stage where our pallet will be mounted\r\n    const {width, height} = this.getSize();\r\n    this.konvaStage = new Konva.Stage({\r\n      container: containingHtmlElm,\r\n      x:         0, // we assume an offset at the origin\r\n      y:         0,\r\n      width,\r\n      height,\r\n    });\r\n    \r\n    // mount our pallet into this stage\r\n    this.pallet.mount(this.konvaStage);\r\n\r\n    // regenerate actual size, once mounting is complete\r\n    // ... propagate this request into our pallet\r\n    this.pallet.trickleUpChange();\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self is mounted (i.e. bound to the Konva graphics).\r\n   *\r\n   * @returns {boolean} `true`: self is mounted, `false` otherwise\r\n   */\r\n  isMounted() {\r\n    return this.konvaStage ? true : false;\r\n  }\r\n\r\n  /**\r\n   * Unmount the visuals of this view, unbinding the graphics to the\r\n   * underlying canvas.\r\n   *\r\n   * @param {boolean} [konvaPreDestroyed=false] - an internal\r\n   * parameter that indicates if konva nodes have already been\r\n   * destroyed (when a parent Konva.Node has already issued the\r\n   * konvaNode.destroy()).\r\n   */\r\n  unmount(konvaPreDestroyed=false) {\r\n    log(`unmount() SmartView id: ${this.id}`);\r\n\r\n    // destroy our Konva representation\r\n    // ... the Konva.destroy() is deep (clearing all containment)\r\n    // ... therefore, we do it conditionally, when not already accomplished by our parent\r\n    if (!konvaPreDestroyed) {\r\n      this.konvaStage.destroy();\r\n    }\r\n\r\n    // clear our konva state (established in our mount())\r\n    this.containingHtmlElm = null;\r\n    this.konvaStage        = null;\r\n    \r\n    // propagate request into our children\r\n    this.pallet.unmount(true/*konvaPreDestroyed*/);\r\n  }\r\n}\r\nSmartView.unmangledName = 'SmartView';\r\n","import Collage        from './Collage';\r\nimport PseudoClass    from './PseudoClass';\r\nimport Scene          from './Scene';\r\nimport CompRef        from './CompRef';\r\nimport SmartPkg,\r\n       {PkgTreeDir,\r\n        PkgTreeEntry} from './SmartPkg';\r\nimport SmartView      from './SmartView';\r\nimport pkgManager     from './pkgManager';\r\n\r\n// register our system classes that resolves the core classes\r\n// ... needed for resource-based rehydration (i.e. persistance)\r\n// ... only core \"concrete\" classes that live in SmartPkgs are registered!\r\n//     - the advantage of NOT registering abstract classes is:\r\n//         it further highlights missing \"unmangledName\" class registrations,\r\n//         manifest in a persistance rehydration attempt to instantiate \r\n//         a \"non registered\" SmartModel (as an example)\r\n\r\n// PkgManager                                 // NOT: a service object NOT part of our persistent object model\r\npkgManager.registerSystemClass(PseudoClass);\r\npkgManager.registerSystemClass(Collage);\r\npkgManager.registerSystemClass(Scene);\r\npkgManager.registerSystemClass(CompRef);\r\n// SmartComp                                  // NOT: an abstract class (see docs above)\r\n// SmartModel                                 // NOT: an abstract class (see docs above)\r\npkgManager.registerSystemClass(SmartPkg);     // the root of our persistent model\r\npkgManager.registerSystemClass(PkgTreeDir);\r\npkgManager.registerSystemClass(PkgTreeEntry);\r\n// SmartPallet                                // NOT: an abstract class (see docs above)\r\npkgManager.registerSystemClass(SmartView);\r\n","var candidateSelectors = [\n  'input',\n  'select',\n  'textarea',\n  'a[href]',\n  'button',\n  '[tabindex]',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\"])',\n];\nvar candidateSelector = candidateSelectors.join(',');\n\nvar matches = typeof Element === 'undefined'\n  ? function () {}\n  : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nfunction tabbable(el, options) {\n  options = options || {};\n\n  var regularTabbables = [];\n  var orderedTabbables = [];\n\n  var candidates = el.querySelectorAll(candidateSelector);\n\n  if (options.includeContainer) {\n    if (matches.call(el, candidateSelector)) {\n      candidates = Array.prototype.slice.apply(candidates);\n      candidates.unshift(el);\n    }\n  }\n\n  var i, candidate, candidateTabindex;\n  for (i = 0; i < candidates.length; i++) {\n    candidate = candidates[i];\n\n    if (!isNodeMatchingSelectorTabbable(candidate)) continue;\n\n    candidateTabindex = getTabindex(candidate);\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate,\n      });\n    }\n  }\n\n  var tabbableNodes = orderedTabbables\n    .sort(sortOrderedTabbables)\n    .map(function(a) { return a.node })\n    .concat(regularTabbables);\n\n  return tabbableNodes;\n}\n\ntabbable.isTabbable = isTabbable;\ntabbable.isFocusable = isFocusable;\n\nfunction isNodeMatchingSelectorTabbable(node) {\n  if (\n    !isNodeMatchingSelectorFocusable(node)\n    || isNonTabbableRadio(node)\n    || getTabindex(node) < 0\n  ) {\n    return false;\n  }\n  return true;\n}\n\nfunction isTabbable(node) {\n  if (!node) throw new Error('No node provided');\n  if (matches.call(node, candidateSelector) === false) return false;\n  return isNodeMatchingSelectorTabbable(node);\n}\n\nfunction isNodeMatchingSelectorFocusable(node) {\n  if (\n    node.disabled\n    || isHiddenInput(node)\n    || isHidden(node)\n  ) {\n    return false;\n  }\n  return true;\n}\n\nvar focusableCandidateSelector = candidateSelectors.concat('iframe').join(',');\nfunction isFocusable(node) {\n  if (!node) throw new Error('No node provided');\n  if (matches.call(node, focusableCandidateSelector) === false) return false;\n  return isNodeMatchingSelectorFocusable(node);\n}\n\nfunction getTabindex(node) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n  if (!isNaN(tabindexAttr)) return tabindexAttr;\n  // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n  if (isContentEditable(node)) return 0;\n  return node.tabIndex;\n}\n\nfunction sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n}\n\nfunction isContentEditable(node) {\n  return node.contentEditable === 'true';\n}\n\nfunction isInput(node) {\n  return node.tagName === 'INPUT';\n}\n\nfunction isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n}\n\nfunction isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n}\n\nfunction isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n}\n\nfunction getCheckedRadio(nodes) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked) {\n      return nodes[i];\n    }\n  }\n}\n\nfunction isTabbableRadio(node) {\n  if (!node.name) return true;\n  // This won't account for the edge case where you have radio groups with the same\n  // in separate forms on the same page.\n  var radioSet = node.ownerDocument.querySelectorAll('input[type=\"radio\"][name=\"' + node.name + '\"]');\n  var checked = getCheckedRadio(radioSet);\n  return !checked || checked === node;\n}\n\nfunction isHidden(node) {\n  // offsetParent being null will allow detecting cases where an element is invisible or inside an invisible element,\n  // as long as the element does not use position: fixed. For them, their visibility has to be checked directly as well.\n  return node.offsetParent === null || getComputedStyle(node).visibility === 'hidden';\n}\n\nmodule.exports = tabbable;\n","var tabbable = require('tabbable');\nvar xtend = require('xtend');\n\nvar activeFocusDelay;\n\nvar activeFocusTraps = (function() {\n  var trapQueue = [];\n  return {\n    activateTrap: function(trap) {\n      if (trapQueue.length > 0) {\n        var activeTrap = trapQueue[trapQueue.length - 1];\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      var trapIndex = trapQueue.indexOf(trap);\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n\n    deactivateTrap: function(trap) {\n      var trapIndex = trapQueue.indexOf(trap);\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    }\n  };\n})();\n\nfunction focusTrap(element, userOptions) {\n  var doc = document;\n  var container =\n    typeof element === 'string' ? doc.querySelector(element) : element;\n\n  var config = xtend(\n    {\n      returnFocusOnDeactivate: true,\n      escapeDeactivates: true\n    },\n    userOptions\n  );\n\n  var state = {\n    firstTabbableNode: null,\n    lastTabbableNode: null,\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false\n  };\n\n  var trap = {\n    activate: activate,\n    deactivate: deactivate,\n    pause: pause,\n    unpause: unpause\n  };\n\n  return trap;\n\n  function activate(activateOptions) {\n    if (state.active) return;\n\n    updateTabbableNodes();\n\n    state.active = true;\n    state.paused = false;\n    state.nodeFocusedBeforeActivation = doc.activeElement;\n\n    var onActivate =\n      activateOptions && activateOptions.onActivate\n        ? activateOptions.onActivate\n        : config.onActivate;\n    if (onActivate) {\n      onActivate();\n    }\n\n    addListeners();\n    return trap;\n  }\n\n  function deactivate(deactivateOptions) {\n    if (!state.active) return;\n\n    clearTimeout(activeFocusDelay);\n\n    removeListeners();\n    state.active = false;\n    state.paused = false;\n\n    activeFocusTraps.deactivateTrap(trap);\n\n    var onDeactivate =\n      deactivateOptions && deactivateOptions.onDeactivate !== undefined\n        ? deactivateOptions.onDeactivate\n        : config.onDeactivate;\n    if (onDeactivate) {\n      onDeactivate();\n    }\n\n    var returnFocus =\n      deactivateOptions && deactivateOptions.returnFocus !== undefined\n        ? deactivateOptions.returnFocus\n        : config.returnFocusOnDeactivate;\n    if (returnFocus) {\n      delay(function() {\n        tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n      });\n    }\n\n    return trap;\n  }\n\n  function pause() {\n    if (state.paused || !state.active) return;\n    state.paused = true;\n    removeListeners();\n  }\n\n  function unpause() {\n    if (!state.paused || !state.active) return;\n    state.paused = false;\n    updateTabbableNodes();\n    addListeners();\n  }\n\n  function addListeners() {\n    if (!state.active) return;\n\n    // There can be only one listening focus trap at a time\n    activeFocusTraps.activateTrap(trap);\n\n    // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n    activeFocusDelay = delay(function() {\n      tryFocus(getInitialFocusNode());\n    });\n\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false\n    });\n\n    return trap;\n  }\n\n  function removeListeners() {\n    if (!state.active) return;\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n\n    return trap;\n  }\n\n  function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n    var node = optionValue;\n    if (!optionValue) {\n      return null;\n    }\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue);\n      if (!node) {\n        throw new Error('`' + optionName + '` refers to no known node');\n      }\n    }\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n      if (!node) {\n        throw new Error('`' + optionName + '` did not return a node');\n      }\n    }\n    return node;\n  }\n\n  function getInitialFocusNode() {\n    var node;\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (container.contains(doc.activeElement)) {\n      node = doc.activeElement;\n    } else {\n      node = state.firstTabbableNode || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error(\n        'Your focus-trap needs to have at least one focusable element'\n      );\n    }\n\n    return node;\n  }\n\n  function getReturnFocusNode(previousActiveElement) {\n    var node = getNodeForOption('setReturnFocus');\n    return node ? node : previousActiveElement;\n  }\n\n  // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n  function checkPointerDown(e) {\n    if (container.contains(e.target)) return;\n    if (config.clickOutsideDeactivates) {\n      deactivate({\n        returnFocus: !tabbable.isFocusable(e.target)\n      });\n      return;\n    }\n    // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n    if (config.allowOutsideClick && config.allowOutsideClick(e)) {\n      return;\n    }\n    e.preventDefault();\n  }\n\n  // In case focus escapes the trap for some strange reason, pull it back in.\n  function checkFocusIn(e) {\n    // In Firefox when you Tab out of an iframe the Document is briefly focused.\n    if (container.contains(e.target) || e.target instanceof Document) {\n      return;\n    }\n    e.stopImmediatePropagation();\n    tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n  }\n\n  function checkKey(e) {\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      e.preventDefault();\n      deactivate();\n      return;\n    }\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  }\n\n  // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n  function checkTab(e) {\n    updateTabbableNodes();\n    if (e.shiftKey && e.target === state.firstTabbableNode) {\n      e.preventDefault();\n      tryFocus(state.lastTabbableNode);\n      return;\n    }\n    if (!e.shiftKey && e.target === state.lastTabbableNode) {\n      e.preventDefault();\n      tryFocus(state.firstTabbableNode);\n      return;\n    }\n  }\n\n  function checkClick(e) {\n    if (config.clickOutsideDeactivates) return;\n    if (container.contains(e.target)) return;\n    if (config.allowOutsideClick && config.allowOutsideClick(e)) {\n      return;\n    }\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }\n\n  function updateTabbableNodes() {\n    var tabbableNodes = tabbable(container);\n    state.firstTabbableNode = tabbableNodes[0] || getInitialFocusNode();\n    state.lastTabbableNode =\n      tabbableNodes[tabbableNodes.length - 1] || getInitialFocusNode();\n  }\n\n  function tryFocus(node) {\n    if (node === doc.activeElement) return;\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n    node.focus();\n    state.mostRecentlyFocusedNode = node;\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  }\n}\n\nfunction isSelectableInput(node) {\n  return (\n    node.tagName &&\n    node.tagName.toLowerCase() === 'input' &&\n    typeof node.select === 'function'\n  );\n}\n\nfunction isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n}\n\nfunction isTabEvent(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n}\n\nfunction delay(fn) {\n  return setTimeout(fn, 0);\n}\n\nmodule.exports = focusTrap;\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar cssClasses = {\n    LIST_ITEM_ACTIVATED_CLASS: 'mdc-list-item--activated',\n    LIST_ITEM_CLASS: 'mdc-list-item',\n    LIST_ITEM_DISABLED_CLASS: 'mdc-list-item--disabled',\n    LIST_ITEM_SELECTED_CLASS: 'mdc-list-item--selected',\n    ROOT: 'mdc-list',\n};\nvar strings = {\n    ACTION_EVENT: 'MDCList:action',\n    ARIA_CHECKED: 'aria-checked',\n    ARIA_CHECKED_CHECKBOX_SELECTOR: '[role=\"checkbox\"][aria-checked=\"true\"]',\n    ARIA_CHECKED_RADIO_SELECTOR: '[role=\"radio\"][aria-checked=\"true\"]',\n    ARIA_CURRENT: 'aria-current',\n    ARIA_DISABLED: 'aria-disabled',\n    ARIA_ORIENTATION: 'aria-orientation',\n    ARIA_ORIENTATION_HORIZONTAL: 'horizontal',\n    ARIA_ROLE_CHECKBOX_SELECTOR: '[role=\"checkbox\"]',\n    ARIA_SELECTED: 'aria-selected',\n    CHECKBOX_RADIO_SELECTOR: 'input[type=\"checkbox\"]:not(:disabled), input[type=\"radio\"]:not(:disabled)',\n    CHECKBOX_SELECTOR: 'input[type=\"checkbox\"]:not(:disabled)',\n    CHILD_ELEMENTS_TO_TOGGLE_TABINDEX: \"\\n    .\" + cssClasses.LIST_ITEM_CLASS + \" button:not(:disabled),\\n    .\" + cssClasses.LIST_ITEM_CLASS + \" a\\n  \",\n    FOCUSABLE_CHILD_ELEMENTS: \"\\n    .\" + cssClasses.LIST_ITEM_CLASS + \" button:not(:disabled),\\n    .\" + cssClasses.LIST_ITEM_CLASS + \" a,\\n    .\" + cssClasses.LIST_ITEM_CLASS + \" input[type=\\\"radio\\\"]:not(:disabled),\\n    .\" + cssClasses.LIST_ITEM_CLASS + \" input[type=\\\"checkbox\\\"]:not(:disabled)\\n  \",\n    RADIO_SELECTOR: 'input[type=\"radio\"]:not(:disabled)',\n};\nvar numbers = {\n    UNSET_INDEX: -1,\n};\nexport { strings, cssClasses, numbers };\n//# sourceMappingURL=constants.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { cssClasses, numbers, strings } from './constants';\nvar ELEMENTS_KEY_ALLOWED_IN = ['input', 'button', 'textarea', 'select'];\nfunction isNumberArray(selectedIndex) {\n    return selectedIndex instanceof Array;\n}\nvar MDCListFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCListFoundation, _super);\n    function MDCListFoundation(adapter) {\n        var _this = _super.call(this, tslib_1.__assign({}, MDCListFoundation.defaultAdapter, adapter)) || this;\n        _this.wrapFocus_ = false;\n        _this.isVertical_ = true;\n        _this.isSingleSelectionList_ = false;\n        _this.selectedIndex_ = numbers.UNSET_INDEX;\n        _this.focusedItemIndex_ = numbers.UNSET_INDEX;\n        _this.useActivatedClass_ = false;\n        _this.ariaCurrentAttrValue_ = null;\n        _this.isCheckboxList_ = false;\n        _this.isRadioList_ = false;\n        return _this;\n    }\n    Object.defineProperty(MDCListFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCListFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCListFoundation, \"numbers\", {\n        get: function () {\n            return numbers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCListFoundation, \"defaultAdapter\", {\n        get: function () {\n            return {\n                addClassForElementIndex: function () { return undefined; },\n                focusItemAtIndex: function () { return undefined; },\n                getAttributeForElementIndex: function () { return null; },\n                getFocusedElementIndex: function () { return 0; },\n                getListItemCount: function () { return 0; },\n                hasCheckboxAtIndex: function () { return false; },\n                hasRadioAtIndex: function () { return false; },\n                isCheckboxCheckedAtIndex: function () { return false; },\n                isFocusInsideList: function () { return false; },\n                isRootFocused: function () { return false; },\n                notifyAction: function () { return undefined; },\n                removeClassForElementIndex: function () { return undefined; },\n                setAttributeForElementIndex: function () { return undefined; },\n                setCheckedCheckboxOrRadioAtIndex: function () { return undefined; },\n                setTabIndexForListItemChildren: function () { return undefined; },\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCListFoundation.prototype.layout = function () {\n        if (this.adapter_.getListItemCount() === 0) {\n            return;\n        }\n        if (this.adapter_.hasCheckboxAtIndex(0)) {\n            this.isCheckboxList_ = true;\n        }\n        else if (this.adapter_.hasRadioAtIndex(0)) {\n            this.isRadioList_ = true;\n        }\n    };\n    /**\n     * Sets the private wrapFocus_ variable.\n     */\n    MDCListFoundation.prototype.setWrapFocus = function (value) {\n        this.wrapFocus_ = value;\n    };\n    /**\n     * Sets the isVertical_ private variable.\n     */\n    MDCListFoundation.prototype.setVerticalOrientation = function (value) {\n        this.isVertical_ = value;\n    };\n    /**\n     * Sets the isSingleSelectionList_ private variable.\n     */\n    MDCListFoundation.prototype.setSingleSelection = function (value) {\n        this.isSingleSelectionList_ = value;\n    };\n    /**\n     * Sets the useActivatedClass_ private variable.\n     */\n    MDCListFoundation.prototype.setUseActivatedClass = function (useActivated) {\n        this.useActivatedClass_ = useActivated;\n    };\n    MDCListFoundation.prototype.getSelectedIndex = function () {\n        return this.selectedIndex_;\n    };\n    MDCListFoundation.prototype.setSelectedIndex = function (index) {\n        if (!this.isIndexValid_(index)) {\n            return;\n        }\n        if (this.isCheckboxList_) {\n            this.setCheckboxAtIndex_(index);\n        }\n        else if (this.isRadioList_) {\n            this.setRadioAtIndex_(index);\n        }\n        else {\n            this.setSingleSelectionAtIndex_(index);\n        }\n    };\n    /**\n     * Focus in handler for the list items.\n     */\n    MDCListFoundation.prototype.handleFocusIn = function (_, listItemIndex) {\n        if (listItemIndex >= 0) {\n            this.adapter_.setTabIndexForListItemChildren(listItemIndex, '0');\n        }\n    };\n    /**\n     * Focus out handler for the list items.\n     */\n    MDCListFoundation.prototype.handleFocusOut = function (_, listItemIndex) {\n        var _this = this;\n        if (listItemIndex >= 0) {\n            this.adapter_.setTabIndexForListItemChildren(listItemIndex, '-1');\n        }\n        /**\n         * Between Focusout & Focusin some browsers do not have focus on any element. Setting a delay to wait till the focus\n         * is moved to next element.\n         */\n        setTimeout(function () {\n            if (!_this.adapter_.isFocusInsideList()) {\n                _this.setTabindexToFirstSelectedItem_();\n            }\n        }, 0);\n    };\n    /**\n     * Key handler for the list.\n     */\n    MDCListFoundation.prototype.handleKeydown = function (evt, isRootListItem, listItemIndex) {\n        var isArrowLeft = evt.key === 'ArrowLeft' || evt.keyCode === 37;\n        var isArrowUp = evt.key === 'ArrowUp' || evt.keyCode === 38;\n        var isArrowRight = evt.key === 'ArrowRight' || evt.keyCode === 39;\n        var isArrowDown = evt.key === 'ArrowDown' || evt.keyCode === 40;\n        var isHome = evt.key === 'Home' || evt.keyCode === 36;\n        var isEnd = evt.key === 'End' || evt.keyCode === 35;\n        var isEnter = evt.key === 'Enter' || evt.keyCode === 13;\n        var isSpace = evt.key === 'Space' || evt.keyCode === 32;\n        if (this.adapter_.isRootFocused()) {\n            if (isArrowUp || isEnd) {\n                evt.preventDefault();\n                this.focusLastElement();\n            }\n            else if (isArrowDown || isHome) {\n                evt.preventDefault();\n                this.focusFirstElement();\n            }\n            return;\n        }\n        var currentIndex = this.adapter_.getFocusedElementIndex();\n        if (currentIndex === -1) {\n            currentIndex = listItemIndex;\n            if (currentIndex < 0) {\n                // If this event doesn't have a mdc-list-item ancestor from the\n                // current list (not from a sublist), return early.\n                return;\n            }\n        }\n        var nextIndex;\n        if ((this.isVertical_ && isArrowDown) || (!this.isVertical_ && isArrowRight)) {\n            this.preventDefaultEvent_(evt);\n            nextIndex = this.focusNextElement(currentIndex);\n        }\n        else if ((this.isVertical_ && isArrowUp) || (!this.isVertical_ && isArrowLeft)) {\n            this.preventDefaultEvent_(evt);\n            nextIndex = this.focusPrevElement(currentIndex);\n        }\n        else if (isHome) {\n            this.preventDefaultEvent_(evt);\n            nextIndex = this.focusFirstElement();\n        }\n        else if (isEnd) {\n            this.preventDefaultEvent_(evt);\n            nextIndex = this.focusLastElement();\n        }\n        else if (isEnter || isSpace) {\n            if (isRootListItem) {\n                // Return early if enter key is pressed on anchor element which triggers synthetic MouseEvent event.\n                var target = evt.target;\n                if (target && target.tagName === 'A' && isEnter) {\n                    return;\n                }\n                this.preventDefaultEvent_(evt);\n                if (this.isSelectableList_()) {\n                    this.setSelectedIndexOnAction_(currentIndex);\n                }\n                this.adapter_.notifyAction(currentIndex);\n            }\n        }\n        this.focusedItemIndex_ = currentIndex;\n        if (nextIndex !== undefined) {\n            this.setTabindexAtIndex_(nextIndex);\n            this.focusedItemIndex_ = nextIndex;\n        }\n    };\n    /**\n     * Click handler for the list.\n     */\n    MDCListFoundation.prototype.handleClick = function (index, toggleCheckbox) {\n        if (index === numbers.UNSET_INDEX) {\n            return;\n        }\n        if (this.isSelectableList_()) {\n            this.setSelectedIndexOnAction_(index, toggleCheckbox);\n        }\n        this.adapter_.notifyAction(index);\n        this.setTabindexAtIndex_(index);\n        this.focusedItemIndex_ = index;\n    };\n    /**\n     * Focuses the next element on the list.\n     */\n    MDCListFoundation.prototype.focusNextElement = function (index) {\n        var count = this.adapter_.getListItemCount();\n        var nextIndex = index + 1;\n        if (nextIndex >= count) {\n            if (this.wrapFocus_) {\n                nextIndex = 0;\n            }\n            else {\n                // Return early because last item is already focused.\n                return index;\n            }\n        }\n        this.adapter_.focusItemAtIndex(nextIndex);\n        return nextIndex;\n    };\n    /**\n     * Focuses the previous element on the list.\n     */\n    MDCListFoundation.prototype.focusPrevElement = function (index) {\n        var prevIndex = index - 1;\n        if (prevIndex < 0) {\n            if (this.wrapFocus_) {\n                prevIndex = this.adapter_.getListItemCount() - 1;\n            }\n            else {\n                // Return early because first item is already focused.\n                return index;\n            }\n        }\n        this.adapter_.focusItemAtIndex(prevIndex);\n        return prevIndex;\n    };\n    MDCListFoundation.prototype.focusFirstElement = function () {\n        this.adapter_.focusItemAtIndex(0);\n        return 0;\n    };\n    MDCListFoundation.prototype.focusLastElement = function () {\n        var lastIndex = this.adapter_.getListItemCount() - 1;\n        this.adapter_.focusItemAtIndex(lastIndex);\n        return lastIndex;\n    };\n    /**\n     * @param itemIndex Index of the list item\n     * @param isEnabled Sets the list item to enabled or disabled.\n     */\n    MDCListFoundation.prototype.setEnabled = function (itemIndex, isEnabled) {\n        if (!this.isIndexValid_(itemIndex)) {\n            return;\n        }\n        if (isEnabled) {\n            this.adapter_.removeClassForElementIndex(itemIndex, cssClasses.LIST_ITEM_DISABLED_CLASS);\n            this.adapter_.setAttributeForElementIndex(itemIndex, strings.ARIA_DISABLED, 'false');\n        }\n        else {\n            this.adapter_.addClassForElementIndex(itemIndex, cssClasses.LIST_ITEM_DISABLED_CLASS);\n            this.adapter_.setAttributeForElementIndex(itemIndex, strings.ARIA_DISABLED, 'true');\n        }\n    };\n    /**\n     * Ensures that preventDefault is only called if the containing element doesn't\n     * consume the event, and it will cause an unintended scroll.\n     */\n    MDCListFoundation.prototype.preventDefaultEvent_ = function (evt) {\n        var target = evt.target;\n        var tagName = (\"\" + target.tagName).toLowerCase();\n        if (ELEMENTS_KEY_ALLOWED_IN.indexOf(tagName) === -1) {\n            evt.preventDefault();\n        }\n    };\n    MDCListFoundation.prototype.setSingleSelectionAtIndex_ = function (index) {\n        if (this.selectedIndex_ === index) {\n            return;\n        }\n        var selectedClassName = cssClasses.LIST_ITEM_SELECTED_CLASS;\n        if (this.useActivatedClass_) {\n            selectedClassName = cssClasses.LIST_ITEM_ACTIVATED_CLASS;\n        }\n        if (this.selectedIndex_ !== numbers.UNSET_INDEX) {\n            this.adapter_.removeClassForElementIndex(this.selectedIndex_, selectedClassName);\n        }\n        this.adapter_.addClassForElementIndex(index, selectedClassName);\n        this.setAriaForSingleSelectionAtIndex_(index);\n        this.selectedIndex_ = index;\n    };\n    /**\n     * Sets aria attribute for single selection at given index.\n     */\n    MDCListFoundation.prototype.setAriaForSingleSelectionAtIndex_ = function (index) {\n        // Detect the presence of aria-current and get the value only during list initialization when it is in unset state.\n        if (this.selectedIndex_ === numbers.UNSET_INDEX) {\n            this.ariaCurrentAttrValue_ =\n                this.adapter_.getAttributeForElementIndex(index, strings.ARIA_CURRENT);\n        }\n        var isAriaCurrent = this.ariaCurrentAttrValue_ !== null;\n        var ariaAttribute = isAriaCurrent ? strings.ARIA_CURRENT : strings.ARIA_SELECTED;\n        if (this.selectedIndex_ !== numbers.UNSET_INDEX) {\n            this.adapter_.setAttributeForElementIndex(this.selectedIndex_, ariaAttribute, 'false');\n        }\n        var ariaAttributeValue = isAriaCurrent ? this.ariaCurrentAttrValue_ : 'true';\n        this.adapter_.setAttributeForElementIndex(index, ariaAttribute, ariaAttributeValue);\n    };\n    /**\n     * Toggles radio at give index. Radio doesn't change the checked state if it is already checked.\n     */\n    MDCListFoundation.prototype.setRadioAtIndex_ = function (index) {\n        this.adapter_.setCheckedCheckboxOrRadioAtIndex(index, true);\n        if (this.selectedIndex_ !== numbers.UNSET_INDEX) {\n            this.adapter_.setAttributeForElementIndex(this.selectedIndex_, strings.ARIA_CHECKED, 'false');\n        }\n        this.adapter_.setAttributeForElementIndex(index, strings.ARIA_CHECKED, 'true');\n        this.selectedIndex_ = index;\n    };\n    MDCListFoundation.prototype.setCheckboxAtIndex_ = function (index) {\n        for (var i = 0; i < this.adapter_.getListItemCount(); i++) {\n            var isChecked = false;\n            if (index.indexOf(i) >= 0) {\n                isChecked = true;\n            }\n            this.adapter_.setCheckedCheckboxOrRadioAtIndex(i, isChecked);\n            this.adapter_.setAttributeForElementIndex(i, strings.ARIA_CHECKED, isChecked ? 'true' : 'false');\n        }\n        this.selectedIndex_ = index;\n    };\n    MDCListFoundation.prototype.setTabindexAtIndex_ = function (index) {\n        if (this.focusedItemIndex_ === numbers.UNSET_INDEX && index !== 0) {\n            // If no list item was selected set first list item's tabindex to -1.\n            // Generally, tabindex is set to 0 on first list item of list that has no preselected items.\n            this.adapter_.setAttributeForElementIndex(0, 'tabindex', '-1');\n        }\n        else if (this.focusedItemIndex_ >= 0 && this.focusedItemIndex_ !== index) {\n            this.adapter_.setAttributeForElementIndex(this.focusedItemIndex_, 'tabindex', '-1');\n        }\n        this.adapter_.setAttributeForElementIndex(index, 'tabindex', '0');\n    };\n    /**\n     * @return Return true if it is single selectin list, checkbox list or radio list.\n     */\n    MDCListFoundation.prototype.isSelectableList_ = function () {\n        return this.isSingleSelectionList_ || this.isCheckboxList_ || this.isRadioList_;\n    };\n    MDCListFoundation.prototype.setTabindexToFirstSelectedItem_ = function () {\n        var targetIndex = 0;\n        if (this.isSelectableList_()) {\n            if (typeof this.selectedIndex_ === 'number' && this.selectedIndex_ !== numbers.UNSET_INDEX) {\n                targetIndex = this.selectedIndex_;\n            }\n            else if (isNumberArray(this.selectedIndex_) && this.selectedIndex_.length > 0) {\n                targetIndex = this.selectedIndex_.reduce(function (currentIndex, minIndex) { return Math.min(currentIndex, minIndex); });\n            }\n        }\n        this.setTabindexAtIndex_(targetIndex);\n    };\n    MDCListFoundation.prototype.isIndexValid_ = function (index) {\n        var _this = this;\n        if (index instanceof Array) {\n            if (!this.isCheckboxList_) {\n                throw new Error('MDCListFoundation: Array of index is only supported for checkbox based list');\n            }\n            if (index.length === 0) {\n                return true;\n            }\n            else {\n                return index.some(function (i) { return _this.isIndexInRange_(i); });\n            }\n        }\n        else if (typeof index === 'number') {\n            if (this.isCheckboxList_) {\n                throw new Error('MDCListFoundation: Expected array of index for checkbox based list but got number: ' + index);\n            }\n            return this.isIndexInRange_(index);\n        }\n        else {\n            return false;\n        }\n    };\n    MDCListFoundation.prototype.isIndexInRange_ = function (index) {\n        var listSize = this.adapter_.getListItemCount();\n        return index >= 0 && index < listSize;\n    };\n    MDCListFoundation.prototype.setSelectedIndexOnAction_ = function (index, toggleCheckbox) {\n        if (toggleCheckbox === void 0) { toggleCheckbox = true; }\n        if (this.isCheckboxList_) {\n            this.toggleCheckboxAtIndex_(index, toggleCheckbox);\n        }\n        else {\n            this.setSelectedIndex(index);\n        }\n    };\n    MDCListFoundation.prototype.toggleCheckboxAtIndex_ = function (index, toggleCheckbox) {\n        var isChecked = this.adapter_.isCheckboxCheckedAtIndex(index);\n        if (toggleCheckbox) {\n            isChecked = !isChecked;\n            this.adapter_.setCheckedCheckboxOrRadioAtIndex(index, isChecked);\n        }\n        this.adapter_.setAttributeForElementIndex(index, strings.ARIA_CHECKED, isChecked ? 'true' : 'false');\n        // If none of the checkbox items are selected and selectedIndex is not initialized then provide a default value.\n        var selectedIndexes = this.selectedIndex_ === numbers.UNSET_INDEX ? [] : this.selectedIndex_.slice();\n        if (isChecked) {\n            selectedIndexes.push(index);\n        }\n        else {\n            selectedIndexes = selectedIndexes.filter(function (i) { return i !== index; });\n        }\n        this.selectedIndex_ = selectedIndexes;\n    };\n    return MDCListFoundation;\n}(MDCFoundation));\nexport { MDCListFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCListFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCComponent } from '@material/base/component';\nimport { closest, matches } from '@material/dom/ponyfill';\nimport { cssClasses, strings } from './constants';\nimport { MDCListFoundation } from './foundation';\nvar MDCList = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCList, _super);\n    function MDCList() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(MDCList.prototype, \"vertical\", {\n        set: function (value) {\n            this.foundation_.setVerticalOrientation(value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCList.prototype, \"listElements\", {\n        get: function () {\n            return [].slice.call(this.root_.querySelectorAll(\".\" + cssClasses.LIST_ITEM_CLASS));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCList.prototype, \"wrapFocus\", {\n        set: function (value) {\n            this.foundation_.setWrapFocus(value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCList.prototype, \"singleSelection\", {\n        set: function (isSingleSelectionList) {\n            this.foundation_.setSingleSelection(isSingleSelectionList);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCList.prototype, \"selectedIndex\", {\n        get: function () {\n            return this.foundation_.getSelectedIndex();\n        },\n        set: function (index) {\n            this.foundation_.setSelectedIndex(index);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCList.attachTo = function (root) {\n        return new MDCList(root);\n    };\n    MDCList.prototype.initialSyncWithDOM = function () {\n        this.handleClick_ = this.handleClickEvent_.bind(this);\n        this.handleKeydown_ = this.handleKeydownEvent_.bind(this);\n        this.focusInEventListener_ = this.handleFocusInEvent_.bind(this);\n        this.focusOutEventListener_ = this.handleFocusOutEvent_.bind(this);\n        this.listen('keydown', this.handleKeydown_);\n        this.listen('click', this.handleClick_);\n        this.listen('focusin', this.focusInEventListener_);\n        this.listen('focusout', this.focusOutEventListener_);\n        this.layout();\n        this.initializeListType();\n    };\n    MDCList.prototype.destroy = function () {\n        this.unlisten('keydown', this.handleKeydown_);\n        this.unlisten('click', this.handleClick_);\n        this.unlisten('focusin', this.focusInEventListener_);\n        this.unlisten('focusout', this.focusOutEventListener_);\n    };\n    MDCList.prototype.layout = function () {\n        var direction = this.root_.getAttribute(strings.ARIA_ORIENTATION);\n        this.vertical = direction !== strings.ARIA_ORIENTATION_HORIZONTAL;\n        // List items need to have at least tabindex=-1 to be focusable.\n        [].slice.call(this.root_.querySelectorAll('.mdc-list-item:not([tabindex])'))\n            .forEach(function (el) {\n            el.setAttribute('tabindex', '-1');\n        });\n        // Child button/a elements are not tabbable until the list item is focused.\n        [].slice.call(this.root_.querySelectorAll(strings.FOCUSABLE_CHILD_ELEMENTS))\n            .forEach(function (el) { return el.setAttribute('tabindex', '-1'); });\n        this.foundation_.layout();\n    };\n    /**\n     * Initialize selectedIndex value based on pre-selected checkbox list items, single selection or radio.\n     */\n    MDCList.prototype.initializeListType = function () {\n        var _this = this;\n        var checkboxListItems = this.root_.querySelectorAll(strings.ARIA_ROLE_CHECKBOX_SELECTOR);\n        var singleSelectedListItem = this.root_.querySelector(\"\\n      .\" + cssClasses.LIST_ITEM_ACTIVATED_CLASS + \",\\n      .\" + cssClasses.LIST_ITEM_SELECTED_CLASS + \"\\n    \");\n        var radioSelectedListItem = this.root_.querySelector(strings.ARIA_CHECKED_RADIO_SELECTOR);\n        if (checkboxListItems.length) {\n            var preselectedItems = this.root_.querySelectorAll(strings.ARIA_CHECKED_CHECKBOX_SELECTOR);\n            this.selectedIndex =\n                [].map.call(preselectedItems, function (listItem) { return _this.listElements.indexOf(listItem); });\n        }\n        else if (singleSelectedListItem) {\n            if (singleSelectedListItem.classList.contains(cssClasses.LIST_ITEM_ACTIVATED_CLASS)) {\n                this.foundation_.setUseActivatedClass(true);\n            }\n            this.singleSelection = true;\n            this.selectedIndex = this.listElements.indexOf(singleSelectedListItem);\n        }\n        else if (radioSelectedListItem) {\n            this.selectedIndex = this.listElements.indexOf(radioSelectedListItem);\n        }\n    };\n    /**\n     * Updates the list item at itemIndex to the desired isEnabled state.\n     * @param itemIndex Index of the list item\n     * @param isEnabled Sets the list item to enabled or disabled.\n     */\n    MDCList.prototype.setEnabled = function (itemIndex, isEnabled) {\n        this.foundation_.setEnabled(itemIndex, isEnabled);\n    };\n    MDCList.prototype.getDefaultFoundation = function () {\n        var _this = this;\n        // DO NOT INLINE this variable. For backward compatibility, foundations take a Partial<MDCFooAdapter>.\n        // To ensure we don't accidentally omit any methods, we need a separate, strongly typed adapter variable.\n        var adapter = {\n            addClassForElementIndex: function (index, className) {\n                var element = _this.listElements[index];\n                if (element) {\n                    element.classList.add(className);\n                }\n            },\n            focusItemAtIndex: function (index) {\n                var element = _this.listElements[index];\n                if (element) {\n                    element.focus();\n                }\n            },\n            getAttributeForElementIndex: function (index, attr) { return _this.listElements[index].getAttribute(attr); },\n            getFocusedElementIndex: function () { return _this.listElements.indexOf(document.activeElement); },\n            getListItemCount: function () { return _this.listElements.length; },\n            hasCheckboxAtIndex: function (index) {\n                var listItem = _this.listElements[index];\n                return !!listItem.querySelector(strings.CHECKBOX_SELECTOR);\n            },\n            hasRadioAtIndex: function (index) {\n                var listItem = _this.listElements[index];\n                return !!listItem.querySelector(strings.RADIO_SELECTOR);\n            },\n            isCheckboxCheckedAtIndex: function (index) {\n                var listItem = _this.listElements[index];\n                var toggleEl = listItem.querySelector(strings.CHECKBOX_SELECTOR);\n                return toggleEl.checked;\n            },\n            isFocusInsideList: function () {\n                return _this.root_.contains(document.activeElement);\n            },\n            isRootFocused: function () { return document.activeElement === _this.root_; },\n            notifyAction: function (index) {\n                _this.emit(strings.ACTION_EVENT, { index: index }, /** shouldBubble */ true);\n            },\n            removeClassForElementIndex: function (index, className) {\n                var element = _this.listElements[index];\n                if (element) {\n                    element.classList.remove(className);\n                }\n            },\n            setAttributeForElementIndex: function (index, attr, value) {\n                var element = _this.listElements[index];\n                if (element) {\n                    element.setAttribute(attr, value);\n                }\n            },\n            setCheckedCheckboxOrRadioAtIndex: function (index, isChecked) {\n                var listItem = _this.listElements[index];\n                var toggleEl = listItem.querySelector(strings.CHECKBOX_RADIO_SELECTOR);\n                toggleEl.checked = isChecked;\n                var event = document.createEvent('Event');\n                event.initEvent('change', true, true);\n                toggleEl.dispatchEvent(event);\n            },\n            setTabIndexForListItemChildren: function (listItemIndex, tabIndexValue) {\n                var element = _this.listElements[listItemIndex];\n                var listItemChildren = [].slice.call(element.querySelectorAll(strings.CHILD_ELEMENTS_TO_TOGGLE_TABINDEX));\n                listItemChildren.forEach(function (el) { return el.setAttribute('tabindex', tabIndexValue); });\n            },\n        };\n        return new MDCListFoundation(adapter);\n    };\n    /**\n     * Used to figure out which list item this event is targetting. Or returns -1 if\n     * there is no list item\n     */\n    MDCList.prototype.getListItemIndex_ = function (evt) {\n        var eventTarget = evt.target;\n        var nearestParent = closest(eventTarget, \".\" + cssClasses.LIST_ITEM_CLASS + \", .\" + cssClasses.ROOT);\n        // Get the index of the element if it is a list item.\n        if (nearestParent && matches(nearestParent, \".\" + cssClasses.LIST_ITEM_CLASS)) {\n            return this.listElements.indexOf(nearestParent);\n        }\n        return -1;\n    };\n    /**\n     * Used to figure out which element was clicked before sending the event to the foundation.\n     */\n    MDCList.prototype.handleFocusInEvent_ = function (evt) {\n        var index = this.getListItemIndex_(evt);\n        this.foundation_.handleFocusIn(evt, index);\n    };\n    /**\n     * Used to figure out which element was clicked before sending the event to the foundation.\n     */\n    MDCList.prototype.handleFocusOutEvent_ = function (evt) {\n        var index = this.getListItemIndex_(evt);\n        this.foundation_.handleFocusOut(evt, index);\n    };\n    /**\n     * Used to figure out which element was focused when keydown event occurred before sending the event to the\n     * foundation.\n     */\n    MDCList.prototype.handleKeydownEvent_ = function (evt) {\n        var index = this.getListItemIndex_(evt);\n        var target = evt.target;\n        this.foundation_.handleKeydown(evt, target.classList.contains(cssClasses.LIST_ITEM_CLASS), index);\n    };\n    /**\n     * Used to figure out which element was clicked before sending the event to the foundation.\n     */\n    MDCList.prototype.handleClickEvent_ = function (evt) {\n        var index = this.getListItemIndex_(evt);\n        var target = evt.target;\n        // Toggle the checkbox only if it's not the target of the event, or the checkbox will have 2 change events.\n        var toggleCheckbox = !matches(target, strings.CHECKBOX_RADIO_SELECTOR);\n        this.foundation_.handleClick(index, toggleCheckbox);\n    };\n    return MDCList;\n}(MDCComponent));\nexport { MDCList };\n//# sourceMappingURL=component.js.map","/**\n * @license\n * Copyright 2016 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar cssClasses = {\n    ANIMATE: 'mdc-drawer--animate',\n    CLOSING: 'mdc-drawer--closing',\n    DISMISSIBLE: 'mdc-drawer--dismissible',\n    MODAL: 'mdc-drawer--modal',\n    OPEN: 'mdc-drawer--open',\n    OPENING: 'mdc-drawer--opening',\n    ROOT: 'mdc-drawer',\n};\nvar strings = {\n    APP_CONTENT_SELECTOR: '.mdc-drawer-app-content',\n    CLOSE_EVENT: 'MDCDrawer:closed',\n    OPEN_EVENT: 'MDCDrawer:opened',\n    SCRIM_SELECTOR: '.mdc-drawer-scrim',\n};\nexport { cssClasses, strings };\n//# sourceMappingURL=constants.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { cssClasses, strings } from '../constants';\nvar MDCDismissibleDrawerFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCDismissibleDrawerFoundation, _super);\n    function MDCDismissibleDrawerFoundation(adapter) {\n        var _this = _super.call(this, tslib_1.__assign({}, MDCDismissibleDrawerFoundation.defaultAdapter, adapter)) || this;\n        _this.animationFrame_ = 0;\n        _this.animationTimer_ = 0;\n        return _this;\n    }\n    Object.defineProperty(MDCDismissibleDrawerFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCDismissibleDrawerFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCDismissibleDrawerFoundation, \"defaultAdapter\", {\n        get: function () {\n            // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n            return {\n                addClass: function () { return undefined; },\n                removeClass: function () { return undefined; },\n                hasClass: function () { return false; },\n                elementHasClass: function () { return false; },\n                notifyClose: function () { return undefined; },\n                notifyOpen: function () { return undefined; },\n                saveFocus: function () { return undefined; },\n                restoreFocus: function () { return undefined; },\n                focusActiveNavigationItem: function () { return undefined; },\n                trapFocus: function () { return undefined; },\n                releaseFocus: function () { return undefined; },\n            };\n            // tslint:enable:object-literal-sort-keys\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCDismissibleDrawerFoundation.prototype.destroy = function () {\n        if (this.animationFrame_) {\n            cancelAnimationFrame(this.animationFrame_);\n        }\n        if (this.animationTimer_) {\n            clearTimeout(this.animationTimer_);\n        }\n    };\n    /**\n     * Opens the drawer from the closed state.\n     */\n    MDCDismissibleDrawerFoundation.prototype.open = function () {\n        var _this = this;\n        if (this.isOpen() || this.isOpening() || this.isClosing()) {\n            return;\n        }\n        this.adapter_.addClass(cssClasses.OPEN);\n        this.adapter_.addClass(cssClasses.ANIMATE);\n        // Wait a frame once display is no longer \"none\", to establish basis for animation\n        this.runNextAnimationFrame_(function () {\n            _this.adapter_.addClass(cssClasses.OPENING);\n        });\n        this.adapter_.saveFocus();\n    };\n    /**\n     * Closes the drawer from the open state.\n     */\n    MDCDismissibleDrawerFoundation.prototype.close = function () {\n        if (!this.isOpen() || this.isOpening() || this.isClosing()) {\n            return;\n        }\n        this.adapter_.addClass(cssClasses.CLOSING);\n    };\n    /**\n     * Returns true if the drawer is in the open position.\n     * @return true if drawer is in open state.\n     */\n    MDCDismissibleDrawerFoundation.prototype.isOpen = function () {\n        return this.adapter_.hasClass(cssClasses.OPEN);\n    };\n    /**\n     * Returns true if the drawer is animating open.\n     * @return true if drawer is animating open.\n     */\n    MDCDismissibleDrawerFoundation.prototype.isOpening = function () {\n        return this.adapter_.hasClass(cssClasses.OPENING) || this.adapter_.hasClass(cssClasses.ANIMATE);\n    };\n    /**\n     * Returns true if the drawer is animating closed.\n     * @return true if drawer is animating closed.\n     */\n    MDCDismissibleDrawerFoundation.prototype.isClosing = function () {\n        return this.adapter_.hasClass(cssClasses.CLOSING);\n    };\n    /**\n     * Keydown handler to close drawer when key is escape.\n     */\n    MDCDismissibleDrawerFoundation.prototype.handleKeydown = function (evt) {\n        var keyCode = evt.keyCode, key = evt.key;\n        var isEscape = key === 'Escape' || keyCode === 27;\n        if (isEscape) {\n            this.close();\n        }\n    };\n    /**\n     * Handles the `transitionend` event when the drawer finishes opening/closing.\n     */\n    MDCDismissibleDrawerFoundation.prototype.handleTransitionEnd = function (evt) {\n        var OPENING = cssClasses.OPENING, CLOSING = cssClasses.CLOSING, OPEN = cssClasses.OPEN, ANIMATE = cssClasses.ANIMATE, ROOT = cssClasses.ROOT;\n        // In Edge, transitionend on ripple pseudo-elements yields a target without classList, so check for Element first.\n        var isRootElement = this.isElement_(evt.target) && this.adapter_.elementHasClass(evt.target, ROOT);\n        if (!isRootElement) {\n            return;\n        }\n        if (this.isClosing()) {\n            this.adapter_.removeClass(OPEN);\n            this.closed_();\n            this.adapter_.restoreFocus();\n            this.adapter_.notifyClose();\n        }\n        else {\n            this.adapter_.focusActiveNavigationItem();\n            this.opened_();\n            this.adapter_.notifyOpen();\n        }\n        this.adapter_.removeClass(ANIMATE);\n        this.adapter_.removeClass(OPENING);\n        this.adapter_.removeClass(CLOSING);\n    };\n    /**\n     * Extension point for when drawer finishes open animation.\n     */\n    MDCDismissibleDrawerFoundation.prototype.opened_ = function () { }; // tslint:disable-line:no-empty\n    /**\n     * Extension point for when drawer finishes close animation.\n     */\n    MDCDismissibleDrawerFoundation.prototype.closed_ = function () { }; // tslint:disable-line:no-empty\n    /**\n     * Runs the given logic on the next animation frame, using setTimeout to factor in Firefox reflow behavior.\n     */\n    MDCDismissibleDrawerFoundation.prototype.runNextAnimationFrame_ = function (callback) {\n        var _this = this;\n        cancelAnimationFrame(this.animationFrame_);\n        this.animationFrame_ = requestAnimationFrame(function () {\n            _this.animationFrame_ = 0;\n            clearTimeout(_this.animationTimer_);\n            _this.animationTimer_ = setTimeout(callback, 0);\n        });\n    };\n    MDCDismissibleDrawerFoundation.prototype.isElement_ = function (element) {\n        // In Edge, transitionend on ripple pseudo-elements yields a target without classList.\n        return Boolean(element.classList);\n    };\n    return MDCDismissibleDrawerFoundation;\n}(MDCFoundation));\nexport { MDCDismissibleDrawerFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCDismissibleDrawerFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCDismissibleDrawerFoundation } from '../dismissible/foundation';\n/* istanbul ignore next: subclass is not a branch statement */\nvar MDCModalDrawerFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCModalDrawerFoundation, _super);\n    function MDCModalDrawerFoundation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Handles click event on scrim.\n     */\n    MDCModalDrawerFoundation.prototype.handleScrimClick = function () {\n        this.close();\n    };\n    /**\n     * Called when drawer finishes open animation.\n     */\n    MDCModalDrawerFoundation.prototype.opened_ = function () {\n        this.adapter_.trapFocus();\n    };\n    /**\n     * Called when drawer finishes close animation.\n     */\n    MDCModalDrawerFoundation.prototype.closed_ = function () {\n        this.adapter_.releaseFocus();\n    };\n    return MDCModalDrawerFoundation;\n}(MDCDismissibleDrawerFoundation));\nexport { MDCModalDrawerFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCModalDrawerFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2016 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCComponent } from '@material/base/component';\nimport { MDCList } from '@material/list/component';\nimport { MDCListFoundation } from '@material/list/foundation';\nimport { default as createFocusTrap } from 'focus-trap';\nimport { MDCDismissibleDrawerFoundation } from './dismissible/foundation';\nimport { MDCModalDrawerFoundation } from './modal/foundation';\nimport * as util from './util';\nvar cssClasses = MDCDismissibleDrawerFoundation.cssClasses, strings = MDCDismissibleDrawerFoundation.strings;\n/**\n * @events `MDCDrawer:closed {}` Emits when the navigation drawer has closed.\n * @events `MDCDrawer:opened {}` Emits when the navigation drawer has opened.\n */\nvar MDCDrawer = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCDrawer, _super);\n    function MDCDrawer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MDCDrawer.attachTo = function (root) {\n        return new MDCDrawer(root);\n    };\n    Object.defineProperty(MDCDrawer.prototype, \"open\", {\n        /**\n         * @return boolean Proxies to the foundation's `open`/`close` methods.\n         * Also returns true if drawer is in the open position.\n         */\n        get: function () {\n            return this.foundation_.isOpen();\n        },\n        /**\n         * Toggles the drawer open and closed.\n         */\n        set: function (isOpen) {\n            if (isOpen) {\n                this.foundation_.open();\n            }\n            else {\n                this.foundation_.close();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCDrawer.prototype, \"list\", {\n        get: function () {\n            return this.list_;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCDrawer.prototype.initialize = function (focusTrapFactory, listFactory) {\n        if (focusTrapFactory === void 0) { focusTrapFactory = createFocusTrap; }\n        if (listFactory === void 0) { listFactory = function (el) { return new MDCList(el); }; }\n        var listEl = this.root_.querySelector(\".\" + MDCListFoundation.cssClasses.ROOT);\n        if (listEl) {\n            this.list_ = listFactory(listEl);\n            this.list_.wrapFocus = true;\n        }\n        this.focusTrapFactory_ = focusTrapFactory;\n    };\n    MDCDrawer.prototype.initialSyncWithDOM = function () {\n        var _this = this;\n        var MODAL = cssClasses.MODAL;\n        var SCRIM_SELECTOR = strings.SCRIM_SELECTOR;\n        this.scrim_ = this.root_.parentNode.querySelector(SCRIM_SELECTOR);\n        if (this.scrim_ && this.root_.classList.contains(MODAL)) {\n            this.handleScrimClick_ = function () { return _this.foundation_.handleScrimClick(); };\n            this.scrim_.addEventListener('click', this.handleScrimClick_);\n            this.focusTrap_ = util.createFocusTrapInstance(this.root_, this.focusTrapFactory_);\n        }\n        this.handleKeydown_ = function (evt) { return _this.foundation_.handleKeydown(evt); };\n        this.handleTransitionEnd_ = function (evt) { return _this.foundation_.handleTransitionEnd(evt); };\n        this.listen('keydown', this.handleKeydown_);\n        this.listen('transitionend', this.handleTransitionEnd_);\n    };\n    MDCDrawer.prototype.destroy = function () {\n        this.unlisten('keydown', this.handleKeydown_);\n        this.unlisten('transitionend', this.handleTransitionEnd_);\n        if (this.list_) {\n            this.list_.destroy();\n        }\n        var MODAL = cssClasses.MODAL;\n        if (this.scrim_ && this.handleScrimClick_ && this.root_.classList.contains(MODAL)) {\n            this.scrim_.removeEventListener('click', this.handleScrimClick_);\n            // Ensure drawer is closed to hide scrim and release focus\n            this.open = false;\n        }\n    };\n    MDCDrawer.prototype.getDefaultFoundation = function () {\n        var _this = this;\n        // DO NOT INLINE this variable. For backward compatibility, foundations take a Partial<MDCFooAdapter>.\n        // To ensure we don't accidentally omit any methods, we need a separate, strongly typed adapter variable.\n        // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n        var adapter = {\n            addClass: function (className) { return _this.root_.classList.add(className); },\n            removeClass: function (className) { return _this.root_.classList.remove(className); },\n            hasClass: function (className) { return _this.root_.classList.contains(className); },\n            elementHasClass: function (element, className) { return element.classList.contains(className); },\n            saveFocus: function () { return _this.previousFocus_ = document.activeElement; },\n            restoreFocus: function () {\n                var previousFocus = _this.previousFocus_;\n                if (previousFocus && previousFocus.focus && _this.root_.contains(document.activeElement)) {\n                    previousFocus.focus();\n                }\n            },\n            focusActiveNavigationItem: function () {\n                var activeNavItemEl = _this.root_.querySelector(\".\" + MDCListFoundation.cssClasses.LIST_ITEM_ACTIVATED_CLASS);\n                if (activeNavItemEl) {\n                    activeNavItemEl.focus();\n                }\n            },\n            notifyClose: function () { return _this.emit(strings.CLOSE_EVENT, {}, true /* shouldBubble */); },\n            notifyOpen: function () { return _this.emit(strings.OPEN_EVENT, {}, true /* shouldBubble */); },\n            trapFocus: function () { return _this.focusTrap_.activate(); },\n            releaseFocus: function () { return _this.focusTrap_.deactivate(); },\n        };\n        // tslint:enable:object-literal-sort-keys\n        var DISMISSIBLE = cssClasses.DISMISSIBLE, MODAL = cssClasses.MODAL;\n        if (this.root_.classList.contains(DISMISSIBLE)) {\n            return new MDCDismissibleDrawerFoundation(adapter);\n        }\n        else if (this.root_.classList.contains(MODAL)) {\n            return new MDCModalDrawerFoundation(adapter);\n        }\n        else {\n            throw new Error(\"MDCDrawer: Failed to instantiate component. Supported variants are \" + DISMISSIBLE + \" and \" + MODAL + \".\");\n        }\n    };\n    return MDCDrawer;\n}(MDCComponent));\nexport { MDCDrawer };\n//# sourceMappingURL=component.js.map","/**\n * @license\n * Copyright 2016 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { default as createFocusTrap } from 'focus-trap';\nexport function createFocusTrapInstance(surfaceEl, focusTrapFactory) {\n    if (focusTrapFactory === void 0) { focusTrapFactory = createFocusTrap; }\n    return focusTrapFactory(surfaceEl, {\n        clickOutsideDeactivates: true,\n        escapeDeactivates: false,\n        initialFocus: undefined,\n        returnFocusOnDeactivate: false,\n    });\n}\n//# sourceMappingURL=util.js.map","<aside\n  bind:this={element}\n  use:useActions={use}\n  use:forwardEvents\n  class=\"\n    mdc-drawer\n    {className}\n    {variant === 'dismissible' ? 'mdc-drawer--dismissible' : ''}\n    {variant === 'modal' ? 'mdc-drawer--modal' : ''}\n  \"\n  on:MDCDrawer:opened={updateOpen} on:MDCDrawer:closed={updateOpen}\n  {...exclude($$props, ['use', 'class', 'variant', 'open'])}\n><slot></slot></aside>\n\n<script>\n  import {MDCDrawer} from \"@material/drawer\";\n  import {onMount, onDestroy, afterUpdate, setContext} from 'svelte';\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from '@smui/common/forwardEvents.js';\n  import {exclude} from '@smui/common/exclude.js';\n  import {useActions} from '@smui/common/useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component(), ['MDCDrawer:opened', 'MDCDrawer:closed']);\n\n  export let use = [];\n  let className = '';\n  export {className as class};\n  export let variant = null;\n  export let open = false;\n\n  let element;\n  let drawer;\n  let listPromiseResolve;\n  let listPromise = new Promise(resolve => listPromiseResolve = resolve);\n\n  setContext('SMUI:list:nav', true);\n  setContext('SMUI:list:item:nav', true);\n\n  if (variant === 'dismissible' || variant === 'modal') {\n    setContext('SMUI:list:instantiate', false);\n    setContext('SMUI:list:getInstance', getListInstancePromise);\n  }\n\n  $: if (drawer && drawer.open !== open) {\n    drawer.open = open;\n  }\n\n  onMount(() => {\n    if (variant === 'dismissible' || variant === 'modal') {\n      drawer = new MDCDrawer(element);\n      listPromiseResolve(drawer.list_);\n    }\n  });\n\n  onDestroy(() => {\n    drawer && drawer.destroy();\n  });\n\n  afterUpdate(() => {\n    if (drawer && !(variant === 'dismissible' || variant === 'modal')) {\n      drawer.destroy();\n      drawer = undefined;\n    } else if (!drawer && (variant === 'dismissible' || variant === 'modal')) {\n      drawer = new MDCDrawer(element);\n      listPromiseResolve(drawer.list_);\n    }\n  });\n\n  function getListInstancePromise() {\n    return listPromise;\n  }\n\n  function updateOpen() {\n    open = drawer.open;\n  }\n\n  export function setOpen(value) {\n    open = value;\n  }\n</script>\n","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Div from '@smui/common/Div.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-drawer-app-content',\n  component: Div,\n  contexts: {}\n});","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Div from '@smui/common/Div.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-drawer__content',\n  component: Div,\n  contexts: {}\n});","<h1\n  use:useActions={use}\n  use:forwardEvents\n  {...exclude($$props, ['use'])}\n><slot></slot></h1>\n\n<script>\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from './forwardEvents.js';\n  import {exclude} from './exclude.js';\n  import {useActions} from './useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n\n  export let use = [];\n</script>\n","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Div from '@smui/common/Div.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-drawer__header',\n  component: Div,\n  contexts: {}\n});","<h2\n  use:useActions={use}\n  use:forwardEvents\n  {...exclude($$props, ['use'])}\n><slot></slot></h2>\n\n<script>\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from './forwardEvents.js';\n  import {exclude} from './exclude.js';\n  import {useActions} from './useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n\n  export let use = [];\n</script>\n","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport H1 from '@smui/common/H1.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-drawer__title',\n  component: H1,\n  contexts: {}\n});","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport H2 from '@smui/common/H2.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-drawer__subtitle',\n  component: H2,\n  contexts: {}\n});","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Div from '@smui/common/Div.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-drawer-scrim',\n  component: Div,\n  contexts: {}\n});","{#if nav}\n  <nav\n    bind:this={element}\n    use:useActions={use}\n    use:forwardEvents\n    class=\"\n      mdc-list\n      {className}\n      {nonInteractive ? 'mdc-list--non-interactive' : ''}\n      {dense ? 'mdc-list--dense' : ''}\n      {avatarList ? 'mdc-list--avatar-list' : ''}\n      {twoLine ? 'mdc-list--two-line' : ''}\n      {(threeLine && !twoLine) ? 'smui-list--three-line' : ''}\n    \"\n    on:MDCList:action={handleAction}\n    {...props}\n  ><slot></slot></nav>\n{:else}\n  <ul\n    bind:this={element}\n    use:useActions={use}\n    use:forwardEvents\n    class=\"\n      mdc-list\n      {className}\n      {nonInteractive ? 'mdc-list--non-interactive' : ''}\n      {dense ? 'mdc-list--dense' : ''}\n      {avatarList ? 'mdc-list--avatar-list' : ''}\n      {twoLine ? 'mdc-list--two-line' : ''}\n      {(threeLine && !twoLine) ? 'smui-list--three-line' : ''}\n    \"\n    {role}\n    on:MDCList:action={handleAction}\n    {...props}\n  ><slot></slot></ul>\n{/if}\n\n<script>\n  import {MDCList} from '@material/list';\n  import {onMount, onDestroy, getContext, setContext} from 'svelte';\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from '@smui/common/forwardEvents.js';\n  import {exclude} from '@smui/common/exclude.js';\n  import {useActions} from '@smui/common/useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component(), ['MDCList:action']);\n\n  export let use = [];\n  let className = '';\n  export {className as class};\n  export let nonInteractive = false;\n  export let dense = false;\n  export let avatarList = false;\n  export let twoLine = false;\n  export let threeLine = false;\n  export let vertical = true;\n  export let wrapFocus = false;\n  export let singleSelection = false;\n  export let selectedIndex = null;\n  export let radiolist = false;\n  export let checklist = false;\n\n  $: props = exclude($$props, ['use', 'class', 'nonInteractive', 'dense', 'avatarList', 'twoLine', 'threeLine', 'vertical', 'wrapFocus', 'singleSelection', 'selectedIndex', 'radiolist', 'checklist']);\n\n  let element;\n  let list;\n  let role = getContext('SMUI:list:role');\n  let nav = getContext('SMUI:list:nav');\n  let instantiate = getContext('SMUI:list:instantiate');\n  let getInstance = getContext('SMUI:list:getInstance');\n  let addLayoutListener = getContext('SMUI:addLayoutListener');\n  let removeLayoutListener;\n\n  setContext('SMUI:list:nonInteractive', nonInteractive);\n\n  if (!role) {\n    if (singleSelection) {\n      role = 'listbox';\n      setContext('SMUI:list:item:role', 'option');\n    } else if (radiolist) {\n      role = 'radiogroup';\n      setContext('SMUI:list:item:role', 'radio');\n    } else if (checklist) {\n      role = 'group';\n      setContext('SMUI:list:item:role', 'checkbox');\n    } else {\n      role = 'list';\n      setContext('SMUI:list:item:role', undefined);\n    }\n  }\n\n  $: if (list && list.vertical !== vertical) {\n    list.vertical = vertical;\n  }\n\n  $: if (list && list.wrapFocus !== wrapFocus) {\n    list.wrapFocus = wrapFocus;\n  }\n\n  $: if (list && list.singleSelection !== singleSelection) {\n    list.singleSelection = singleSelection;\n  }\n\n  $: if (list && singleSelection && list.selectedIndex !== selectedIndex) {\n    list.selectedIndex = selectedIndex;\n  }\n\n  if (addLayoutListener) {\n    removeLayoutListener = addLayoutListener(layout);\n  }\n\n  onMount(async () => {\n    if (instantiate !== false) {\n      list = new MDCList(element);\n    } else {\n      list = await getInstance();\n    }\n    if (singleSelection) {\n      list.initializeListType();\n      selectedIndex = list.selectedIndex;\n    }\n  });\n\n  onDestroy(() => {\n    if (instantiate !== false) {\n      list && list.destroy();\n    }\n\n    if (removeLayoutListener) {\n      removeLayoutListener();\n    }\n  });\n\n  function handleAction(e) {\n    if (list && list.listElements[e.detail.index].classList.contains('mdc-list-item--disabled')) {\n      e.preventDefault();\n      list.selectedIndex = selectedIndex;\n    } else if (list && list.selectedIndex === e.detail.index) {\n      selectedIndex = e.detail.index;\n    }\n  }\n\n  export function layout(...args) {\n    return list.layout(...args);\n  }\n\n  export function setEnabled(...args) {\n    return list.setEnabled(...args);\n  }\n\n  export function getDefaultFoundation(...args) {\n    return list.getDefaultFoundation(...args);\n  }\n</script>\n","{#if nav && href}\n  <a\n    bind:this={element}\n    use:useActions={use}\n    use:forwardEvents\n    class=\"\n      mdc-list-item\n      {className}\n      {activated ? 'mdc-list-item--activated' : ''}\n      {selected ? 'mdc-list-item--selected' : ''}\n      {disabled ? 'mdc-list-item--disabled' : ''}\n    \"\n    use:Ripple={{ripple, unbounded: false, color}}\n    {href}\n    {...(activated ? {'aria-current': 'page'} : {})}\n    {tabindex}\n    on:click={action}\n    on:keydown={handleKeydown}\n    {...props}\n  ><slot></slot></a>\n{:else if nav && !href}\n  <span\n    bind:this={element}\n    use:useActions={use}\n    use:forwardEvents\n    class=\"\n      mdc-list-item\n      {className}\n      {activated ? 'mdc-list-item--activated' : ''}\n      {selected ? 'mdc-list-item--selected' : ''}\n      {disabled ? 'mdc-list-item--disabled' : ''}\n    \"\n    use:Ripple={{ripple, unbounded: false, color}}\n    {...(activated ? {'aria-current': 'page'} : {})}\n    {tabindex}\n    on:click={action}\n    on:keydown={handleKeydown}\n    {...props}\n  ><slot></slot></span>\n{:else}\n  <li\n    bind:this={element}\n    use:useActions={use}\n    use:forwardEvents\n    class=\"\n      mdc-list-item\n      {className}\n      {activated ? 'mdc-list-item--activated' : ''}\n      {selected ? 'mdc-list-item--selected' : ''}\n      {disabled ? 'mdc-list-item--disabled' : ''}\n      {(role === 'menuitem' && selected) ? 'mdc-menu-item--selected' : ''}\n    \"\n    use:Ripple={{ripple, unbounded: false, color}}\n    {role}\n    {...(role === 'option' ? {'aria-selected': (selected ? 'true' : 'false')} : {})}\n    {...((role === 'radio' || role === 'checkbox') ? {'aria-checked': (checked ? 'true' : 'false')} : {})}\n    {tabindex}\n    on:click={action}\n    on:keydown={handleKeydown}\n    {...props}\n  ><slot></slot></li>\n{/if}\n\n<script context=\"module\">\n  let counter = 0;\n</script>\n\n<script>\n  import {onMount, onDestroy, getContext, setContext, createEventDispatcher} from 'svelte';\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from '@smui/common/forwardEvents.js';\n  import {exclude} from '@smui/common/exclude.js';\n  import {useActions} from '@smui/common/useActions.js';\n  import Ripple from '@smui/ripple/bare.js';\n\n  const dispatch = createEventDispatcher();\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n  let checked = false;\n\n  export let use = [];\n  let className = '';\n  export {className as class};\n  export let ripple = true;\n  export let color = null;\n  export let nonInteractive = getContext('SMUI:list:nonInteractive');\n  export let activated = false;\n  export let role = getContext('SMUI:list:item:role');\n  export let selected = false;\n  export let disabled = false;\n  export let tabindex = !nonInteractive && !disabled && (selected || checked) && '0' || '-1';\n  export let href = false;\n  export let inputId = 'SMUI-form-field-list-'+(counter++);\n\n  $: props = exclude($$props, ['use', 'class', 'ripple', 'color', 'nonInteractive', 'activated', 'selected', 'disabled', 'tabindex', 'href', 'inputId']);\n\n  let element;\n  let addTabindexIfNoItemsSelectedRaf;\n  let nav = getContext('SMUI:list:item:nav');\n\n  setContext('SMUI:generic:input:props', {id: inputId});\n  setContext('SMUI:generic:input:setChecked', setChecked);\n\n  onMount(() => {\n    // Tabindex needs to be '0' if this is the first non-disabled list item, and\n    // no other item is selected.\n\n    if (!selected && !nonInteractive) {\n      let first = true;\n      let el = element;\n      while (el.previousSibling) {\n        el = el.previousSibling;\n        if (el.nodeType === 1 && el.classList.contains('mdc-list-item') && !el.classList.contains('mdc-list-item--disabled')) {\n          first = false;\n          break;\n        }\n      }\n      if (first) {\n        // This is first, so now set up a check that no other items are\n        // selected.\n        addTabindexIfNoItemsSelectedRaf = window.requestAnimationFrame(addTabindexIfNoItemsSelected);\n      }\n    }\n  });\n\n  onDestroy(() => {\n    if (addTabindexIfNoItemsSelectedRaf) {\n      window.cancelAnimationFrame(addTabindexIfNoItemsSelectedRaf);\n    }\n  });\n\n  function addTabindexIfNoItemsSelected() {\n    // Look through next siblings to see if none of them are selected.\n    let noneSelected = true;\n    let el = element;\n    while (el.nextSibling) {\n      el = el.nextSibling;\n      if (el.nodeType === 1 && el.classList.contains('mdc-list-item') && el.attributes['tabindex'] && el.attributes['tabindex'].value === '0') {\n        noneSelected = false;\n        break;\n      }\n    }\n    if (noneSelected) {\n      // This is the first element, and no other element is selected, so the\n      // tabindex should be '0'.\n      tabindex = '0';\n    }\n  }\n\n  function action(e) {\n    if (disabled) {\n      e.preventDefault();\n    } else {\n      dispatch('SMUI:action', e);\n    }\n  }\n\n  function handleKeydown(e) {\n    const isEnter = e.key === 'Enter' || e.keyCode === 13;\n    const isSpace = e.key === 'Space' || e.keyCode === 32;\n    if (isEnter || isSpace) {\n      action(e);\n    }\n  }\n\n  function setChecked(isChecked) {\n    checked = isChecked;\n    tabindex = !nonInteractive && !disabled && (selected || checked) && '0' || '-1';\n  }\n</script>\n","<span\n  use:useActions={use}\n  use:forwardEvents\n  {...exclude($$props, ['use'])}\n><slot></slot></span>\n\n<script>\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from './forwardEvents.js';\n  import {exclude} from './exclude.js';\n  import {useActions} from './useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n\n  export let use = [];\n</script>\n","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Span from '@smui/common/Span.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-list-item__text',\n  component: Span,\n  contexts: {}\n});","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Span from '@smui/common/Span.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-list-item__primary-text',\n  component: Span,\n  contexts: {}\n});","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Span from '@smui/common/Span.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-list-item__secondary-text',\n  component: Span,\n  contexts: {}\n});","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Span from '@smui/common/Span.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-list-item__graphic',\n  component: Span,\n  contexts: {}\n});","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Span from '@smui/common/Span.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-list-item__meta',\n  component: Span,\n  contexts: {}\n});","<h3\n  use:useActions={use}\n  use:forwardEvents\n  {...exclude($$props, ['use'])}\n><slot></slot></h3>\n\n<script>\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from './forwardEvents.js';\n  import {exclude} from './exclude.js';\n  import {useActions} from './useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n\n  export let use = [];\n</script>\n","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Div from '@smui/common/Div.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-list-group',\n  component: Div,\n  contexts: {}\n});","{#if group || nav}\n  <hr\n    use:useActions={use}\n    use:forwardEvents\n    class=\"\n      mdc-list-divider\n      {className}\n      {padded ? 'mdc-list-divider--padded' : ''}\n      {inset ? 'mdc-list-divider--inset' : ''}\n    \"\n    {...props}\n  />\n{:else}\n  <li\n    use:useActions={use}\n    use:forwardEvents\n    class=\"\n      mdc-list-divider\n      {className}\n      {padded ? 'mdc-list-divider--padded' : ''}\n      {inset ? 'mdc-list-divider--inset' : ''}\n    \"\n    role=\"separator\"\n    {...props}\n  ></li>\n{/if}\n\n<script>\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from '@smui/common/forwardEvents.js';\n  import {exclude} from '@smui/common/exclude.js';\n  import {useActions} from '@smui/common/useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n\n  export let use = [];\n  let className = '';\n  export {className as class};\n  export let group = false;\n  export let nav = false;\n  export let padded = false;\n  export let inset = false;\n\n  $: props = exclude($$props, ['use', 'class', 'group', 'nav', 'padded', 'inset']);\n</script>\n","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport H3 from '@smui/common/H3.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-list-group__subheader',\n  component: H3,\n  contexts: {}\n});","<script>\r\n import {Content} from '@smui/drawer';\r\n import List      from '@smui/list';\r\n\r\n let leftNavCompEntries = [];\r\n\r\n // registerLeftNavEntry(comp): void ... dynamically add supplied component entry to LeftNav\r\n // ... comp: should render one-or-more <Item>s with optional additional content\r\n export function registerLeftNavEntry(comp) {\r\n   leftNavCompEntries.push(comp);\r\n   leftNavCompEntries = leftNavCompEntries; // make reactive\r\n }\r\n</script>\r\n\r\n<Content>\r\n  <List>\r\n    {#each leftNavCompEntries as compEntry (compEntry)}\r\n      <svelte:component this={compEntry}/>\r\n    {/each}\r\n  </List>\r\n</Content>\r\n","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar cssClasses = {\n    FIXED_CLASS: 'mdc-top-app-bar--fixed',\n    FIXED_SCROLLED_CLASS: 'mdc-top-app-bar--fixed-scrolled',\n    SHORT_CLASS: 'mdc-top-app-bar--short',\n    SHORT_COLLAPSED_CLASS: 'mdc-top-app-bar--short-collapsed',\n    SHORT_HAS_ACTION_ITEM_CLASS: 'mdc-top-app-bar--short-has-action-item',\n};\nvar numbers = {\n    DEBOUNCE_THROTTLE_RESIZE_TIME_MS: 100,\n    MAX_TOP_APP_BAR_HEIGHT: 128,\n};\nvar strings = {\n    ACTION_ITEM_SELECTOR: '.mdc-top-app-bar__action-item',\n    NAVIGATION_EVENT: 'MDCTopAppBar:nav',\n    NAVIGATION_ICON_SELECTOR: '.mdc-top-app-bar__navigation-icon',\n    ROOT_SELECTOR: '.mdc-top-app-bar',\n    TITLE_SELECTOR: '.mdc-top-app-bar__title',\n};\nexport { cssClasses, numbers, strings };\n//# sourceMappingURL=constants.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { cssClasses, numbers, strings } from './constants';\nvar MDCTopAppBarBaseFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCTopAppBarBaseFoundation, _super);\n    /* istanbul ignore next: optional argument is not a branch statement */\n    function MDCTopAppBarBaseFoundation(adapter) {\n        return _super.call(this, tslib_1.__assign({}, MDCTopAppBarBaseFoundation.defaultAdapter, adapter)) || this;\n    }\n    Object.defineProperty(MDCTopAppBarBaseFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCTopAppBarBaseFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCTopAppBarBaseFoundation, \"numbers\", {\n        get: function () {\n            return numbers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCTopAppBarBaseFoundation, \"defaultAdapter\", {\n        /**\n         * See {@link MDCTopAppBarAdapter} for typing information on parameters and return types.\n         */\n        get: function () {\n            // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n            return {\n                addClass: function () { return undefined; },\n                removeClass: function () { return undefined; },\n                hasClass: function () { return false; },\n                setStyle: function () { return undefined; },\n                getTopAppBarHeight: function () { return 0; },\n                notifyNavigationIconClicked: function () { return undefined; },\n                getViewportScrollY: function () { return 0; },\n                getTotalActionItems: function () { return 0; },\n            };\n            // tslint:enable:object-literal-sort-keys\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** Other variants of TopAppBar foundation overrides this method */\n    MDCTopAppBarBaseFoundation.prototype.handleTargetScroll = function () { }; // tslint:disable-line:no-empty\n    /** Other variants of TopAppBar foundation overrides this method */\n    MDCTopAppBarBaseFoundation.prototype.handleWindowResize = function () { }; // tslint:disable-line:no-empty\n    MDCTopAppBarBaseFoundation.prototype.handleNavigationClick = function () {\n        this.adapter_.notifyNavigationIconClicked();\n    };\n    return MDCTopAppBarBaseFoundation;\n}(MDCFoundation));\nexport { MDCTopAppBarBaseFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCTopAppBarBaseFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { numbers } from '../constants';\nimport { MDCTopAppBarBaseFoundation } from '../foundation';\nvar INITIAL_VALUE = 0;\nvar MDCTopAppBarFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCTopAppBarFoundation, _super);\n    /* istanbul ignore next: optional argument is not a branch statement */\n    function MDCTopAppBarFoundation(adapter) {\n        var _this = _super.call(this, adapter) || this;\n        /**\n         * Indicates if the top app bar was docked in the previous scroll handler iteration.\n         */\n        _this.wasDocked_ = true;\n        /**\n         * Indicates if the top app bar is docked in the fully shown position.\n         */\n        _this.isDockedShowing_ = true;\n        /**\n         * Variable for current scroll position of the top app bar\n         */\n        _this.currentAppBarOffsetTop_ = 0;\n        /**\n         * Used to prevent the top app bar from being scrolled out of view during resize events\n         */\n        _this.isCurrentlyBeingResized_ = false;\n        /**\n         * The timeout that's used to throttle the resize events\n         */\n        _this.resizeThrottleId_ = INITIAL_VALUE;\n        /**\n         * The timeout that's used to debounce toggling the isCurrentlyBeingResized_ variable after a resize\n         */\n        _this.resizeDebounceId_ = INITIAL_VALUE;\n        _this.lastScrollPosition_ = _this.adapter_.getViewportScrollY();\n        _this.topAppBarHeight_ = _this.adapter_.getTopAppBarHeight();\n        return _this;\n    }\n    MDCTopAppBarFoundation.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.adapter_.setStyle('top', '');\n    };\n    /**\n     * Scroll handler for the default scroll behavior of the top app bar.\n     * @override\n     */\n    MDCTopAppBarFoundation.prototype.handleTargetScroll = function () {\n        var currentScrollPosition = Math.max(this.adapter_.getViewportScrollY(), 0);\n        var diff = currentScrollPosition - this.lastScrollPosition_;\n        this.lastScrollPosition_ = currentScrollPosition;\n        // If the window is being resized the lastScrollPosition_ needs to be updated but the\n        // current scroll of the top app bar should stay in the same position.\n        if (!this.isCurrentlyBeingResized_) {\n            this.currentAppBarOffsetTop_ -= diff;\n            if (this.currentAppBarOffsetTop_ > 0) {\n                this.currentAppBarOffsetTop_ = 0;\n            }\n            else if (Math.abs(this.currentAppBarOffsetTop_) > this.topAppBarHeight_) {\n                this.currentAppBarOffsetTop_ = -this.topAppBarHeight_;\n            }\n            this.moveTopAppBar_();\n        }\n    };\n    /**\n     * Top app bar resize handler that throttle/debounce functions that execute updates.\n     * @override\n     */\n    MDCTopAppBarFoundation.prototype.handleWindowResize = function () {\n        var _this = this;\n        // Throttle resize events 10 p/s\n        if (!this.resizeThrottleId_) {\n            this.resizeThrottleId_ = setTimeout(function () {\n                _this.resizeThrottleId_ = INITIAL_VALUE;\n                _this.throttledResizeHandler_();\n            }, numbers.DEBOUNCE_THROTTLE_RESIZE_TIME_MS);\n        }\n        this.isCurrentlyBeingResized_ = true;\n        if (this.resizeDebounceId_) {\n            clearTimeout(this.resizeDebounceId_);\n        }\n        this.resizeDebounceId_ = setTimeout(function () {\n            _this.handleTargetScroll();\n            _this.isCurrentlyBeingResized_ = false;\n            _this.resizeDebounceId_ = INITIAL_VALUE;\n        }, numbers.DEBOUNCE_THROTTLE_RESIZE_TIME_MS);\n    };\n    /**\n     * Function to determine if the DOM needs to update.\n     */\n    MDCTopAppBarFoundation.prototype.checkForUpdate_ = function () {\n        var offscreenBoundaryTop = -this.topAppBarHeight_;\n        var hasAnyPixelsOffscreen = this.currentAppBarOffsetTop_ < 0;\n        var hasAnyPixelsOnscreen = this.currentAppBarOffsetTop_ > offscreenBoundaryTop;\n        var partiallyShowing = hasAnyPixelsOffscreen && hasAnyPixelsOnscreen;\n        // If it's partially showing, it can't be docked.\n        if (partiallyShowing) {\n            this.wasDocked_ = false;\n        }\n        else {\n            // Not previously docked and not partially showing, it's now docked.\n            if (!this.wasDocked_) {\n                this.wasDocked_ = true;\n                return true;\n            }\n            else if (this.isDockedShowing_ !== hasAnyPixelsOnscreen) {\n                this.isDockedShowing_ = hasAnyPixelsOnscreen;\n                return true;\n            }\n        }\n        return partiallyShowing;\n    };\n    /**\n     * Function to move the top app bar if needed.\n     */\n    MDCTopAppBarFoundation.prototype.moveTopAppBar_ = function () {\n        if (this.checkForUpdate_()) {\n            // Once the top app bar is fully hidden we use the max potential top app bar height as our offset\n            // so the top app bar doesn't show if the window resizes and the new height > the old height.\n            var offset = this.currentAppBarOffsetTop_;\n            if (Math.abs(offset) >= this.topAppBarHeight_) {\n                offset = -numbers.MAX_TOP_APP_BAR_HEIGHT;\n            }\n            this.adapter_.setStyle('top', offset + 'px');\n        }\n    };\n    /**\n     * Throttled function that updates the top app bar scrolled values if the\n     * top app bar height changes.\n     */\n    MDCTopAppBarFoundation.prototype.throttledResizeHandler_ = function () {\n        var currentHeight = this.adapter_.getTopAppBarHeight();\n        if (this.topAppBarHeight_ !== currentHeight) {\n            this.wasDocked_ = false;\n            // Since the top app bar has a different height depending on the screen width, this\n            // will ensure that the top app bar remains in the correct location if\n            // completely hidden and a resize makes the top app bar a different height.\n            this.currentAppBarOffsetTop_ -= this.topAppBarHeight_ - currentHeight;\n            this.topAppBarHeight_ = currentHeight;\n        }\n        this.handleTargetScroll();\n    };\n    return MDCTopAppBarFoundation;\n}(MDCTopAppBarBaseFoundation));\nexport { MDCTopAppBarFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCTopAppBarFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { cssClasses } from '../constants';\nimport { MDCTopAppBarFoundation } from '../standard/foundation';\nvar MDCFixedTopAppBarFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCFixedTopAppBarFoundation, _super);\n    function MDCFixedTopAppBarFoundation() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * State variable for the previous scroll iteration top app bar state\n         */\n        _this.wasScrolled_ = false;\n        return _this;\n    }\n    /**\n     * Scroll handler for applying/removing the modifier class on the fixed top app bar.\n     * @override\n     */\n    MDCFixedTopAppBarFoundation.prototype.handleTargetScroll = function () {\n        var currentScroll = this.adapter_.getViewportScrollY();\n        if (currentScroll <= 0) {\n            if (this.wasScrolled_) {\n                this.adapter_.removeClass(cssClasses.FIXED_SCROLLED_CLASS);\n                this.wasScrolled_ = false;\n            }\n        }\n        else {\n            if (!this.wasScrolled_) {\n                this.adapter_.addClass(cssClasses.FIXED_SCROLLED_CLASS);\n                this.wasScrolled_ = true;\n            }\n        }\n    };\n    return MDCFixedTopAppBarFoundation;\n}(MDCTopAppBarFoundation));\nexport { MDCFixedTopAppBarFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCFixedTopAppBarFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { cssClasses } from '../constants';\nimport { MDCTopAppBarBaseFoundation } from '../foundation';\nvar MDCShortTopAppBarFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCShortTopAppBarFoundation, _super);\n    /* istanbul ignore next: optional argument is not a branch statement */\n    function MDCShortTopAppBarFoundation(adapter) {\n        var _this = _super.call(this, adapter) || this;\n        _this.isCollapsed_ = false;\n        _this.isAlwaysCollapsed_ = false;\n        return _this;\n    }\n    Object.defineProperty(MDCShortTopAppBarFoundation.prototype, \"isCollapsed\", {\n        // Public visibility for backward compatibility.\n        get: function () {\n            return this.isCollapsed_;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCShortTopAppBarFoundation.prototype.init = function () {\n        _super.prototype.init.call(this);\n        if (this.adapter_.getTotalActionItems() > 0) {\n            this.adapter_.addClass(cssClasses.SHORT_HAS_ACTION_ITEM_CLASS);\n        }\n        // If initialized with SHORT_COLLAPSED_CLASS, the bar should always be collapsed\n        this.setAlwaysCollapsed(this.adapter_.hasClass(cssClasses.SHORT_COLLAPSED_CLASS));\n    };\n    /**\n     * Set if the short top app bar should always be collapsed.\n     *\n     * @param value When `true`, bar will always be collapsed. When `false`, bar may collapse or expand based on scroll.\n     */\n    MDCShortTopAppBarFoundation.prototype.setAlwaysCollapsed = function (value) {\n        this.isAlwaysCollapsed_ = !!value;\n        if (this.isAlwaysCollapsed_) {\n            this.collapse_();\n        }\n        else {\n            // let maybeCollapseBar_ determine if the bar should be collapsed\n            this.maybeCollapseBar_();\n        }\n    };\n    MDCShortTopAppBarFoundation.prototype.getAlwaysCollapsed = function () {\n        return this.isAlwaysCollapsed_;\n    };\n    /**\n     * Scroll handler for applying/removing the collapsed modifier class on the short top app bar.\n     * @override\n     */\n    MDCShortTopAppBarFoundation.prototype.handleTargetScroll = function () {\n        this.maybeCollapseBar_();\n    };\n    MDCShortTopAppBarFoundation.prototype.maybeCollapseBar_ = function () {\n        if (this.isAlwaysCollapsed_) {\n            return;\n        }\n        var currentScroll = this.adapter_.getViewportScrollY();\n        if (currentScroll <= 0) {\n            if (this.isCollapsed_) {\n                this.uncollapse_();\n            }\n        }\n        else {\n            if (!this.isCollapsed_) {\n                this.collapse_();\n            }\n        }\n    };\n    MDCShortTopAppBarFoundation.prototype.uncollapse_ = function () {\n        this.adapter_.removeClass(cssClasses.SHORT_COLLAPSED_CLASS);\n        this.isCollapsed_ = false;\n    };\n    MDCShortTopAppBarFoundation.prototype.collapse_ = function () {\n        this.adapter_.addClass(cssClasses.SHORT_COLLAPSED_CLASS);\n        this.isCollapsed_ = true;\n    };\n    return MDCShortTopAppBarFoundation;\n}(MDCTopAppBarBaseFoundation));\nexport { MDCShortTopAppBarFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCShortTopAppBarFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCComponent } from '@material/base/component';\nimport { MDCRipple } from '@material/ripple/component';\nimport { cssClasses, strings } from './constants';\nimport { MDCFixedTopAppBarFoundation } from './fixed/foundation';\nimport { MDCShortTopAppBarFoundation } from './short/foundation';\nimport { MDCTopAppBarFoundation } from './standard/foundation';\nvar MDCTopAppBar = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCTopAppBar, _super);\n    function MDCTopAppBar() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MDCTopAppBar.attachTo = function (root) {\n        return new MDCTopAppBar(root);\n    };\n    MDCTopAppBar.prototype.initialize = function (rippleFactory) {\n        if (rippleFactory === void 0) { rippleFactory = function (el) { return MDCRipple.attachTo(el); }; }\n        this.navIcon_ = this.root_.querySelector(strings.NAVIGATION_ICON_SELECTOR);\n        // Get all icons in the toolbar and instantiate the ripples\n        var icons = [].slice.call(this.root_.querySelectorAll(strings.ACTION_ITEM_SELECTOR));\n        if (this.navIcon_) {\n            icons.push(this.navIcon_);\n        }\n        this.iconRipples_ = icons.map(function (icon) {\n            var ripple = rippleFactory(icon);\n            ripple.unbounded = true;\n            return ripple;\n        });\n        this.scrollTarget_ = window;\n    };\n    MDCTopAppBar.prototype.initialSyncWithDOM = function () {\n        this.handleNavigationClick_ = this.foundation_.handleNavigationClick.bind(this.foundation_);\n        this.handleWindowResize_ = this.foundation_.handleWindowResize.bind(this.foundation_);\n        this.handleTargetScroll_ = this.foundation_.handleTargetScroll.bind(this.foundation_);\n        this.scrollTarget_.addEventListener('scroll', this.handleTargetScroll_);\n        if (this.navIcon_) {\n            this.navIcon_.addEventListener('click', this.handleNavigationClick_);\n        }\n        var isFixed = this.root_.classList.contains(cssClasses.FIXED_CLASS);\n        var isShort = this.root_.classList.contains(cssClasses.SHORT_CLASS);\n        if (!isShort && !isFixed) {\n            window.addEventListener('resize', this.handleWindowResize_);\n        }\n    };\n    MDCTopAppBar.prototype.destroy = function () {\n        this.iconRipples_.forEach(function (iconRipple) { return iconRipple.destroy(); });\n        this.scrollTarget_.removeEventListener('scroll', this.handleTargetScroll_);\n        if (this.navIcon_) {\n            this.navIcon_.removeEventListener('click', this.handleNavigationClick_);\n        }\n        var isFixed = this.root_.classList.contains(cssClasses.FIXED_CLASS);\n        var isShort = this.root_.classList.contains(cssClasses.SHORT_CLASS);\n        if (!isShort && !isFixed) {\n            window.removeEventListener('resize', this.handleWindowResize_);\n        }\n        _super.prototype.destroy.call(this);\n    };\n    MDCTopAppBar.prototype.setScrollTarget = function (target) {\n        // Remove scroll handler from the previous scroll target\n        this.scrollTarget_.removeEventListener('scroll', this.handleTargetScroll_);\n        this.scrollTarget_ = target;\n        // Initialize scroll handler on the new scroll target\n        this.handleTargetScroll_ =\n            this.foundation_.handleTargetScroll.bind(this.foundation_);\n        this.scrollTarget_.addEventListener('scroll', this.handleTargetScroll_);\n    };\n    MDCTopAppBar.prototype.getDefaultFoundation = function () {\n        var _this = this;\n        // DO NOT INLINE this variable. For backward compatibility, foundations take a Partial<MDCFooAdapter>.\n        // To ensure we don't accidentally omit any methods, we need a separate, strongly typed adapter variable.\n        // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n        var adapter = {\n            hasClass: function (className) { return _this.root_.classList.contains(className); },\n            addClass: function (className) { return _this.root_.classList.add(className); },\n            removeClass: function (className) { return _this.root_.classList.remove(className); },\n            setStyle: function (property, value) { return _this.root_.style.setProperty(property, value); },\n            getTopAppBarHeight: function () { return _this.root_.clientHeight; },\n            notifyNavigationIconClicked: function () { return _this.emit(strings.NAVIGATION_EVENT, {}); },\n            getViewportScrollY: function () {\n                var win = _this.scrollTarget_;\n                var el = _this.scrollTarget_;\n                return win.pageYOffset !== undefined ? win.pageYOffset : el.scrollTop;\n            },\n            getTotalActionItems: function () { return _this.root_.querySelectorAll(strings.ACTION_ITEM_SELECTOR).length; },\n        };\n        // tslint:enable:object-literal-sort-keys\n        var foundation;\n        if (this.root_.classList.contains(cssClasses.SHORT_CLASS)) {\n            foundation = new MDCShortTopAppBarFoundation(adapter);\n        }\n        else if (this.root_.classList.contains(cssClasses.FIXED_CLASS)) {\n            foundation = new MDCFixedTopAppBarFoundation(adapter);\n        }\n        else {\n            foundation = new MDCTopAppBarFoundation(adapter);\n        }\n        return foundation;\n    };\n    return MDCTopAppBar;\n}(MDCComponent));\nexport { MDCTopAppBar };\n//# sourceMappingURL=component.js.map","<header\n  bind:this={element}\n  use:useActions={use}\n  use:forwardEvents\n  class=\"\n    mdc-top-app-bar\n    {className}\n    {variant === 'short' ? 'mdc-top-app-bar--short' : ''}\n    {collapsed ? 'mdc-top-app-bar--short-collapsed' : ''}\n    {variant === 'fixed' ? 'mdc-top-app-bar--fixed' : ''}\n    {variant === 'static' ? 'smui-top-app-bar--static' : ''}\n    {color === 'secondary' ? 'smui-top-app-bar--color-secondary' : ''}\n    {prominent ? 'mdc-top-app-bar--prominent' : ''}\n    {dense ? 'mdc-top-app-bar--dense' : ''}\n  \"\n  {...exclude($$props, ['use', 'class', 'variant', 'color', 'collapsed', 'prominent', 'dense'])}\n><slot></slot></header>\n\n<script>\n  import {MDCTopAppBar} from '@material/top-app-bar';\n  import {onMount, onDestroy} from 'svelte';\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from '@smui/common/forwardEvents.js';\n  import {exclude} from '@smui/common/exclude.js';\n  import {useActions} from '@smui/common/useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component(), ['MDCList:action']);\n\n  export let use = [];\n  let className = '';\n  export {className as class};\n  export let variant = 'standard';\n  export let color = 'primary';\n  export let collapsed = false;\n  export let prominent = false;\n  export let dense = false;\n\n  let element;\n  let topAppBar;\n\n  onMount(() => {\n    topAppBar = new MDCTopAppBar(element);\n  });\n\n  onDestroy(() => {\n    topAppBar && topAppBar.destroy();\n  });\n</script>\n","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Div from '@smui/common/Div.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-top-app-bar__row',\n  component: Div,\n  contexts: {}\n});","<section\n  use:useActions={use}\n  use:forwardEvents\n  class=\"\n    mdc-top-app-bar__section\n    {className}\n    {align === 'start' ? 'mdc-top-app-bar__section--align-start' : ''}\n    {align === 'end' ? 'mdc-top-app-bar__section--align-end' : ''}\n  \"\n  {...(toolbar ? {role: 'toolbar'} : {})}\n  {...exclude($$props, ['use', 'class', 'align', 'toolbar'])}\n><slot></slot></section>\n\n<script>\n  import {setContext} from 'svelte';\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from '@smui/common/forwardEvents.js';\n  import {exclude} from '@smui/common/exclude.js';\n  import {useActions} from '@smui/common/useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component(), ['MDCList:action']);\n\n  export let use = [];\n  let className = '';\n  export {className as class};\n  export let align = 'start';\n  export let toolbar = false;\n\n  setContext('SMUI:icon-button:context', toolbar ? 'top-app-bar:action' : 'top-app-bar:navigation');\n  setContext('SMUI:button:context', toolbar ? 'top-app-bar:action' : 'top-app-bar:navigation');\n</script>\n","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Span from '@smui/common/Span.svelte';\n\nexport default classAdderBuilder({\n  class: 'mdc-top-app-bar__title',\n  component: Span,\n  contexts: {}\n});","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar cssClasses = {\n    ANCHOR: 'mdc-menu-surface--anchor',\n    ANIMATING_CLOSED: 'mdc-menu-surface--animating-closed',\n    ANIMATING_OPEN: 'mdc-menu-surface--animating-open',\n    FIXED: 'mdc-menu-surface--fixed',\n    OPEN: 'mdc-menu-surface--open',\n    ROOT: 'mdc-menu-surface',\n};\n// tslint:disable:object-literal-sort-keys\nvar strings = {\n    CLOSED_EVENT: 'MDCMenuSurface:closed',\n    OPENED_EVENT: 'MDCMenuSurface:opened',\n    FOCUSABLE_ELEMENTS: [\n        'button:not(:disabled)', '[href]:not([aria-disabled=\"true\"])', 'input:not(:disabled)',\n        'select:not(:disabled)', 'textarea:not(:disabled)', '[tabindex]:not([tabindex=\"-1\"]):not([aria-disabled=\"true\"])',\n    ].join(', '),\n};\n// tslint:enable:object-literal-sort-keys\nvar numbers = {\n    /** Total duration of menu-surface open animation. */\n    TRANSITION_OPEN_DURATION: 120,\n    /** Total duration of menu-surface close animation. */\n    TRANSITION_CLOSE_DURATION: 75,\n    /** Margin left to the edge of the viewport when menu-surface is at maximum possible height. */\n    MARGIN_TO_EDGE: 32,\n    /** Ratio of anchor width to menu-surface width for switching from corner positioning to center positioning. */\n    ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO: 0.67,\n};\n/**\n * Enum for bits in the {@see Corner) bitmap.\n */\nvar CornerBit;\n(function (CornerBit) {\n    CornerBit[CornerBit[\"BOTTOM\"] = 1] = \"BOTTOM\";\n    CornerBit[CornerBit[\"CENTER\"] = 2] = \"CENTER\";\n    CornerBit[CornerBit[\"RIGHT\"] = 4] = \"RIGHT\";\n    CornerBit[CornerBit[\"FLIP_RTL\"] = 8] = \"FLIP_RTL\";\n})(CornerBit || (CornerBit = {}));\n/**\n * Enum for representing an element corner for positioning the menu-surface.\n *\n * The START constants map to LEFT if element directionality is left\n * to right and RIGHT if the directionality is right to left.\n * Likewise END maps to RIGHT or LEFT depending on the directionality.\n */\nvar Corner;\n(function (Corner) {\n    Corner[Corner[\"TOP_LEFT\"] = 0] = \"TOP_LEFT\";\n    Corner[Corner[\"TOP_RIGHT\"] = 4] = \"TOP_RIGHT\";\n    Corner[Corner[\"BOTTOM_LEFT\"] = 1] = \"BOTTOM_LEFT\";\n    Corner[Corner[\"BOTTOM_RIGHT\"] = 5] = \"BOTTOM_RIGHT\";\n    Corner[Corner[\"TOP_START\"] = 8] = \"TOP_START\";\n    Corner[Corner[\"TOP_END\"] = 12] = \"TOP_END\";\n    Corner[Corner[\"BOTTOM_START\"] = 9] = \"BOTTOM_START\";\n    Corner[Corner[\"BOTTOM_END\"] = 13] = \"BOTTOM_END\";\n})(Corner || (Corner = {}));\nexport { cssClasses, strings, numbers, CornerBit, Corner };\n//# sourceMappingURL=constants.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { Corner, CornerBit, cssClasses, numbers, strings } from './constants';\nvar MDCMenuSurfaceFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCMenuSurfaceFoundation, _super);\n    function MDCMenuSurfaceFoundation(adapter) {\n        var _this = _super.call(this, tslib_1.__assign({}, MDCMenuSurfaceFoundation.defaultAdapter, adapter)) || this;\n        _this.isOpen_ = false;\n        _this.isQuickOpen_ = false;\n        _this.isHoistedElement_ = false;\n        _this.isFixedPosition_ = false;\n        _this.openAnimationEndTimerId_ = 0;\n        _this.closeAnimationEndTimerId_ = 0;\n        _this.animationRequestId_ = 0;\n        _this.anchorCorner_ = Corner.TOP_START;\n        _this.anchorMargin_ = { top: 0, right: 0, bottom: 0, left: 0 };\n        _this.position_ = { x: 0, y: 0 };\n        return _this;\n    }\n    Object.defineProperty(MDCMenuSurfaceFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenuSurfaceFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenuSurfaceFoundation, \"numbers\", {\n        get: function () {\n            return numbers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenuSurfaceFoundation, \"Corner\", {\n        get: function () {\n            return Corner;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenuSurfaceFoundation, \"defaultAdapter\", {\n        /**\n         * @see {@link MDCMenuSurfaceAdapter} for typing information on parameters and return types.\n         */\n        get: function () {\n            // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n            return {\n                addClass: function () { return undefined; },\n                removeClass: function () { return undefined; },\n                hasClass: function () { return false; },\n                hasAnchor: function () { return false; },\n                isElementInContainer: function () { return false; },\n                isFocused: function () { return false; },\n                isRtl: function () { return false; },\n                getInnerDimensions: function () { return ({ height: 0, width: 0 }); },\n                getAnchorDimensions: function () { return null; },\n                getWindowDimensions: function () { return ({ height: 0, width: 0 }); },\n                getBodyDimensions: function () { return ({ height: 0, width: 0 }); },\n                getWindowScroll: function () { return ({ x: 0, y: 0 }); },\n                setPosition: function () { return undefined; },\n                setMaxHeight: function () { return undefined; },\n                setTransformOrigin: function () { return undefined; },\n                saveFocus: function () { return undefined; },\n                restoreFocus: function () { return undefined; },\n                notifyClose: function () { return undefined; },\n                notifyOpen: function () { return undefined; },\n            };\n            // tslint:enable:object-literal-sort-keys\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCMenuSurfaceFoundation.prototype.init = function () {\n        var _a = MDCMenuSurfaceFoundation.cssClasses, ROOT = _a.ROOT, OPEN = _a.OPEN;\n        if (!this.adapter_.hasClass(ROOT)) {\n            throw new Error(ROOT + \" class required in root element.\");\n        }\n        if (this.adapter_.hasClass(OPEN)) {\n            this.isOpen_ = true;\n        }\n    };\n    MDCMenuSurfaceFoundation.prototype.destroy = function () {\n        clearTimeout(this.openAnimationEndTimerId_);\n        clearTimeout(this.closeAnimationEndTimerId_);\n        // Cancel any currently running animations.\n        cancelAnimationFrame(this.animationRequestId_);\n    };\n    /**\n     * @param corner Default anchor corner alignment of top-left menu surface corner.\n     */\n    MDCMenuSurfaceFoundation.prototype.setAnchorCorner = function (corner) {\n        this.anchorCorner_ = corner;\n    };\n    /**\n     * @param margin Set of margin values from anchor.\n     */\n    MDCMenuSurfaceFoundation.prototype.setAnchorMargin = function (margin) {\n        this.anchorMargin_.top = margin.top || 0;\n        this.anchorMargin_.right = margin.right || 0;\n        this.anchorMargin_.bottom = margin.bottom || 0;\n        this.anchorMargin_.left = margin.left || 0;\n    };\n    /** Used to indicate if the menu-surface is hoisted to the body. */\n    MDCMenuSurfaceFoundation.prototype.setIsHoisted = function (isHoisted) {\n        this.isHoistedElement_ = isHoisted;\n    };\n    /** Used to set the menu-surface calculations based on a fixed position menu. */\n    MDCMenuSurfaceFoundation.prototype.setFixedPosition = function (isFixedPosition) {\n        this.isFixedPosition_ = isFixedPosition;\n    };\n    /** Sets the menu-surface position on the page. */\n    MDCMenuSurfaceFoundation.prototype.setAbsolutePosition = function (x, y) {\n        this.position_.x = this.isFinite_(x) ? x : 0;\n        this.position_.y = this.isFinite_(y) ? y : 0;\n    };\n    MDCMenuSurfaceFoundation.prototype.setQuickOpen = function (quickOpen) {\n        this.isQuickOpen_ = quickOpen;\n    };\n    MDCMenuSurfaceFoundation.prototype.isOpen = function () {\n        return this.isOpen_;\n    };\n    /**\n     * Open the menu surface.\n     */\n    MDCMenuSurfaceFoundation.prototype.open = function () {\n        var _this = this;\n        this.adapter_.saveFocus();\n        if (!this.isQuickOpen_) {\n            this.adapter_.addClass(MDCMenuSurfaceFoundation.cssClasses.ANIMATING_OPEN);\n        }\n        this.animationRequestId_ = requestAnimationFrame(function () {\n            _this.adapter_.addClass(MDCMenuSurfaceFoundation.cssClasses.OPEN);\n            _this.dimensions_ = _this.adapter_.getInnerDimensions();\n            _this.autoPosition_();\n            if (_this.isQuickOpen_) {\n                _this.adapter_.notifyOpen();\n            }\n            else {\n                _this.openAnimationEndTimerId_ = setTimeout(function () {\n                    _this.openAnimationEndTimerId_ = 0;\n                    _this.adapter_.removeClass(MDCMenuSurfaceFoundation.cssClasses.ANIMATING_OPEN);\n                    _this.adapter_.notifyOpen();\n                }, numbers.TRANSITION_OPEN_DURATION);\n            }\n        });\n        this.isOpen_ = true;\n    };\n    /**\n     * Closes the menu surface.\n     */\n    MDCMenuSurfaceFoundation.prototype.close = function (skipRestoreFocus) {\n        var _this = this;\n        if (skipRestoreFocus === void 0) { skipRestoreFocus = false; }\n        if (!this.isQuickOpen_) {\n            this.adapter_.addClass(MDCMenuSurfaceFoundation.cssClasses.ANIMATING_CLOSED);\n        }\n        requestAnimationFrame(function () {\n            _this.adapter_.removeClass(MDCMenuSurfaceFoundation.cssClasses.OPEN);\n            if (_this.isQuickOpen_) {\n                _this.adapter_.notifyClose();\n            }\n            else {\n                _this.closeAnimationEndTimerId_ = setTimeout(function () {\n                    _this.closeAnimationEndTimerId_ = 0;\n                    _this.adapter_.removeClass(MDCMenuSurfaceFoundation.cssClasses.ANIMATING_CLOSED);\n                    _this.adapter_.notifyClose();\n                }, numbers.TRANSITION_CLOSE_DURATION);\n            }\n        });\n        this.isOpen_ = false;\n        if (!skipRestoreFocus) {\n            this.maybeRestoreFocus_();\n        }\n    };\n    /** Handle clicks and close if not within menu-surface element. */\n    MDCMenuSurfaceFoundation.prototype.handleBodyClick = function (evt) {\n        var el = evt.target;\n        if (this.adapter_.isElementInContainer(el)) {\n            return;\n        }\n        this.close();\n    };\n    /** Handle keys that close the surface. */\n    MDCMenuSurfaceFoundation.prototype.handleKeydown = function (evt) {\n        var keyCode = evt.keyCode, key = evt.key;\n        var isEscape = key === 'Escape' || keyCode === 27;\n        if (isEscape) {\n            this.close();\n        }\n    };\n    MDCMenuSurfaceFoundation.prototype.autoPosition_ = function () {\n        var _a;\n        // Compute measurements for autoposition methods reuse.\n        this.measurements_ = this.getAutoLayoutMeasurements_();\n        var corner = this.getOriginCorner_();\n        var maxMenuSurfaceHeight = this.getMenuSurfaceMaxHeight_(corner);\n        var verticalAlignment = this.hasBit_(corner, CornerBit.BOTTOM) ? 'bottom' : 'top';\n        var horizontalAlignment = this.hasBit_(corner, CornerBit.RIGHT) ? 'right' : 'left';\n        var horizontalOffset = this.getHorizontalOriginOffset_(corner);\n        var verticalOffset = this.getVerticalOriginOffset_(corner);\n        var _b = this.measurements_, anchorSize = _b.anchorSize, surfaceSize = _b.surfaceSize;\n        var position = (_a = {},\n            _a[horizontalAlignment] = horizontalOffset,\n            _a[verticalAlignment] = verticalOffset,\n            _a);\n        // Center align when anchor width is comparable or greater than menu surface, otherwise keep corner.\n        if (anchorSize.width / surfaceSize.width > numbers.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO) {\n            horizontalAlignment = 'center';\n        }\n        // If the menu-surface has been hoisted to the body, it's no longer relative to the anchor element\n        if (this.isHoistedElement_ || this.isFixedPosition_) {\n            this.adjustPositionForHoistedElement_(position);\n        }\n        this.adapter_.setTransformOrigin(horizontalAlignment + \" \" + verticalAlignment);\n        this.adapter_.setPosition(position);\n        this.adapter_.setMaxHeight(maxMenuSurfaceHeight ? maxMenuSurfaceHeight + 'px' : '');\n    };\n    /**\n     * @return Measurements used to position menu surface popup.\n     */\n    MDCMenuSurfaceFoundation.prototype.getAutoLayoutMeasurements_ = function () {\n        var anchorRect = this.adapter_.getAnchorDimensions();\n        var bodySize = this.adapter_.getBodyDimensions();\n        var viewportSize = this.adapter_.getWindowDimensions();\n        var windowScroll = this.adapter_.getWindowScroll();\n        if (!anchorRect) {\n            // tslint:disable:object-literal-sort-keys Positional properties are more readable when they're grouped together\n            anchorRect = {\n                top: this.position_.y,\n                right: this.position_.x,\n                bottom: this.position_.y,\n                left: this.position_.x,\n                width: 0,\n                height: 0,\n            };\n            // tslint:enable:object-literal-sort-keys\n        }\n        return {\n            anchorSize: anchorRect,\n            bodySize: bodySize,\n            surfaceSize: this.dimensions_,\n            viewportDistance: {\n                // tslint:disable:object-literal-sort-keys Positional properties are more readable when they're grouped together\n                top: anchorRect.top,\n                right: viewportSize.width - anchorRect.right,\n                bottom: viewportSize.height - anchorRect.bottom,\n                left: anchorRect.left,\n            },\n            viewportSize: viewportSize,\n            windowScroll: windowScroll,\n        };\n    };\n    /**\n     * Computes the corner of the anchor from which to animate and position the menu surface.\n     */\n    MDCMenuSurfaceFoundation.prototype.getOriginCorner_ = function () {\n        // Defaults: open from the top left.\n        var corner = Corner.TOP_LEFT;\n        var _a = this.measurements_, viewportDistance = _a.viewportDistance, anchorSize = _a.anchorSize, surfaceSize = _a.surfaceSize;\n        var isBottomAligned = this.hasBit_(this.anchorCorner_, CornerBit.BOTTOM);\n        var availableTop = isBottomAligned ? viewportDistance.top + anchorSize.height + this.anchorMargin_.bottom\n            : viewportDistance.top + this.anchorMargin_.top;\n        var availableBottom = isBottomAligned ? viewportDistance.bottom - this.anchorMargin_.bottom\n            : viewportDistance.bottom + anchorSize.height - this.anchorMargin_.top;\n        var topOverflow = surfaceSize.height - availableTop;\n        var bottomOverflow = surfaceSize.height - availableBottom;\n        if (bottomOverflow > 0 && topOverflow < bottomOverflow) {\n            corner = this.setBit_(corner, CornerBit.BOTTOM);\n        }\n        var isRtl = this.adapter_.isRtl();\n        var isFlipRtl = this.hasBit_(this.anchorCorner_, CornerBit.FLIP_RTL);\n        var avoidHorizontalOverlap = this.hasBit_(this.anchorCorner_, CornerBit.RIGHT);\n        var isAlignedRight = (avoidHorizontalOverlap && !isRtl) ||\n            (!avoidHorizontalOverlap && isFlipRtl && isRtl);\n        var availableLeft = isAlignedRight ? viewportDistance.left + anchorSize.width + this.anchorMargin_.right :\n            viewportDistance.left + this.anchorMargin_.left;\n        var availableRight = isAlignedRight ? viewportDistance.right - this.anchorMargin_.right :\n            viewportDistance.right + anchorSize.width - this.anchorMargin_.left;\n        var leftOverflow = surfaceSize.width - availableLeft;\n        var rightOverflow = surfaceSize.width - availableRight;\n        if ((leftOverflow < 0 && isAlignedRight && isRtl) ||\n            (avoidHorizontalOverlap && !isAlignedRight && leftOverflow < 0) ||\n            (rightOverflow > 0 && leftOverflow < rightOverflow)) {\n            corner = this.setBit_(corner, CornerBit.RIGHT);\n        }\n        return corner;\n    };\n    /**\n     * @param corner Origin corner of the menu surface.\n     * @return Maximum height of the menu surface, based on available space. 0 indicates should not be set.\n     */\n    MDCMenuSurfaceFoundation.prototype.getMenuSurfaceMaxHeight_ = function (corner) {\n        var viewportDistance = this.measurements_.viewportDistance;\n        var maxHeight = 0;\n        var isBottomAligned = this.hasBit_(corner, CornerBit.BOTTOM);\n        var isBottomAnchored = this.hasBit_(this.anchorCorner_, CornerBit.BOTTOM);\n        var MARGIN_TO_EDGE = MDCMenuSurfaceFoundation.numbers.MARGIN_TO_EDGE;\n        // When maximum height is not specified, it is handled from CSS.\n        if (isBottomAligned) {\n            maxHeight = viewportDistance.top + this.anchorMargin_.top - MARGIN_TO_EDGE;\n            if (!isBottomAnchored) {\n                maxHeight += this.measurements_.anchorSize.height;\n            }\n        }\n        else {\n            maxHeight =\n                viewportDistance.bottom - this.anchorMargin_.bottom + this.measurements_.anchorSize.height - MARGIN_TO_EDGE;\n            if (isBottomAnchored) {\n                maxHeight -= this.measurements_.anchorSize.height;\n            }\n        }\n        return maxHeight;\n    };\n    /**\n     * @param corner Origin corner of the menu surface.\n     * @return Horizontal offset of menu surface origin corner from corresponding anchor corner.\n     */\n    MDCMenuSurfaceFoundation.prototype.getHorizontalOriginOffset_ = function (corner) {\n        var anchorSize = this.measurements_.anchorSize;\n        // isRightAligned corresponds to using the 'right' property on the surface.\n        var isRightAligned = this.hasBit_(corner, CornerBit.RIGHT);\n        var avoidHorizontalOverlap = this.hasBit_(this.anchorCorner_, CornerBit.RIGHT);\n        if (isRightAligned) {\n            var rightOffset = avoidHorizontalOverlap ? anchorSize.width - this.anchorMargin_.left : this.anchorMargin_.right;\n            // For hoisted or fixed elements, adjust the offset by the difference between viewport width and body width so\n            // when we calculate the right value (`adjustPositionForHoistedElement_`) based on the element position,\n            // the right property is correct.\n            if (this.isHoistedElement_ || this.isFixedPosition_) {\n                return rightOffset - (this.measurements_.viewportSize.width - this.measurements_.bodySize.width);\n            }\n            return rightOffset;\n        }\n        return avoidHorizontalOverlap ? anchorSize.width - this.anchorMargin_.right : this.anchorMargin_.left;\n    };\n    /**\n     * @param corner Origin corner of the menu surface.\n     * @return Vertical offset of menu surface origin corner from corresponding anchor corner.\n     */\n    MDCMenuSurfaceFoundation.prototype.getVerticalOriginOffset_ = function (corner) {\n        var anchorSize = this.measurements_.anchorSize;\n        var isBottomAligned = this.hasBit_(corner, CornerBit.BOTTOM);\n        var avoidVerticalOverlap = this.hasBit_(this.anchorCorner_, CornerBit.BOTTOM);\n        var y = 0;\n        if (isBottomAligned) {\n            y = avoidVerticalOverlap ? anchorSize.height - this.anchorMargin_.top : -this.anchorMargin_.bottom;\n        }\n        else {\n            y = avoidVerticalOverlap ? (anchorSize.height + this.anchorMargin_.bottom) : this.anchorMargin_.top;\n        }\n        return y;\n    };\n    /** Calculates the offsets for positioning the menu-surface when the menu-surface has been hoisted to the body. */\n    MDCMenuSurfaceFoundation.prototype.adjustPositionForHoistedElement_ = function (position) {\n        var e_1, _a;\n        var _b = this.measurements_, windowScroll = _b.windowScroll, viewportDistance = _b.viewportDistance;\n        var props = Object.keys(position);\n        try {\n            for (var props_1 = tslib_1.__values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n                var prop = props_1_1.value;\n                var value = position[prop] || 0;\n                // Hoisted surfaces need to have the anchor elements location on the page added to the\n                // position properties for proper alignment on the body.\n                value += viewportDistance[prop];\n                // Surfaces that are absolutely positioned need to have additional calculations for scroll\n                // and bottom positioning.\n                if (!this.isFixedPosition_) {\n                    if (prop === 'top') {\n                        value += windowScroll.y;\n                    }\n                    else if (prop === 'bottom') {\n                        value -= windowScroll.y;\n                    }\n                    else if (prop === 'left') {\n                        value += windowScroll.x;\n                    }\n                    else { // prop === 'right'\n                        value -= windowScroll.x;\n                    }\n                }\n                position[prop] = value;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    /**\n     * The last focused element when the menu surface was opened should regain focus, if the user is\n     * focused on or within the menu surface when it is closed.\n     */\n    MDCMenuSurfaceFoundation.prototype.maybeRestoreFocus_ = function () {\n        var isRootFocused = this.adapter_.isFocused();\n        var childHasFocus = document.activeElement && this.adapter_.isElementInContainer(document.activeElement);\n        if (isRootFocused || childHasFocus) {\n            this.adapter_.restoreFocus();\n        }\n    };\n    MDCMenuSurfaceFoundation.prototype.hasBit_ = function (corner, bit) {\n        return Boolean(corner & bit); // tslint:disable-line:no-bitwise\n    };\n    MDCMenuSurfaceFoundation.prototype.setBit_ = function (corner, bit) {\n        return corner | bit; // tslint:disable-line:no-bitwise\n    };\n    /**\n     * isFinite that doesn't force conversion to number type.\n     * Equivalent to Number.isFinite in ES2015, which is not supported in IE.\n     */\n    MDCMenuSurfaceFoundation.prototype.isFinite_ = function (num) {\n        return typeof num === 'number' && isFinite(num);\n    };\n    return MDCMenuSurfaceFoundation;\n}(MDCFoundation));\nexport { MDCMenuSurfaceFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCMenuSurfaceFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar cachedCssTransformPropertyName_;\n/**\n * Returns the name of the correct transform property to use on the current browser.\n */\nfunction getTransformPropertyName(globalObj, forceRefresh) {\n    if (forceRefresh === void 0) { forceRefresh = false; }\n    if (cachedCssTransformPropertyName_ === undefined || forceRefresh) {\n        var el = globalObj.document.createElement('div');\n        cachedCssTransformPropertyName_ = 'transform' in el.style ? 'transform' : 'webkitTransform';\n    }\n    return cachedCssTransformPropertyName_;\n}\nexport { getTransformPropertyName };\n//# sourceMappingURL=util.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCComponent } from '@material/base/component';\nimport { cssClasses, strings } from './constants';\nimport { MDCMenuSurfaceFoundation } from './foundation';\nimport * as util from './util';\nvar MDCMenuSurface = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCMenuSurface, _super);\n    function MDCMenuSurface() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MDCMenuSurface.attachTo = function (root) {\n        return new MDCMenuSurface(root);\n    };\n    MDCMenuSurface.prototype.initialSyncWithDOM = function () {\n        var _this = this;\n        var parentEl = this.root_.parentElement;\n        this.anchorElement = parentEl && parentEl.classList.contains(cssClasses.ANCHOR) ? parentEl : null;\n        if (this.root_.classList.contains(cssClasses.FIXED)) {\n            this.setFixedPosition(true);\n        }\n        this.handleKeydown_ = function (evt) { return _this.foundation_.handleKeydown(evt); };\n        this.handleBodyClick_ = function (evt) { return _this.foundation_.handleBodyClick(evt); };\n        this.registerBodyClickListener_ = function () { return document.body.addEventListener('click', _this.handleBodyClick_); };\n        this.deregisterBodyClickListener_ = function () { return document.body.removeEventListener('click', _this.handleBodyClick_); };\n        this.listen('keydown', this.handleKeydown_);\n        this.listen(strings.OPENED_EVENT, this.registerBodyClickListener_);\n        this.listen(strings.CLOSED_EVENT, this.deregisterBodyClickListener_);\n    };\n    MDCMenuSurface.prototype.destroy = function () {\n        this.unlisten('keydown', this.handleKeydown_);\n        this.unlisten(strings.OPENED_EVENT, this.registerBodyClickListener_);\n        this.unlisten(strings.CLOSED_EVENT, this.deregisterBodyClickListener_);\n        _super.prototype.destroy.call(this);\n    };\n    MDCMenuSurface.prototype.isOpen = function () {\n        return this.foundation_.isOpen();\n    };\n    MDCMenuSurface.prototype.open = function () {\n        this.foundation_.open();\n    };\n    MDCMenuSurface.prototype.close = function (skipRestoreFocus) {\n        if (skipRestoreFocus === void 0) { skipRestoreFocus = false; }\n        this.foundation_.close(skipRestoreFocus);\n    };\n    Object.defineProperty(MDCMenuSurface.prototype, \"quickOpen\", {\n        set: function (quickOpen) {\n            this.foundation_.setQuickOpen(quickOpen);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Removes the menu-surface from it's current location and appends it to the\n     * body to overcome any overflow:hidden issues.\n     */\n    MDCMenuSurface.prototype.hoistMenuToBody = function () {\n        document.body.appendChild(this.root_);\n        this.setIsHoisted(true);\n    };\n    /** Sets the foundation to use page offsets for an positioning when the menu is hoisted to the body. */\n    MDCMenuSurface.prototype.setIsHoisted = function (isHoisted) {\n        this.foundation_.setIsHoisted(isHoisted);\n    };\n    /** Sets the element that the menu-surface is anchored to. */\n    MDCMenuSurface.prototype.setMenuSurfaceAnchorElement = function (element) {\n        this.anchorElement = element;\n    };\n    /** Sets the menu-surface to position: fixed. */\n    MDCMenuSurface.prototype.setFixedPosition = function (isFixed) {\n        if (isFixed) {\n            this.root_.classList.add(cssClasses.FIXED);\n        }\n        else {\n            this.root_.classList.remove(cssClasses.FIXED);\n        }\n        this.foundation_.setFixedPosition(isFixed);\n    };\n    /** Sets the absolute x/y position to position based on. Requires the menu to be hoisted. */\n    MDCMenuSurface.prototype.setAbsolutePosition = function (x, y) {\n        this.foundation_.setAbsolutePosition(x, y);\n        this.setIsHoisted(true);\n    };\n    /**\n     * @param corner Default anchor corner alignment of top-left surface corner.\n     */\n    MDCMenuSurface.prototype.setAnchorCorner = function (corner) {\n        this.foundation_.setAnchorCorner(corner);\n    };\n    MDCMenuSurface.prototype.setAnchorMargin = function (margin) {\n        this.foundation_.setAnchorMargin(margin);\n    };\n    MDCMenuSurface.prototype.getDefaultFoundation = function () {\n        var _this = this;\n        // DO NOT INLINE this variable. For backward compatibility, foundations take a Partial<MDCFooAdapter>.\n        // To ensure we don't accidentally omit any methods, we need a separate, strongly typed adapter variable.\n        // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n        var adapter = {\n            addClass: function (className) { return _this.root_.classList.add(className); },\n            removeClass: function (className) { return _this.root_.classList.remove(className); },\n            hasClass: function (className) { return _this.root_.classList.contains(className); },\n            hasAnchor: function () { return !!_this.anchorElement; },\n            notifyClose: function () { return _this.emit(MDCMenuSurfaceFoundation.strings.CLOSED_EVENT, {}); },\n            notifyOpen: function () { return _this.emit(MDCMenuSurfaceFoundation.strings.OPENED_EVENT, {}); },\n            isElementInContainer: function (el) { return _this.root_.contains(el); },\n            isRtl: function () { return getComputedStyle(_this.root_).getPropertyValue('direction') === 'rtl'; },\n            setTransformOrigin: function (origin) {\n                var propertyName = util.getTransformPropertyName(window) + \"-origin\";\n                _this.root_.style.setProperty(propertyName, origin);\n            },\n            isFocused: function () { return document.activeElement === _this.root_; },\n            saveFocus: function () {\n                _this.previousFocus_ = document.activeElement;\n            },\n            restoreFocus: function () {\n                if (_this.root_.contains(document.activeElement)) {\n                    if (_this.previousFocus_ && _this.previousFocus_.focus) {\n                        _this.previousFocus_.focus();\n                    }\n                }\n            },\n            getInnerDimensions: function () {\n                return { width: _this.root_.offsetWidth, height: _this.root_.offsetHeight };\n            },\n            getAnchorDimensions: function () { return _this.anchorElement ? _this.anchorElement.getBoundingClientRect() : null; },\n            getWindowDimensions: function () {\n                return { width: window.innerWidth, height: window.innerHeight };\n            },\n            getBodyDimensions: function () {\n                return { width: document.body.clientWidth, height: document.body.clientHeight };\n            },\n            getWindowScroll: function () {\n                return { x: window.pageXOffset, y: window.pageYOffset };\n            },\n            setPosition: function (position) {\n                _this.root_.style.left = 'left' in position ? position.left + \"px\" : '';\n                _this.root_.style.right = 'right' in position ? position.right + \"px\" : '';\n                _this.root_.style.top = 'top' in position ? position.top + \"px\" : '';\n                _this.root_.style.bottom = 'bottom' in position ? position.bottom + \"px\" : '';\n            },\n            setMaxHeight: function (height) {\n                _this.root_.style.maxHeight = height;\n            },\n        };\n        // tslint:enable:object-literal-sort-keys\n        return new MDCMenuSurfaceFoundation(adapter);\n    };\n    return MDCMenuSurface;\n}(MDCComponent));\nexport { MDCMenuSurface };\n//# sourceMappingURL=component.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar cssClasses = {\n    MENU_SELECTED_LIST_ITEM: 'mdc-menu-item--selected',\n    MENU_SELECTION_GROUP: 'mdc-menu__selection-group',\n    ROOT: 'mdc-menu',\n};\nvar strings = {\n    ARIA_CHECKED_ATTR: 'aria-checked',\n    ARIA_DISABLED_ATTR: 'aria-disabled',\n    CHECKBOX_SELECTOR: 'input[type=\"checkbox\"]',\n    LIST_SELECTOR: '.mdc-list',\n    SELECTED_EVENT: 'MDCMenu:selected',\n};\nvar numbers = {\n    FOCUS_ROOT_INDEX: -1,\n};\nvar DefaultFocusState;\n(function (DefaultFocusState) {\n    DefaultFocusState[DefaultFocusState[\"NONE\"] = 0] = \"NONE\";\n    DefaultFocusState[DefaultFocusState[\"LIST_ROOT\"] = 1] = \"LIST_ROOT\";\n    DefaultFocusState[DefaultFocusState[\"FIRST_ITEM\"] = 2] = \"FIRST_ITEM\";\n    DefaultFocusState[DefaultFocusState[\"LAST_ITEM\"] = 3] = \"LAST_ITEM\";\n})(DefaultFocusState || (DefaultFocusState = {}));\nexport { cssClasses, strings, numbers, DefaultFocusState };\n//# sourceMappingURL=constants.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { cssClasses as listCssClasses } from '@material/list/constants';\nimport { MDCMenuSurfaceFoundation } from '@material/menu-surface/foundation';\nimport { cssClasses, DefaultFocusState, numbers, strings } from './constants';\nvar MDCMenuFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCMenuFoundation, _super);\n    function MDCMenuFoundation(adapter) {\n        var _this = _super.call(this, tslib_1.__assign({}, MDCMenuFoundation.defaultAdapter, adapter)) || this;\n        _this.closeAnimationEndTimerId_ = 0;\n        _this.defaultFocusState_ = DefaultFocusState.LIST_ROOT;\n        return _this;\n    }\n    Object.defineProperty(MDCMenuFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenuFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenuFoundation, \"numbers\", {\n        get: function () {\n            return numbers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenuFoundation, \"defaultAdapter\", {\n        /**\n         * @see {@link MDCMenuAdapter} for typing information on parameters and return types.\n         */\n        get: function () {\n            // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n            return {\n                addClassToElementAtIndex: function () { return undefined; },\n                removeClassFromElementAtIndex: function () { return undefined; },\n                addAttributeToElementAtIndex: function () { return undefined; },\n                removeAttributeFromElementAtIndex: function () { return undefined; },\n                elementContainsClass: function () { return false; },\n                closeSurface: function () { return undefined; },\n                getElementIndex: function () { return -1; },\n                notifySelected: function () { return undefined; },\n                getMenuItemCount: function () { return 0; },\n                focusItemAtIndex: function () { return undefined; },\n                focusListRoot: function () { return undefined; },\n                getSelectedSiblingOfItemAtIndex: function () { return -1; },\n                isSelectableItemAtIndex: function () { return false; },\n            };\n            // tslint:enable:object-literal-sort-keys\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCMenuFoundation.prototype.destroy = function () {\n        if (this.closeAnimationEndTimerId_) {\n            clearTimeout(this.closeAnimationEndTimerId_);\n        }\n        this.adapter_.closeSurface();\n    };\n    MDCMenuFoundation.prototype.handleKeydown = function (evt) {\n        var key = evt.key, keyCode = evt.keyCode;\n        var isTab = key === 'Tab' || keyCode === 9;\n        if (isTab) {\n            this.adapter_.closeSurface(/** skipRestoreFocus */ true);\n        }\n    };\n    MDCMenuFoundation.prototype.handleItemAction = function (listItem) {\n        var _this = this;\n        var index = this.adapter_.getElementIndex(listItem);\n        if (index < 0) {\n            return;\n        }\n        this.adapter_.notifySelected({ index: index });\n        this.adapter_.closeSurface();\n        // Wait for the menu to close before adding/removing classes that affect styles.\n        this.closeAnimationEndTimerId_ = setTimeout(function () {\n            // Recompute the index in case the menu contents have changed.\n            var recomputedIndex = _this.adapter_.getElementIndex(listItem);\n            if (_this.adapter_.isSelectableItemAtIndex(recomputedIndex)) {\n                _this.setSelectedIndex(recomputedIndex);\n            }\n        }, MDCMenuSurfaceFoundation.numbers.TRANSITION_CLOSE_DURATION);\n    };\n    MDCMenuFoundation.prototype.handleMenuSurfaceOpened = function () {\n        switch (this.defaultFocusState_) {\n            case DefaultFocusState.FIRST_ITEM:\n                this.adapter_.focusItemAtIndex(0);\n                break;\n            case DefaultFocusState.LAST_ITEM:\n                this.adapter_.focusItemAtIndex(this.adapter_.getMenuItemCount() - 1);\n                break;\n            case DefaultFocusState.NONE:\n                // Do nothing.\n                break;\n            default:\n                this.adapter_.focusListRoot();\n                break;\n        }\n    };\n    /**\n     * Sets default focus state where the menu should focus every time when menu\n     * is opened. Focuses the list root (`DefaultFocusState.LIST_ROOT`) element by\n     * default.\n     */\n    MDCMenuFoundation.prototype.setDefaultFocusState = function (focusState) {\n        this.defaultFocusState_ = focusState;\n    };\n    /**\n     * Selects the list item at `index` within the menu.\n     * @param index Index of list item within the menu.\n     */\n    MDCMenuFoundation.prototype.setSelectedIndex = function (index) {\n        this.validatedIndex_(index);\n        if (!this.adapter_.isSelectableItemAtIndex(index)) {\n            throw new Error('MDCMenuFoundation: No selection group at specified index.');\n        }\n        var prevSelectedIndex = this.adapter_.getSelectedSiblingOfItemAtIndex(index);\n        if (prevSelectedIndex >= 0) {\n            this.adapter_.removeAttributeFromElementAtIndex(prevSelectedIndex, strings.ARIA_CHECKED_ATTR);\n            this.adapter_.removeClassFromElementAtIndex(prevSelectedIndex, cssClasses.MENU_SELECTED_LIST_ITEM);\n        }\n        this.adapter_.addClassToElementAtIndex(index, cssClasses.MENU_SELECTED_LIST_ITEM);\n        this.adapter_.addAttributeToElementAtIndex(index, strings.ARIA_CHECKED_ATTR, 'true');\n    };\n    /**\n     * Sets the enabled state to isEnabled for the menu item at the given index.\n     * @param index Index of the menu item\n     * @param isEnabled The desired enabled state of the menu item.\n     */\n    MDCMenuFoundation.prototype.setEnabled = function (index, isEnabled) {\n        this.validatedIndex_(index);\n        if (isEnabled) {\n            this.adapter_.removeClassFromElementAtIndex(index, listCssClasses.LIST_ITEM_DISABLED_CLASS);\n            this.adapter_.addAttributeToElementAtIndex(index, strings.ARIA_DISABLED_ATTR, 'false');\n        }\n        else {\n            this.adapter_.addClassToElementAtIndex(index, listCssClasses.LIST_ITEM_DISABLED_CLASS);\n            this.adapter_.addAttributeToElementAtIndex(index, strings.ARIA_DISABLED_ATTR, 'true');\n        }\n    };\n    MDCMenuFoundation.prototype.validatedIndex_ = function (index) {\n        var menuSize = this.adapter_.getMenuItemCount();\n        var isIndexInRange = index >= 0 && index < menuSize;\n        if (!isIndexInRange) {\n            throw new Error('MDCMenuFoundation: No list item at specified index.');\n        }\n    };\n    return MDCMenuFoundation;\n}(MDCFoundation));\nexport { MDCMenuFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCMenuFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCComponent } from '@material/base/component';\nimport { closest } from '@material/dom/ponyfill';\nimport { MDCList } from '@material/list/component';\nimport { MDCListFoundation } from '@material/list/foundation';\nimport { MDCMenuSurface } from '@material/menu-surface/component';\nimport { MDCMenuSurfaceFoundation } from '@material/menu-surface/foundation';\nimport { cssClasses, strings } from './constants';\nimport { MDCMenuFoundation } from './foundation';\nvar MDCMenu = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCMenu, _super);\n    function MDCMenu() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MDCMenu.attachTo = function (root) {\n        return new MDCMenu(root);\n    };\n    MDCMenu.prototype.initialize = function (menuSurfaceFactory, listFactory) {\n        if (menuSurfaceFactory === void 0) { menuSurfaceFactory = function (el) { return new MDCMenuSurface(el); }; }\n        if (listFactory === void 0) { listFactory = function (el) { return new MDCList(el); }; }\n        this.menuSurfaceFactory_ = menuSurfaceFactory;\n        this.listFactory_ = listFactory;\n    };\n    MDCMenu.prototype.initialSyncWithDOM = function () {\n        var _this = this;\n        this.menuSurface_ = this.menuSurfaceFactory_(this.root_);\n        var list = this.root_.querySelector(strings.LIST_SELECTOR);\n        if (list) {\n            this.list_ = this.listFactory_(list);\n            this.list_.wrapFocus = true;\n        }\n        else {\n            this.list_ = null;\n        }\n        this.handleKeydown_ = function (evt) { return _this.foundation_.handleKeydown(evt); };\n        this.handleItemAction_ = function (evt) { return _this.foundation_.handleItemAction(_this.items[evt.detail.index]); };\n        this.handleMenuSurfaceOpened_ = function () { return _this.foundation_.handleMenuSurfaceOpened(); };\n        this.menuSurface_.listen(MDCMenuSurfaceFoundation.strings.OPENED_EVENT, this.handleMenuSurfaceOpened_);\n        this.listen('keydown', this.handleKeydown_);\n        this.listen(MDCListFoundation.strings.ACTION_EVENT, this.handleItemAction_);\n    };\n    MDCMenu.prototype.destroy = function () {\n        if (this.list_) {\n            this.list_.destroy();\n        }\n        this.menuSurface_.destroy();\n        this.menuSurface_.unlisten(MDCMenuSurfaceFoundation.strings.OPENED_EVENT, this.handleMenuSurfaceOpened_);\n        this.unlisten('keydown', this.handleKeydown_);\n        this.unlisten(MDCListFoundation.strings.ACTION_EVENT, this.handleItemAction_);\n        _super.prototype.destroy.call(this);\n    };\n    Object.defineProperty(MDCMenu.prototype, \"open\", {\n        get: function () {\n            return this.menuSurface_.isOpen();\n        },\n        set: function (value) {\n            if (value) {\n                this.menuSurface_.open();\n            }\n            else {\n                this.menuSurface_.close();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenu.prototype, \"wrapFocus\", {\n        get: function () {\n            return this.list_ ? this.list_.wrapFocus : false;\n        },\n        set: function (value) {\n            if (this.list_) {\n                this.list_.wrapFocus = value;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenu.prototype, \"items\", {\n        /**\n         * Return the items within the menu. Note that this only contains the set of elements within\n         * the items container that are proper list items, and not supplemental / presentational DOM\n         * elements.\n         */\n        get: function () {\n            return this.list_ ? this.list_.listElements : [];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenu.prototype, \"quickOpen\", {\n        set: function (quickOpen) {\n            this.menuSurface_.quickOpen = quickOpen;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Sets default focus state where the menu should focus every time when menu\n     * is opened. Focuses the list root (`DefaultFocusState.LIST_ROOT`) element by\n     * default.\n     * @param focusState Default focus state.\n     */\n    MDCMenu.prototype.setDefaultFocusState = function (focusState) {\n        this.foundation_.setDefaultFocusState(focusState);\n    };\n    /**\n     * @param corner Default anchor corner alignment of top-left menu corner.\n     */\n    MDCMenu.prototype.setAnchorCorner = function (corner) {\n        this.menuSurface_.setAnchorCorner(corner);\n    };\n    MDCMenu.prototype.setAnchorMargin = function (margin) {\n        this.menuSurface_.setAnchorMargin(margin);\n    };\n    /**\n     * Sets the list item as the selected row at the specified index.\n     * @param index Index of list item within menu.\n     */\n    MDCMenu.prototype.setSelectedIndex = function (index) {\n        this.foundation_.setSelectedIndex(index);\n    };\n    /**\n     * Sets the enabled state to isEnabled for the menu item at the given index.\n     * @param index Index of the menu item\n     * @param isEnabled The desired enabled state of the menu item.\n     */\n    MDCMenu.prototype.setEnabled = function (index, isEnabled) {\n        this.foundation_.setEnabled(index, isEnabled);\n    };\n    /**\n     * @return The item within the menu at the index specified.\n     */\n    MDCMenu.prototype.getOptionByIndex = function (index) {\n        var items = this.items;\n        if (index < items.length) {\n            return this.items[index];\n        }\n        else {\n            return null;\n        }\n    };\n    MDCMenu.prototype.setFixedPosition = function (isFixed) {\n        this.menuSurface_.setFixedPosition(isFixed);\n    };\n    MDCMenu.prototype.hoistMenuToBody = function () {\n        this.menuSurface_.hoistMenuToBody();\n    };\n    MDCMenu.prototype.setIsHoisted = function (isHoisted) {\n        this.menuSurface_.setIsHoisted(isHoisted);\n    };\n    MDCMenu.prototype.setAbsolutePosition = function (x, y) {\n        this.menuSurface_.setAbsolutePosition(x, y);\n    };\n    /**\n     * Sets the element that the menu-surface is anchored to.\n     */\n    MDCMenu.prototype.setAnchorElement = function (element) {\n        this.menuSurface_.anchorElement = element;\n    };\n    MDCMenu.prototype.getDefaultFoundation = function () {\n        var _this = this;\n        // DO NOT INLINE this variable. For backward compatibility, foundations take a Partial<MDCFooAdapter>.\n        // To ensure we don't accidentally omit any methods, we need a separate, strongly typed adapter variable.\n        // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n        var adapter = {\n            addClassToElementAtIndex: function (index, className) {\n                var list = _this.items;\n                list[index].classList.add(className);\n            },\n            removeClassFromElementAtIndex: function (index, className) {\n                var list = _this.items;\n                list[index].classList.remove(className);\n            },\n            addAttributeToElementAtIndex: function (index, attr, value) {\n                var list = _this.items;\n                list[index].setAttribute(attr, value);\n            },\n            removeAttributeFromElementAtIndex: function (index, attr) {\n                var list = _this.items;\n                list[index].removeAttribute(attr);\n            },\n            elementContainsClass: function (element, className) { return element.classList.contains(className); },\n            closeSurface: function (skipRestoreFocus) { return _this.menuSurface_.close(skipRestoreFocus); },\n            getElementIndex: function (element) { return _this.items.indexOf(element); },\n            notifySelected: function (evtData) { return _this.emit(strings.SELECTED_EVENT, {\n                index: evtData.index,\n                item: _this.items[evtData.index],\n            }); },\n            getMenuItemCount: function () { return _this.items.length; },\n            focusItemAtIndex: function (index) { return _this.items[index].focus(); },\n            focusListRoot: function () { return _this.root_.querySelector(strings.LIST_SELECTOR).focus(); },\n            isSelectableItemAtIndex: function (index) { return !!closest(_this.items[index], \".\" + cssClasses.MENU_SELECTION_GROUP); },\n            getSelectedSiblingOfItemAtIndex: function (index) {\n                var selectionGroupEl = closest(_this.items[index], \".\" + cssClasses.MENU_SELECTION_GROUP);\n                var selectedItemEl = selectionGroupEl.querySelector(\".\" + cssClasses.MENU_SELECTED_LIST_ITEM);\n                return selectedItemEl ? _this.items.indexOf(selectedItemEl) : -1;\n            },\n        };\n        // tslint:enable:object-literal-sort-keys\n        return new MDCMenuFoundation(adapter);\n    };\n    return MDCMenu;\n}(MDCComponent));\nexport { MDCMenu };\n//# sourceMappingURL=component.js.map","<div\n  bind:this={element}\n  use:useActions={use}\n  use:forwardEvents\n  class=\"\n    mdc-menu-surface\n    {className}\n    {fixed ? 'mdc-menu-surface--fixed' : ''}\n    {isStatic ? 'mdc-menu-surface--open' : ''}\n    {isStatic ? 'smui-menu-surface--static' : ''}\n  \"\n  on:MDCMenuSurface:closed={updateOpen} on:MDCMenuSurface:opened={updateOpen}\n  {...exclude($$props, ['use', 'class', 'static', 'anchor', 'fixed', 'open', 'quickOpen', 'anchorElement', 'anchorCorner', 'element'])}\n><slot></slot></div>\n\n<script context=\"module\">\n  import {Corner, CornerBit} from '@material/menu-surface';\n\n  export {Corner, CornerBit};\n</script>\n\n<script>\n  import {MDCMenuSurface} from '@material/menu-surface';\n  import {onMount, onDestroy, getContext, setContext} from 'svelte';\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from '@smui/common/forwardEvents.js';\n  import {exclude} from '@smui/common/exclude.js';\n  import {useActions} from '@smui/common/useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component(), ['MDCMenuSurface:closed', 'MDCMenuSurface:opened']);\n\n  export let use = [];\n  let className = '';\n  export {className as class};\n  let isStatic = false;\n  export {isStatic as static};\n  export let anchor = true;\n  export let fixed = false;\n  export let open = isStatic;\n  export let quickOpen = false;\n  export let anchorElement = null;\n  export let anchorCorner = null;\n\n  export let element = undefined; // This is exported because Menu needs it.\n  let menuSurface;\n  let instantiate = getContext('SMUI:menu-surface:instantiate');\n  let getInstance = getContext('SMUI:menu-surface:getInstance');\n\n  setContext('SMUI:list:role', 'menu');\n  setContext('SMUI:list:item:role', 'menuitem');\n\n  $: if (element && anchor && !element.parentNode.classList.contains('mdc-menu-surface--anchor')) {\n    element.parentNode.classList.add('mdc-menu-surface--anchor');\n    anchorElement = element.parentNode;\n  }\n\n  $: if (menuSurface && menuSurface.isOpen() !== open) {\n    if (open) {\n      menuSurface.open();\n    } else {\n      menuSurface.close();\n    }\n  }\n\n  $: if (menuSurface && menuSurface.quickOpen !== quickOpen) {\n    menuSurface.quickOpen = quickOpen;\n  }\n\n  $: if (menuSurface && menuSurface.anchorElement !== anchorElement) {\n    menuSurface.anchorElement = anchorElement;\n  }\n\n  let oldFixed = null;\n  $: if (menuSurface && oldFixed !== fixed) {\n    menuSurface.setFixedPosition(fixed);\n    oldFixed = fixed;\n  }\n\n  $: if (menuSurface && anchorCorner != null) {\n    if (Corner.hasOwnProperty(anchorCorner)) {\n      menuSurface.setAnchorCorner(Corner[anchorCorner]);\n    } else if (CornerBit.hasOwnProperty(anchorCorner)) {\n      menuSurface.setAnchorCorner(Corner[anchorCorner]);\n    } else {\n      menuSurface.setAnchorCorner(anchorCorner);\n    }\n  }\n\n  onMount(async () => {\n    if (instantiate !== false) {\n      menuSurface = new MDCMenuSurface(element);\n    } else {\n      menuSurface = await getInstance();\n    }\n  });\n\n  onDestroy(() => {\n    if (anchor) {\n      element && element.parentNode.classList.remove('mdc-menu-surface--anchor');\n    }\n    let isHoisted = false;\n    if (menuSurface) {\n      isHoisted = menuSurface.foundation_.isHoistedElement_;\n      if (instantiate !== false) {\n        menuSurface.destroy();\n      }\n    }\n    if (isHoisted) {\n      element.parentNode.removeChild(element);\n    }\n  });\n\n  function updateOpen() {\n    if (menuSurface) {\n      if (isStatic) {\n        open = true;\n      } else {\n        open = menuSurface.isOpen();\n      }\n    }\n  }\n\n  export function setOpen(value) {\n    open = value;\n  }\n\n  export function setAnchorCorner(...args) {\n    return menuSurface.setAnchorCorner(...args);\n  }\n\n  export function setAnchorMargin(...args) {\n    return menuSurface.setAnchorMargin(...args);\n  }\n\n  export function setFixedPosition(isFixed, ...args) {\n    fixed = isFixed;\n    return menuSurface.setFixedPosition(isFixed, ...args);\n  }\n\n  export function setAbsolutePosition(...args) {\n    return menuSurface.setAbsolutePosition(...args);\n  }\n\n  export function setMenuSurfaceAnchorElement(...args) {\n    return menuSurface.setMenuSurfaceAnchorElement(...args);\n  }\n\n  export function hoistMenuToBody(...args) {\n    return menuSurface.hoistMenuToBody(...args);\n  }\n\n  export function setIsHoisted(...args) {\n    return menuSurface.setIsHoisted(...args);\n  }\n\n  export function getDefaultFoundation(...args) {\n    return menuSurface.getDefaultFoundation(...args);\n  }\n</script>\n","<MenuSurface\n  bind:element\n  use={[forwardEvents, ...use]}\n  class=\"mdc-menu {className}\"\n  on:MDCMenu:selected={updateOpen}\n  on:MDCMenuSurface:closed={updateOpen} on:MDCMenuSurface:opened={updateOpen}\n  {...exclude($$props, ['use', 'class', 'wrapFocus'])}\n><slot></slot></MenuSurface>\n\n<script>\n  import {MDCMenu} from '@material/menu';\n  import {onMount, onDestroy, getContext, setContext} from 'svelte';\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from '@smui/common/forwardEvents.js';\n  import {exclude} from '@smui/common/exclude.js';\n  import {useActions} from '@smui/common/useActions.js';\n  import MenuSurface, {Corner, CornerBit} from '@smui/menu-surface/MenuSurface.svelte';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component(), ['MDCMenu:selected', 'MDCMenuSurface:closed', 'MDCMenuSurface:opened']);\n\n  export let use = [];\n  let className = '';\n  export {className as class};\n  let isStatic = false;\n  export {isStatic as static}; // Purposely omitted from the exclude call above.\n  export let open = isStatic; // Purposely omitted from the exclude call above.\n  export let quickOpen = false; // Purposely omitted from the exclude call above.\n  export let anchorCorner = null; // Purposely omitted from the exclude call above.\n  export let wrapFocus = false;\n\n  let element;\n  let menu;\n  let instantiate = getContext('SMUI:menu:instantiate');\n  let getInstance = getContext('SMUI:menu:getInstance');\n  let menuSurfacePromiseResolve;\n  let menuSurfacePromise = new Promise(resolve => menuSurfacePromiseResolve = resolve);\n  let listPromiseResolve;\n  let listPromise = new Promise(resolve => listPromiseResolve = resolve);\n\n  setContext('SMUI:menu-surface:instantiate', false);\n  setContext('SMUI:menu-surface:getInstance', getMenuSurfaceInstancePromise);\n  setContext('SMUI:list:instantiate', false);\n  setContext('SMUI:list:getInstance', getListInstancePromise);\n\n  $: if (menu && menu.open !== open) {\n    if (isStatic) {\n      open = true;\n    }\n    menu.open = open;\n  }\n\n  $: if (menu && menu.wrapFocus !== wrapFocus) {\n    menu.wrapFocus = wrapFocus;\n  }\n\n  $: if (menu) {\n    menu.quickOpen = quickOpen;\n  }\n\n  $: if (menu && anchorCorner != null) {\n    if (Corner.hasOwnProperty(anchorCorner)) {\n      menu.setAnchorCorner(Corner[anchorCorner]);\n    } else if (CornerBit.hasOwnProperty(anchorCorner)) {\n      menu.setAnchorCorner(Corner[anchorCorner]);\n    } else {\n      menu.setAnchorCorner(anchorCorner);\n    }\n  }\n\n  onMount(async () => {\n    if (instantiate !== false) {\n      menu = new MDCMenu(element);\n    } else {\n      menu = await getInstance();\n    }\n    menuSurfacePromiseResolve(menu.menuSurface_);\n    listPromiseResolve(menu.list_);\n  });\n\n  onDestroy(() => {\n    if (instantiate !== false) {\n      menu && menu.destroy();\n    }\n  });\n\n  function getMenuSurfaceInstancePromise() {\n    return menuSurfacePromise;\n  }\n\n  function getListInstancePromise() {\n    return listPromise;\n  }\n\n  function updateOpen() {\n    open = menu.open;\n  }\n\n  export function setOpen(value) {\n    open = value;\n  }\n\n  export function getItems() {\n    return menu.items;\n  }\n\n  export function setDefaultFocusState(...args) {\n    return menu.setDefaultFocusState(...args);\n  }\n\n  export function setAnchorCorner(...args) {\n    return menu.setAnchorCorner(...args);\n  }\n\n  export function setAnchorMargin(...args) {\n    return menu.setAnchorMargin(...args);\n  }\n\n  export function setSelectedIndex(...args) {\n    return menu.setSelectedIndex(...args);\n  }\n\n  export function setEnabled(...args) {\n    return menu.setEnabled(...args);\n  }\n\n  export function getOptionByIndex(...args) {\n    return menu.getOptionByIndex(...args);\n  }\n\n  export function setFixedPosition(...args) {\n    return menu.setFixedPosition(...args);\n  }\n\n  export function hoistMenuToBody(...args) {\n    return menu.hoistMenuToBody(...args);\n  }\n\n  export function setIsHoisted(...args) {\n    return menu.setIsHoisted(...args);\n  }\n\n  export function setAbsolutePosition(...args) {\n    return menu.setAbsolutePosition(...args);\n  }\n\n  export function setAnchorElement(...args) {\n    return menu.setAnchorElement(...args);\n  }\n\n  export function getDefaultFoundation(...args) {\n    return menu.getDefaultFoundation(...args);\n  }\n</script>\n","<li\n  use:useActions={use}\n  use:forwardEvents\n  {...exclude($$props, ['use', 'list$'])}\n>\n  <ul\n    use:useActions={list$use}\n    class=\"mdc-menu__selection-group {list$class}\"\n    {...exclude(prefixFilter($$props, 'list$'), ['use', 'class'])}\n  ><slot></slot></ul>\n</li>\n\n<script>\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from '@smui/common/forwardEvents.js';\n  import {exclude} from '@smui/common/exclude.js';\n  import {prefixFilter} from '@smui/common/prefixFilter.js';\n  import {useActions} from '@smui/common/useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n\n  export let use = [];\n  export let list$use = [];\n  export let list$class = '';\n</script>\n","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Graphic from '@smui/list/Graphic.js';\n\nexport default classAdderBuilder({\n  class: 'mdc-menu__selection-group-icon',\n  component: Graphic,\n  contexts: {}\n});","import verify      from '../../verify';\r\nimport {isString}  from '../../typeCheck';\r\n\r\n/**\r\n * TabController is an abstract base class through which app-specific\r\n * \"tab payload types\" are supported.  This allows an app-specific object\r\n * model to be introduced in an abstract way.\r\n *\r\n * Various concrete derivations promote the app-specific tab content\r\n * through the `getTabContext()`/`getTabPanel()` polymorphic method\r\n * definitions.\r\n * \r\n * TabController instances are pre-registered to the TabManager,\r\n * allowing them to be dynamically visualized on request (see the\r\n * TabManager API).\r\n */\r\nexport default class TabController {\r\n\r\n  /**\r\n   * Create a TabController.\r\n   *\r\n   * @param {string} tabId - the globally unique key, identifying the\r\n   * tab in question. Typically a federated namespace is employed to\r\n   * insure this key is globally unique (ex: pkgName/scene).\r\n   *\r\n   * @param {string} tabName the human interpretable name displayed in\r\n   * the tab.\r\n   */\r\n  constructor(tabId, tabName) {\r\n\r\n    // validate parameters\r\n    const check = verify.prefix('TabController() constructor parameter violation: ');\r\n    // ... tabId\r\n    check(tabId,              'tabId is required');\r\n    check(isString(tabId),    'tabId must be a string');\r\n    // ... tabName\r\n    check(tabName,            'tabName is required');\r\n    check(isString(tabName),  'tabName must be a string');\r\n\r\n    // carve out our object state\r\n    this.tabId   = tabId;\r\n    this.tabName = tabName;\r\n  }\r\n\r\n  /**\r\n   * Return self's tabId.\r\n   * @returns {string} the tabId of self.\r\n   */\r\n  getTabId() {\r\n    return this.tabId;\r\n  }\r\n\r\n  /**\r\n   * Return self's tabName.\r\n   * @returns {string} the tabName of self.\r\n   */\r\n  getTabName() {\r\n    return this.tabName;\r\n  }\r\n\r\n  /**\r\n   * Return self's qualifying description (for example, the Pkg name\r\n   * of a PkgEntry).  This is used (in one case) to supplement/qualify\r\n   * the active tab in the AppBar.  So in this example, it helps to\r\n   * qualify two PkgEntries with the same name in different packages.\r\n   *\r\n   * This is an abstract method that must be implemented by the class\r\n   * derivations.\r\n   *\r\n   * @returns {string} self's qualifying supplemental description\r\n   */\r\n  getTabQualifyingDesc() {\r\n    throw new Error(`***ERROR*** TabController.getTabQualifyingDesc() the ${this.diagClassName()} class derivation MUST implement this abstract method (tabId: ${this.tabId}, tabName: ${this.tabName})!!`);\r\n  }\r\n\r\n  /**\r\n   * Return the app-specific object targeted by this tab.\r\n   *\r\n   * This is an abstract method that must be implemented by the class\r\n   * derivations.\r\n   *\r\n   * @returns {any} the app-specific object targeted by this tab.\r\n   */\r\n  getTabContext() {\r\n    throw new Error(`***ERROR*** TabController.getTabContext() the ${this.diagClassName()} class derivation MUST implement this abstract method (tabId: ${this.tabId}, tabName: ${this.tabName})!!`);\r\n  }\r\n\r\n  /**\r\n   * Return the component to be rendered in the tab panel.\r\n   *\r\n   * This is an abstract method that must be implemented by the class\r\n   * derivations.\r\n   *\r\n   * @returns {{Comp, props}} the Comp class (and optional props) to\r\n   * be rendered in the tab panel.\r\n   */\r\n  getTabPanel() {\r\n    throw new Error(`***ERROR*** TabController.getTabPanel() the ${this.diagClassName()} class derivation MUST implement this abstract method (tabId: ${this.tabId}, tabName: ${this.tabName})!!`);\r\n  }\r\n\r\n  /**\r\n   * Optionally return an AppContextMenuComp that supplements the Tab's\r\n   * standard context menu.\r\n   *\r\n   * By default, no AppContextMenuComp is provided (i.e. returns null).\r\n   *\r\n   * @returns {AppContextMenuComp}} a Comp class that supplements the\r\n   * Tab's standard context menu (null for none).  \r\n   * \r\n   * API: AppContextMenuComp(tab)\r\n   *      The component should accept a tab parameter (TabController)\r\n   *      for which it is operating on behalf of.\r\n   */\r\n  getAppContextMenu() {\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Return self's \"real\" class name, used for diagnostic purposes\r\n   * (such as logs and errors).  The name is unmangled (even in\r\n   * production builds).\r\n   *\r\n   * @returns {string} self's \"real\" class name.\r\n   */\r\n  diagClassName() {\r\n    return this.constructor.unmangledName || this.constructor.name;\r\n  }\r\n}\r\nTabController.unmangledName = 'TabController';\r\n","<script>\r\n import {onMount}  from 'svelte';\r\n import verify     from '../util/verify';\r\n import {isView}   from '../util/typeCheck';\r\n\r\n // component params\r\n export let view; // ... a SmartView\r\n\r\n // validate parameters\r\n const check = verify.prefix('<RenderSmartView> component property violation: ');\r\n // ... view\r\n check(view,          'view is required');\r\n check(isView(view),  'view must be a SmartView object');\r\n \r\n const {width, height} = view.getSize();\r\n \r\n let divContainer;\r\n \r\n onMount( () => {\r\n   // activate the Konva visualization\r\n   view.mount(divContainer);\r\n\r\n   // on unmount() - deactivate the Konva visualization\r\n   return () => view.unmount();\r\n });\r\n\r\n // allow DnD drops based on polymorphic SmartObj.pastable()\r\n // ... GRRR: Must implement BOTH dragenter/dragover BECAUSE have to override the default implementation (which prevents a drop).\r\n //           This is optimized by caching, since nothing changes (for us) in drag over.\r\n let isAllowed = null;\r\n function allowDrops_enter(e) {\r\n   // console.log(`xx allowDrops_enter on: `, {pallet: view.pallet, types: e.dataTransfer.types});\r\n   isAllowed = view.pallet.pastable(e);\r\n   allowDrops_over(e);\r\n };\r\n function allowDrops_over(e) {\r\n   // console.log(`xx allowDrops_over on: `);\r\n   if (isAllowed) {\r\n     e.preventDefault(); // allow drop (nullify default disallow behavior)\r\n     // console.log(`xx dropEffect BEFORE: ${e.dataTransfer.dropEffect}`);\r\n     e.dataTransfer.dropEffect = 'link'; // change cursor to reflect droppable\r\n     // console.log(`xx dropEffect AFTER: ${e.dataTransfer.dropEffect}`);\r\n   }\r\n }\r\n\r\n // perform DnD drop based on polymorphic SmartObj.paste()\r\n function handleDrop(e) {\r\n   // console.log(`xx handleDrop`);\r\n   view.pallet.paste(e);\r\n };\r\n\r\n</script>\r\n\r\n<div bind:this={divContainer}\r\n     {...$$restProps}\r\n     on:dragenter={allowDrops_enter}\r\n     on:dragover={allowDrops_over}\r\n     on:drop|preventDefault={handleDrop}\r\n     style=\"background-color: LightGray; width: {width}px; height: {height}px; border: 1px solid black;\"/>\r\n","import TabController    from './TabController';\r\nimport {writable, get}  from 'svelte/store';\r\nimport verify           from '../../verify';\r\nimport {isString,\r\n        isBoolean}      from '../../typeCheck';\r\nimport {createLogger}   from '../../logger';\r\nimport checkUnknownArgs from '../../../util/checkUnknownArgs';\r\n\r\n// our internal diagnostic logger\r\nconst log = createLogger('***DIAG*** TabManager ... ').disable();\r\n\r\n/**\r\n * TabManager is the primary class that manages a set of dynamic tabs\r\n * for a given context/visualization, and is the primary input to the\r\n * `<Tabs>` UI component.\r\n *\r\n * TabManager contains both state (Svelte stores) and API in support\r\n * of the interaction/visualization of a dynamic set of tabs.\r\n *\r\n * **Please See**: `index.js` for a usage summary.\r\n *\r\n * **Note**: The properties and API of this object are packaged in\r\n *           such a way as to allow them to be used in a functional way.\r\n *           In other words, the methods are bound to the object\r\n *           instance, allowing them to be used as isolated functions.\r\n */\r\nexport default class TabManager {\r\n\r\n  /**\r\n   * Create a TabManager, managing all the dynamic tabs of a given context.\r\n   *\r\n   * @param {string} ctxName - a human interpretable name for self's context.\r\n   */\r\n  constructor(ctxName) {\r\n\r\n    // validate invocation/parameters\r\n    const check = verify.prefix('TabManager() constructor violation: ');\r\n    // ... new usage\r\n    check(this instanceof TabManager, 'MUST be called with the new keyword');\r\n    // ... ctxName\r\n    check(ctxName,              'ctxName param is required');\r\n    check(isString(ctxName),    'ctxName param must be a string');\r\n\r\n    // carve out our object state\r\n    this.ctxName      = ctxName;        // a human interpretable name for self's context\r\n    this.tabs         = writable([]);   // reactive svelte store representing ALL visualized tabs: TabController[]\r\n    this.activeTab    = writable(null); // reactive svelte store representing the current active tab: TabController (null for NO tabs)\r\n    this.previewTab   = writable(null); // reactive svelte store representing the reusable preview tab (if any): TabController (null for none)\r\n    this.tabRegistry  = {};             // self's tab registry catalog: ObjectMap[key:tabId, value: TabController]\r\n\r\n    // bind our methods to self's object, allowing them to be used as isolated functions\r\n    this.preregisterTab   = this.preregisterTab.bind(this);\r\n    this.getRegisteredTab = this.getRegisteredTab.bind(this);\r\n    this.activateTab      = this.activateTab.bind(this);\r\n    this.closeTab         = this.closeTab.bind(this);\r\n    this.closeOtherTabs   = this.closeOtherTabs.bind(this);\r\n    this.closeTabsToRight = this.closeTabsToRight.bind(this);\r\n    this.closeAllTabs     = this.closeAllTabs.bind(this);\r\n    this.repositionTab    = this.repositionTab.bind(this);\r\n  }\r\n\r\n  /**\r\n   * A human interpretable name for self's context.\r\n   * @type {string}\r\n   */\r\n//ctxName; ... Svelte build cannot currently handle instance properties\r\n\r\n\r\n  //****************************************************************************\r\n  //*** Svelte Stores\r\n  //****************************************************************************\r\n\r\n  /**\r\n   * A reactive svelte store representing ALL visualized tabs.\r\n   * @type {TabController[]}\r\n   */\r\n//tabs; ... Svelte build cannot currently handle instance properties\r\n\r\n  /**\r\n   * A reactive svelte store representing the current active tab (null\r\n   * for NO tabs).\r\n   * @type {TabController}\r\n   */\r\n//activeTab; ... Svelte build cannot currently handle instance properties\r\n\r\n  /**\r\n   * A reactive svelte store representing the reusable preview tab (if\r\n   * any) (null for none)\r\n   * TODO: consider making private\r\n   * @type {TabController}\r\n   */\r\n//previewTab; ... Svelte build cannot currently handle instance properties\r\n\r\n\r\n  //****************************************************************************\r\n  //*** tab registry related\r\n  //****************************************************************************\r\n\r\n  /**\r\n   * Self's tab registry catalog.\r\n   * @type {ObjectMap[key:tabId, value: TabController]}\r\n   * @private\r\n   */\r\n//tabRegistry; ... Svelte build cannot currently handle instance properties\r\n\r\n  /**\r\n   * Preregister the supplied `tabController` as a potential tab that\r\n   * can be rendered in our context.\r\n   *\r\n   * @param {TabController} tabController the controller to register.\r\n   * NOTE: The tabController models both the tabId and tabName.\r\n   *\r\n   * @throws {Error} an Error is thrown for invalid params (or\r\n   * when the controller has already been registered).\r\n   */\r\n  preregisterTab(tabController) {\r\n\r\n    // validate parameters\r\n    const check = verify.prefix('TabManager.preregisterTab() parameter violation: ');\r\n    // ... tabController\r\n    check(tabController,                          'tabController is required');\r\n    check(tabController instanceof TabController, 'tabController must be a TabController instance');\r\n\r\n    // maintain our tabRegistry catalog\r\n    const tabId = tabController.getTabId();\r\n    // console.log(`xx TabManager.preregisterTab() registering tabController(${tabId}): `, tabController);\r\n    if (this.tabRegistry[tabId]) { // verify tabController is not already loaded!\r\n      throw new Error(`***ERROR*** TabManager.preregisterTab() tabId: ${tabId} is already registered :-(`);\r\n    }\r\n    else {\r\n      this.tabRegistry[tabId] = tabController;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return the TabController registered to the supplied `tabId`\r\n   * (undefined for NOT registered).\r\n   *\r\n   * @param {string} tabId - the id of the TabController to return.\r\n   *\r\n   * @returns {TabController} the TabController registered to the\r\n   * supplied `tabId` (undefined for NOT registered).\r\n   */\r\n  getRegisteredTab(tabId) {\r\n    // validate parameters\r\n    const check = verify.prefix('TabManager.getRegisteredTab() parameter violation: ');\r\n    // ... tabId\r\n    check(tabId,             'tabId is required');\r\n    check(isString(tabId),   'tabId must be a string');\r\n\r\n    // return the TabController (if any)\r\n    return this.tabRegistry[tabId];\r\n  }\r\n\r\n\r\n  //****************************************************************************\r\n  //*** manage our dynamic tabs\r\n  //****************************************************************************\r\n\r\n  /**\r\n   * Activate the supplied tabId (visualizing it's content).\r\n   *\r\n   * This can introduce a new dynamic tab (on first occurrence), or\r\n   * simply activate an existing tab (when it has previously been\r\n   * activated).\r\n   *\r\n   * @param {string} tabId - the id of the pre-registered TabController\r\n   * to activate.\r\n   * @param {boolean} [preview=true] - an indicator as to whether to\r\n   * utilize a \"preview\" tab (which can be re-used by other \"preview\"\r\n   * activations).\r\n   */\r\n  activateTab(tabId, preview=true) {\r\n    // validate parameters\r\n    const check = verify.prefix('TabManager.activateTab() parameter violation: ');\r\n    // ... tabId\r\n    check(tabId,              'tabId is required');\r\n    check(isString(tabId),    'tabId must be a string');\r\n    // ... preview\r\n    check(isBoolean(preview), 'preview must be a boolean');\r\n\r\n    let logQualifier = '';\r\n\r\n    // get our current state\r\n    // NOTE: get() is somewhat inefficient, BUT this is NOT a heavy usage\r\n    const $tabs       = get(this.tabs);\r\n    const $activeTab  = get(this.activeTab);\r\n    const $previewTab = get(this.previewTab);\r\n\r\n    // starting out our tabs are unchanged\r\n    let _tabs       = $tabs;\r\n    let _previewTab = $previewTab;\r\n\r\n    // locate the requested  tab (if any), when it is already under our control\r\n    let _activeTab = findTab(tabId, $tabs);\r\n\r\n    // when the requested tab IS currently under our control\r\n    if (_activeTab) {\r\n      // make the tab permanent (when requested), if it was previously a preview tab\r\n      if (_activeTab === _previewTab && !preview) {\r\n        _previewTab = null;\r\n      }\r\n      logQualifier += ` ... activated EXISTING tab: ${_activeTab.getTabName()}`;\r\n    }\r\n    // when the requested tab is NOT currently under our control, setup a new tab\r\n    else {\r\n      // locate tab from our registry\r\n      _activeTab = this.getRegisteredTab(tabId);\r\n      check(_activeTab, `tabId ${tabId} has NOT been pre-registered, so we cannot activate it :-(`);\r\n\r\n      // for preview tab requests, when a preview slot already exists, reuse that slot\r\n      if (preview && _previewTab) {\r\n        _tabs       = $tabs.map( (tab) => tab===_previewTab ? _activeTab : tab );\r\n        _previewTab = _activeTab;\r\n        logQualifier += ` ... introduced NEW tab: ${_activeTab.getTabName()} in existing preview slot`;\r\n      }\r\n      // otherwise carve out a new tab (at end)\r\n      else {\r\n        _tabs       = [...$tabs, _activeTab];\r\n        _previewTab = preview ? _activeTab : _previewTab;\r\n        logQualifier += ` ... introduced NEW tab: ${_activeTab.getTabName()} at end`;\r\n      }\r\n    }\r\n\r\n    // update store (when changed)\r\n    this.syncStore({\r\n      onBehalfOf: `activateTab('${tabId}', preview:${preview})`,\r\n      logQualifier,\r\n      tabs:        {before: $tabs,      after: _tabs},\r\n      activeTab:   {before: $activeTab, after: _activeTab},\r\n      previewTab:  {before: $previewTab, after: _previewTab},\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Close the tab of the supplied tabId.\r\n   *\r\n   * @param {string} tabId - the id of the TabController to close.\r\n   */\r\n  closeTab(tabId) {\r\n    // validate parameters\r\n    const check = verify.prefix('TabManager.closeTab() parameter violation: ');\r\n    // ... tabId\r\n    check(tabId,             'tabId is required');\r\n    check(isString(tabId),   'tabId must be a string');\r\n\r\n    let logQualifier = '';\r\n\r\n    // get our current state\r\n    // NOTE: get() is somewhat inefficient, BUT this is NOT a heavy usage\r\n    const $tabs       = get(this.tabs);\r\n    const $activeTab  = get(this.activeTab);\r\n    const $previewTab = get(this.previewTab);\r\n\r\n    // locate the tab to close\r\n    const closeTabIndex = findTabIndex(tabId, $tabs);\r\n    if (closeTabIndex < 0) { // ... no-op if we can't find it\r\n      log(`closeTab('${tabId}') ... tab NOT found ... NOTHING CHANGED!!`);\r\n      return;\r\n    }\r\n    const closeTab = $tabs[closeTabIndex];\r\n\r\n    // adjust activeTab (when it is being closed)\r\n    let _activeTab = $activeTab;\r\n    if (closeTab === $activeTab) {\r\n      // shift the active tab to the right (except on end - to the left)\r\n      // REMEMBER: we are dealing with the tabs array state BEFORE it has been altered\r\n      //           ... we alter the tabs array in the next step (i.e. close our tab)\r\n\r\n      //                                                  AT END ...        NOT AT END ...\r\n      //                                                  ===============   ===============\r\n      const nextIndx = (closeTabIndex===$tabs.length-1) ? closeTabIndex-1 : closeTabIndex+1;\r\n      _activeTab = nextIndx < 0 ? null : $tabs[nextIndx];\r\n      logQualifier += ` ... activeTab adjusted`;\r\n    }\r\n\r\n    // clear previewTab (when it is being closed)\r\n    let _previewTab = $previewTab;\r\n    if (closeTab === $previewTab) {\r\n      _previewTab = null;\r\n      logQualifier += ` ... previewTab cleared`;\r\n    }\r\n\r\n    // purge the requested tab\r\n    const _tabs = $tabs.filter( (tab) => tab !== closeTab );\r\n    logQualifier += ` ... tab purged`;\r\n\r\n    // update store (when changed)\r\n    this.syncStore({\r\n      onBehalfOf:  `closeTab('${tabId}')`,\r\n      logQualifier,\r\n      tabs:        {before: $tabs,      after: _tabs},\r\n      activeTab:   {before: $activeTab, after: _activeTab},\r\n      previewTab:  {before: $previewTab, after: _previewTab},\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Close all tabs except the supplied tabId.\r\n   *\r\n   * @param {string} tabId - the id of the Tab to remain open.\r\n   */\r\n  closeOtherTabs(tabId) {\r\n    // validate parameters\r\n    const check = verify.prefix('TabManager.closeOtherTabs() parameter violation: ');\r\n    // ... tabId\r\n    check(tabId,             'tabId is required');\r\n    check(isString(tabId),   'tabId must be a string');\r\n\r\n    let logQualifier = '';\r\n\r\n    // get our current state\r\n    // NOTE: get() is somewhat inefficient, BUT this is NOT a heavy usage\r\n    const $tabs       = get(this.tabs);\r\n    const $activeTab  = get(this.activeTab);\r\n    const $previewTab = get(this.previewTab);\r\n\r\n    // locate the tab to retain\r\n    const retainTabIndex = findTabIndex(tabId, $tabs);\r\n    if (retainTabIndex < 0) { // ... no-op if we can't find it\r\n      log(`closeOtherTabs('${tabId}') ... tab NOT found ... NO-OP ... NOTHING CHANGED!!`);\r\n      return;\r\n    }\r\n    const retainTab = $tabs[retainTabIndex];\r\n\r\n    // adjust activeTab (when was not currently active - it is the only one left)\r\n    let _activeTab = $activeTab;\r\n    if (retainTab !== _activeTab) {\r\n      _activeTab   = retainTab;\r\n      logQualifier += ` ... activeTab adjusted`;\r\n    }\r\n\r\n    // clear previewTab (when it is being closed)\r\n    let _previewTab = $previewTab;\r\n    if (_previewTab && retainTab !== _previewTab) {\r\n      _previewTab = null;\r\n      logQualifier += ` ... previewTab cleared`;\r\n    }\r\n\r\n    // purge the requested tabs\r\n    let _tabs = $tabs;\r\n    if ($tabs.length > 1) {\r\n      _tabs = $tabs.filter( (tab) => tab === retainTab );\r\n      logQualifier += ` ... other tabs purged`;\r\n    }\r\n\r\n    // update store (when changed)\r\n    this.syncStore({\r\n      onBehalfOf:  `closeOtherTabs('${tabId}')`,\r\n      logQualifier,\r\n      tabs:        {before: $tabs,      after: _tabs},\r\n      activeTab:   {before: $activeTab, after: _activeTab},\r\n      previewTab:  {before: $previewTab, after: _previewTab},\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Close all tabs to the right of the supplied tabId.\r\n   *\r\n   * @param {string} tabId - the id of the anchor Tab (remaining open and to\r\n   * the left).\r\n   */\r\n  closeTabsToRight(tabId) {\r\n    // validate parameters\r\n    const check = verify.prefix('TabManager.closeTabsToRight() parameter violation: ');\r\n    // ... tabId\r\n    check(tabId,             'tabId is required');\r\n    check(isString(tabId),   'tabId must be a string');\r\n\r\n    let logQualifier = '';\r\n\r\n    // get our current state\r\n    // NOTE: get() is somewhat inefficient, BUT this is NOT a heavy usage\r\n    const $tabs       = get(this.tabs);\r\n    const $activeTab  = get(this.activeTab);\r\n    const $previewTab = get(this.previewTab);\r\n\r\n    // locate the anchorTab (remaining open and to the left)\r\n    const anchorTabIndex = findTabIndex(tabId, $tabs);\r\n    if (anchorTabIndex < 0) { // ... no-op if we can't find it\r\n      log(`closeTabsToRight('${tabId}') ... tab NOT found ... NO-OP ... NOTHING CHANGED!!`);\r\n      return;\r\n    }\r\n    const anchorTab = $tabs[anchorTabIndex];\r\n\r\n    // purge the requested tabs\r\n    let _tabs = $tabs;\r\n    if ($tabs.length > anchorTabIndex+1) {\r\n      _tabs = $tabs.filter( (tab, indx) => indx <= anchorTabIndex );\r\n      logQualifier += ` ... tabs to the right purged`;\r\n    }\r\n\r\n    // adjust activeTab (when the prior active has been closed)\r\n    let _activeTab = $activeTab;\r\n    if (!findTab(_activeTab.getTabId(), _tabs)) {\r\n      _activeTab   = anchorTab;\r\n      logQualifier += ` ... activeTab adjusted`;\r\n    }\r\n\r\n    // clear previewTab (when it has been closed)\r\n    let _previewTab = $previewTab;\r\n    if (_previewTab && !findTab(_previewTab.getTabId(), _tabs)) {\r\n      _previewTab = null;\r\n      logQualifier += ` ... previewTab cleared`;\r\n    }\r\n\r\n    // update store (when changed)\r\n    this.syncStore({\r\n      onBehalfOf:  `closeTabsToRight('${tabId}')`,\r\n      logQualifier,\r\n      tabs:        {before: $tabs,      after: _tabs},\r\n      activeTab:   {before: $activeTab, after: _activeTab},\r\n      previewTab:  {before: $previewTab, after: _previewTab},\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Close all tabs.\r\n   */\r\n  closeAllTabs() {\r\n\r\n    let logQualifier = '';\r\n\r\n    // get our current state\r\n    // NOTE: get() is somewhat inefficient, BUT this is NOT a heavy usage\r\n    const $tabs       = get(this.tabs);\r\n    const $activeTab  = get(this.activeTab);\r\n    const $previewTab = get(this.previewTab);\r\n\r\n    // close all tabs\r\n    let _tabs = $tabs;\r\n    if ($tabs.length > 0) {\r\n      _tabs = [];\r\n      logQualifier += ` ... all tabs closed`;\r\n    }\r\n\r\n    // adjust activeTab (when it has been closed)\r\n    let _activeTab = $activeTab;\r\n    if (_activeTab) {\r\n      _activeTab   = null;\r\n      logQualifier += ` ... activeTab cleared`;\r\n    }\r\n\r\n    // clear previewTab (when it has been closed)\r\n    let _previewTab = $previewTab;\r\n    if (_previewTab) {\r\n      _previewTab = null;\r\n      logQualifier += ` ... previewTab cleared`;\r\n    }\r\n\r\n    // update store (when changed)\r\n    this.syncStore({\r\n      onBehalfOf:  `closeAllTabs()`,\r\n      logQualifier,\r\n      tabs:        {before: $tabs,      after: _tabs},\r\n      activeTab:   {before: $activeTab, after: _activeTab},\r\n      previewTab:  {before: $previewTab, after: _previewTab},\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Reposition the supplied tab.\r\n   *\r\n   * @param {string} fromTabId - the id of the TabController to move.\r\n   * @param {string} toTabId - the id of the TabController to reposition to.\r\n   * @param {string} placement - a placement directive (before/after toTabId).\r\n   */\r\n  repositionTab(fromTabId, toTabId, placement) {\r\n    // validate parameters\r\n    const check = verify.prefix('TabManager.repositionTab() parameter violation: ');\r\n    // ... fromTabId\r\n    check(fromTabId,             'fromTabId is required');\r\n    check(isString(fromTabId),   'fromTabId must be a string');\r\n    // ... toTabId\r\n    check(toTabId,               'toTabId is required');\r\n    check(isString(toTabId),     'toTabId must be a string');\r\n    // ... placement\r\n    check(placement,             'placement is required');\r\n    check(isString(placement),   'placement must be a string');\r\n    check(placement==='before' ||\r\n          placement==='after',   `placement must be either 'before' or 'after', NOT: '${placement}'`);\r\n\r\n    let logQualifier = '';\r\n\r\n    // get our current state\r\n    // NOTE: get() is somewhat inefficient, BUT this is NOT a heavy usage\r\n    const $tabs = get(this.tabs);\r\n    let   _tabs = $tabs;\r\n\r\n    // locate the tab objects of interest\r\n    const fromTab = $tabs[findTabIndex(fromTabId, $tabs)];\r\n    const toTab   = $tabs[findTabIndex(toTabId,   $tabs)];\r\n\r\n    // no-op when to/from are the same (i.e. dropped on self)\r\n    // ... don't worry about adjacent cases (where it results in a no-op)\r\n    //       - no real harm done\r\n    //       - would make routine needlessly complex\r\n    if (fromTab === toTab) {\r\n      logQualifier += ` ... no-op from/to are the same`;\r\n    }\r\n    else { // ... reposition the tab\r\n\r\n      // remove `fromTab` out of it's current position\r\n      // ... making a working copy of $tabs (i.e. future usage is _tabs NOT $tabs)\r\n      _tabs = $tabs.filter( (tab) => tab !== fromTab );\r\n      logQualifier += ` ... fromTab removed`;\r\n\r\n      // reposition `fromTab` to it's new position (relative to `toTab` and `placement`)\r\n      const toNodeIndx = _tabs.indexOf(toTab) + (placement === 'after' ? 1 : 0);\r\n      _tabs.splice(toNodeIndx, 0, fromTab);\r\n      logQualifier += ` ... fromTab repositioned`;\r\n    }\r\n\r\n    // update store (when changed)\r\n    this.syncStore({\r\n      onBehalfOf:  `repositionTab('${fromTabId}', '${toTabId}', '${placement}')`,\r\n      logQualifier,\r\n      tabs:        {before: $tabs,      after: _tabs},\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * Internal method to synchronize self's store when it has changed.\r\n   *\r\n   * A before/after image can be supplied for each store managed by\r\n   * self.  Each corresponding store will be updated if a change is\r\n   * detected.  If the store is NOT supplied, no change will be\r\n   * analyzed (for that given store).\r\n   * \r\n   * **Please Note** this method uses named parameters.\r\n   *\r\n   * @param {string} onBehalfOf - a human interpretable qualifier of\r\n   * whose behalf we are working (used in logging) ... ex:\r\n   * `activateTab('${tabId}', preview:${preview})`.\r\n   *\r\n   * @param {string} [logQualifier] - an optional human interpretable\r\n   * qualifier used in logging ... ex:\r\n   * ` ... introduced NEW tab: ${tabName} at end`\r\n   * \r\n   * @param {{before, after}} [tabs] - the before/after image of the\r\n   * tabs store (TabController[]) ... if NOT supplied no change will\r\n   * be synced.\r\n   *\r\n   * @param {{before, after}} [activeTab] - the before/after image of the\r\n   * activeTab store (TabController).\r\n   *\r\n   * @param {{before, after}} [previewTab] - the before/after image of the\r\n   * previewTab store (TabController).\r\n   *\r\n   * @private\r\n   */\r\n  syncStore({onBehalfOf, logQualifier='', tabs, activeTab, previewTab, ...unknownArgs}={}) {\r\n    // validate parameters\r\n    const check = verify.prefix('TabManager.syncStore() parameter violation: ');\r\n    // ... onBehalfOf\r\n    check(onBehalfOf,             'onBehalfOf is required');\r\n    check(isString(onBehalfOf),   'onBehalfOf must be a string');\r\n    // ... logQualifier\r\n    check(isString(logQualifier), 'logQualifier must be a string');\r\n    // ... don't bother with remaining params (this is an internal method)\r\n    // ... unknown arguments\r\n    checkUnknownArgs(check, unknownArgs, arguments);\r\n\r\n    // update each store (only when changed)\r\n    const tabsChanged       = tabs       ? tabs.before       !== tabs.after       : false;\r\n    const activeTabChanged  = activeTab  ? activeTab.before  !== activeTab.after  : false;\r\n    const previewTabChanged = previewTab ? previewTab.before !== previewTab.after : false;\r\n    if (tabsChanged) {\r\n      this.tabs.set(tabs.after);\r\n    }\r\n    if (activeTabChanged) {\r\n      this.activeTab.set(activeTab.after);\r\n    }\r\n    if (previewTabChanged) {\r\n      this.previewTab.set(previewTab.after);\r\n    }\r\n    if ( !(tabsChanged || activeTabChanged || previewTabChanged)) {\r\n      logQualifier += ` ... NOTHING CHANGED!!`;\r\n    }\r\n\r\n    // log what happened\r\n    log(`${onBehalfOf} ... state changed: {tabs: ${tabsChanged}, activeTab: ${activeTabChanged}, previewTab: ${previewTabChanged}} ${logQualifier}`);\r\n  }\r\n\r\n}\r\n\r\n\r\n// utility functions\r\nconst findTab      = (tabId, tabs) => tabs.find(      (tabController) => tabController.tabId===tabId );\r\nconst findTabIndex = (tabId, tabs) => tabs.findIndex( (tabController) => tabController.tabId===tabId );\r\n","import TabManager  from '../util/ui/tabManager/TabManager';\r\n\r\nexport default new TabManager('pkgEntryTabs');\r\n","<script>\r\n import {SelectionGroup,\r\n         SelectionGroupIcon} from '@smui/menu';\r\n import {Item, \r\n         Text,\r\n         Separator}          from '@smui/list';\r\n import pkgEntryTabManager   from './pkgEntryTabManager';\r\n import DispMode             from '../core/DispMode';\r\n import {createLogger}       from '../util/logger';\r\n\r\n // accept component props\r\n export let tab; // ... the TabController we are working on behalf of\r\n\r\n // extract the various controls needed from our very own tabManager (pkgEntryTabManager)\r\n const {activeTab, activateTab} = pkgEntryTabManager;\r\n\r\n // extract needed characteristics from the supplied tab\r\n const tabId         = tab.getTabId();\r\n const pkgEntry      = tab.getTabContext();\r\n const changeManager = pkgEntry.changeManager;\r\n\r\n // DispMode management\r\n $: currentDispMode = $changeManager.dispMode;\r\n function handleDispModeChange(requestedDispMode) {\r\n   const log = createLogger(`***DIAG*** <PkgEntryTabsContextMenu> handleDispModeChange(${requestedDispMode}) ` +\r\n                            `for tab: ${tabId} with currentDispMode: ${currentDispMode} ... `).disable();\r\n\r\n   // change this Tab's PkgEntry's DispMode\r\n   if (requestedDispMode !== currentDispMode) {\r\n     log('changing the DispMode');\r\n     changeManager.changeDispMode(requestedDispMode);\r\n   }\r\n   else {\r\n     log('detected NO change in the DispMode');\r\n     return; // don't go any further if NO change\r\n   }\r\n\r\n   // ALSO activate this tab, when the context menu's tab is not currently active\r\n   // ... even when dispMode has NOT changed\r\n   if (tab !== $activeTab) {\r\n     log('ALSO making this tab active :-)');\r\n     activateTab(tabId, /*preview*/true); // use preview (if we are already non-preview it WORKS)\r\n   }\r\n }\r\n</script>\r\n\r\n<!-- here is the additional context menu items, specific to PkgEntries -->\r\n<Item disabled><Text>Display Mode:</Text></Item>\r\n<SelectionGroup>\r\n  {#each Array.from(DispMode) as dm (dm.enumKey)}\r\n    <Item on:SMUI:action={() => handleDispModeChange(dm)}\r\n          disabled={!pkgEntry.canHandleDispMode(dm)}\r\n          selected={currentDispMode === dm}>\r\n      <SelectionGroupIcon><i class=\"material-icons\">check</i></SelectionGroupIcon>\r\n      <Text>{dm.enumKey}</Text>\r\n    </Item>\r\n\t{/each}\r\n</SelectionGroup>\r\n<Separator/>\r\n","import TabController    from '../util/ui/tabManager/TabController';\r\n\r\nimport verify           from '../util/verify';\r\nimport {isPkgEntry}     from '../util/typeCheck';\r\n\r\nimport SmartView        from '../core/SmartView';\r\nimport RenderSmartView  from '../core/RenderSmartView.svelte'\r\n\r\nimport PkgEntryTabsContextMenu  from './PkgEntryTabsContextMenu.svelte'\r\n\r\n/**\r\n * TabControllerPkgEntry is a concrete class that manages PkgEntry tabs\r\n */\r\nexport default class TabControllerPkgEntry extends TabController {\r\n\r\n  /**\r\n   * Create a TabControllerPkgEntry.\r\n   *\r\n   * @param {PkgEntry} pkgEntry the pkgEntry being displayed/managed by this tab.\r\n   */\r\n  constructor(pkgEntry) {\r\n    // inject content in our parent class\r\n    super(pkgEntry.getPkgEntryId(), // tabId\r\n          pkgEntry.getName());      // tabName\r\n\r\n    // validate parameters\r\n    const check = verify.prefix(`${this.diagClassName()}() constructor parameter violation: `);\r\n    // ... pkgEntry\r\n    check(pkgEntry,              'pkgEntry is required');\r\n    check(isPkgEntry(pkgEntry),  'pkgEntry must be a PkgEntry object');\r\n\r\n    // retain state specific to this derivation\r\n    this.pkgEntry = pkgEntry;\r\n    // ... re-use previously created SmartView instances\r\n    //     - would happen when multiple/duplicate registrations occur to a TabManager\r\n    //       ... in current code this does NOT happen (so this is defensive only)\r\n    //     - we cannot create duplicate SmartView objects (per pkgEntry)\r\n    //       ... because pkgEntry.viewParent will only reference the latest SmartView\r\n    //       ... causing integrity issues\r\n    //           ex: smartObject.trickleUpChange() CATASTROPHIC ERROR when it hits a rogue SmartView that is NOT mounted\r\n    this.view = pkgEntry.viewParent || new SmartView({id: `view-${this.getTabId()}`, name: `view-${this.getTabName()}`, pallet: pkgEntry});\r\n  }\r\n\r\n  /**\r\n   * Return self's qualifying description (in THIS derivation, the Pkg name\r\n   * of a PkgEntry).  This is used (in one case) to supplement/qualify\r\n   * the active tab in the AppBar.  So in this example, it helps to\r\n   * qualify two PkgEntries with the same name in different packages.\r\n   *\r\n   * @returns {string} self's qualifying supplemental description (our Pkg name)\r\n   */\r\n  getTabQualifyingDesc() {\r\n    return this.pkgEntry.getPkg().getPkgName();\r\n  }\r\n\r\n  /**\r\n   * Expose our pkgEntry - the app-specific object targeted by this tab.\r\n   */\r\n  getTabContext() {\r\n    return this.pkgEntry;\r\n  }\r\n\r\n  /**\r\n   * Expose our component to be rendered in the tab panel.\r\n   */\r\n  getTabPanel() {\r\n    return {Comp: RenderSmartView, props: {view: this.view}};\r\n  }\r\n\r\n  /**\r\n   * Expose our supplement to the Tab's popup context menu.\r\n   * By default, no AppContextMenuComp is provided (i.e. returns null).\r\n   */\r\n  getAppContextMenu() {\r\n    return PkgEntryTabsContextMenu; // <PkgEntryTabsContextMenu tab={tabContext}/>\r\n  }\r\n\r\n}\r\nTabControllerPkgEntry.unmangledName = 'TabControllerPkgEntry';\r\n","<div\n  use:useActions={use}\n  use:forwardEvents\n  class=\"\n    smui-paper\n    {className}\n    {elevation !== 0 ? 'mdc-elevation--z' + elevation : ''}\n    {!square ? 'smui-paper--rounded' : ''}\n    {color === 'primary' ? 'smui-paper--color-primary' : ''}\n    {color === 'secondary' ? 'smui-paper--color-secondary' : ''}\n    {transition ? 'mdc-elevation-transition' : ''}\n  \"\n  {...exclude($$props, ['use', 'class', 'square', 'color', 'transition'])}\n><slot></slot></div>\n\n<script>\n  import {onMount, onDestroy, afterUpdate, setContext} from 'svelte';\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from '@smui/common/forwardEvents.js';\n  import {exclude} from '@smui/common/exclude.js';\n  import {useActions} from '@smui/common/useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n\n  export let use = [];\n  let className = '';\n  export {className as class};\n  export let square = false;\n  export let color = 'default';\n  export let elevation = 1;\n  export let transition = false;\n</script>\n","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport Div from '@smui/common/Div.svelte';\n\nexport default classAdderBuilder({\n  class: 'smui-paper__content',\n  component: Div,\n  contexts: {}\n});","<h5\n  use:useActions={use}\n  use:forwardEvents\n  {...exclude($$props, ['use'])}\n><slot></slot></h5>\n\n<script>\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from './forwardEvents.js';\n  import {exclude} from './exclude.js';\n  import {useActions} from './useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n\n  export let use = [];\n</script>\n","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport H5 from '@smui/common/H5.svelte';\n\nexport default classAdderBuilder({\n  class: 'smui-paper__title',\n  component: H5,\n  contexts: {}\n});","<h6\n  use:useActions={use}\n  use:forwardEvents\n  {...exclude($$props, ['use'])}\n><slot></slot></h6>\n\n<script>\n  import {get_current_component} from 'svelte/internal';\n  import {forwardEventsBuilder} from './forwardEvents.js';\n  import {exclude} from './exclude.js';\n  import {useActions} from './useActions.js';\n\n  const forwardEvents = forwardEventsBuilder(get_current_component());\n\n  export let use = [];\n</script>\n","import {classAdderBuilder} from '@smui/common/classAdderBuilder.js';\nimport H6 from '@smui/common/H6.svelte';\n\nexport default classAdderBuilder({\n  class: 'smui-paper__subtitle',\n  component: H6,\n  contexts: {}\n});","<script>\r\n export let name;       // from Material Design icon names (https://material.io/resources/icons/)\r\n                        // ... use: 'NONE' for NO icon\r\n                        // ... depends on import of https://fonts.googleapis.com/icon?family=Material+Icons\r\n export let size = '';  // optional one-off size override ('1.4rem', '80%', 'small', etc.)\r\n                        // ... NOTE: globally override via \"material-icons\" css class, ex:\r\n                        //           KEY: In this context, it is TRUELY GLOBAL, so be careful\r\n                        //             * :global(.material-icons) {\r\n                        //\t              font-size: 1.4rem;\r\n                        //             }\r\n export let style = ''; // optional styling\r\n\r\n // provide optional one-off size override\r\n $: style += size ? ` font-size: ${size};` : '';\r\n // $: console.log(`xx Icon: style=\"${style}\"`);\r\n</script>\r\n\r\n<!-- $$restProps pass through things like title=\"Tootip here\" -->\r\n{#if name !== 'NONE'}\r\n  <i class=\"material-icons\" {style} on:click {...$$restProps}>{name}</i>\r\n{/if}\r\n","/**\r\n * Locate the ancestor of `elm` (inclusive) that defines the supplied\r\n * `cssClass`.\r\n *\r\n * @param {DOMElement} elm - the seed DOM element from which to\r\n * traverse it's ancestry.\r\n * @param {string} cssClass - the CSS class name to search for.\r\n *\r\n * @returns {DOMElement} the ancestor DOM element (inclusive)\r\n * satisfying our criteria (`undefined` for not found).\r\n */\r\nexport function findAncestorWithCssClass(elm, cssClass) {\r\n\r\n  // if elm has desired cssClass, we found it!\r\n  if (elm.classList.contains(cssClass)) {\r\n    return elm;\r\n  }\r\n\r\n  // recurse further up our DOM ancestry\r\n  const parent = elm.parentElement;\r\n  return parent ? findAncestorWithCssClass(parent, cssClass) : undefined;\r\n}\r\n","<script context=\"module\">\r\n const CLOSE = 'cancel_presentation';\r\n const STALE = 'fiber_manual_record';\r\n</script>\r\n\r\n<script>\r\n import Icon from '../Icon.svelte';\r\n import Menu                          from '@smui/menu';\r\n import List, {Item, Text, Separator} from '@smui/list';\r\n import {findAncestorWithCssClass}    from '../domUtil';\r\n\r\n // accept component props\r\n export let tab;        // ... the TabController we are displaying\r\n export let tabManager; // ... the TabManager governing our set of dynamic tabs\r\n\r\n // validate component props\r\n // ... because this is an internal component, we bypass this step :-)\r\n\r\n // extract the various controls needed from our tabManager\r\n const {activeTab, previewTab, activateTab, closeTab, closeOtherTabs, closeTabsToRight, closeAllTabs, repositionTab} = tabManager;\r\n\r\n // extract needed primitives out of our tab\r\n // ... this optimizes svelte, because it uses primitive staleness identity semantics\r\n const tabId   = tab.getTabId();\r\n const tabName = tab.getTabName();\r\n\r\n // the app-specific suplement to our popup context menu\r\n // ... if any (null for none)\r\n const AppContextMenu = tab.getAppContextMenu();\r\n\r\n // maintain our dynamic css classes\r\n $: classes = `tab-entry mdc-typography--subtitle2\r\n               ${tab===$activeTab  ? 'active-tab'  : ''}\r\n               ${tab===$previewTab ? 'preview-tab' : ''}`;\r\n\r\n // maintain our closeIcon -and- staleness reflexive state\r\n // NOTE: This is patterned after VSCode tabs, and cleans up the clutter by:\r\n //       - only displaying the closeIcon when it is active (or hovered over)\r\n //       - re-uses the closeIcon with a stale indicator (for modified tab resources)\r\n // NOTE: Regarding the TabContext usage:\r\n //       - for TabControllerPkgEntry derivations, the context will be a PkgEntry\r\n //         * in this case we utilize it's changeManager reflexive store\r\n //         * otherwize the changeManager will be undefined\r\n //       - AI: this is a slightly inappropriate coupling (app knowledge in this generic utility)\r\n const tabContext    = tab.getTabContext();\r\n const changeManager = tabContext.changeManager; // reflexive store ... undefined if tabContext is NOT PkgEntry (see NOTE above)\r\n\r\n let closeIconName;          // {string):  the icon name to use for our closeIcon control (reused for stale indicator)\r\n let closeIconVisible;       // {boolean}: is the closeIcon control visable? (generally NOT when tab is not-active)\r\n let closeIconStyle   = '';  // {string}:  the CSS styling used to make icon visable/hidden\r\n let closeIconToolTip = '';  // {string}:  the closeIcon tooltip (changes to reflect modified resources)\r\n let tabHover       = false; // {boolean}: is mouse hovered over the overall tab? (forces the tab to display the closeIcon control, even when non active)\r\n let closeIconHover = false; // {boolean}: is mouse hovered over the closeIcon control? (forces a stale indicator to morph back into the actual close icon)\r\n $: {\r\n   // by default, our close icon is only visible on active tabs\r\n   closeIconName    = CLOSE;\r\n   closeIconVisible = tab===$activeTab;\r\n   closeIconToolTip = 'Close Tab';\r\n   \r\n   // override: when resource is stale (i.e. needs saving) we morph our close icon to STALE\r\n   //           and display it AT ALL TIMES\r\n   if (changeManager && !$changeManager.inSync) {\r\n     closeIconName    = STALE;\r\n     closeIconVisible = true;\r\n     closeIconToolTip = 'Close Modified Tab (resource is still held in package)';\r\n   }\r\n\r\n   // when mouse is hovered over our tab, show the closeIcon\r\n   if (tabHover) {\r\n     closeIconVisible = true;\r\n   }\r\n\r\n   // when mouse is hovered over the close icon, morph it into the \"true close\"\r\n   if (closeIconHover) {\r\n     closeIconName    = CLOSE;\r\n     closeIconVisible = true;\r\n   }\r\n\r\n   // maintain our close visibility via CSS styling\r\n   closeIconStyle = closeIconVisible ? '' : 'visibility: hidden;';\r\n   // console.log(`xx TabEntry (${tabId}) reflexing ... closeIconName: '${closeIconName}' ... closeIconVisible: ${closeIconVisible} ... closeIconStyle: \"${closeIconStyle}\"`);\r\n }\r\n\r\n // our popup contextMenu binding\r\n let contextMenu;\r\n\r\n\r\n //***\r\n //*** DnD support of tabs order\r\n //***\r\n\r\n const dndPastableType = 'visualize-it/TabEntry'.toLowerCase();\r\n function handleDragStart(e) {\r\n\t e.dataTransfer.effectAllowed = 'move';\r\n   e.dataTransfer.setData(dndPastableType, tab.getTabId());\r\n };\r\n\r\n let isDropAllowed = false;\r\n let dropZone      = null; // null, 'before', 'after'\r\n $: dropZoneCssClass = dropZone ? `dropZone-${dropZone}` : '';\r\n\r\n function allowDrops_enter(e) { // of interest: this is actually executed more than you would think (on sub-elms of our tab-entry)\r\n   // maintain closure state that is UNCHANGED for allowDrops_over\r\n   isDropAllowed = e.dataTransfer.types.includes(dndPastableType);\r\n\r\n   // defer to allowDrops_over\r\n   allowDrops_over(e);\r\n };\r\n\r\n function allowDrops_over(e) {\r\n   if (isDropAllowed) {\r\n     e.preventDefault(); // allow drop (nullify default disallow behavior)\r\n     // console.log(`xx dropEffect BEFORE: ${e.dataTransfer.dropEffect}`);\r\n     e.dataTransfer.dropEffect = 'move'; // change cursor to reflect droppable\r\n     // console.log(`xx dropEffect AFTER: ${e.dataTransfer.dropEffect}`);\r\n\r\n     // maintain our visual drop zone (before/in/after)\r\n     dropZone = getDropZone(e);\r\n     // console.log(`xx allowDrops_over ... dropZone: ${dropZone}`);\r\n   }\r\n }\r\n\r\n function getDropZone(e) { // determine drop zone of the supplied DnD event (before/after)\r\n\r\n   // for sizing heuristics, we MUST use the DOM element that is managing our DnD event\r\n   // ... NOT: one of it's subordinates!\r\n   //          This insures the overall sizing is correct and NOT sporadic!!\r\n   const tabEntryElm = findAncestorWithCssClass(e.target, 'tab-entry');\r\n\r\n   const boundingRect  = tabEntryElm.getBoundingClientRect();\r\n   const {left, right} = boundingRect;\r\n   const clientX       = e.clientX;          // ... this WILL be in the left/right range\r\n   const numSections   = 2;                  // ... 2 sections (before/after)\r\n   const boundry       = (right - left) / numSections; // ... divide up our sections evenly\r\n\r\n   // calculate/return our dropZone\r\n   const rtnDropZone = clientX > right-boundry ? 'after' : 'before';\r\n   // console.log(`XX getDropZone():`, {rtnDropZone, clientX, left, right, boundry/*, leftBorder, rightBorder*/});\r\n   // console.log(`XX getDropZone(): ${rtnDropZone}`);\r\n   return rtnDropZone;\r\n }\r\n\r\n // last drop event (used in detecting duplicate drop events)\r\n let lastDropEvent = null;\r\n\r\n function handleDrop(e) {\r\n   const fromTabId = e.dataTransfer.getData(dndPastableType);\r\n   const toTabId   = tab.getTabId();\r\n   // console.log('XX handleDrop: ', {fromTabId, toTabId, dropZone});\r\n\r\n   // NO-OP when duplicate drop events are detected\r\n   // BUG: This is a work-aroung for now\r\n   //      ... see similar situation (fully explained) in SmartPkg.js (search: lastPkgTreePasteEvent)\r\n   if (lastDropEvent === e) {\r\n     // console.log('XX <TabEntry> handleDrop(): NO-OP ... detected duplicate drop event :-(');\r\n     return;\r\n   }\r\n   else {\r\n     lastDropEvent = e;\r\n   }\r\n\r\n   // reposition the tabs\r\n   repositionTab(fromTabId, toTabId, dropZone);\r\n\r\n   // clear visual dropZone\r\n   dropZone = null;\r\n };\r\n\r\n</script>\r\n\r\n\r\n<!-- in lieu of genDualClickHandler(), \r\n     double registration of click/dblclick WORKS (in this case),\r\n     and is more responsive! -->\r\n<div class=\"{classes} {dropZoneCssClass}\"\r\n     on:mouseover= {() => tabHover=true}\r\n     on:mouseout=  {() => tabHover=false}\r\n     on:click=     {() => activateTab(tabId, /*preview*/true)}\r\n     on:dblclick=  {() => activateTab(tabId, /*preview*/false)}\r\n     on:contextmenu|preventDefault={() => contextMenu.setOpen(true)}\r\n     draggable={true}\r\n     on:dragstart={handleDragStart}\r\n     on:dragenter={allowDrops_enter}\r\n     on:dragover={allowDrops_over}\r\n     on:dragleave={()=>dropZone=null}\r\n     on:drop|preventDefault={handleDrop}>\r\n\r\n  <!-- classification icon -->\r\n  <Icon name=\"{tabContext.getIconName()}\"\r\n        size=\"1.0rem\"/>\r\n\r\n  <!-- tab label -->\r\n  {tabName}\r\n\r\n  <!-- close tab control -->\r\n  <span on:mouseover= {() => closeIconHover=true}\r\n        on:mouseout=  {() => closeIconHover=false}>\r\n    <Icon name={closeIconName}\r\n          size=\"1.0rem\"\r\n          style={closeIconStyle}\r\n          title={closeIconToolTip}\r\n          on:click={(e)=> { e.stopPropagation(); closeTab(tabId); }}/>\r\n  </span>\r\n\r\n</div>\r\n\r\n<!-- context menu -->\r\n<!-- NOTE: this menu MUST be outside of <div> (above) because KRAZY @smui on:SMUI:action is invoking on:click of that <div> invoking activateTab() -->\r\n<span>\r\n  <Menu bind:this={contextMenu}>\r\n    <List class=\"mdc-typography--subtitle2\">\r\n\r\n      <svelte:component this={AppContextMenu} tab={tab}/>\r\n\r\n      <Item on:SMUI:action={() => closeTab(tabId)}><Text>Close Tab</Text></Item>\r\n      <Item on:SMUI:action={() => closeOtherTabs(tabId)}><Text>Close Others</Text></Item>\r\n      <Item on:SMUI:action={() => closeTabsToRight(tabId)}><Text>Close to the Right</Text></Item>\r\n      <Item on:SMUI:action={() => closeAllTabs()}><Text>Close All</Text></Item>\r\n      <Separator />\r\n      <Item on:SMUI:action={() => alert('FUTURE: Reveal in Left Nav')}><Text>Reveal in Left Nav</Text></Item>\r\n    </List>\r\n  </Menu>\r\n</span>\r\n\r\n\r\n<style>\r\n .tab-entry {\r\n   cursor:      pointer;\r\n   user-select: none;\r\n   font-weight: 500;\r\n\t padding:     0.2rem 0.5rem;\r\n   transition:  all, 0.3s;  /* transition animation for active-tab changes */\r\n\t border:                  solid lightgray 1px;\r\n\t border-bottom:           none;\r\n\t border-top-left-radius:  10px;\r\n\t border-top-right-radius: 10px;\r\n }\r\n\r\n .active-tab {\r\n\t background-color: #26a69a; /* cheap hard-coded match of current system */\r\n\t color:            #F5F5F5; /* whitesmoke */\r\n }\r\n\r\n .preview-tab {\r\n\t font-style: italic;\r\n }\r\n\r\n .dropZone-before {\r\n   border-left: 10px solid DarkRed;\r\n }\r\n .dropZone-after {\r\n   border-right: 10px solid DarkRed;\r\n }\r\n\r\n</style>\r\n","<script>\r\n // accept component props\r\n export let tab;        // ... the TabController we are displaying\r\n export let isActive;   // ... boolean indicator as to whether self is active or not\r\n\r\n // validate component props\r\n // ... because this is an internal component, we bypass this step :-)\r\n\r\n // extract needed items out of our tab\r\n const {Comp, props} = tab.getTabPanel();\r\n\r\n // NIX DELAY: remove artificial delay of tab activation for animation purposes\r\n //? // simple TabPanel animation technique - delay activation to match animation duration of TabEntry\r\n //? // ... use half of the time in TabEntry animation\r\n //? let delayedActivation = false;\r\n //? $: setTimeout(()=>delayedActivation=isActive, 150);\r\n</script>\r\n\r\n\r\n<!-- .main-content: our payload! -->\r\n<!-- NIX DELAY: isActive WAS delayedActivation -->\r\n<main class=\"main-content\" style=\"display: {isActive ? 'block' : 'none'};\">\r\n  <svelte:component this={Comp} {...props}/>\r\n</main>\r\n\r\n\r\n<style>\r\n /* main-content: our payload! */\r\n .main-content {\r\n   /* flex item characteristics: */\r\n   flex-grow:  1;  /* fill out to all space (taken from old vit-tabs-content, however doesn't appear to be needed ... keep for now) */\r\n   overflow: auto; /* KEY: provide scroll bars within main-content only (without this, will scroll tabs too) */\r\n\r\n   /* general characteristics: */\r\n   box-sizing: border-box; /* VERY KOOL: account for border/padding in specified width/height */\r\n   padding:    4px;        /* nicety */\r\n\r\n   background-color: #ececec;            /* THEME: $mdc-theme-background NOT (just a little darker) */\r\n   border:           2px solid #26a69a;  /* THEME: $mdc-theme-primary */\r\n }\r\n</style>\r\n","export { identity as linear } from '../internal';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","import { cubicOut } from '../easing';\nimport { is_function } from '../internal';\n\nfunction flip(node, animation, params) {\n    const style = getComputedStyle(node);\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const scaleX = animation.from.width / node.clientWidth;\n    const scaleY = animation.from.height / node.clientHeight;\n    const dx = (animation.from.left - animation.to.left) / scaleX;\n    const dy = (animation.from.top - animation.to.top) / scaleY;\n    const d = Math.sqrt(dx * dx + dy * dy);\n    const { delay = 0, duration = (d) => Math.sqrt(d) * 120, easing = cubicOut } = params;\n    return {\n        delay,\n        duration: is_function(duration) ? duration(d) : duration,\n        easing,\n        css: (_t, u) => `transform: ${transform} translate(${u * dx}px, ${u * dy}px);`\n    };\n}\n\nexport { flip };\n","<script>\r\n import TabEntry    from './TabEntry.svelte';\r\n import TabPanel    from './TabPanel.svelte';\r\n import verify      from '../../verify';\r\n import {isClass}   from '../../typeCheck';\r\n import {flip}      from 'svelte/animate';\r\n import {backInOut as easing} from 'svelte/easing'; // like back/circ/expo\r\n\r\n // accept component props\r\n export let tabManager; // ... the TabManager governing our set of dynamic tabs\r\n export let splashComp; // ... the UI Component to use when NO tabs are present\r\n\r\n // validate component props\r\n const check = verify.prefix('<Tabs> property violation: ');\r\n // ... tabManager\r\n check(tabManager,                'tabManager is required');\r\n check(tabManager.preregisterTab, 'tabManager must be a TabManager instance');\r\n // ... splashComp\r\n check(splashComp,                'splashComp is required');\r\n check(isClass(splashComp),       'splashComp must be a Svelte UI Component');\r\n\r\n // pull out our tabs store (a reactive svlete store representing ALL visualized tabs)\r\n const {tabs, activeTab} = tabManager;\r\n</script>\r\n\r\n\r\n{#if $tabs.length > 0}\r\n  <!-- TabBar with TabEntries -->\r\n  <div class=\"tab-bar\">\r\n    {#each $tabs as tab (tab.getTabId())}\r\n      <span animate:flip={{duration: 800, easing}}>\r\n        <TabEntry {tab} {tabManager}/>\r\n      </span>\r\n  \t{/each}\r\n  </div>\r\n  \r\n  <!-- TabPanels  -->\r\n  {#each $tabs as tab (tab.getTabId())}\r\n    <TabPanel {tab} isActive={tab===$activeTab}/>\r\n  {/each}\r\n{:else}\r\n  <svelte:component this={splashComp}/>\r\n{/if}\r\n\r\n\r\n<style>\r\n .tab-bar {\r\n\t border-bottom: solid lightgray 1px;\r\n\t display:       flex;\r\n\t flex-wrap:     wrap; /* wrap tabs to 2nd line (simple technique when too many tabs to fit) */\r\n }\r\n</style>\r\n","<script>\r\n import pkgEntryTabManager  from './pkgEntryTabManager';\r\n import StartUpPage         from './StartUpPage.svelte';\r\n import Tabs                from '../util/ui/tabManager/Tabs.svelte';\r\n</script>\r\n\r\n<Tabs tabManager={pkgEntryTabManager} splashComp={StartUpPage}/>\r\n","import pkgEntryTabManager from './pkgEntryTabManager';\r\nimport {isPkgEntry}       from '../util/typeCheck';\r\nimport {createLogger}     from '../util/logger';\r\n\r\n// our internal diagnostic logger\r\nconst log = createLogger('***DIAG*** pkgEntryTabs/syncModelOnActiveTabChange ... ').disable();\r\n\r\n// the current active tab (null for NO tabs) ... a reactive svelte store of TabController\r\nconst {activeTab} = pkgEntryTabManager;\r\n\r\nlog('monitoring activeTab changes');\r\n\r\n// monitor activeTab changes\r\nactiveTab.subscribe( ($activeTab) => {\r\n\r\n  // resolve the pkgEntry from our activeTab (if any)\r\n  // ... rouge value (for NON PkgEntry activeTab)\r\n  // ... null (when no activeTab)\r\n  const pkgEntry = $activeTab ? $activeTab.getTabContext() : null;\r\n  // ... no-op for NON PkgEntry activeTab\r\n  if (!isPkgEntry(pkgEntry)) {\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Synchronize the Konva DispMode whenever a NEW tab is\r\n   * introduced, so that it matches our object model.\r\n   * \r\n   * BACKGROUND: Normally a DispMode starts out in a 'view\" mode.\r\n   *             HOWEVER: If we close a tab that was in edit mode (as an example), \r\n   *                      and then bring the tab back (from the LeftNav)\r\n   *                      the Konva model will NOT match our object model\r\n   *                      without this logic.\r\n   */\r\n\r\n  // when a new tab is introduced (i.e. it is not yet mounted) ...\r\n  if (!pkgEntry.isMounted()) {\r\n    // re-sync our Konva DispMode to match the object model\r\n    // NOTE: Because this Konva state is maintained on mount,\r\n    //       we must wait till the mount occurs\r\n    //       HACK: timeout postponement for mount to occur\r\n    setTimeout( () => {\r\n      log(`activateTab: ${pkgEntry.getName()} - a NEW TAB CREATED ... SYNC Konva DispMode to match our object model!`);\r\n      pkgEntry.changeManager.changeDispMode( pkgEntry.getDispMode() );\r\n    }, 10);\r\n  }\r\n\r\n\r\n  /**\r\n   * Synchronize any out-of-date class references each time a tab is\r\n   * activated.\r\n   *\r\n   * Class versioning can become out-of-sync when interactive edits\r\n   * occur to the class master (visualized in a separate tab).\r\n   *\r\n   * Currently, this is only operational for pseudo classes.  Real\r\n   * code-based class versioning is not currently tracked, and will\r\n   * therefore always be in-sync.\r\n   */\r\n\r\n  // when package is out-of-sync ...\r\n  if (pkgEntry.areClassesOutOfSync()) {\r\n    log(`activateTab: ${pkgEntry.getName()} - some sub-classes are out-of-sync!`);\r\n    \r\n    // locate the top-level SmartView\r\n    const view = pkgEntry.getView();\r\n    const containingHtmlElm = view.containingHtmlElm;\r\n    \r\n    // when view is already visible in a tab (i.e. mounted)\r\n    if (view.isMounted()) {\r\n      log(`    view was previously visible ... do: unmount/sync/mount!`);\r\n      // unmount the Konva visuals\r\n      view.unmount();\r\n\r\n      // sync our object model\r\n      pkgEntry.syncClassInstances();\r\n\r\n      // re-mount the Konva visuals\r\n      view.mount(containingHtmlElm);\r\n\r\n      // re-establish our pkgEntry DispMode\r\n      // ... this resets all our event handlers given the re-mount :-)\r\n      pkgEntry.changeManager.changeDispMode( pkgEntry.getDispMode() );\r\n    }\r\n    // otherwise (not mounted)\r\n    else {\r\n      log(`    view was NOT visible ... do: sync only!`);\r\n      // the only thing we have to do is sync our object model\r\n      pkgEntry.syncClassInstances();\r\n    }\r\n  }\r\n  else {\r\n    log(`activateTab: ${pkgEntry.getName()} - all sub-classes are in-sync ... nothing to do!`);\r\n  }\r\n\r\n});\r\n","import TabControllerPkgEntry  from './TabControllerPkgEntry';\r\nimport pkgEntryTabManager     from './pkgEntryTabManager';\r\nimport PkgEntryTabs           from './PkgEntryTabs.svelte';\r\nimport                             './syncModelOnActiveTabChange';\r\n\r\n// extract public aspects out of our pkgEntryTabManager\r\nconst {activeTab, preregisterTab, getRegisteredTab, activateTab, closeTab} = pkgEntryTabManager;\r\n\r\n// promote the pkgEntryTabs public API\r\nexport {\r\n\r\n  //***\r\n  //*** Component\r\n  //***\r\n\r\n  PkgEntryTabs, // simple usage: <PkgEntryTabs/>\r\n\r\n\r\n  //***\r\n  //*** classes\r\n  //***\r\n\r\n  TabControllerPkgEntry, // the concrete class that manages PkgEntry tabs\r\n\r\n\r\n  //***\r\n  //*** reactive svelte stores\r\n  //***\r\n\r\n  activeTab, // the current active tab (null for NO tabs) ... TabController\r\n\r\n\r\n  //***\r\n  //*** API\r\n  //***\r\n\r\n  preregisterTab,   // + preregisterTab(tabController): void    ... preregister the supplied `tabController` as a potential tab that can be rendered in our context\r\n  getRegisteredTab, // + getRegisteredTab(tabId): TabController ... get the TabController registered to the supplied `tabId` (undefined for NOT registered)\r\n  activateTab,      // + activateTab(tabId, preview=true): void ... activate the supplied tabId (visualizing it's content)\r\n  closeTab,         // + closeTab(tabId): void                  ... close the tab of the supplied tabId\r\n};\r\n","<script>\r\n import {Section}    from '@smui/top-app-bar';\r\n import IconButton   from '@smui/icon-button';\r\n import Menu                          from '@smui/menu';\r\n import List, {Item, Text, Separator} from '@smui/list';\r\n import {activeTab}  from '../pkgEntryTabs';\r\n import DispMode     from '../core/DispMode';\r\n import {toast}      from '../util/ui/notify';\r\n\r\n // our reflection is based on the active tab's PkgEntry\r\n // ... for PkgEntries, we utilize it's changeManager reflexive store\r\n //     NOTE: getTabContext() isA PkgEntry ONLY for TabControllerPkgEntry type\r\n //           ... otherwize the .changeManager will be undefined\r\n //               which is OK in this context (see sub-comments below)\r\n $: pkgEntry      = $activeTab    ? $activeTab.getTabContext() : null; // rougue value (when NON PkgEntry activeTab), null (when no activeTab)\r\n $: changeManager = pkgEntry      ? pkgEntry.changeManager     : null; // undefined (when NOT a PkgEntry type),       null (when no activeTab)\r\n $: dispMode      = changeManager ? $changeManager.dispMode    : null;\r\n $: undoAvail     = changeManager ? $changeManager.undoAvail   : false;\r\n $: redoAvail     = changeManager ? $changeManager.redoAvail   : false;\r\n\r\n $: selectedDispMode = dispMode;\r\n function handleDispModeChange() {\r\n   // console.log(`xx handleDispModeChange(): ${selectedDispMode.enumKey}`);\r\n   changeManager.changeDispMode(selectedDispMode);\r\n }\r\n // AI: handleDispModeChange() reflexivity is WORKING correctly, however I'm not exactly sure how ... hmmmm\r\n //     ... all reflexivity is triggered as changed (activate logs below and see for yourself)\r\n //     ... it has NOTHING to do with the logic of handleDispModeChange() ... can no-op it and reflexivity still occurs\r\n // $: console.log(`xx <ToolBar> $activeTab    changed: ${$activeTab    ? 'whatever'               : 'undefined'}`);\r\n // $: console.log(`xx <ToolBar> pkgEntry      changed: ${pkgEntry      ? pkgEntry.getPkgEntryId() : 'undefined'}`);\r\n // $: console.log(`xx <ToolBar> changeManager changed: ${changeManager ? 'whatever'               : 'undefined'}`);\r\n // $: console.log(`xx <ToolBar> dispMode      changed: ${dispMode      ? dispMode.enumKey         : 'undefined'}`);\r\n\r\n function handleUndo() {\r\n   changeManager.applyUndo();\r\n }\r\n\r\n function handleRedo() {\r\n   changeManager.applyRedo();\r\n }\r\n\r\n\r\n //***\r\n //*** global ToolBar items\r\n //***\r\n\r\n // our systemMenu binding\r\n let systemMenu;\r\n\r\n function handleAbout() {\r\n   // AI: figure out HOW to glean this info directly from our package.json\r\n   const name        = \"visualize-it\";\r\n   const version     = \"0.1.2\";\r\n   const description = \"Your View into External Systems\";\r\n   toast({msg: `${name}\r\n\r\n${description}\r\n\r\nversion: ${version}\r\n - Tabs can now be re-positioned (via DnD)\r\n - and LeftNav can be re-sized\r\n`});\r\n }\r\n\r\n</script>\r\n\r\n<Section align=\"end\" toolbar>\r\n\r\n  <!-- ToolBar items specific to activeTabs of PkgEntry types -->\r\n  {#if changeManager}\r\n\r\n    <!-- DispMode -->\r\n    <select bind:value={selectedDispMode}\r\n            on:change={handleDispModeChange}\r\n            class=\"mdc-typography--subtitle2\"\r\n            title=\"Disp Mode\">\r\n      {#each Array.from(DispMode) as dm (dm.enumKey)}\r\n        <option value={dm}\r\n                disabled={!pkgEntry.canHandleDispMode(dm)}>{dm.enumKey}</option>\r\n\t    {/each}\r\n    </select>\r\n    \r\n    <!-- Undo/Redo (only active in edit DispMode) -->\r\n    {#if dispMode === DispMode.edit}\r\n      <span>\r\n        <IconButton class=\"material-icons\"\r\n                    disabled={!undoAvail}\r\n                    title=\"Undo\"\r\n                    on:click={handleUndo}>undo</IconButton>\r\n        <IconButton class=\"material-icons\"\r\n                    disabled={!redoAvail}\r\n                    title=\"Redo\"\r\n                    on:click={handleRedo}>redo</IconButton>\r\n      </span>\r\n    {/if}\r\n\r\n  {/if}\r\n\r\n  <!-- global ToolBar items -->\r\n  <span>\r\n    <IconButton class=\"material-icons\"\r\n                title=\"System Info\"\r\n                on:click={() => systemMenu.setOpen(true)}>account_circle</IconButton>\r\n    \r\n    <Menu bind:this={systemMenu} anchorCorner=\"BOTTOM_LEFT\">\r\n      <List class=\"mdc-typography--subtitle2\">\r\n        <Item on:SMUI:action={handleAbout}><Text>About ...</Text></Item>\r\n   <!-- <Separator/> -->\r\n      </List>\r\n    </Menu>\r\n  </span>\r\n\r\n</Section>\r\n\r\n\r\n<style>\r\n select { /* customize our DispMode selector */\r\n   border:        2px solid #102027;  /* THEME: $mdc-theme-secondary-dark */\r\n   border-radius: 0.5rem;\r\n   font-size:     0.8rem;\r\n   background-color: #26a69a;  /* THEME: $mdc-theme-primary */\r\n }\r\n\r\n span :global(button:disabled) { /* disabled button */\r\n   color: #62727b;\r\n }\r\n</style>\r\n","<script context=\"module\">\r\n import LeftNav  from './LeftNav.svelte';\r\n import verify   from '../util/verify';\r\n\r\n // DESC: <AppLayout> provides the layout of visualize-it.\r\n //       It is a \"singleton\" UI Component, instantiated one time in the app root.\r\n\r\n // NOTE: vars prefixed with underbar (\"_\"):\r\n //       - represent component instance state of the one-and-only <AppLayout> instance\r\n //       - are initialized through life-cycle-hooks (e.g. onMount())\r\n //       - are indirectly used for public promotion to the outside world\r\n\r\n let _leftNavComp; // ... our one-and-only <LeftNav/> component instance\r\n const activateSingleton = (leftNavComp) => {\r\n   // verify singleton restriction\r\n   verify(!isActive(), 'only ONE <AppLayout/> component should be instantated (at the app root)');\r\n\r\n   // register component binding\r\n   _leftNavComp = leftNavComp;\r\n\r\n   // process any prior cached requests\r\n   if (cachedLeftNavComps.length) {\r\n     cachedLeftNavComps.forEach( (comp) => registerLeftNavEntry(comp));\r\n     cachedLeftNavComps = [];\r\n   }\r\n };\r\n const deactivateSingleton = () => _leftNavComp = null;\r\n const isActive            = () => _leftNavComp ? true : false;\r\n\r\n //***\r\n //*** PUBLIC API\r\n //***\r\n\r\n let cachedLeftNavComps = [];\r\n\r\n // + registerLeftNavEntry(comp): void ... dynamically add supplied component entry to LeftNav\r\n export function registerLeftNavEntry(comp) {\r\n   // process request ... when we are active\r\n   if (isActive()) {\r\n     _leftNavComp.registerLeftNavEntry(comp);\r\n   }\r\n   // cache requests ... when we are inactive\r\n   else {\r\n     cachedLeftNavComps.push(comp);\r\n   }\r\n }\r\n</script>\r\n\r\n\r\n<script>\r\n import Drawer, {AppContent} from '@smui/drawer';\r\n import TopAppBar, {Row, Section, Title as AppBarTitle} from '@smui/top-app-bar';\r\n import IconButton   from '@smui/icon-button';\r\n import ToolBar      from './ToolBar.svelte';\r\n import {isPkgEntry} from '../util/typeCheck';\r\n import {toast}      from '../util/ui/notify';\r\n import Icon         from '../util/ui/Icon.svelte';\r\n import {onMount}    from 'svelte';\r\n import {PkgEntryTabs, \r\n         activeTab}  from '../pkgEntryTabs';\r\n\r\n // maintain our reflexive App Title ... either \"Visualize It\" or the Pkg Name of the active tab\r\n $: pkgEntry        = $activeTab           ? $activeTab.getTabContext()                 : null;\r\n $: appTitle        = $activeTab           ? $activeTab.getTabQualifyingDesc()          : 'Visualize It';\r\n $: titleToolTip    = isPkgEntry(pkgEntry) ? `Package: ${pkgEntry.getPkg().getPkgId()}` : '';\r\n $: titleIcon       = isPkgEntry(pkgEntry) ? pkgEntry.getPkg().getIconName()            : 'NONE';\r\n // ... for in-sync qualifiers, we monitor the SmartPkg's changeManager (reflexive store)\r\n //     derived from the ActivtTab's PkgEntry\r\n $: changeManager   = isPkgEntry(pkgEntry) ? pkgEntry.getPkg().changeManager            : null;\r\n $: inSyncTitleIcon = changeManager        ? $changeManager.inSyncIcon()                : 'NONE';\r\n $: if (changeManager && !$changeManager.inSync) {\r\n   titleToolTip += ' (modified - needs to be saved)';\r\n }\r\n\r\n // support for LeftNav (Drawer) dynamic sizing\r\n //  - the @smui way of setting <Drawer> size is through a sass variable:\r\n //    EX: in src/theme/_smui-theme.scss\r\n //           $mdc-drawer-width: 400px;\r\n //  - PROBLEM:  This is CANNOT be dynamic :-(\r\n //              SASS is a CSS preprocessor which means it is compiled into CSS at build time.\r\n //  - SOLUTION: Interpret the DOM resulting from the compiled CSS \r\n //              and override in-line styles at run-time with JavaScript\r\n //      <div class=\"vit-drawer-container\">\r\n //        <aside class=\"vit-drawer\"         <<< our drawerElm\r\n //               style=\"width: 550px;\">     <<< dynamic in-line style (managing width)\r\n //          <span bind:this={drawerHook}/>  <<< our hook into this DOM\r\n //          ... snip snip (drawer content)\r\n //        </aside> \r\n //        <div class=\"vit-drawer-app-content\"   <<< our appContentElm\r\n //             style=\"margin-left: 550px;\">     <<< dynamic in-line style (managing position when Drawer collapsed/expanded)\r\n //          <span bind:this={appContentHook}/>  <<< our hook into this DOM\r\n //          ... snip snip (app content)\r\n //        </div>\r\n //      </div>\r\n let drawerWidth = 256; // dynamic adjustement of drawer size (in pixels)\r\n let drawerHook,     drawerElm;\r\n let appContentHook, appContentElm;\r\n let resizerInitialized = false;\r\n $: if (drawerElm) {\r\n   drawerElm.style.width = `${drawerWidth}px`; // set Drawer width\r\n\r\n   // register our CSS-based resize controler\r\n   if (!resizerInitialized) { // ... one time only\r\n     resizerInitialized = true;\r\n\r\n     // promote a CSS-based resize control in our drawer's lower-right\r\n     drawerElm.style.resize   = 'horizontal';\r\n     drawerElm.style.minWidth = '200px';\r\n     drawerElm.style.maxWidth = '750px';\r\n\r\n     // register an observer to sync our state when resize occurs\r\n     // ... becase resize control is CSS-based\r\n     //     and we need visibility of this in our code\r\n     new ResizeObserver(resizeOccurred).observe(drawerElm);\r\n   }\r\n }\r\n $: if (appContentElm) {\r\n   // adjust appContent placement (consistent with LeftNav width)\r\n   appContentElm.style.marginLeft = drawerOpen ? `${drawerWidth}px`: '0px';\r\n }\r\n function resizeOccurred() { // sync our state when resize occurs\r\n   let width = drawerElm.offsetWidth;\r\n   // console.log(`XX resizeOccurred() width: ${width}`);\r\n   \r\n   // reflex content to our state, making the operation complete\r\n   // ... ONLY when our drawer is open (so as to NOT perminently loose our width)\r\n   if (drawerOpen) {\r\n     drawerWidth = width; // reflex to our state (making the operation complete)\r\n   }\r\n }\r\n\r\n // maintain our external bindings (once <AppLayout> is mounted)\r\n let leftNavComp; // ... maintained by `bind:this` (see below)\r\n onMount(() => {\r\n   activateSingleton(leftNavComp);\r\n\r\n   // binding for LeftNav (Drawer) dynamic sizing\r\n   drawerElm     = drawerHook.parentElement;\r\n   appContentElm = appContentHook.parentElement;\r\n\r\n   return deactivateSingleton;\r\n });\r\n\r\n // toggle Drawer (LeftNav) open/closed\r\n let drawerOpen = true;\r\n function toggleDrawer() {\r\n   drawerOpen = !drawerOpen;\r\n }\r\n</script>\r\n\r\n\r\n<!-- top-level page container ... manages 1. vit-page-app-bar and 2: vit-page-content -->\r\n<div class=\"vit-page-container\">\r\n\r\n  <!-- top-level page app-bar -->\r\n  <div class=\"vit-page-app-bar\">\r\n  <TopAppBar variant=\"static\" dense color=\"secondary\">\r\n    <Row>\r\n      <Section>\r\n        <IconButton class=\"material-icons\" title=\"Toggle Left Nav Package View\" on:click={toggleDrawer}>menu</IconButton>\r\n        <AppBarTitle title={titleToolTip}>\r\n          <Icon name={titleIcon}\r\n                size=\"1.0rem\"/>\r\n          {appTitle}\r\n          <Icon name={inSyncTitleIcon}\r\n                size=\"1.0rem\"/>\r\n        </AppBarTitle>\r\n      </Section>\r\n      <ToolBar/>\r\n    </Row>\r\n  </TopAppBar>\r\n  </div>\r\n\r\n  <!-- vit-page-content:     everything MINUS vit-page-app-bar -->\r\n  <!-- vit-drawer-container: manages 1. vit-drawer 2: vit-drawer-app-content -->\r\n  <div class=\"vit-page-content vit-drawer-container\">\r\n\r\n    <!-- vit-drawer (LeftNav) -->\r\n    <Drawer class=\"vit-drawer\" variant=\"dismissible\" bind:open={drawerOpen}>\r\n      <span bind:this={drawerHook}/>\r\n      <!-- farm this out to our LeftNav feature -->\r\n      <LeftNav bind:this={leftNavComp}/>\r\n    </Drawer>\r\n\r\n    <!-- vit-drawer-app-content: everything MINUS vit-drawer -->\r\n    <!-- vit-tabs-container:     flex container for util/ui/tabManager/Tabs (really TabEntry/TabPanel) -->\r\n    <AppContent class=\"vit-drawer-app-content vit-tabs-container\">\r\n      <span bind:this={appContentHook}/>\r\n      <!-- our dynamic Pkgentry tabs -->\r\n      <PkgEntryTabs/>\r\n    </AppContent>\r\n  </div>\r\n</div>\r\n\r\n\r\n<style>\r\n /* NOTE: clarification of the usage of: :global() -and- universal selector (*)\r\n\r\n    - example:\r\n  * :global(.vit-drawer-app-content) {\r\n    ... rules (snip snip)\r\n    }\r\n\r\n    - :global()\r\n\r\n    This is a Svelte feature that allows you to apply styles to a\r\n    selector globally.\r\n\r\n    In the example (above) it applies to ALL elements with class\r\n    vit-drawer-app-content, in any component that are decendants of\r\n    any element belonging to this component.\r\n\r\n    AI: I don't fully understand this, but without this in some\r\n    cases (as the one above), the generated css doesn't show up.\r\n\r\n    - descendant combinator using the universal selector (*) \r\n\r\n    This is simply providing a \"more specific\" rule that overrides\r\n    the implicit mdc classes injected by the @smui UI Kit.\r\n\r\n    In the example above the implicit .mdc-drawer-app-content\r\n    (injected by the @smui UI Kit) takes precidence WITHOUT the\r\n    descendant combinator.  With it, it has the effect of making the\r\n    rule more \"important\"!\r\n\r\n    I believe this is due to a combination of Svelte heuristics -and-\r\n    the @smui UI Kit I am using.\r\n  */\r\n\r\n /* top-level page container ... manages 1. vit-page-app-bar and 2: vit-page-content */\r\n .vit-page-container {\r\n   /* baseline our size to fill the entire page (i.e. the browser window) */\r\n   width:          100%;\r\n   height:         100%;\r\n\r\n   /* flex container characteristics: */\r\n   display:        flex; /* AI: flex seems to work just as well as: inline-flex */\r\n   flex-direction: column;\r\n   flex-wrap:      nowrap;\r\n   align-items:    stretch;\r\n }\r\n\r\n /* top-level page app-bar */\r\n /* AI: NOT really needed: currently all characteristics are coming from @smui <TopAppBar> */\r\n * :global(.vit-page-app-bar) {\r\n   /* flex item characteristics: */\r\n   flex-grow:  0;\r\n\r\n   /* color: red; /* xx diagnostic */\r\n }\r\n\r\n /* vit-page-content: everything MINUS vit-page-app-bar */\r\n .vit-page-content {\r\n\r\n   /* flex item characteristics: */\r\n   flex-grow:  1;  /* fill out to all space */\r\n\r\n   overflow:   auto; /* inject scroll-bars at this level */\r\n\r\n   /* NOTE: flex container characteristics for our <Drawer> (LeftNav)\r\n      is supplied via a seperate class: vit-drawer-container */\r\n\r\n   /* general characteristics: */\r\n   /* background-color: lightgrey; /* diagnostic */\r\n }\r\n\r\n /* vit-drawer-container: manages 1. vit-drawer 2: vit-drawer-app-content */\r\n .vit-drawer-container {\r\n   /* flex container characteristics: */\r\n   display:        flex; /* AI: flex seems to work just as well as: inline-flex */\r\n   flex-direction: row;\r\n   flex-wrap:      nowrap;\r\n   align-items:    stretch;\r\n\r\n   position: relative; /* REQUIRED (for Drawer): WEIRD: without this causes: browser scroll bar the height of <TopAppBar> */\r\n   /* z-index:  0;        /* doesn't appear to be needed - suspect Drawer related for modal only */\r\n }\r\n\r\n /* vit-drawer (LeftNav) */\r\n /* AI: NOT used: currently all characteristics are coming from @smui <Drawer> */\r\n * :global(.vit-drawer) {\r\n   color: red; /* xx diagnostic */\r\n }\r\n\r\n /* vit-drawer-app-content: everything MINUS vit-drawer */\r\n * :global(.vit-drawer-app-content) {\r\n\r\n   /* flex item characteristics: */\r\n   flex-grow: 1;    /* fill out to all space */\r\n   overflow:  auto; /* inject scroll-bars at this level ... without it, scrolls BOTH vit-drawer and vit-drawer-app-content */\r\n\r\n   /* background-color: pink; /* diagnostic */\r\n   /* color:            red;  /* diagnostic */\r\n }\r\n\r\n /* vit-tabs-container: flex container for util/ui/tabManager/Tabs (really TabEntry/TabPanel) */\r\n :global(.vit-tabs-container) {\r\n   /* flex container characteristics: */\r\n   display:        flex;\r\n   flex-direction: column;\r\n   flex-wrap:      nowrap;\r\n   align-items:    stretch;\r\n }\r\n\r\n</style>\r\n","import {toast/*, alert*/} from './ui/notify'; // ?? have not converted alert yet\r\nimport verify             from './verify';\r\nimport checkUnknownArgs   from './checkUnknownArgs';\r\n\r\nconst DYNAMIC_DEFAULT = 'DYNAMIC_DEFAULT';\r\n\r\n/**\r\n * The discloseError() utility provides a standard way to \r\n * disclose errors both to the user (toasts) and logs.\r\n *\r\n * This utility uses the heuristics defined by the\r\n * ErrorExtensionPolyfill, and therefore require it to be present.\r\n *\r\n * The emission of both user notifications and logs can be controlled,\r\n * through parameters that dynamically default (based on \"expected\"\r\n * vs. \"unexpected\" error status).\r\n *\r\n * All user notifications occur through toasts, and are sanitized:\r\n *  - showing appropriate user-level detail,\r\n *  - with more information available via a button click\r\n *\r\n * Log formats are also standardized.\r\n *\r\n * **Please Note** this function uses named parameters.\r\n *\r\n * @param {Error} err the Error object to be disclosed (logged and\r\n * user-notified).\r\n *\r\n * @param {boolean} [showUser=true] an indicator as to whether the\r\n * user should be shown this error.\r\n *\r\n * @param {boolean} [logIt=DYNAMIC_DEFAULT] an indicator as to whether\r\n * a log entry should be emitted, dynamically defaulted (LOG when err\r\n * is Unexpected, NO-LOG when Expected).\r\n */\r\nexport default function discloseError({err,\r\n                                       showUser=true,         // DEFAULT: true ................. i.e. always SHOW\r\n                                       logIt=DYNAMIC_DEFAULT, // DEFAULT: err.isUnexpected() ... i.e. LOG when Unexpected, NO-LOG when Expected\r\n                                       ...unknownArgs}={}) {\r\n\r\n  // validate parameters\r\n  try {\r\n    const check = verify.prefix('discloseError() parameter violation: ')\r\n    // ... err\r\n    check(err,           'err is required');\r\n    check(err instanceof Error, 'err must be an Error object, NOT: ', err);\r\n    // ... showUser\r\n    showUser = showUser===DYNAMIC_DEFAULT ? err.isExpected() : showUser; // dynamic DEFAULT semantics\r\n    check(showUser===true || showUser===false, 'showUser must be a boolean');\r\n    // ... logIt\r\n    logIt = logIt===DYNAMIC_DEFAULT ? err.isUnexpected() : logIt; // dynamic DEFAULT semantics\r\n    check(logIt===true || logIt===false, 'logIt must be a boolean');\r\n    // ... unknown arguments\r\n    checkUnknownArgs(check, unknownArgs, arguments);\r\n  }\r\n  // NOTE: this handler CANNOT throw an error, \r\n  //       because it is typically used inside a promise.catch()\r\n  //       which will generate an \"Unhandled promise rejection\"\r\n  catch(e) {\r\n    console.log('YIKES ... visualize-it\\'s discloseError() was attempting to report on err: ', err);\r\n    console.log('HOWEVER AN INVOCATION PROBLEM was detected in the parameters passed to discloseError()!\\n' +\r\n                '... discloseError() CANNOT throw an error (when used in a promise an \"Unhandled promise rejection\" will result)!!\\n' +\r\n                '... PLEASE FIX THE FOLLOWING INVOCATION PROBLEM: ', e);\r\n    return; // cannot throw(e) ... see log (above)\r\n  }\r\n\r\n  // show user when requested\r\n  if (showUser) {\r\n    // unexpended errors display as error toasts with additional details link\r\n    if (err.isUnexpected()) {\r\n      // ?? was toast.error (currently don't have .error)\r\n      toast({  // ... will auto close -OR- when \"details\" is clicked\r\n        msg: err.formatUserMsg(),\r\n        actions: [\r\n          { txt:    'details',\r\n            action: () => {\r\n              // ?? really alert (not toast)\r\n              // ?? was alert.error (currently don't have .error)\r\n              toast({ msg: `An unexpected error occurred:\r\n\r\n${err}\r\n\r\nIf this problem persists, please contact your tech support.`\r\n              });\r\n            }},\r\n        ]\r\n      });\r\n    }\r\n\r\n    // expended errors display as warning toasts with NO additional detail\r\n    else {\r\n      // ?? was toast.warn (currently don't have .warn)\r\n      toast({  // ... will auto close\r\n        msg: err.formatUserMsg()\r\n      });\r\n    }\r\n        \r\n  }\r\n\r\n  // generate log entry when requested\r\n  if (logIt) {\r\n\r\n    // log the details of the error (with traceback) for tech review\r\n    // NOTE 1: we refrain from using console.warn() and console.error() \r\n    //         because of BAD semantics inferred by react-native/expo:\r\n    //          - console.warn():  generates yellow popup\r\n    //          - console.error(): kills app with \"red screen of death\"\r\n    // NOTE 2: react-native/expo appears to be doing something non standard\r\n    //         when passing error as the 2nd parameter of log():\r\n    //             log('msg', error)\r\n    //         ... in this case is merely emitting error.toString()\r\n    //         ... we can however receive a stack trace by calling log(error) as the first parameter\r\n    const prefix = err.isUnexpected() ? '*** Unexpected Error:\\n\\n' : '*** Expected Error:\\n\\n';\r\n    console.log(prefix + err);\r\n    if (err.isUnexpected()) { // produce stack traces only for unexpected errors\r\n      console.log('Stack Trace ...');\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n}\r\n","import { cubicInOut, linear, cubicOut } from '../easing';\nimport { is_function, assign } from '../internal';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nfunction blur(node, { delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const f = style.filter === 'none' ? '' : style.filter;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `opacity: ${target_opacity - (od * u)}; filter: ${f} blur(${u * amount}px);`\n    };\n}\nfunction fade(node, { delay = 0, duration = 400, easing = linear }) {\n    const o = +getComputedStyle(node).opacity;\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `opacity: ${t * o}`\n    };\n}\nfunction fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * x}px, ${(1 - t) * y}px);\n\t\t\topacity: ${target_opacity - (od * u)}`\n    };\n}\nfunction slide(node, { delay = 0, duration = 400, easing = cubicOut }) {\n    const style = getComputedStyle(node);\n    const opacity = +style.opacity;\n    const height = parseFloat(style.height);\n    const padding_top = parseFloat(style.paddingTop);\n    const padding_bottom = parseFloat(style.paddingBottom);\n    const margin_top = parseFloat(style.marginTop);\n    const margin_bottom = parseFloat(style.marginBottom);\n    const border_top_width = parseFloat(style.borderTopWidth);\n    const border_bottom_width = parseFloat(style.borderBottomWidth);\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `overflow: hidden;` +\n            `opacity: ${Math.min(t * 20, 1) * opacity};` +\n            `height: ${t * height}px;` +\n            `padding-top: ${t * padding_top}px;` +\n            `padding-bottom: ${t * padding_bottom}px;` +\n            `margin-top: ${t * margin_top}px;` +\n            `margin-bottom: ${t * margin_bottom}px;` +\n            `border-top-width: ${t * border_top_width}px;` +\n            `border-bottom-width: ${t * border_bottom_width}px;`\n    };\n}\nfunction scale(node, { delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const sd = 1 - start;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - (sd * u)});\n\t\t\topacity: ${target_opacity - (od * u)}\n\t\t`\n    };\n}\nfunction draw(node, { delay = 0, speed, duration, easing = cubicInOut }) {\n    const len = node.getTotalLength();\n    if (duration === undefined) {\n        if (speed === undefined) {\n            duration = 800;\n        }\n        else {\n            duration = len / speed;\n        }\n    }\n    else if (typeof duration === 'function') {\n        duration = duration(len);\n    }\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `stroke-dasharray: ${t * len} ${u * len}`\n    };\n}\nfunction crossfade(_a) {\n    var { fallback } = _a, defaults = __rest(_a, [\"fallback\"]);\n    const to_receive = new Map();\n    const to_send = new Map();\n    function crossfade(from, node, params) {\n        const { delay = 0, duration = d => Math.sqrt(d) * 30, easing = cubicOut } = assign(assign({}, defaults), params);\n        const to = node.getBoundingClientRect();\n        const dx = from.left - to.left;\n        const dy = from.top - to.top;\n        const dw = from.width / to.width;\n        const dh = from.height / to.height;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        const opacity = +style.opacity;\n        return {\n            delay,\n            duration: is_function(duration) ? duration(d) : duration,\n            easing,\n            css: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${t + (1 - t) * dh});\n\t\t\t`\n        };\n    }\n    function transition(items, counterparts, intro) {\n        return (node, params) => {\n            items.set(params.key, {\n                rect: node.getBoundingClientRect()\n            });\n            return () => {\n                if (counterparts.has(params.key)) {\n                    const { rect } = counterparts.get(params.key);\n                    counterparts.delete(params.key);\n                    return crossfade(rect, node, params);\n                }\n                // if the node is disappearing altogether\n                // (i.e. wasn't claimed by the other list)\n                // then we need to supply an outro\n                items.delete(params.key);\n                return fallback && fallback(node, params, intro);\n            };\n        };\n    }\n    return [\n        transition(to_send, to_receive, false),\n        transition(to_receive, to_send, true)\n    ];\n}\n\nexport { blur, crossfade, draw, fade, fly, scale, slide };\n","<script context=\"module\">\r\n // retain ModuleScoped expansion state for each tree node\r\n // ... so collapsing a parent doesn't loose expansion state of children :-)\r\n const _expansionState = {\r\n   // pkgTreeKey: expanded <boolean>\r\n };\r\n</script>\r\n\r\n<script>\r\n import {getRegisteredTab,\r\n         activateTab}        from '../pkgEntryTabs';\r\n import {isPkg}              from '../util/typeCheck';\r\n import genDualClickHandler  from '../util/ui/genDualClickHandler';\r\n import Icon                 from '../util/ui/Icon.svelte';\r\n import DispMode             from '../core/DispMode';\r\n import {slide}              from 'svelte/transition'; // visually animated transitions for tree node expansion/contraction\r\n import {findAncestorWithCssClass} from '../util/ui/domUtil';\r\n\r\n // component props\r\n export let pkgTree;  // the PkgTree to display (will recurse into any sub-structure)\r\n\r\n // our primary reflexive state\r\n $: pkg        = pkgTree.getPkg();\r\n $: inEditMode = pkg.getDispMode() === DispMode.edit; // true: edit package structure, false: package is read-only\r\n $: pkgTreeKey = pkgTree.getKey();\r\n $: style      = inEditMode ? 'color: blue;' : '';    // edit/view styling\r\n $: top        = pkgTree.isRoot();\r\n \r\n // maintain our reflexive in-sync label qualifier\r\n // ... for PkgEntries, we utilize it's changeManager reflexive store\r\n const pkgEntry      = pkgTree.isEntry() ? pkgTree.getEntry()     : null;\r\n const changeManager = pkgEntry          ? pkgEntry.changeManager : null;\r\n let inSyncIcon;\r\n let pkgEntryToolTip;\r\n $: if (changeManager && !$changeManager.inSync) {\r\n   inSyncIcon       = $changeManager.inSyncIcon();\r\n   pkgEntryToolTip += ' (modified - Package needs to be saved)';\r\n }\r\n else {\r\n   inSyncIcon      = 'NONE';\r\n   pkgEntryToolTip = pkgEntry ? `${pkgEntry.diagClassName()}: ${pkgEntry.getEPkgId()}` : '';\r\n }\r\n\r\n // decompose self's tree node\r\n $: label    = pkgTree.getName();\r\n $: children = pkgTree.getChildren();\r\n\r\n // maintain expansion state\r\n // ... initialize from any prior expansion state\r\n // ... default to NOT expanded (false) on first occurance\r\n $: expanded  = _expansionState[pkgTreeKey] || false;\r\n $: arrowDown = expanded;\r\n const toggleExpansion = () => {\r\n   expanded = _expansionState[pkgTreeKey] = !expanded;\r\n };\r\n\r\n // locate the tabController pre-registered to this pkgEntry\r\n // ... preregisterTab() occurs in PkgViewer.svelte\r\n // ... NOTE: pkgEntry.getPkgEntryId() is the the tabId of a TabControllerPkgEntry object\r\n const tabController = pkgEntry ? getRegisteredTab(pkgEntry.getPkgEntryId()) : null;\r\n\r\n const displayEntry = genDualClickHandler(\r\n   () => activateTab(tabController.getTabId(), /*preview*/true),  // single-click\r\n   () => activateTab(tabController.getTabId(), /*preview*/false), // double-click\r\n );\r\n\r\n // support drag (of DnD), based on a combination of two polymorphic APIs: SmartObj.copyable() -and- PkgTree.copyable()\r\n const copySrcPkgEntry = pkgEntry ? pkgEntry.copyable() : null;\r\n $:    copySrcPkgTree  = pkgTree.copyable();\r\n $:    draggable       = copySrcPkgEntry || copySrcPkgTree  ? true : false;\r\n function handleDragStart(e) { // ... conditionally invoked when `draggable` is true (via draggleble DOM attribute - below)\r\n   // console.log(`xx ViewPkgTree handleDragStart(): starting`);\r\n\r\n   // specify cursor effects that ARE allowed\r\n   // ... subsequently later in dragenter/dragover events (via the dropEffect prop)\r\n   // ... multiple effects used ('linkMove'):\r\n   //     - link: for PkgEntry (to link a copy into Comp/Scene/Collage)\r\n   //     - move: for PkgTree  (to move SmartPkg PkgTree directory structure)\r\n\t e.dataTransfer.effectAllowed = 'linkMove';\r\n\r\n   // pack the data for our drag operation\r\n   // NOTE: We can use our own meta type (however NOTE that is is forced to be lower-case)\r\n   // ... PkgEntry (to link a copy into Comp/Scene/Collage))\r\n   if (copySrcPkgEntry) {\r\n     e.dataTransfer.setData(copySrcPkgEntry.type, copySrcPkgEntry.key);\r\n   }\r\n   // ... PkgTree (to move SmartPkg PkgTree directory structure)\r\n   if (copySrcPkgTree) {\r\n     e.dataTransfer.setData(copySrcPkgTree.type, copySrcPkgTree.key);\r\n   }\r\n };\r\n\r\n // allow DnD drops based on polymorphic PkgTree.pastable()\r\n // ... GRRR: Must implement BOTH dragenter/dragover BECAUSE have to override the default implementation (which prevents a drop).\r\n //           This is optimized by caching, since nothing changes (for us) in drag over.\r\n let isAllowed = null;\r\n let dropZone   = null; // null, 'before', 'in', 'after'\r\n $: dropZoneCssClass = dropZone ? `dropZone-${dropZone}` : '';\r\n function allowDrops_enter(e) {\r\n   isAllowed = pkgTree.pastable(e);\r\n   // console.log(`xx allowDrops_enter on: `, {isAllowed, pkgTree, types: e.dataTransfer.types});\r\n   allowDrops_over(e);\r\n };\r\n function allowDrops_over(e) {\r\n   // console.log(`xx allowDrops_over`);\r\n   if (isAllowed) {\r\n     e.preventDefault(); // allow drop (nullify default disallow behavior)\r\n     // console.log(`xx dropEffect BEFORE: ${e.dataTransfer.dropEffect}`);\r\n     e.dataTransfer.dropEffect = 'move'; // change cursor to reflect droppable\r\n     // console.log(`xx dropEffect AFTER: ${e.dataTransfer.dropEffect}`);\r\n\r\n     // maintain our visual drop zone (before/in/after)\r\n     dropZone = getDropZone(e);\r\n   }\r\n }\r\n\r\n // determine drop zone of the supplied DnD event (before/in/after)\r\n function getDropZone(e) {\r\n\r\n   // for sizing heuristics, we MUST use the DOM element that is managing our DnD event\r\n   // ... NOT: one of it's subordinates!\r\n   //          This insures the overall sizing is correct and NOT sporadic!!\r\n   const dropTargetElm = findAncestorWithCssClass(e.target, 'dropTarget');\r\n   // if (dropTargetElm !== e.target) {\r\n   //   console.log(`XX <ViewPkgTree> getDropZone(): using different target: `, {dropTargetElm, event_target: e.target});\r\n   // }\r\n\r\n   const boundingRect  = dropTargetElm.getBoundingClientRect();\r\n   let   {top, bottom} = boundingRect;       // ... tiny range (in our UI context): 17 pixels to work with\r\n   const clientY       = e.clientY;          // ... this WILL be in the top/bottom range\r\n   const numSections   = children ? 3 : 2;   // ... 3 sections for directories, 2 sections for entries\r\n   const boundry       = (bottom - top) / numSections; // ... divide up our sections evenly (in our case, rouphly 5 pixels for directories)\r\n\r\n   // prevent oscillation by stripping out the varying borders\r\n   // ... this is a brute force technique (a bit ugly)\r\n   //     I tried using CSS (box-sizing: border-box), \r\n   //     but this ONLY impacts boundingRect height, NOT top/bottom\r\n   const styling      = getComputedStyle(e.target);\r\n   const topBorder    = styling.getPropertyValue('border-top-width');\r\n   const bottomBorder = styling.getPropertyValue('border-bottom-width');\r\n   top    += parseInt(topBorder); // ... convert \"4px\" to 4\r\n   bottom -= parseInt(bottomBorder);\r\n\r\n   // define our dropZone\r\n   const rtnDropZone   = clientY > bottom-boundry ? 'after' : (clientY < top+boundry ? 'before' : 'in')\r\n\r\n   // console.log(`XX getDropZone():`, {rtnDropZone, clientY, top, bottom, boundry, topBorder, bottomBorder});\r\n   // console.log(`XX getDropZone(): ${rtnDropZone}`);\r\n   return rtnDropZone;\r\n }\r\n\r\n // perform DnD drop based on polymorphic PkgTree.paste()\r\n function handleDrop(e) {\r\n   // console.log(`\\n\\nxx handleDrop invoking paste() on: `, {pkgTree});\r\n   pkgTree.paste(e, dropZone);\r\n   dropZone = null; // clear visual dropZone\r\n };\r\n\r\n // console.log(`xx <ViewPkgTree> for ${pkgTreeKey}`);\r\n</script>\r\n\r\n<!-- omit the top root directory node - a \"/\" (it is implied by our Package Header) -->\r\n{#if top && children}\r\n  {#each children as child (child.getKey())}\r\n    <svelte:self pkgTree={child}/>\r\n  {/each}\r\n{:else}\r\n  <ul class:top transition:slide=\"{{duration: 500}}\">\r\n    <li>\r\n      {#if children}\r\n        <span class=\"mdc-typography--subtitle2 expander dropTarget {dropZoneCssClass}\"\r\n              title=\"Directory (click to expand/contract)\"\r\n              {draggable}\r\n              {style}\r\n              on:dragstart={handleDragStart}\r\n              on:dragenter={allowDrops_enter}\r\n              on:dragover={allowDrops_over}\r\n              on:dragleave={()=>dropZone=null}\r\n              on:drop|preventDefault={handleDrop}\r\n              on:click={toggleExpansion}>\r\n          <span class=\"arrow\" class:arrowDown>&#x25b6</span>\r\n          {label}\r\n        </span>\r\n        {#if expanded}\r\n          {#each children as child (child.getKey())}\r\n            <svelte:self pkgTree={child}/>\r\n          {/each}\r\n        {/if}\r\n      {:else}\r\n        <span class=\"mdc-typography--subtitle2 pkg-entry\"\r\n              title={pkgEntryToolTip}\r\n              on:click={displayEntry}>\r\n          <span class=\"dropTarget {dropZoneCssClass}\"\r\n                {draggable}\r\n                {style}\r\n                on:dragstart={handleDragStart}\r\n                on:dragenter={allowDrops_enter}\r\n                on:dragover={allowDrops_over}\r\n                on:dragleave={()=>dropZone=null}\r\n                on:drop|preventDefault={handleDrop}>\r\n            <Icon name=\"{pkgEntry.getIconName()}\"\r\n                  size=\"1.0rem\"/>\r\n            {label}\r\n          </span>\r\n          <Icon name={inSyncIcon}\r\n                {style}\r\n                size=\"1.0rem\"/>\r\n        </span>\r\n      {/if}\r\n    </li>\r\n  </ul>\r\n{/if}\r\n\r\n<style>\r\n ul {\r\n   margin:          0;      /* nix default <ul> spacing: 1em, 0 */\r\n   list-style-type: none;   /* nix traditional list bullets */\r\n   padding-left:    1.2rem; /* lesser list indendation */\r\n   user-select:     none;   /* disable selectable text */\r\n }\r\n ul.top { /* NO indentation FOR top-level node only */\r\n   margin:  0;\r\n   padding: 0;\r\n }\r\n .expander {\r\n   cursor:  pointer;\r\n }\r\n .pkg-entry{\r\n   cursor:  pointer;\r\n }\r\n .arrow {\r\n/* color:               red; /* AI: how to access scss vars */\r\n   display:             inline-block;\r\n   transition-duration: 500ms;\r\n   transition-property: transform;\r\n }\r\n .arrowDown {\r\n   transform: rotate(90deg);\r\n }\r\n .dropZone-before {\r\n   border-top: 4px solid;\r\n }\r\n .dropZone-in {\r\n   border: 2px dotted;\r\n }\r\n .dropZone-after {\r\n   border-bottom: 4px solid;\r\n }\r\n</style>\r\n","import verify                 from '../verify';\r\nimport {isFunction, isNumber} from '../typeCheck';\r\n\r\n/**\r\n * Generate a handler function that accommodates both single-click and\r\n * double-click on a specified delay.\r\n *\r\n * @param {function} onSingleClick - the single click handler, fired\r\n * when delay has been surpassed.\r\n *\r\n * @param {function} onDoubleClick - the double click handler, fired\r\n * when second click occurs within the delay time period.\r\n *\r\n * @param {int} [delay=250] - the delay time (ms) defining the double\r\n * click speed.\r\n */\r\nexport default function genDualClickHandler(onSingleClick, onDoubleClick, delay=250) {\r\n\r\n  // verify params\r\n  const check = verify.prefix('genDualClickHandler() parameter violation: ');\r\n  // ... onSingleClick\r\n  check(onSingleClick,             'onSingleClick is required');\r\n  check(isFunction(onSingleClick), `onSingleClick must be a function, NOT: ${onSingleClick}`);\r\n  // ... onDoubleClick\r\n  check(onDoubleClick,             'onDoubleClick is required');\r\n  check(isFunction(onDoubleClick), `onDoubleClick must be a function, NOT: ${onDoubleClick}`);\r\n  // ... delay\r\n  check(isNumber(delay),           `delay must be a number, NOT: ${delay}`);\r\n\r\n  let timeoutID = null;\r\n\r\n  return function (...rest) { // onClick will pass event, but use ...rest to support any signature\r\n    if (!timeoutID) { // FIRST CLICK: create timeout (waiting for potential second click)\r\n      timeoutID = setTimeout(function () {\r\n        onSingleClick(...rest); // invoke onSingleClick() - timeout has passed (with no additional clicks)\r\n        timeoutID = null;       // reset our timeout indicator\r\n      }, delay);\r\n    }\r\n    else { // SECOND CLICK (within timeout period)\r\n      clearTimeout(timeoutID); // clear our timeout\r\n      timeoutID = null;        // reset our timeout indicator\r\n      onDoubleClick(...rest);  // invoke onDoubleClick(event)\r\n    }\r\n  };\r\n}\r\n","<script>\r\n import List, {Item, Meta, Text, Separator} from '@smui/list';\r\n import Menu            from '@smui/menu';\r\n import Icon            from '../util/ui/Icon.svelte';\r\n import verify          from '../util/verify';\r\n import {isPkg}         from '../util/typeCheck';\r\n import {toast}         from '../util/ui/notify';\r\n import discloseError   from '../util/discloseError';\r\n import ViewPkgTree     from './ViewPkgTree.svelte';\r\n import DispMode        from '../core/DispMode';\r\n import {savePkg as savePkgService} from '../core/pkgPersist';\r\n\r\n // component parameters\r\n export let pkg;\r\n\r\n // validate supplied parameters\r\n const check = verify.prefix('<ViewPkg> parameter violation: ');\r\n // ... pkg\r\n check(pkg,        'pkg is required');\r\n check(isPkg(pkg), `pkg must be a SmartPkg ... NOT: ${pkg}`);\r\n\r\n // diagnostic showing entire tree\r\n // $: console.log(`XX <ViewPkg> rendering \"enhanced\" ${pkg.toString('tree')}`);\r\n\r\n // maintain our reflexive expansion state\r\n let expanded = true;\r\n $: expandedIndicator = expanded ? '' : '...';\r\n\r\n // maintain our reflexive in-sync qualifiers\r\n const changeManager = pkg.changeManager;\r\n $: inSyncIcon       = $changeManager.inSyncIcon();\r\n $: pkgNameToolTip   = `Package: ${pkg.getPkgId()}` + ($changeManager.inSync ? '' : ' (modified - needs to be saved)');\r\n\r\n // our context menu binding\r\n let menu;\r\n\r\n // save our SmartPkg to an external resource (ex: web or local file)\r\n async function savePkg(saveAs=false) { // saveAs - true: save in a newly user selected file, false: save in the original pkg's `pkgResourcePath`\r\n   try {\r\n     // insure the package is a candidate for saving\r\n     if (!pkg.canPersist()) {\r\n       toast({msg: `The \"${pkg.getPkgName()}\" package cannot be saved ... it contains code, which cannot be persisted!`});\r\n       return;\r\n     }\r\n\r\n     // save the package\r\n     const result = await savePkgService(pkg, saveAs);\r\n     if (result === 'UserCancel') {\r\n     }\r\n     else if (result === 'SaveNotNeeded') {\r\n       toast({msg: `The \"${pkg.getName()}\" package does NOT need to be saved ... you must first apply some changes`});\r\n     }\r\n     else {\r\n       toast({msg: `The \"${pkg.getPkgName()}\" package has been saved!`});\r\n     }\r\n   }\r\n   catch(err) {\r\n     // gracefully report unexpected conditions to user\r\n     discloseError({err, logIt:true});\r\n   }\r\n }\r\n\r\n // our edit/view status ... a boolean\r\n $: inEditMode = pkg.getDispMode() === DispMode.edit; // true: edit package structure, false: package is read-only\r\n $: style      = inEditMode ? 'color: blue;' : '';\r\n $: undoAvail  = $changeManager.undoAvail;\r\n $: redoAvail  = $changeManager.redoAvail;\r\n\r\n // edit the structure of our SmartPkg (EPkg name/id, add/remove PkgEntry, dir structure, etc.)\r\n // ... changes the visual rendering to accomidate edits\r\n function editPkg() {\r\n   // insure our pkg can be saved before we allow it to be edited\r\n   if (!pkg.canPersist()) {\r\n     toast({msg: `The \"${pkg.getName()}\" package cannot be edited ` + \r\n                 `because it contains code ... therefore you would not be able to save your changes.`});\r\n     return;\r\n   }\r\n   // enable the edit mode\r\n   changeManager.changeDispMode(DispMode.edit);\r\n   pkg = pkg; // ... make responsive to Svelte\r\n   // toast({msg: `The \"${pkg.getPkgName()}\" package structure can now be edited (add/remove/reposition entries/directories, name/id changes, etc.)`});\r\n }\r\n\r\n // complete the edit operation of our SmartPkg (EPkg name/id, add/remove PkgEntry, dir structure, etc.)\r\n // ... reverting back to the \"normal\" usage mode (DispMode.view)\r\n function editPkgComplete() {\r\n   changeManager.changeDispMode(DispMode.view);\r\n   pkg = pkg; // ... make responsive to Svelte\r\n   // toast({msg: `The \"${pkg.getPkgName()}\" package structure is now in a view mode (edits are disabled)`});\r\n }\r\n\r\n // register our package structure GUI synchronization process (invoked via changeManager)\r\n pkg.syncPkgStructureGuiChanges = syncPkgStructureGuiChanges;\r\n function syncPkgStructureGuiChanges() {\r\n   pkg = pkg; // ... make responsive to Svelte\r\n }\r\n</script>\r\n\r\n<!-- NOTE: using activated strictly for it's coloring :-) -->\r\n<Item class=\"vit-drawer-item\"\r\n      activated\r\n      on:SMUI:action={() => expanded = !expanded}\r\n      title={pkgNameToolTip}>\r\n  <Icon name=\"{pkg.getIconName()}\"\r\n        {style}\r\n        size=\"1.0rem\"/>\r\n  <Text {style}>\r\n    {pkg.getPkgName()}\r\n    {expandedIndicator}\r\n  </Text>\r\n  <Icon name={inSyncIcon}\r\n        title=\"Package has been modified (needs to be saved) NOT SHOWING (qualified in pkgNameToolTip)\"\r\n        size=\"1.0rem\"/>\r\n  <Meta>\r\n    <Icon name=\"save\"\r\n          title=\"Save Package\"\r\n          on:click={(e) => {e.stopPropagation(); savePkg();} }/>\r\n\r\n    {#if inEditMode} <!-- for edit mode -->\r\n      <Icon name=\"check\"\r\n            title=\"Complete Package Edit\"\r\n            on:click={(e) => {e.stopPropagation(); editPkgComplete();} }/>\r\n    {:else} <!-- for view mode -->\r\n      <Icon name=\"edit\"\r\n            title=\"Edit Package Structure\"\r\n            on:click={(e) => {e.stopPropagation(); editPkg();} }/>\r\n    {/if}\r\n\r\n    <Icon name=\"more_vert\"\r\n          title=\"Manage Package\"\r\n          on:click={(e) => {e.stopPropagation(); menu.setOpen(true);} }/>\r\n  </Meta>\r\n</Item>\r\n\r\n<span>\r\n  <Menu bind:this={menu}>\r\n    <List>\r\n      <Item on:SMUI:action={() => savePkg()}>    <Text>Save {pkg.getPkgName()}</Text></Item>\r\n      <Item on:SMUI:action={() => savePkg(true)}><Text>Save As ...</Text></Item>\r\n      <Separator/>\r\n      {#if inEditMode} <!-- for edit mode -->\r\n        <Item on:SMUI:action={() => editPkgComplete()}><Text>Complete Package Edit</Text></Item>\r\n        <Item on:SMUI:action={() => changeManager.applyUndo()} disabled={!undoAvail}><Text>Undo</Text></Item>\r\n        <Item on:SMUI:action={() => changeManager.applyRedo()} disabled={!redoAvail}><Text>Redo</Text></Item>\r\n      {:else} <!-- for view mode -->\r\n        <Item on:SMUI:action={() => editPkg()}><Text>Edit Package Structure</Text></Item>\r\n      {/if}\r\n      <Separator/>\r\n      <Item on:SMUI:action={() => alert('FUTURE: Close')}><Text>Close</Text></Item>\r\n    </List>\r\n  </Menu>\r\n</span>\r\n\r\n{#if expanded}\r\n  <ViewPkgTree pkgTree={pkg.rootDir}/>\r\n{/if}\r\n\r\n\r\n<style>\r\n /* vit-drawer-item: attempt to space out <ViewPkgTree> content a bit better */\r\n * :global(.vit-drawer-item) {\r\n   margin: 8px 8px 0px 8px !important;\r\n }\r\n</style>\r\n","import SmartModel  from './SmartModel';\r\nimport SmartPkg    from './SmartPkg';\r\nimport pkgManager  from './pkgManager';\r\nimport verify      from '../util/verify';\r\n\r\n/**\r\n * Load a package (SmartPkg) from an external resource (ex: web or\r\n * local file) and catalog it in pkgManager.\r\n *\r\n * The newly loaded package will automatically be registered in pkgManager\r\n * (via pkgManager.registerPkg()).\r\n *\r\n * @param {PkgResourcePath} [pkgResourcePath] - the optional resource\r\n * path of the package to retrieve.  When not supplied, an interactive\r\n * file picker dialog will be presented.\r\n *\r\n * @returns {SmartPkg via Promise} the newly loaded package (undefined\r\n * when user cancels the picker dialog).\r\n * \r\n * @throws {Error} an Error is thrown in various scenarios\r\n * (pkgResourcePath not found, uninterpretable resource content,\r\n * invalid params, etc.).\r\n */\r\nexport async function openPkg(pkgResourcePath) {\r\n  // validate parameters\r\n  const check = verify.prefix('openPkg() parameter violation: ');\r\n\r\n  // ... pkgResourcePath (when supplied)\r\n  if (pkgResourcePath) {\r\n    check(pkgResourcePath,       'pkgResourcePath is currently NOT a supported param (omit it to activate the \"interactive file picker dialog\")'); // AI: add support for pkgResourcePath\r\n    check(pkgResourcePath===123, 'pkgResourcePath (when supplied) must be a YetUnknown'); // AI: future TEMPLATE\r\n  }\r\n  else { // ... for interactive file picker dialog\r\n    // insure we have access to the \"File System Access API\"\r\n    if (!window.showOpenFilePicker) {\r\n      throw new Error('***ERROR*** openPkg() the \"File System Access API\" requires Chrome 86+')\r\n        .defineAttemptingToMsg('use the interactive file picker dialog');\r\n    }\r\n  }\r\n\r\n  // define our fileHandle\r\n  // ... AI: determine how to retain a neutral version of this resource, for \"save\" operations (possibly in loaded SmartPkg)\r\n  let fileHandle = null;\r\n\r\n  // ... when pkgResourcePath IS supplied\r\n  if (pkgResourcePath) {\r\n    // NOTE: currently errors out (in parameter validation above)\r\n    // AI: figure this out\r\n  }\r\n  // ... when pkgResourcePath NOT supplied\r\n  else {\r\n    // select the fileHandle via an interactive file picker dialog\r\n    try {\r\n      [fileHandle] = await window.showOpenFilePicker({\r\n        types: [\r\n          {\r\n            description: 'visualize-it file',\r\n            accept: {\r\n              'application/json': ['.vit'],\r\n            },\r\n          },\r\n        ],\r\n      });\r\n    }\r\n    catch(err) {\r\n      // prune expected errors\r\n      if (err.message === 'The user aborted a request.') { // ... user canceled request\r\n        return; // return undefined when user cancels the picker dialog (as documented above)\r\n      }\r\n      // re-throw \"qualified\" unexpected errors\r\n      throw err.defineAttemptingToMsg('use the file picker dialog');\r\n    }\r\n  }\r\n\r\n  // load the file blob\r\n  // ... NOTE: file is w3c - https://w3c.github.io/FileAPI/#dfn-file\r\n  // ... for now, just pass through unexpected errors\r\n  const file = await fileHandle.getFile();\r\n\r\n  // resolve the file content\r\n  // ... see: https://w3c.github.io/FileAPI/#text-method-algo\r\n  // ... for now, just pass through unexpected errors\r\n  const fileContent = await file.text();\r\n\r\n  // resolve content to json\r\n  let smartJSON = null\r\n  try {\r\n    smartJSON = JSON.parse(fileContent);\r\n  }\r\n  catch(err) { // SyntaxError\r\n    // something about err emitted from JSON, doesn't show attemptingToMsg in discloseError() detail\r\n    // >>> throw err.defineAttemptingToMsg('interpret resource as smartJSON in openPkg()');\r\n    // ... suspect it is somehow NOT purely Error based (not really sure what this is)\r\n    // ... for now re-create it, but concerned may loose something out of the original\r\n    throw new Error(`INVALID JSON - ${err.message}`)\r\n    .defineUserMsg('Please select a valid visualize-it package'); // consider this a user error (in their selection)\r\n  }\r\n\r\n  // resolve the json to a SmartPkg\r\n  // ... any error is auto adorned with .defineAttemptingToMsg()\r\n  const pkg = SmartModel.fromSmartJSON(smartJSON);\r\n\r\n  // retain the pkgResourcePath\r\n  pkg.setPkgResourcePath(fileHandle);\r\n\r\n  // register this package in our pkgManager\r\n  pkgManager.registerPkg(pkg);\r\n\r\n  // reset the pkg baseline crc (reflecting what was pulled from our file)\r\n  // pkg.resetBaseCrc(); // ... N/A because this is accomplished in the SmartPkg constructor\r\n\r\n  // that's all folks\r\n  return pkg;\r\n}\r\n\r\n/**\r\n * Save the supplied package (SmartPkg) to an external resource (ex:\r\n * web or local file).\r\n *\r\n * @param {SmartPkg} pkg - the package to be saved.\r\n * @param {boolean} [saveAs=false] - true: save in a user\r\n * selected file, false: save in the original pkg's `pkgResourcePath`.\r\n *\r\n * @returns {void | 'UserCancel' | 'SaveNotNeeded' via Promise} a\r\n * \"void\" promise is resolved when successfully complete\r\n * -or- 'UserCancel' when user cancels the request\r\n * -or- 'SaveNotNeeded' when save is not needed\r\n * \r\n * @throws {Error} an Error is thrown in various unexpected scenarios.\r\n */\r\nexport async function savePkg(pkg, saveAs=false) {\r\n  // validate parameters\r\n  const check = verify.prefix('savePkg() parameter violation: ');\r\n\r\n  // ... pkg\r\n  check(pkg,                     'pkg is required')\r\n  check(pkg instanceof SmartPkg, 'pkg must be a SmartPkg');\r\n\r\n  // ... saveAs\r\n  if (saveAs) {\r\n    check(saveAs === true || saveAs === false, 'saveAs must be a boolean (when supplied)');\r\n  }\r\n\r\n  // insure we have access to the \"File System Access API\"\r\n  if (!window.showSaveFilePicker) {\r\n    throw new Error('***ERROR*** savePkg() the \"File System Access API\" requires Chrome 86+')\r\n      .defineAttemptingToMsg('save a package to a local file system');\r\n  }\r\n\r\n  // no-op when save operation that has NO changes\r\n  if (!saveAs &&             // a save request\r\n      pkg.pkgResourcePath && // that doesn't morph into a save-as\r\n      pkg.isInSync()) {      // and it has NO changes\r\n    return 'SaveNotNeeded';\r\n  }\r\n\r\n  // create the JSON content, representing our pkg\r\n  // ... placement of this process is crucial - any unexpected errors\r\n  //     occurring here will short-circuit the creation of an empty file!\r\n  const smartJSON = pkg.toSmartJSON();\r\n  const content   = JSON.stringify(smartJSON, null, 2); // TODO: parameterize pretty-print JSON\r\n\r\n  // locate the file where the pkg will be saved\r\n  let fileHandle = saveAs ? undefined : pkg.getPkgResourcePath();\r\n  // ... conditionally prompt the user to select the file\r\n  //     (either there is no `pkg.pkgResourcePath`, or a `saveAs` operation was requested)\r\n  if (!fileHandle) {\r\n    try {\r\n      fileHandle = await window.showSaveFilePicker({\r\n        types: [\r\n          {\r\n            description: 'visualize-it file',\r\n            accept: {\r\n              'application/json': ['.vit'],\r\n            },\r\n          },\r\n        ],\r\n      });\r\n    }\r\n    catch (err) {\r\n      // prune expected errors\r\n      if (err.name === 'AbortError') { // ... user canceled request\r\n        return 'UserCancel';\r\n      }\r\n      // re-throw \"qualified\" unexpected errors\r\n      throw err.defineAttemptingToMsg(`select the file to save the \"${pkg.getPkgName()}\" package`);\r\n    }\r\n  }\r\n\r\n  // write the file\r\n  try {\r\n    // Taken FROM: NativeFile Text Editor Example:\r\n    //             https://github.com/GoogleChromeLabs/text-editor \r\n    //             https://github.com/GoogleChromeLabs/text-editor/blob/main/src/inline-scripts/fs-helpers.js\r\n    // Support for Chrome 82 and earlier.\r\n    if (fileHandle.createWriter) {\r\n      // Create a writer (request permission if necessary).\r\n      const writer = await fileHandle.createWriter();\r\n      // Write the full length of the contents\r\n      await writer.write(0, content);\r\n      // Close the file and write the contents to disk\r\n      await writer.close();\r\n    }\r\n    // For Chrome 83 and later.\r\n    else {\r\n      // Create a FileSystemWritableFileStream to write to.\r\n      const writable = await fileHandle.createWritable();\r\n      // Write the contents of the file to the stream.\r\n      await writable.write(content);\r\n      // Close the file and write the contents to disk.\r\n      await writable.close();\r\n    }\r\n  }\r\n  catch(err) {\r\n    // prune expected errors\r\n    if (err.name === 'NotAllowedError') { // ... user did not allow the file write\r\n      err.defineUserMsg('User disallowed the file write');\r\n    }\r\n    // re-throw \"qualified\" unexpected errors\r\n    throw err.defineAttemptingToMsg(`save the \"${pkg.getPkgName()}\" package`);\r\n  }\r\n\r\n  // retain the pkgResourcePath\r\n  pkg.setPkgResourcePath(fileHandle);\r\n\r\n  // reset the pkg baseline crc (reflecting what has been filed)\r\n  pkg.resetBaseCrc();\r\n}\r\n\r\n\r\n//******************************************************************************\r\n//*** Specifications\r\n//******************************************************************************\r\n\r\n/**\r\n * @typedef {Unknown} PkgResourcePath\r\n *\r\n * PkgResourcePath is intended to be a generic abstraction that\r\n * encapsulates the resource path of where a SmartPkg is persisted\r\n * (either a file, or url, etc.).\r\n *\r\n * Currently it's type is limited to the FileSystemFileHandle _(a\r\n * Native File System type)_.\r\n * \r\n * When a SmartPkg is persisted (i.e. pulled from, or saved to a\r\n * file/url), it will contain a pkgResourcePath.\r\n * - this merely identifies it's persistent form and provides a\r\n *   convenient means by which changes can be saved\r\n * - NOTE: the SmartPkg.pkgResourcePath attribute is NOT persisted,\r\n *         rather it is retained as a result of an open/save operation.\r\n *\r\n * AI: More research is needed to expand pkgResourcePath to it's more\r\n *     generic form.\r\n *     - regarding FileSystemFileHandle\r\n *       * it does not appear you can ascertain the internal actual local file name\r\n *         cannot glean path/directory ... only fileName (ex: 'textDat.txt')\r\n *         - fileHandle: {\r\n *             isDirectory: false\r\n *             isFile:      true\r\n *             name:        'testData.txt'\r\n *           }\r\n *         - file: {\r\n *             name:        'testData.txt'\r\n *             lastModified: 222333444\r\n *             webkitRelativePath: ''\r\n *             size:  123\r\n *             type: 'text/plain'\r\n *           }\r\n *         - there is a fileHandle = directoryHandle.getFile(name)\r\n *       * in it's early form, it is NOT YET serializable\r\n *       * unsure, but running from a PWA may help\r\n *       * there are TWO handle refs ... can be:\r\n *         - FileSystemFileHandle ........ handle.isFile\r\n *         - FileSystemDirectoryHandle ... handle.isDirectory\r\n *     - more broadly, how do we encapsulate both file and url usage (ultimately)\r\n */\r\n","<script context=\"module\">\r\n import verify         from '../util/verify';\r\n\r\n // DESC: The <PkgViewer> component visualizes one or more SmartPkgs\r\n //       in the LeftNav section of the visualize-it GUI.\r\n //       It is a \"singleton\" UI Component, instantiated one time, via\r\n //       appLayout's `registerLeftNavEntry()` process.\r\n\r\n // NOTE: vars prefixed with underbar (\"_\"):\r\n //       - represent component instance state of the one-and-only <PkgViewer> instance\r\n //       - are initialized through life-cycle-hooks (e.g. onMount())\r\n //       - are indirectly used for public promotion to the outside world\r\n\r\n let _viewPkg$comp; // ... functional component binding supporting our public promotion\r\n const activate = (viewPkg$comp) => {\r\n   // verify singleton restriction\r\n   verify(!isActive(), 'only ONE <PkgViewer/> component should be instantated (somewhere in the app root)');\r\n\r\n   // register component binding\r\n   _viewPkg$comp = viewPkg$comp;\r\n\r\n   // process any prior cached requests\r\n   if (cachedPkgs.length) {\r\n     cachedPkgs.forEach( (pkg) => viewPkg(pkg));\r\n     cachedPkgs = [];\r\n   }\r\n\r\n };\r\n const deactivate = () => _viewPkg$comp = null;\r\n const isActive   = () => _viewPkg$comp ? true : false;\r\n\r\n //***\r\n //*** PUBLIC API\r\n //***\r\n\r\n let cachedPkgs = [];\r\n\r\n // + viewPkg(pkg): void ... add supplied pkg (SmartPkg) to self's view\r\n export function viewPkg(pkg) {\r\n   // process request ... when we are active\r\n   if (isActive()) {\r\n     _viewPkg$comp(pkg);\r\n   }\r\n   // cache requests ... when we are inactive\r\n   else {\r\n     cachedPkgs.push(pkg);\r\n   }\r\n }\r\n\r\n</script>\r\n\r\n<script>\r\n import {onMount}          from 'svelte';\r\n import ViewPkg            from './ViewPkg.svelte';\r\n import {Item, Meta, Text} from '@smui/list';\r\n import {openPkg}          from '../core/pkgPersist';\r\n import Icon               from '../util/ui/Icon.svelte';\r\n import {isPkg}            from '../util/typeCheck';\r\n import {toast}            from '../util/ui/notify';\r\n import discloseError      from '../util/discloseError';\r\n import {TabControllerPkgEntry,\r\n         preregisterTab}   from '../pkgEntryTabs';\r\n\r\n // the packages viewed by self: SmartPkg[]\r\n const pkgs = [];\r\n\r\n // add supplied pkg (SmartPkg) to self's view\r\n function viewPkg$comp(pkg) {\r\n   // validate supplied parameters\r\n   const check = verify.prefix('viewPkg(pkg) parameter violation: ');\r\n   // ... pkg\r\n   check(pkg,        'pkg is required');\r\n   check(isPkg(pkg), 'pkg must be a SmartPkg');\r\n   const dupPkg = pkgs.find( (p) => p.getPkgId() === pkg.getPkgId() );\r\n   check(!dupPkg, `pkg ${pkg.getPkgId()} has already been registered ... cannot view it multiple times`);\r\n\r\n   // register the new pkg to self\r\n   pkgs.push(pkg);\r\n   pkgs = pkgs; // ... make responsive to Svelte\r\n\r\n   // pre-register pkg entries to our tabManager\r\n   preregisterTabs(pkg.rootDir);\r\n   // ... recursive routine kept here to be close (technically does NOT need to be an inner function)\r\n   function preregisterTabs(treeNode) {\r\n     // for PkgTreeDirs, recurse into each node\r\n     if (treeNode.isDir()) {\r\n       const dirEntries = treeNode.getChildren();\r\n       dirEntries.forEach( (subNode) => preregisterTabs(subNode) );\r\n     }\r\n     // for PkgTreeEntries, pre-register it's pkgEntry to our tabManager\r\n     else if (treeNode.isEntry()) {\r\n       const pkgEntry      = treeNode.getEntry(); // ... a SmartPallet (Scene/Collage/CompRef)\r\n       const tabController = new TabControllerPkgEntry(pkgEntry);\r\n       preregisterTab(tabController);\r\n     }\r\n   }\r\n }\r\n\r\n // maintain our external bindings (when <PkgViewer> is mounted)\r\n onMount(() => activate(viewPkg$comp), deactivate);\r\n\r\n // Open (i.e. load) a SmartPkg selected from the user's local file system.\r\n async function handleOpenPkg() {\r\n   try {\r\n     const pkg = await openPkg();\r\n     if (!pkg) {\r\n       return; // no-op when user canceled the pick dialog\r\n     }\r\n\r\n     // register pkg in self's PkgViewer\r\n     viewPkg(pkg);\r\n\r\n     toast({msg: `\"${pkg.getPkgName()}\" has been loaded in the Left Nav Menu`})\r\n   }\r\n   catch (err) {\r\n     // gracefully report unexpected conditions to user\r\n     discloseError({err, logIt:true});\r\n   }\r\n }\r\n\r\n\r\n</script>\r\n\r\n<Item>\r\n  <Text>Packages ...</Text>\r\n  <Meta>\r\n    <Icon name=\"add_circle_outline\"\r\n          title=\"Create New Package\"\r\n          on:click={() => alert('FUTURE: add new package')}/>\r\n    <Icon name=\"folder_open\"\r\n          title=\"Open Existing Package\"\r\n          on:click={handleOpenPkg}/>\r\n  </Meta>\r\n</Item>\r\n\r\n\r\n{#each pkgs as pkg (pkg.getPkgId())}\r\n  <ViewPkg {pkg}/>\r\n{/each}\r\n","import PkgViewer, {viewPkg}   from './PkgViewer.svelte';\r\nimport {registerLeftNavEntry} from '../appLayout';\r\n\r\n// pseudo-feature initialization:\r\n// ...  register self's component (PkgViewer) to the LeftNav\r\nregisterLeftNavEntry(PkgViewer);\r\n\r\n// publicly promote the pkgViewer's API\r\nexport {\r\n  viewPkg,  // + viewPkg(pkg): void ... makes pkg visible in PkgViewer/LeftNav\r\n};\r\n","import Konva             from 'konva';\r\nimport SmartModel        from './SmartModel';\r\nimport verify            from '../util/verify';\r\nimport checkUnknownArgs  from '../util/checkUnknownArgs';\r\nimport {isNumber}        from '../util/typeCheck';\r\nimport DispMode          from './DispMode';  // AI:  suspect now in CompRef only\r\n\r\n/**\r\n * SmartComp is the abstract base class for all visualize-it\r\n * components.\r\n *\r\n * These are graphical representations of components found in a system:\r\n *\r\n *  - they bind to a data model (for visual affects and animation)\r\n *\r\n *  - their graphics are atomically managed (selection and transformation)\r\n *    ... using a single rooted Konva.Group\r\n *\r\n *  - NOTE: SmartComp is abstract requiring derivation (for code-based compPkgs)\r\n *          HOWEVER: there is a concrete derivation that supports \r\n *                   dynamic-based resource-loaded compPkgs\r\n *                   (maintained by the visualize-it component editor)\r\n *  \r\n *                 SmartComp        ... abstract\r\n *             isA  ├── DynamicComp ... a concrete derivation for dynamic-based resource-loaded compPkgs\r\n *                  │                   ... managed by the visualize-it component editor\r\n *                  └── others      ... for code-based compPkgs\r\n */\r\nexport default class SmartComp extends SmartModel {\r\n\r\n  /**\r\n   * Create a SmartComp.\r\n   *\r\n   * **Please Note** this constructor uses named parameters.\r\n   *\r\n   * @param {string} id - the unique identifier of this component.\r\n   * @param {string} [name=id] - the human interpretable name of this\r\n   * component (DEFAULT to id).\r\n   *\r\n   * @param {number} [x=0] - the optional x offset within it's container (used in transformations of Scene container)\r\n   * @param {number} [y=0] - the optional y offset within it's container (used in transformations of Scene container)\r\n   * @param {number} [rotation=0] - the optional rotation within it's container (used in transformations of Scene container)\r\n   * @param {number} [scaleX=0] - the optional scaleX within it's container (used in transformations of Scene container)\r\n   * @param {number} [scaleY=0] - the optional scaleY within it's container (used in transformations of Scene container)\r\n   */\r\n  constructor({id, name, x=0, y=0, rotation=0, scaleX=1, scaleY=1, ...unknownArgs}={}) {\r\n    super({id, name});\r\n\r\n    // validate SmartComp() constructor parameters\r\n    const check = verify.prefix('SmartComp() constructor parameter violation: ');\r\n    // ... id/name validated by base class\r\n    // ... x\r\n    check(isNumber(x), `x must be a number (when supplied), NOT: ${x}`);\r\n    // ... y\r\n    check(isNumber(y), `y must be a number (when supplied), NOT: ${y}`);\r\n    // ... rotation\r\n    check(isNumber(rotation), `rotation must be a number (when supplied), NOT: ${rotation}`);\r\n    // ... scaleX\r\n    check(isNumber(scaleX), `scaleX must be a number (when supplied), NOT: ${scaleX}`);\r\n    // ... scaleY\r\n    check(isNumber(scaleY), `scaleY must be a number (when supplied), NOT: ${scaleY}`);\r\n    // ... unknown arguments\r\n    checkUnknownArgs(check, unknownArgs, arguments);\r\n\r\n    // retain parameters in self\r\n    this.x        = x;\r\n    this.y        = y;\r\n    this.rotation = rotation;\r\n    this.scaleX   = scaleX;\r\n    this.scaleY   = scaleY;\r\n  }\r\n\r\n  // support persistance by encoding needed props of self\r\n  getEncodingProps() {\r\n    return [...super.getEncodingProps(), ...[['x',0], ['y',0], ['rotation',0], ['scaleX',1], ['scaleY',1]]];\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self supports the supplied `dispMode`.\r\n   *\r\n   * @param {DispMode} dispMode - the display mode to evaluate.\r\n   *\r\n   * @returns {boolean} true: can handle, false: not supported.\r\n   */\r\n  // AI: suspect now in CompRef only\r\n  //? canHandleDispMode(dispMode) {\r\n  //?   return dispMode !== DispMode.edit; // by default, SmartComps cannot be edited\r\n  //? }\r\n\r\n  /**\r\n   * Enable self's \"view\" DispMode (used in top-level objects targeted by a tab).\r\n   *\r\n   * NOTE: this is also invoked prior to other display modes, as a neutral reset :-)\r\n   */\r\n  // AI: suspect now in CompRef only\r\n  //? enableViewMode() {\r\n  //?   // clear everything from any of the other DispModes\r\n  //?   // ... sequentially follow each item in the \"other\" DispModes\r\n  //?   // L8TR: do something when edit/animate is supported\r\n  //? }\r\n\r\n  /**\r\n   * Enable self's \"edit\" DispMode (used in top-level objects targeted by a tab).\r\n   */\r\n  // AI: suspect now in CompRef only\r\n  //? enableEditMode() {\r\n  //?   // L8TR: do something when we support edit of DynamicComp\r\n  //? }\r\n\r\n  /**\r\n   * Enable self's \"animate\" DispMode (used in top-level objects targeted by a tab).\r\n   */\r\n  // AI: suspect now in CompRef only\r\n  //? enableAnimateMode() {\r\n  //?   // L8TR: do something when animate is supported\r\n  //? }\r\n\r\n  /**\r\n   * Mount the visuals of this component, binding the graphics to the\r\n   * underlying canvas.\r\n   *\r\n   * Prior to `mount()` execution, the visualize-it object\r\n   * representation is very lightweight.\r\n   *\r\n   * @param {Konva.Layer} containingKonvaLayer - The container of\r\n   * this component (a Konva.Layer).\r\n   */\r\n  mount(containingKonvaLayer) {\r\n    // create our top-level group containing our component sub-shapes\r\n    // ... this is an expected setup to allow components to be treated as an atomic unit\r\n    this.compGroup = new Konva.Group({\r\n      id: this.id,\r\n      x:  this.x,\r\n      y:  this.y,\r\n      rotation: this.rotation,\r\n      scaleX:   this.scaleX,\r\n      scaleY:   this.scaleY,\r\n    });\r\n    containingKonvaLayer.add(this.compGroup);\r\n  }\r\n\r\n  /**\r\n   * Return an indicator as to whether self is mounted (i.e. bound to the Konva graphics).\r\n   *\r\n   * @returns {boolean} `true`: self is mounted, `false` otherwise\r\n   */\r\n  isMounted() {\r\n    return this.compGroup ? true : false;\r\n  }\r\n\r\n  /**\r\n   * Unmount the visuals of this component, unbinding the graphics to the\r\n   * underlying canvas.\r\n   *\r\n   * @param {boolean} [konvaPreDestroyed=false] - an internal\r\n   * parameter that indicates if konva nodes have already been\r\n   * destroyed (when a parent Konva.Node has already issued the\r\n   * konvaNode.destroy()).\r\n   */\r\n  unmount(konvaPreDestroyed=false) {\r\n    // destroy our Konva representation\r\n    // ... the Konva.destroy() is deep (clearing all containment)\r\n    // ... therefore, we do it conditionally, when not already accomplished by our parent\r\n    if (!konvaPreDestroyed) {\r\n      this.compGroup.destroy();\r\n    }\r\n\r\n    // clear our konva state (established in our mount())\r\n    this.compGroup = null;\r\n    \r\n    // N/A: this is the lowest level :-)\r\n    // propagate request into our children\r\n  }\r\n\r\n}\r\nSmartComp.unmangledName = 'SmartComp';\r\n","import Konva          from 'konva';\r\nimport SmartComp      from '../core/SmartComp';\r\nimport SmartPkg,\r\n       {PkgTreeDir,\r\n        PkgTreeEntry} from '../core/SmartPkg';\r\nimport pkgManager     from '../core/pkgManager';\r\nimport CompRef        from '../core/CompRef';\r\nimport SmartClassRef  from '../core/SmartClassRef';\r\n\r\nclass Valve1 extends SmartComp {\r\n\r\n  // eslint: no-useless-constructor\r\n  // constructor(namedParams) {\r\n  //   super(namedParams);\r\n  // }\r\n\r\n  // NOTE: this component demonstrates multi shapes grouped in a compGroup\r\n  mount(containingKonvaLayer) {\r\n    super.mount(containingKonvaLayer); // defines: this.compGroup\r\n\r\n    const shape1 = new Konva.Rect({\r\n      x: 10, // sub-shape location\r\n      width: 100,\r\n      height: 50,\r\n      fill: 'green',\r\n      stroke: 'black',\r\n      strokeWidth: 5,\r\n    });\r\n    this.compGroup.add(shape1);\r\n\r\n    const connector1 = new Konva.Circle({\r\n      x: 5+2.5, // consider x/strokeWidth (above)\r\n      y: 25,\r\n      radius: 5,\r\n      fill: 'black',\r\n      stroke: 'black',\r\n      strokeWidth: 5,\r\n    });\r\n    this.compGroup.add(connector1);\r\n\r\n    const connector2 = new Konva.Circle({\r\n      x: 5+100+5, // consider x/width/strokeWidth (above)\r\n      y: 25,\r\n      radius: 5,\r\n      fill: 'black',\r\n      stroke: 'black',\r\n      strokeWidth: 5,\r\n    });\r\n    this.compGroup.add(connector2);\r\n\r\n    // setup a sub-group JUST to insure (test) our algorithms can find/use the top-level group\r\n    const subGroup = new Konva.Group({\r\n      x: 0, // NOTE: cannot be based on this.x, RATHER a constant\r\n      y: 0, //       BECAUSE this.compGroup reflects the transformation parameters (so we can't apply the transformations multiple times)\r\n    });\r\n    this.compGroup.add(subGroup);\r\n\r\n    const subCircle = new Konva.Circle({\r\n      x: 10+(100/2), // WHY no strokeWidth: +2.5\r\n      y: 0+(50/2),   // WHY no strokeWidth: +2.5\r\n      radius: 10,\r\n      fill: 'red',\r\n      stroke: 'red',\r\n      strokeWidth: 1,\r\n    });\r\n    subGroup.add(subCircle);\r\n  }\r\n}\r\nValve1.unmangledName = 'Valve1';\r\n\r\nclass Valve2 extends SmartComp {\r\n\r\n  // eslint: no-useless-constructor\r\n  // constructor(namedParams) {\r\n  //   super(namedParams);\r\n  // }\r\n\r\n  mount(containingKonvaLayer) {\r\n    super.mount(containingKonvaLayer); // defines: this.compGroup\r\n\r\n    const shape = new Konva.Rect({\r\n      width: 100,\r\n      height: 50,\r\n      fill: 'red',\r\n      shadowBlur: 10,\r\n      cornerRadius: 10\r\n    });\r\n    this.compGroup.add(shape);\r\n  }\r\n}\r\nValve2.unmangledName = 'Valve2';\r\n\r\nclass Valve3 extends SmartComp {\r\n\r\n  // eslint: no-useless-constructor\r\n  // constructor(namedParams) {\r\n  //   super(namedParams);\r\n  // }\r\n\r\n  mount(containingKonvaLayer) {\r\n    super.mount(containingKonvaLayer); // defines: this.compGroup\r\n\r\n    const shape = new Konva.Rect({\r\n      width:  100,\r\n      height: 100,\r\n      fill: 'blue',\r\n      cornerRadius: [0, 10, 20, 30]\r\n    });\r\n    this.compGroup.add(shape);\r\n  }\r\n}\r\nValve3.unmangledName = 'Valve3';\r\n\r\n// our sandbox code-based component package\r\n// ... registered in our sandbox feature appInit()\r\nconst class2CompPkgTreeEntry = (clazz) => new PkgTreeEntry({entry: new CompRef({compClassRef: new SmartClassRef(clazz)})});\r\nconst generalCompsPkg = new SmartPkg({\r\n  id:   'generalComps',\r\n  name: 'SandBox Comps',\r\n  rootDir: new PkgTreeDir({\r\n    name: '/',\r\n    entries: [\r\n      new PkgTreeDir({\r\n        name: 'Class Comps',\r\n        entries: [\r\n          class2CompPkgTreeEntry(Valve1),\r\n          class2CompPkgTreeEntry(Valve2),\r\n          class2CompPkgTreeEntry(Valve3),\r\n        ],\r\n      }),\r\n    ],\r\n  }),\r\n});\r\n\r\n\r\n// register these components, supporting persistent file resolution\r\npkgManager.registerPkg(generalCompsPkg);\r\n","/**\r\n * Escape all regular expression special characters.\r\n * \r\n * Taken from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\r\n * \r\n * @param {string} str the string to escape.\r\n * \r\n * @return {string} the newly escaped string, representing the\r\n * supplied `str`.\r\n */\r\nfunction escapeRegExp(str) {\r\n  return str.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\r\n}\r\n\r\n/**\r\n * Replace all occurrences of `find` with `replace` in the supplied\r\n * `str`.\r\n * \r\n * @param {string} str the string to operate on.\r\n * @param {string} find the \"from\" string to be replaced.  Note that\r\n * all regular expression special characters are escaped.\r\n * @param {string} replace the \"to\" string to replace.\r\n * \r\n * @return {string} the newly replaced string.\r\n */\r\nexport function replaceAll(str, find, replace) {\r\n  return str.replace(new RegExp(escapeRegExp(find), 'g'), replace);\r\n}\r\n","import Collage        from '../core/Collage';\r\nimport SmartModel     from '../core/SmartModel';\r\nimport Scene          from '../core/Scene';\r\nimport SmartClassRef  from '../core/SmartClassRef';\r\nimport SmartPkg,\r\n       {PkgTreeDir,\r\n        PkgTreeEntry} from '../core/SmartPkg';\r\nimport pkgManager     from '../core/pkgManager';\r\nimport {replaceAll}   from '../util/strUtil';\r\nimport {createLogger} from '../util/logger';\r\n\r\nconst log = createLogger('***DIAG*** konvaSandboxSmartPkg ... ').disable(); // enable this to see JSON in logs\r\n\r\nconst Valve1 = pkgManager.getClassRef('generalComps', 'Valve1');\r\nconst Valve2 = pkgManager.getClassRef('generalComps', 'Valve2');\r\nconst Valve3 = pkgManager.getClassRef('generalComps', 'Valve3');\r\n\r\n\r\n//************************************************************************************\r\n//*** Scene: scene1Master ... a pseudoClass MASTER\r\n//************************************************************************************\r\n\r\nconst scene1Master = new Scene({\r\n  id: 'Scene1',\r\n  comps: [\r\n    Valve1.createSmartObject({id: 'myValve1', x:  20, y:  20}),\r\n    Valve2.createSmartObject({id: 'myValve2', x: 150, y:  40}),\r\n    Valve3.createSmartObject({id: 'myValve3', x:  50, y: 120}),\r\n  ],\r\n});\r\n\r\n\r\n//************************************************************************************\r\n//*** Scene: scene2Master ... a pseudoClass MASTER\r\n//************************************************************************************\r\n\r\nconst scene2Master = new Scene({\r\n  id: 'Scene2',\r\n  comps: [\r\n    Valve1.createSmartObject({id: 'myValve1', x:  20, y:  20}),\r\n    Valve2.createSmartObject({id: 'myValve2', x: 150, y:  40}),\r\n  ],\r\n});\r\n\r\n\r\n//**********************************************************\r\n//*** Collage: collage1\r\n//**********************************************************\r\n\r\n// NOTE: The scenes used in our collage must be instance copies of the\r\n//       master (defined above). To create these copies, we need their\r\n//       pseudo class reference (SmartClassRef).\r\n//\r\n//       NORMALLY, we would ask the pkgManager for this:\r\n//\r\n//         const scene1ClassRef = pkgManager.getClassRef('com.astx.KONVA', 'Scene1');\r\n//\r\n//       HOWEVER, this is NOT possible in this case, because we are creating this\r\n//       self-referencing pkg yet (i.e. the pkg doesn't exist yet)!\r\n//\r\n//       THEREFORE, as a work-around we create a temporary classRef, who's\r\n//       'UNKNOWN-PKG-ID' is NOT retained in a persistent source ... for example:\r\n//\r\n//         const scene1ClassRef = new SmartClassRef(scene1Master);\r\n\r\nconst scene1ClassRef = new SmartClassRef(scene1Master);\r\nconst scene1Instance = scene1ClassRef.createSmartObject({\r\n  id: 'Scene1',\r\n  // comps: [ // KOOL: do NOT need comps ... they are created (cloned) from the scene1 pseudoClass!\r\n  //          new Valve1({id: 'myValve1'}),\r\n  //          new Valve2({id: 'myValve2'}),\r\n  //          new Valve3({id: 'myValve3'}),\r\n  // ],\r\n  x:0,\r\n  y:0,\r\n});\r\n\r\nconst scene2ClassRef = new SmartClassRef(scene2Master);\r\nconst scene2Instance = scene2ClassRef.createSmartObject({\r\n  id: 'Scene2',\r\n  // comps: [ // KOOL: do NOT need comps ... they are created (cloned) from the scene2 pseudoClass!\r\n  //   new Valve1({id: 'myValve1'}),\r\n  //   new Valve2({id: 'myValve2'}),\r\n  //   // new Valve3({id: 'myValve3'}), // omit JUST to make it different\r\n  // ],\r\n  x:300,\r\n  y:250,\r\n});\r\n\r\nconst collage1 = new Collage({id: 'collage1', name: 'Collage 1', scenes: [scene1Instance, scene2Instance]});\r\n\r\n\r\n//******************************************************************************\r\n//*** konvaSandboxSmartPkg: our FIRST smartPkg!!\r\n//******************************************************************************\r\n\r\nconst konvaSandboxSmartPkg = new SmartPkg({\r\n  id:   'com.astx.KONVA',\r\n  name: 'Konva Sandbox I',\r\n  rootDir: new PkgTreeDir({\r\n    name: '/',\r\n    entries: [\r\n      new PkgTreeDir({\r\n        name: 'scenes',\r\n        entries: [\r\n          new PkgTreeEntry({entry: scene1Master}),\r\n          new PkgTreeDir({\r\n            name: 'More Depth',\r\n            entries: [\r\n              new PkgTreeEntry({entry: scene2Master}),\r\n            ],\r\n          }),\r\n        ],\r\n      }),\r\n      new PkgTreeDir({\r\n        name: 'collages',\r\n        entries: [\r\n          new PkgTreeEntry({entry: collage1}),\r\n        ],\r\n      }),\r\n    ],\r\n  }),\r\n});\r\n\r\npkgManager.registerPkg(konvaSandboxSmartPkg);\r\n\r\n\r\n//******************************************************************************\r\n//*** CRUDE TEST: Exercise clone process to insure NO runtime errors :-)\r\n//******************************************************************************\r\n\r\n// clone konvaSandboxSmartPkg\r\nconst clonedPkg = konvaSandboxSmartPkg.smartClone();\r\n\r\n// rename, so clonedPkg can co-exist (in pkgManager) with konvaSandboxSmartPkg\r\n// ... NOTE: Even with this rename, the clonedPkg will retain the original\r\n//           self referenced pkg of: \"com.astx.KONVA\"\r\n//           ... SO the konvaSandboxSmartPkg must be pre-registered for \r\n//               the clonedPkg to operate\r\nclonedPkg.id   = 'cloned.pkg';\r\nclonedPkg.name = 'Cloned Pkg';\r\n// ... simulate what would happen if the manual change above was in our controlled environment\r\nclonedPkg.trickleUpChange(); // ... sync the change\r\n// ... re-baseline the baseCrc (so it doesn't start out needing to be saved)\r\nclonedPkg.resetBaseCrc();\r\n\r\n// register clonedPkg to our pkgManager\r\npkgManager.registerPkg(clonedPkg);\r\n\r\n\r\n\r\n//******************************************************************************\r\n//*** CRUDE TEST: Exercise JSON persistance to insure NO runtime errors :-)\r\n//******************************************************************************\r\n\r\n// You can use the logged JSON to prime-the-pump, manually placing in a visualize-it file, and loading it in the system\r\n// 1. enable the log control (at the top of this file) to see the JSON in our logs\r\n// 2. mouse the JSON string (found in logs)\r\n// 3. into a file (ex: C:\\Users\\kevin\\Dropbox\\Camera Uploads\\visualize-it\\myFirst.vit)\r\n// 4. load the package from that file (via the visualize-it file menu)\r\n\r\n// convert to JSON\r\nlog(`PERSISTENT TEST: JSONIZE smartPkg:\\n`, {konvaSandboxSmartPkg});\r\nconst json = konvaSandboxSmartPkg.toSmartJSON();\r\nlog(`PERSISTENT TEST: HERE is the json:\\n`, {json});\r\n\r\n// for this conversion to be self-sufficient, we need to change the pkgId/pkgName in the JSON\r\nconst pkgId   = konvaSandboxSmartPkg.id;\r\nconst pkgName = konvaSandboxSmartPkg.name;\r\nlet   jsonStr = JSON.stringify(json, null, 2);\r\njsonStr = replaceAll(jsonStr,          // pkgId (including any self referenced pkgId)\r\n                     `\"${pkgId}\"`,     //   ex: \"com.astx.KONVA\"\r\n                     `\"${pkgId}2\"`);   //   ex: \"com.astx.KONVA2\"\r\njsonStr = replaceAll(jsonStr,          // pkgName\r\n                     `\"${pkgName}\"`,   //   ex: \"Konva Sandbox I\"\r\n                     `\"${pkgName}I\"`); //   ex: \"Konva Sandbox II\"\r\nlog(`PERSISTENT TEST: HERE is the \"pretty\" jsonStr (after id changes):\\n`, jsonStr);\r\n\r\n// rehydrate the JSON back to a SmartPkg object\r\nconst rehydratedSmartPkg = SmartModel.fromSmartJSON(JSON.parse(jsonStr));\r\nlog(`PERSISTENT TEST: HERE is the RE-HYDRATED smartPkg:\\n`, {rehydratedSmartPkg});\r\n","import {featureFlags} from '../App.svelte'\r\nimport {viewPkg}      from '../pkgViewer';\r\nimport pkgManager     from '../core/pkgManager';\r\nimport {createLogger} from '../util/logger';\r\nimport                     './generalComps';         // unnamed import activating it's package registration\r\nimport                     './konvaSandboxSmartPkg'; // unnamed import activating it's package registration\r\nconst  log = createLogger('***DIAG*** sandbox feature ... ').disable();\r\n\r\n// feature: sandbox\r\n//          sandbox to play with konva.js\r\n\r\n// when sandbox is enabled, display various sandbox packages in our LeftNav\r\nif (featureFlags.sandbox) {\r\n  // our sandbox code-based component package\r\n  const generalCompsPkg = pkgManager.getPkg('generalComps');\r\n  viewPkg(generalCompsPkg);\r\n  \r\n  // our sandbox resource-based system package\r\n  const konvaSandboxSmartPkg = pkgManager.getPkg('com.astx.KONVA');\r\n  viewPkg(konvaSandboxSmartPkg);\r\n\r\n//? // our clonedPkg\r\n//? const clonedPkg = pkgManager.getPkg('cloned.pkg');\r\n//? // ... quick-and-dirty-test of PkgViewer reactivity (via timeout)\r\n//? setTimeout( () => log(`adding viewPkg('cloned.pkg')`) || viewPkg(clonedPkg), 5000);\r\n}\r\n","import './util/ErrorExtensionPolyfill'; // value-added Error extensions, providing ability to handle ALL errors more generically\nimport './core/preregisterCoreClasses'; // pre-register our \"core\" SmartPkg very early, allowing pkgManager to resolve \"core\" packages\n\n// include various features\n// ... may have to move (based on dependencies)\n// ... currently only a \"few\" features\nimport './sandbox'; // TODO: ?? before we can include this, must resolve Svelte duplicate JS class definitions\n\n// now process our GUI App!!\nimport App from './App.svelte';\n\nconst app = new App({\n\ttarget: document.body,\n});\n\nexport default app;\n"],"names":["Error","prototype","defineUserMsg","userMsg","this","expected","isExpected","isUnexpected","defineAttemptingToMsg","attemptingToMsg","formatUserMsg","prior_toString","toString","call","verify","condition","msg","prefix","msgPrefix","argsTag","mapTag","objectTag","setTag","reIsHostCtor","reIsUint","typedArrayTags","freeGlobal","global","Object","freeSelf","self","root","Function","freeExports","exports","nodeType","freeModule","module","moduleExports","freeProcess","process","nodeUtil","binding","e","nodeIsTypedArray","isTypedArray","arraySome","array","predicate","index","length","mapToArray","map","result","Array","size","forEach","value","key","setToArray","set","uid","func","transform","arrayProto","funcProto","objectProto","coreJsData","funcToString","hasOwnProperty","maskSrcKey","exec","keys","IE_PROTO","nativeObjectToString","reIsNative","RegExp","replace","Buffer","undefined","Symbol","Uint8Array","propertyIsEnumerable","splice","symToStringTag","toStringTag","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","isBuffer","nativeKeys","arg","DataView","getNative","Map","Promise","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","entries","clear","entry","ListCache","MapCache","SetCache","values","__data__","add","Stack","data","arrayLikeKeys","inherited","isArr","isArray","isArg","isArguments","isBuff","isType","skipIndexes","n","iteratee","baseTimes","String","isIndex","push","assocIndexOf","eq","baseGetTag","isOwn","tag","unmasked","getRawTag","objectToString","baseIsArguments","isObjectLike","baseIsEqual","other","bitmask","customizer","stack","object","equalFunc","objIsArr","othIsArr","objTag","getTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","byteLength","byteOffset","buffer","name","message","convert","isPartial","stacked","get","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","getAllKeys","objLength","othLength","skipCtor","objValue","othValue","compared","objCtor","constructor","othCtor","equalObjects","baseIsEqualDeep","baseIsNative","isObject","isMasked","isFunction","test","baseKeys","Ctor","proto","arrLength","seen","arrValue","othIndex","has","keysFunc","symbolsFunc","offset","arrayPush","baseGetAllKeys","getSymbols","getMapData","type","getValue","pop","hash","string","pairs","LARGE_ARRAY_SIZE","resIndex","arrayFilter","symbol","ArrayBuffer","resolve","ctorString","arguments","isLength","baseUnary","objectCtorString","getPrototype","getPrototypeOf","isHostObject","isClass","isNumber","ref","isSmartObject","isaSmartObject","isPkg","isaPkg","isPkgEntry","isaPkgEntry","checkUnknownArgs","check","unknownNamedArgs","args","unknownArgKeys","PseudoClass","[object Object]","id","unknownArgs","isString","pseudoClass","clazz","isPseudoClassMaster","unmangledName","createLogger","_enabled","logger","obj","force","console","log","isEnabled","enable","disable","SmartClassRef","classRef","pkgId","realClass","pseudoClassContainer","getClassPkgId","getClassName","getCrc","namedParams","newObj","msgQualifier","smartClone","pseudoClassMaster","versionCrcUsedInCreation","getFullClassName","PkgManager","systemClassCatalog","pkgCatalog","smartClassRef","systemPkgId","clazzName","smartPkg","getPkgId","className","systemClassRef","getClassRef","entryId","getPkgEntry","pkgManager","defineProperty","Enumify","enumKeys","enumValues","enumKey","enumOrdinal","str","indexOf","iterator","DispMode","createTypeRefHandler","handlers","isPlainObject","handleNoRef","handlePrimitive","handleArray","handlePlainObj","handleSmartObj","handleNonSmartObj","handleClass","setupHandlers","accum","noop","view","edit","animate","_","closeEnum","identity","x","assign","tar","src","k","run","fn","blank_object","create","run_all","fns","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","unsub","unsubscribe","get_store_value","component_subscribe","component","callback","$$","on_destroy","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","slice","get_slot_changes","dirty","lets","merged","len","Math","max","i","exclude_internal_props","props","compute_rest_props","rest","action_destroyer","action_result","destroy","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","run_tasks","task","c","delete","f","loop","promise","fulfill","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","element","document","createElement","text","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","prevent_default","preventDefault","attr","attribute","removeAttribute","getAttribute","setAttribute","set_attributes","attributes","descriptors","getOwnPropertyDescriptors","__proto__","style","cssText","set_data","set_style","important","setProperty","select_option","select","option","__value","selected","toggle_class","toggle","classList","custom_event","detail","createEvent","initCustomEvent","active_docs","current_component","active","create_rule","duration","delay","ease","step","keyframes","p","t","rule","charCodeAt","doc","ownerDocument","stylesheet","__svelte_stylesheet","head","sheet","current_rules","__svelte_rules","insertRule","cssRules","animation","delete_rule","previous","split","next","filter","anim","deleted","join","deleteRule","fix_position","getComputedStyle","position","width","height","getBoundingClientRect","left","top","add_transform","set_current_component","get_current_component","onMount","on_mount","onDestroy","setContext","context","getContext","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","update_scheduled","add_render_callback","add_flush_callback","flushing","seen_callbacks","flush","update","fragment","before_update","after_update","dispatch","direction","kind","dispatchEvent","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","d","null_transition","create_bidirectional_transition","params","intro","config","running_program","pending_program","animation_name","clear_animation","init","program","abs","start","end","group","go","easing","tick","css","then","destroy_block","lookup","outro_and_destroy_block","fix_and_outro_and_destroy_block","update_keyed_each","old_blocks","get_key","dynamic","list","create_each_block","get_context","old_indexes","new_blocks","new_lookup","deltas","child_ctx","will_move","did_move","m","first","new_block","old_block","new_key","old_key","get_spread_update","levels","updates","to_null_out","accounted_for","get_spread_object","spread_props","bind","bound","create_component","mount_component","new_on_destroy","destroy_component","detaching","make_dirty","fill","instance","create_fragment","not_equal","parent_component","prop_values","ready","ret","hydrate","nodes","from","childNodes","children","l","SvelteComponent","$destroy","subscriber_queue","writable","stop","subscribers","new_value","run_queue","s","invalidate","subscriber","applyChange","ePkg","changeFn","pkgEntry","pallet","containingKonvaStage","unmount","targetObj","getEPkgId","mount","changeManager","changeDispMode","getDispMode","trickleUpChange","applyChangeForPkgEntry","pkg","changeFnReturn","targetObjs","getPkg","rootDir","syncParent","syncPkgStructureGuiChanges","warn","applyChangeForPkg","UndoRedoMgr","undoRedoMgr","cur","undoFn","redoFn","isRedoAvail","isUndoAvail","ChangeManager","isaEPkg","baseStore","dispMode","inSync","isInSync","undoAvail","redoAvail","setDispMode","syncMonitoredChange","monitorState","state","registerOp","applyUndo","applyRedo","revLookup","Arr","inited","code","encodeChunk","uint8","tmp","num","output","fromByteArray","extraBytes","parts","len2","read","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","Infinity","pow","write","rt","isNaN","floor","LN2","arr","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","encodingOrOffset","allocUnsafe","TypeError","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","fromString","internalIsBuffer","checked","copy","val","fromObject","assertSize","_isBuffer","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","lastIndexOf","indexSize","valLength","buf","readUInt16BE","foundIndex","found","j","hexWrite","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","base64.fromByteArray","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","apply","decodeCodePointsArray","poolSize","_augment","alloc","allocUnsafeSlow","isFastBuffer","readFloatLE","isSlowBuffer","compare","y","concat","pos","swap16","swap32","swap64","equals","inspect","match","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754.write","writeDouble","newBuf","subarray","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","ieee754.read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","leadSurrogate","b64","placeHolders","L","base64.toByteArray","trim","stringtrim","base64clean","dst","model","calc","signed","unsigned","crc1","defineCrc","crc","TABLE","Int32Array","crc8","byte","crc81wire","crc16","crc16ccitt","crc16modbus","crc16xmodem","crc16kermit","crc24","crc32","crcjam","accumCrc","valStr","crcUtil","styleInject","insertAt","getElementsByTagName","firstChild","styleSheet","supportsCssVariables_","forwardEventsBuilder","additionalEvents","events","forward","destructors","exclude","names","getOwnPropertyNames","cashIndex","substring","useActions","actions","objects","action","role","aria-live","forwardEvents","use","href","extendStatics","setPrototypeOf","__extends","__","__assign","__read","ar","done","error","__spread","supportsPassive_","MDCFoundation","adapter","adapter_","enumerable","configurable","MDCComponent","foundation","_i","root_","initialize","tslib_1.__spread","foundation_","getDefaultFoundation","initialSyncWithDOM","attachTo","_args","evtType","unlisten","emit","evtData","shouldBubble","evt","CustomEvent","bubbles","applyPassive","globalObj","forceRefresh","isSupported_1","passive","closest","selector","el","matches","parentElement","webkitMatchesSelector","msMatchesSelector","cssClasses","BG_FOCUSED","FG_ACTIVATION","FG_DEACTIVATION","ROOT","UNBOUNDED","strings","VAR_FG_SCALE","VAR_FG_SIZE","VAR_FG_TRANSLATE_END","VAR_FG_TRANSLATE_START","VAR_LEFT","VAR_TOP","numbers","DEACTIVATION_TIMEOUT_MS","FG_DEACTIVATION_MS","INITIAL_ORIGIN_SCALE","PADDING","TAP_DELAY_MS","ACTIVATION_EVENT_TYPES","POINTER_DEACTIVATION_EVENT_TYPES","activatedTargets","MDCRippleFoundation","_super","_this","tslib_1.__assign","defaultAdapter","activationAnimationHasEnded_","activationTimer_","fgDeactivationRemovalTimer_","fgScale_","frame_","initialSize_","layoutFrame_","maxRadius_","unboundedCoords_","activationState_","defaultActivationState_","activationTimerCallback_","runDeactivationUXLogicIfReady_","activateHandler_","activate_","deactivateHandler_","deactivate_","focusHandler_","handleFocus","blurHandler_","handleBlur","resizeHandler_","layout","tslib_1.__extends","addClass","browserSupportsCssVars","computeBoundingRect","right","bottom","containsEventTarget","deregisterDocumentInteractionHandler","deregisterInteractionHandler","deregisterResizeHandler","getWindowPageOffset","isSurfaceActive","isSurfaceDisabled","isUnbounded","registerDocumentInteractionHandler","registerInteractionHandler","registerResizeHandler","removeClass","updateCssVariable","supportsPressRipple","supportsPressRipple_","registerRootHandlers_","_a","ROOT_1","UNBOUNDED_1","layoutInternal_","clearTimeout","ROOT_2","UNBOUNDED_2","removeCssVars_","deregisterRootHandlers_","deregisterDeactivationHandlers_","activate","deactivate","cancelAnimationFrame","setUnbounded","unbounded","activationEvent","hasDeactivationUXRun","isActivated","isProgrammatic","wasActivatedByPointer","wasElementMadeActive","registerDeactivationHandlers_","rippleStrings","activationState","previousActivationEvent","previousActivationEvent_","some","resetActivationState_","checkElementMadeActive_","animateActivation_","keyCode","_b","translateStart","translateEnd","_c","getFgTranslationCoordinates_","startPoint","endPoint","rmBoundedActivationClasses_","setTimeout","pageOffset","clientRect","normalizedX","normalizedY","documentX","documentY","touchEvent","changedTouches","pageX","pageY","mouseEvent","getNormalizedEventCoords","animateDeactivation_","maxDim","sqrt","updateLayoutCssVars_","round","MDCRipple","disabled","opts","ripple","createAdapter","windowObj","CSS","supportsCssVars","supports","explicitlySupportsCssVars","weAreFeatureDetectingSafari10plus","computedStyle","hasPseudoVarBug","borderTopStyle","detectEdgePseudoVarBug","util.supportsCssVariables","contains","documentElement","pageXOffset","pageYOffset","Boolean","remove","varName","unbounded_","setUnbounded_","dataset","Ripple","color","classForward","removeLayoutListener","addLayoutListener","idx","handleProps","_createAdapter","newProps","variant","dense","defaultAction","Button","A","rippleClasses","actionProp","data-mdc-dialog-action","defaultProp","data-mdc-dialog-button-default","dialogExcludes","classes","ICON_BUTTON_ON","ARIA_PRESSED","CHANGE_EVENT","MDCIconButtonToggleFoundation","hasClass","notifyChange","setAttr","isOn","handleClick","MDCIconButtonToggle","ripple_","createRipple_","handleClick_","attrName","attrValue","toggleButton","pressed","oldToggle","$$props","on","prefixFilter","CLOSING","OPEN","OPENING","ACTION_SELECTOR","ARIA_LIVE_LABEL_TEXT_ATTR","CLOSED_EVENT","CLOSING_EVENT","DISMISS_SELECTOR","LABEL_SELECTOR","OPENED_EVENT","OPENING_EVENT","REASON_ACTION","REASON_DISMISS","SURFACE_SELECTOR","DEFAULT_AUTO_DISMISS_TIMEOUT_MS","MAX_AUTO_DISMISS_TIMEOUT_MS","MIN_AUTO_DISMISS_TIMEOUT_MS","SNACKBAR_ANIMATION_CLOSE_TIME_MS","SNACKBAR_ANIMATION_OPEN_TIME_MS","ARIA_LIVE_DELAY_MS","announce","ariaEl","labelEl","priority","labelText","textContent","innerHTML","MDCSnackbarFoundation","isOpen_","animationFrame_","animationTimer_","autoDismissTimer_","autoDismissTimeoutMs_","closeOnEscape_","notifyClosed","notifyClosing","notifyOpened","notifyOpening","clearAutoDismissTimer_","open","runNextAnimationFrame_","handleAnimationTimerEnd_","close","getTimeoutMs","reason","isOpen","setTimeoutMs","timeoutMs","minValue","maxValue","getCloseOnEscape","setCloseOnEscape","closeOnEscape","handleKeyDown","handleActionButtonClick","_evt","handleActionIconClick","MDCSnackbar","announcerFactory","util.announce","announce_","surfaceEl_","querySelector","labelEl_","actionEl_","handleKeyDown_","handleSurfaceClick_","isActionButton_","isActionIcon_","registerKeyDownHandler_","registerSurfaceClickHandler_","deregisterKeyDownHandler_","deregisterSurfaceClickHandler_","actionButtonText","waiting","uninitializedValue","snackbar","closeResolve","leading","surface$class","surface$use","closePromise","internals","smuiClass","contexts","smuiForwardEvents","class","classAdderBuilder","Component","ClassAdder","$$render","render","Div","label","iterations","dismissTitle","dismissText","dismissButton","snackbars","onClose","onClick","onDismiss","_pushMsgOnSnackbar$comp","pushMsgOnSnackbar","snackbarParams","kitchen","pushMsgOnSnackbar$comp","DEFAULT","toast","dismissible","indx","txt","actionsSupplied","SmartModel","diagClassName","cbFn","getEncodingProps","prop","propName","defaultValue","propValue","initialAccum","reduce","getCrcRefHandler","handlerCache","noRef","primitiveRef","arrRef","item","plainObjRef","subPropName","subPropValue","smartObjRef","otherObjRef","_crc","encodingPropsReduce","getBaseCrc","_baseCrc","resetBaseCrcRefHandler","resetBaseCrc","encodingPropsForEach","containingKonvaContext","konvaPreDestroyed","oldRef","newRef","selfsClassRef","isPseudoClass","getClassVersionCrc","outOfSyncHandler","accumOutOfSync","areClassesOutOfSync","isClassOutOfSync","syncClassHandler","syncClassInstances","isMounted","newSelf","parent","getParent","changeChildRef","viewParent","_pkgEntry","getId","getPkgEntryId","isaView","getViewParent","getView","sizeChanged","getSize","oldSize","sizeCache","newSize","bindSizeChanges","resetCrc","canHandleDispMode","canPersist","getName","getPkgName","enableViewMode","enableEditMode","enableAnimateMode","toSmartJSONRefHandler","accumJSON","subRefName","subRef","toSmartJSON","myJSON","smartType","isInstance","pseudoClassRef","realClassRef","smartJSON","pkgIdBeingResolved","preresolvedObjects","preresolvedPseudoClassMasters","preresolvePseudoClassMasters","jsonPkgTree","jsonSubEntry","jsonSmartPallet","resolvedObj","hydrateObject","preresolvedObject","namedProps","err","JSON","stringify","resolveClassRefFromSmartJSON","createSmartObject","subName","overridingNamedProps","smartCloneRefHandler","accumClone","accumProps","clonedValue","SmartPallet","super","accumDomCoordOffset","elm","offsetCoord","offsetLeft","offsetTop","scrollLeft","scrollTop","containingHtmlElm","clientX","clientY","PI_OVER_180","PI","_detectIE","ua","msie","rv","edge","userAgent","mobile","ieMobile","browser","version","isIE","WorkerGlobalScope","_global","glob","isBrowser","isUnminified","param","dblClickWindow","getAngle","angle","Konva","angleDeg","enableTrace","_pointerEventsEnabled","hitOnDragEnabled","captureTouchEventsEnabled","listenClickTap","inDblClickWindow","pixelRatio","dragDistance","showWarnings","dragButtons","isDragging","isDragReady","UA","_parseUA","navigator","_injectGlobal","NodeClass","_NODES_REGISTRY","Collection","toCollection","collection","_mapMethod","methodName","mapMethods","prot","each","toArray","Transform","point","translate","scale","sx","sy","rotate","rad","cos","sin","m11","m12","m21","m22","getTranslation","skew","multiply","matrix","dx","dy","invert","m0","m1","m2","m3","m4","m5","getMatrix","setAbsolutePosition","yt","xt","decompose","delta","rotation","scaleX","scaleY","skewX","skewY","acos","Util","_getRotation","PI_OVER_DEG180","DEG180_OVER_PI","COLORS","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","transparent","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","RGB_REGEX","animQueue","_isElement","_isFunction","_isPlainObject","_isArray","_isNumber","_isString","_isBoolean","isValidSelector","firstChar","toUpperCase","_sign","number","requestAnimFrame","queue","createCanvasElement","canvas","createImageElement","_isInDocument","_simplifyArray","retArr","util","_urlToImage","url","imageObj","Global_1","Image","onload","_rgbToHex","g","_hexToRgb","hex","bigint","getRandomColor","randColor","random","def","getRGB","rgb","colorToRGBA","_namedColorToRBA","_hex3ColorToRGBA","_hex6ColorToRGBA","_rgbColorToRGBA","_rgbaColorToRGBA","_hslColorToRGBA","hsl","h","t2","t3","t1","haveIntersection","r1","r2","cloneObject","retObj","cloneArray","_degToRad","deg","_radToDeg","radians","_capitalize","charAt","throw","extend","child","oldProto","__super__","_getControlPoints","x0","y0","x1","y1","x2","y2","d01","d12","fa","fb","_expandPoints","tension","cp","allPoints","_inRange","_getProjectionToSegment","x3","y3","dist","pd2","u","_getProjectionToLine","pt","line","isClosed","pc","MAX_VALUE","p1","p2","proj","px","py","pdist","_prepareArrayForTween","startArray","endArray","temp","newStart","pr","_prepareToStringify","desc","visitedByCircularReferenceRemoval","getOwnPropertyDescriptor","_assign","source","_getFirstPointerId","touches","identifier","_formatValue","Util_1","components","addGetterSetter","validator","after","addGetter","addSetter","addOverloadedGetterSetter","method","attrs","Factory","overWriteSetter","_setAttr","addComponentsGetterSetter","capitalize","getter","setter","getAttr","basicValidator","Validators_1","getComponentValidator","oldVal","_fireChangeEvent","capitalizedAttr","addDeprecatedGetterSetter","backCompat","methods","oldMethodName","newMethodName","oldGetter","oldSetter","deprecated","afterSetFilter","_filterUpToDate","CONTEXT_METHODS","Context","_context","_canvas","traceArr","_enableTrace","fillShape","shape","fillEnabled","_fill","strokeShape","hasStroke","_stroke","fillStrokeShape","getTrace","relaxed","trace","property","clearTrace","_trace","shift","reset","getCanvas","getPixelRatio","setTransform","bounds","clearRect","getWidth","getHeight","_applyLineCap","lineCap","getLineCap","_applyOpacity","absOpacity","getAbsoluteOpacity","_applyLineJoin","lineJoin","getLineJoin","arc","a0","a1","a2","a3","a4","a5","arcTo","beginPath","bezierCurveTo","clip","closePath","createImageData","createLinearGradient","createPattern","createRadialGradient","drawImage","a6","a7","a8","ellipse","isPointInPath","fillRect","strokeRect","fillText","measureText","getImageData","lineTo","moveTo","rect","putImageData","quadraticCurveTo","restore","save","setLineDash","getLineDash","stroke","strokeText","origSetter","origMethod","_applyGlobalCompositeOperation","globalCompositeOperation","getGlobalCompositeOperation","SceneContext","_fillColor","_fillFunc","_fillPattern","fillPatternX","getFillPatternX","fillPatternY","getFillPatternY","fillPatternRotation","getFillPatternRotation","fillPatternOffsetX","getFillPatternOffsetX","fillPatternOffsetY","getFillPatternOffsetY","fillPatternScaleX","getFillPatternScaleX","fillPatternScaleY","getFillPatternScaleY","_getFillPattern","_fillLinearGradient","grd","_getLinearGradient","_fillRadialGradient","_getRadialGradient","hasColor","fillPriority","getFillPriority","hasPattern","getFillPatternImage","hasLinearGradient","getFillLinearGradientColorStops","hasRadialGradient","getFillRadialGradientColorStops","_strokeLinearGradient","getStrokeLinearGradientStartPoint","getStrokeLinearGradientEndPoint","colorStops","getStrokeLinearGradientColorStops","addColorStop","dash","strokeScaleEnabled","getStrokeScaleEnabled","dashEnabled","dashOffset","strokeWidth","getShadowForStrokeEnabled","_strokeFunc","_applyShadow","getShadowRGBA","blur","getShadowBlur","getShadowOffset","getAbsoluteScale","ratio","HitContext","colorKey","_fillFuncHit","hasHitStroke","hitStrokeWidth","_strokeFuncHit","_pixelRatio","Canvas","isCache","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","getDevicePixelRatio","padding","margin","border","background","setPixelRatio","previousRatio","setSize","setWidth","setHeight","toDataURL","mimeType","quality","getNumberValidator","SceneCanvas","Context_1","HitCanvas","hitCanvas","flag","DD","_dragElements","elem","dragStatus","justDragged","_drag","stage","getStage","setPointersPositions","pointerId","_changedPointerPositions","find","startPointerPos","startDrag","_setDragPosition","fire","_endDragBefore","drawNode","getLayer","draw","_endDragAfter","ids","_id","TRANSFORM_CHANGE_STR","emptyChildren","idCounter","Node","eventListeners","_cache","_lastPos","_batchingTransformChange","_needClearTransformCache","_isUnderCache","_dragEventId","setAttrs","_clearCache","_clearSelfAndDescendantCache","hasChildren","getChildren","_getCache","privateGetter","cache","_getCanvasCache","forceEvent","isCached","clearCache","conf","getClientRect","skipTransform","relativeTo","ceil","drawBorder","cachedSceneCanvas","Canvas_1","cachedFilterCanvas","cachedHitCanvas","sceneContext","hitContext","imageSmoothingEnabled","drawScene","drawHit","scene","hit","_transformedRect","minX","minY","maxX","maxY","points","trans","getAbsoluteTransform","transformed","_drawCachedSceneCanvas","canvasCache","cacheCanvas","_getCachedSceneCanvas","_drawCachedHitCanvas","imageData","filters","cachedCanvas","sceneCanvas","filterCanvas","filterContext","evtStr","_delegate","baseEvent","off","_off","stopNode","targets","findAncestors","currentTarget","stopDrag","DragAndDrop_1","_remove","_clearCaches","_setChildrenIndices","_removeId","subname","_removeName","getAncestors","ancestors","getAttrs","isListening","_isListening","listening","isVisible","_isVisible","visible","shouldDrawHit","layer","hitGraphEnabled","show","hide","getZIndex","getAbsoluteZIndex","depth","getDepth","addChildren","_batchTransformChanges","setPosition","getPosition","getAbsolutePosition","haveCachedParent","absoluteMatrix","absoluteTransform","it","origTrans","_clearTransform","_getAbsoluteTransform","_setTransform","offsetX","offsetY","move","change","changeX","changeY","_eachAncestorReverse","family","unshift","theta","moveToTop","moveUp","moveDown","moveToBottom","setZIndex","zIndex","_getAbsoluteOpacity","opacity","newContainer","toObject","includeSelf","_isMatch","ancestor","isAncestorOf","findAncestor","sel","selectorArr","hasName","_getStage","eventType","_fireAndBubble","_fire","at","transformsEnabled","getTransform","getAbsoluteRotation","_getTransform","clone","allListeners","listener","_toKonvaCanvas","box","toCanvas","toImage","img","getType","getDragDistance","evtName","evtListeners","newVal","setId","oldId","_addId","setName","oldNames","newNames","_addName","addName","oldName","newName","fullName","removeName","_setComponentAttr","compareShape","stopBubble","cancelBubble","_createDragElement","ap","_getPointerById","newNodePos","dbf","dragBoundFunc","bounded","batchDraw","setDraggable","draggable","_dragChange","_listenDrag","_dragCleanup","hasDraggingChild","container","parse","_createNode","no","Class","_attrsAffectingSize","getStringValidator","getBooleanValidator","rotateDeg","setRotationDeg","getRotationDeg","Container","filterFunc","results","removeChildren","destroyChildren","_children","_validateAdd","_generalFind","findOne","_descendants","valid","Node_1","getAllIntersections","intersects","can","caching","_applyTransform","_drawChildren","drawMethod","skipBuffer","skipComposition","clipX","clipY","clipWidth","clipHeight","clipFunc","hasClip","hasComposition","layerUnderDrag","dragSkip","selfRect","skipShadow","skipStroke","shapes","hasVisible","Captures","SUPPORT_POINTER_EVENTS","releaseCapture","content","PointerEvent","Global_2","EVENTS","eventsLength","addEvent","eventName","checkNoClip","Stage","_pointerPositions","_buildDOM","_bindContentEvents","stages","_resizeDOM","_checkVisibility","isLayer","isFastLayer","display","setContainer","getElementsByClassName","getElementById","layers","Container_1","getPointerPosition","getPointersPositions","getContent","layerCanvas","getIntersection","bufferCanvas","bufferHitCanvas","hasPointerCapture","PointerEvents","setPointerCapture","getLayers","_mouseenter","_mouseover","_mouseout","targetShape","eventsEnabled","pointerPos","_mousemove","_touchmove","cancelable","_mousedown","_touchstart","clickStartShape","_mouseup","_touchend","clickEndShape","fireDblClick","dblTimeout","_contextmenu","triggeredOnShape","tapStartShape","processedShapesIds","getCapturedShape","tapTriggered","dblTapTriggered","_wheel","_pointerdown","_pointermove","_pointerup","_pointercancel","_lostpointercapture","contentPosition","_getContentPosition","touch","_setPointerPosition","clientWidth","clientHeight","userSelect","_registerNode","BaseLayer","_waitingForDraw","_setSmoothEnabled","createPNGStream","getHitCanvas","dummyContext","getDummyContext","_clearHasShadowCache","_clearGetShadowRGBACache","_clearFillPatternCache","_clearLinearGradientCache","_clearRadialGradientCache","Shape","getSceneFunc","sceneFunc","getHitFunc","hitFunc","hasShadow","_hasShadow","shadowEnabled","shadowOpacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","__getFillPattern","fillPatternImage","fillPatternRepeat","__getLinearGradient","fillLinearGradientColorStops","fillLinearGradientStartPoint","fillLinearGradientEndPoint","__getRadialGradient","fillRadialGradientColorStops","fillRadialGradientStartPoint","fillRadialGradientEndPoint","fillRadialGradientStartRadius","fillRadialGradientEndRadius","_getShadowRGBA","rgba","hasFill","strokeEnabled","strokeLinearGradientColorStops","_useBufferCanvas","perfectDrawEnabled","setStrokeHitEnabled","getStrokeHitEnabled","getSelfRect","_centroid","fillAndStrokeWidth","fillAndStrokeHeight","applyShadow","preWidth","preHeight","blurRadius","roundingOffset","bufferContext","drawFunc","shadowForStrokeEnabled","drawHitFromCache","alphaThreshold","hitImageData","hitData","rgbColorKey","hitWidth","hitHeight","getNumberOrAutoValidator","dashArray","getDashArray","setDashArray","getDrawFunc","setDrawFunc","drawHitFunc","getDrawHitFunc","setDrawHitFunc","INTERSECTION_OFFSETS","INTERSECTION_OFFSETS_LEN","Layer","intersectionOffset","spiralSearchDistance","continueSearch","_getIntersection","antialiased","p3","Shape_1","clearBeforeDraw","BaseLayer_1","enableHitGraph","disableHitGraph","toggleHitCanvas","FastLayer","Group","getTime","Animation","animIdCounter","frame","time","timeDiff","lastTime","frameRate","setLayers","lays","addLayer","isRunning","animations","_addAnimation","_removeAnimation","_updateFrameObject","_handleAnimation","_runFrames","layersLen","layerHash","_animationLoop","Anim","animRunning","blacklist","onFinish","yoyo","colorAttrs","TweenEngine","propFunc","begin","finish","_pos","_change","prevPos","_time","_position","_startTime","_finish","pause","setTime","reverse","play","getTimer","onEnterFrame","seek","Tween","nodeId","Easings","Linear","Animation_1","tween","_tweenFunc","_addListeners","tweens","_addAttr","onReset","diff","tweenId","trueEnd","trueStart","endRGBA","closed","startRGBA","onPlay","onReverse","onPause","thisId","to","BackEaseIn","BackEaseOut","BackEaseInOut","ElasticEaseIn","asin","ElasticEaseOut","ElasticEaseInOut","BounceEaseOut","BounceEaseIn","BounceEaseInOut","EaseIn","EaseOut","EaseInOut","StrongEaseIn","StrongEaseOut","StrongEaseInOut","Stage_1","Layer_1","FastLayer_1","Group_1","Tween_1","Arc","_sceneFunc","clockwise","outerRadius","innerRadius","__spreadArrays","il","jl","Line","tp","bezier","getTensionPoints","_getTensionPoints","_getTensionPointsClosed","firstControlPoints","lastControlPoints","middle","getNumberArrayValidator","Arrow","PI2","fromTension","atan2","pointerLength","pointerWidth","pointerAtBeginning","isDashEnabled","lineRect","Line_1","Circle","radius","Ellipse","rx","radiusX","ry","radiusY","cropWidth","cropHeight","image","cropX","cropY","_hitFunc","fromURL","crossOrigin","ATTR_CHANGE_LIST","attrChangeListLen","Label","_sync","getText","pointerDirection","pointerHeight","Tag","cornerRadius","Path","dataArray","pathLength","parsePathData","ca","command","cx","cy","dTheta","psi","fs","inc","getPointOnEllipticalArc","getPointOnCubicBezier","getLength","getPointAtLength","ii","getPointOnLine","getPointOnQuadraticBezier","getLineLength","P1x","P1y","P2x","P2y","fromX","fromY","rise","ix","iy","pRise","pRun","pct","P3x","P3y","P4x","P4y","CB1","CB2","CB3","CB4","QB1","QB2","QB3","cosPsi","sinPsi","cs","cc","coords","cpx","cpy","re","jlen","parseFloat","prevCmd","ctlPtx","ctlPty","cmd","startX","startY","convertEndpointToCenterParameterization","calcLength","path","psiDeg","xp","yp","lambda","cxp","cyp","vMag","v","vRatio","vAngle","Rect","topLeft","topRight","bottomLeft","bottomRight","RegularPolygon","sides","PIx2","Ring","Sprite","_updated","updated","frameIndex","clearInterval","interval","_setInterval","ix4","offsets","frameOffsets","ix2","setInterval","_updateIndex","getIndex","setIndex","Star","numPoints","Text","checkDefaultFill","_partialTextX","_partialTextY","_setTextData","fontSize","lineHeightPx","lineHeight","textArr","textArrLen","verticalAlign","alignY","align","totalWidth","letterSpacing","textDecoration","shouldUnderline","shouldLineThrough","translateY","lineTranslateX","lineTranslateY","_getContextFont","spacesNumber","oneWord","lineWidth","lastLine","strokeStyle","li","letter","_partialText","measureSize","setText","getTextWidth","textWidth","getTextHeight","textHeight","metrics","font","fontStyle","fontFamily","fontVariant","_addTextLine","_getTextWidth","lines","fixedWidth","fixedHeight","maxWidth","maxHeightPx","currentHeightPx","wrap","shouldWrap","wrapAtWord","shouldAddEllipsis","ellipsis","additionalWidth","low","high","matchWidth","mid","substrWidth","wrapIndex","nextChar","trimRight","trimLeft","partialText","TextPath","dummyCanvas","Path_1","kerningFunc","textBaseline","glyphInfo","p0","Text_1","_getTextSize","textFullWidth","fullPathWidth","pathCmd","charArr","pIndex","currentT","getNextPathSegment","pathData","findSegmentToFitCharacter","glyphWidth","currLen","attempts","cumulativePathLength","needNewSegment","lettersInOffset","kern","midpoint","transposeX","transposeY","info","ANGLES","top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right","TOUCH_DEVICE","ANCHORS_NAMES","rotateAroundPoint","angleRad","rotateAroundCenter","deltaRad","getCenter","Transformer","_transforming","_createElements","_handleMouseMove","_handleMouseUp","getNode","setNode","setNodes","_nodes","onChange","_resetTransformCache","_proxyDrag","lastPos","otherNode","otherAbs","getNodes","getActiveAnchor","_movingAnchorName","_getNodeRect","__getNodeRect","__getNodeShape","rot","relative","ignoreStroke","absScale","absPos","totalPoints","tr","getX","getY","_createBack","_createAnchor","Rect_1","_handleMouseDown","cursor","anchorName","getCursor","_cursorChange","back","rotateEnabled","rotateAnchorOffset","shouldOverdrawWholeArea","hypotenuse","_anchorDragOffset","newHypotenuse","anchorNode","pp","oldAbs","newAbs","keepProportion","keepRatio","shiftKey","centeredScaling","altKey","comparePoint","reverseX","reverseY","topOffsetX","topOffsetY","bottomOffsetX","bottomOffsetY","_fitNodesInto","newRotation","tol","rotationSnapTolerance","snaps","newRotationRad","snapped","absDiff","getSnap","rotationSnaps","_removeEvents","newAttrs","oldAttrs","boundBoxFunc","oldTr","newTr","parentTransform","localTransform","newLocalTransform","forceUpdate","_batchChangeChild","enabledAnchors","resizeEnabled","anchorSize","anchorStroke","anchorStrokeWidth","anchorFill","anchorCornerRadius","borderEnabled","borderStroke","borderStrokeWidth","borderDash","isTransforming","stopTransform","lineEnabled","rotateHandlerOffset","enabledHandlers","Wedge","getAngleDeg","setAngleDeg","BlurStack","mul_table","shg_table","yi","yw","r_sum","g_sum","b_sum","a_sum","r_out_sum","g_out_sum","b_out_sum","a_out_sum","r_in_sum","g_in_sum","b_in_sum","a_in_sum","pg","pb","pa","rbs","pixels","div","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","stackEnd","stackIn","stackOut","mul_sum","shg_sum","filterGaussBlurRGBA","Factory_1","brightness","adjust","contrast","nPixels","strength","embossStrength","greyLevel","embossWhiteLevel","embossDirection","blend","embossBlend","dirY","dirX","w","w4","otherY","offsetYOther","otherX","offsetOther","dR","dG","dB","dif","absDif","remap","fromValue","fromMin","fromMax","toMin","toMax","fromRange","toRange","nSubPixels","rMin","rMax","gMin","gMax","bMin","bMax","enhanceAmount","enhance","rMid","rGoalMax","rGoalMin","gMid","gGoalMax","gGoalMin","bMid","bGoalMax","bGoalMin","saturation","hue","luminance","vsu","vsw","rr","rg","rb","gr","gg","gb","br","bg","bb","srcPos","dstPos","xSize","ySize","power","kaleidoscopePower","kaleidoscopeAngle","tempCanvas","scratchData","opt","srcPixels","dstPixels","xMid","polarCenterX","yMid","polarCenterY","rSize","tSize","conversion","ToPolar","minSectionSize","sectionSize","xStart","xEnd","xDelta","phaseShift","polarRotation","FromPolar","pixelAt","idata","rgbDistance","mask","threshold","rgbv_no","rgbv_ne","rgbv_so","rgbv_se","thres","mean","pTab","rgbMean","backgroundMask","applyMask","sw","sh","weights","side","halfSide","maskResult","so","scy","scx","wt","smoothEdgeMask","dilateMask","erodeMask","amount","noise","half","alpha","xBinStart","xBinEnd","yBinStart","yBinEnd","xBin","yBin","pixelsInBin","pixelSize","nBinsX","nBinsY","RGBComponent","ia","level","_CoreInternals_1","Arc_1","Arrow_1","Circle_1","Ellipse_1","Image_1","Label_1","RegularPolygon_1","Ring_1","Sprite_1","Star_1","TextPath_1","Transformer_1","Wedge_1","Filters","Blur","Blur_1","Brighten","Brighten_1","Contrast","Contrast_1","Emboss","Emboss_1","Enhance","Enhance_1","Grayscale","Grayscale_1","HSL","HSL_1","HSV","HSV_1","Invert","Invert_1","Kaleidoscope","Kaleidoscope_1","Mask","Mask_1","Noise","Noise_1","Pixelate","Pixelate_1","Posterize","Posterize_1","RGB","RGB_1","RGBA","RGBA_1","Sepia","Sepia_1","Solarize","Solarize_1","Threshold","Threshold_1","require$$0","Scene","comps","comp","setParent","encodingProps","compId","findIndex","konvaSceneLayer","konvaComp","konvaObj","oldLoc","newLoc","applySmartObjectChange","loc","ancestorOfLayer","transformer","oldTrans","newTrans","isEqual","dataTransfer","types","DnDPastableType","copySrc","getData","compClassRef","selfScene","canvasCoord","dndCanvasCoord","newComp","addComp","removeComp","shapeBounds","Collage","scenes","sceneId","sceneClassRef","selfCollage","newScene","addScene","removeScene","sceneSize","CompRef","compName","SmartPkg","PkgTreeDir","initializeCatalogs","adornContainedClasses","_entryCatalog","markAsPkgEntry","pkgResourcePath","entriesContainCode","treeNode","_classRefCatalog","isDir","subNode","isEntry","smartPallet","getEntry","getCompInstance","findPkgTree","treeDirective","selfStr","PkgTree","nextPkgTreeKey","dndPastableTypeType","getKey","dropZone","fromPkgTree","toPkgTree","lastPkgTreePasteEvent","fromKey","toKey","original_fromParentKey","original_fromParentIndex","fromNode","toNode","prior_fromNodeParent","prior_fromNodeIndx","isRoot","fromParent","toParent","isDescendantOf","fromNodeIndx","toNodeIndx","ancestorPkgTree","pkgTree","indentLvl","padStart","accumStr","PkgTreeEntry","SmartView","setViewParent","konvaStage","registerSystemClass","candidateSelectors","candidateSelector","Element","tabbable","candidate","candidateTabindex","regularTabbables","orderedTabbables","candidates","querySelectorAll","includeContainer","isNodeMatchingSelectorTabbable","getTabindex","documentOrder","tabIndex","sort","sortOrderedTabbables","isNodeMatchingSelectorFocusable","isInput","isRadio","getCheckedRadio","isTabbableRadio","isNonTabbableRadio","isHiddenInput","offsetParent","visibility","isHidden","isTabbable","isFocusable","focusableCandidateSelector","tabindexAttr","contentEditable","isContentEditable","tagName","activeFocusDelay","trapQueue","activeFocusTraps","activateTrap","trap","activeTrap","trapIndex","deactivateTrap","unpause","userOptions","xtend","returnFocusOnDeactivate","escapeDeactivates","firstTabbableNode","lastTabbableNode","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","paused","activateOptions","updateTabbableNodes","activeElement","onActivate","addListeners","removeListeners","deactivateOptions","onDeactivate","returnFocus","previousActiveElement","tryFocus","getNodeForOption","getInitialFocusNode","checkFocusIn","checkPointerDown","capture","checkClick","checkKey","optionName","optionValue","clickOutsideDeactivates","allowOutsideClick","Document","stopImmediatePropagation","isEscapeEvent","isTabEvent","checkTab","tabbableNodes","focus","isSelectableInput","LIST_ITEM_ACTIVATED_CLASS","LIST_ITEM_CLASS","LIST_ITEM_DISABLED_CLASS","LIST_ITEM_SELECTED_CLASS","ACTION_EVENT","ARIA_CHECKED","ARIA_CHECKED_CHECKBOX_SELECTOR","ARIA_CHECKED_RADIO_SELECTOR","ARIA_CURRENT","ARIA_DISABLED","ARIA_ORIENTATION","ARIA_ORIENTATION_HORIZONTAL","ARIA_ROLE_CHECKBOX_SELECTOR","ARIA_SELECTED","CHECKBOX_RADIO_SELECTOR","CHECKBOX_SELECTOR","CHILD_ELEMENTS_TO_TOGGLE_TABINDEX","FOCUSABLE_CHILD_ELEMENTS","RADIO_SELECTOR","UNSET_INDEX","ELEMENTS_KEY_ALLOWED_IN","MDCListFoundation","wrapFocus_","isVertical_","isSingleSelectionList_","selectedIndex_","focusedItemIndex_","useActivatedClass_","ariaCurrentAttrValue_","isCheckboxList_","isRadioList_","addClassForElementIndex","focusItemAtIndex","getAttributeForElementIndex","getFocusedElementIndex","getListItemCount","hasCheckboxAtIndex","hasRadioAtIndex","isCheckboxCheckedAtIndex","isFocusInsideList","isRootFocused","notifyAction","removeClassForElementIndex","setAttributeForElementIndex","setCheckedCheckboxOrRadioAtIndex","setTabIndexForListItemChildren","setWrapFocus","setVerticalOrientation","setSingleSelection","setUseActivatedClass","useActivated","getSelectedIndex","setSelectedIndex","isIndexValid_","setCheckboxAtIndex_","setRadioAtIndex_","setSingleSelectionAtIndex_","handleFocusIn","listItemIndex","handleFocusOut","setTabindexToFirstSelectedItem_","handleKeydown","isRootListItem","isArrowLeft","isArrowUp","isArrowRight","isArrowDown","isHome","isEnd","isEnter","isSpace","focusLastElement","focusFirstElement","currentIndex","nextIndex","preventDefaultEvent_","focusNextElement","focusPrevElement","isSelectableList_","setSelectedIndexOnAction_","setTabindexAtIndex_","toggleCheckbox","prevIndex","lastIndex","setEnabled","itemIndex","selectedClassName","setAriaForSingleSelectionAtIndex_","isAriaCurrent","ariaAttribute","ariaAttributeValue","isChecked","targetIndex","minIndex","isIndexInRange_","listSize","toggleCheckboxAtIndex_","selectedIndexes","MDCList","isSingleSelectionList","handleClickEvent_","handleKeydown_","handleKeydownEvent_","focusInEventListener_","handleFocusInEvent_","focusOutEventListener_","handleFocusOutEvent_","initializeListType","vertical","checkboxListItems","singleSelectedListItem","radioSelectedListItem","preselectedItems","selectedIndex","listItem","listElements","singleSelection","toggleEl","initEvent","tabIndexValue","getListItemIndex_","nearestParent","ANIMATE","DISMISSIBLE","MODAL","APP_CONTENT_SELECTOR","CLOSE_EVENT","OPEN_EVENT","SCRIM_SELECTOR","MDCDismissibleDrawerFoundation","elementHasClass","notifyClose","notifyOpen","saveFocus","restoreFocus","focusActiveNavigationItem","trapFocus","releaseFocus","isOpening","isClosing","handleTransitionEnd","isElement_","closed_","opened_","MDCModalDrawerFoundation","handleScrimClick","MDCDrawer","list_","focusTrapFactory","listFactory","createFocusTrap","listEl","wrapFocus","focusTrapFactory_","surfaceEl","scrim_","handleScrimClick_","focusTrap_","initialFocus","handleTransitionEnd_","previousFocus_","previousFocus","activeNavItemEl","drawer","listPromiseResolve","listPromise","getListInstancePromise","nonInteractive","avatarList","twoLine","threeLine","radiolist","checklist","nav","instantiate","getInstance","aria-selected","aria-checked","aria-current","counter","createEventDispatcher","addTabindexIfNoItemsSelectedRaf","activated","tabindex","inputId","addTabindexIfNoItemsSelected","noneSelected","nextSibling","setChecked","previousSibling","Span","padded","inset","leftNavCompEntries","FIXED_CLASS","FIXED_SCROLLED_CLASS","SHORT_CLASS","SHORT_COLLAPSED_CLASS","SHORT_HAS_ACTION_ITEM_CLASS","DEBOUNCE_THROTTLE_RESIZE_TIME_MS","MAX_TOP_APP_BAR_HEIGHT","ACTION_ITEM_SELECTOR","NAVIGATION_EVENT","NAVIGATION_ICON_SELECTOR","ROOT_SELECTOR","TITLE_SELECTOR","MDCTopAppBarBaseFoundation","setStyle","getTopAppBarHeight","notifyNavigationIconClicked","getViewportScrollY","getTotalActionItems","handleTargetScroll","handleWindowResize","handleNavigationClick","MDCTopAppBarFoundation","wasDocked_","isDockedShowing_","currentAppBarOffsetTop_","isCurrentlyBeingResized_","resizeThrottleId_","resizeDebounceId_","lastScrollPosition_","topAppBarHeight_","currentScrollPosition","moveTopAppBar_","throttledResizeHandler_","checkForUpdate_","offscreenBoundaryTop","hasAnyPixelsOffscreen","hasAnyPixelsOnscreen","partiallyShowing","currentHeight","MDCFixedTopAppBarFoundation","wasScrolled_","MDCShortTopAppBarFoundation","isCollapsed_","isAlwaysCollapsed_","setAlwaysCollapsed","collapse_","maybeCollapseBar_","getAlwaysCollapsed","uncollapse_","MDCTopAppBar","rippleFactory","navIcon_","icons","iconRipples_","icon","scrollTarget_","handleNavigationClick_","handleWindowResize_","handleTargetScroll_","isFixed","iconRipple","setScrollTarget","win","topAppBar","collapsed","prominent","toolbar","CornerBit","Corner","ANCHOR","ANIMATING_CLOSED","ANIMATING_OPEN","FIXED","FOCUSABLE_ELEMENTS","TRANSITION_OPEN_DURATION","TRANSITION_CLOSE_DURATION","MARGIN_TO_EDGE","ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO","cachedCssTransformPropertyName_","MDCMenuSurfaceFoundation","isQuickOpen_","isHoistedElement_","isFixedPosition_","openAnimationEndTimerId_","closeAnimationEndTimerId_","animationRequestId_","anchorCorner_","TOP_START","anchorMargin_","position_","hasAnchor","isElementInContainer","isFocused","isRtl","getInnerDimensions","getAnchorDimensions","getWindowDimensions","getBodyDimensions","getWindowScroll","setMaxHeight","setTransformOrigin","setAnchorCorner","corner","setAnchorMargin","setIsHoisted","isHoisted","setFixedPosition","isFixedPosition","isFinite_","setQuickOpen","quickOpen","dimensions_","autoPosition_","skipRestoreFocus","maybeRestoreFocus_","handleBodyClick","measurements_","getAutoLayoutMeasurements_","getOriginCorner_","maxMenuSurfaceHeight","getMenuSurfaceMaxHeight_","verticalAlignment","hasBit_","BOTTOM","horizontalAlignment","RIGHT","horizontalOffset","getHorizontalOriginOffset_","verticalOffset","getVerticalOriginOffset_","surfaceSize","adjustPositionForHoistedElement_","anchorRect","bodySize","viewportSize","windowScroll","viewportDistance","TOP_LEFT","isBottomAligned","availableTop","availableBottom","topOverflow","bottomOverflow","setBit_","isFlipRtl","FLIP_RTL","avoidHorizontalOverlap","isAlignedRight","availableLeft","availableRight","leftOverflow","rightOverflow","maxHeight","isBottomAnchored","isRightAligned","rightOffset","avoidVerticalOverlap","e_1","props_1","tslib_1.__values","props_1_1","e_1_1","return","childHasFocus","bit","DefaultFocusState","MDCMenuSurface","parentEl","anchorElement","handleBodyClick_","registerBodyClickListener_","body","deregisterBodyClickListener_","hoistMenuToBody","setMenuSurfaceAnchorElement","getPropertyValue","origin","propertyName","util.getTransformPropertyName","offsetWidth","offsetHeight","innerWidth","innerHeight","MENU_SELECTED_LIST_ITEM","MENU_SELECTION_GROUP","ARIA_CHECKED_ATTR","ARIA_DISABLED_ATTR","LIST_SELECTOR","SELECTED_EVENT","FOCUS_ROOT_INDEX","MDCMenuFoundation","defaultFocusState_","LIST_ROOT","addClassToElementAtIndex","removeClassFromElementAtIndex","addAttributeToElementAtIndex","removeAttributeFromElementAtIndex","elementContainsClass","closeSurface","getElementIndex","notifySelected","getMenuItemCount","focusListRoot","getSelectedSiblingOfItemAtIndex","isSelectableItemAtIndex","handleItemAction","recomputedIndex","handleMenuSurfaceOpened","FIRST_ITEM","LAST_ITEM","NONE","setDefaultFocusState","focusState","validatedIndex_","prevSelectedIndex","listCssClasses","menuSize","MDCMenu","menuSurfaceFactory","menuSurfaceFactory_","listFactory_","menuSurface_","handleItemAction_","items","handleMenuSurfaceOpened_","getOptionByIndex","setAnchorElement","selectedItemEl","menuSurface","isStatic","fixed","anchorCorner","oldFixed","menu","menuSurfacePromiseResolve","menuSurfacePromise","getMenuSurfaceInstancePromise","list$use","list$class","Graphic","TabController","tabId","tabName","divContainer","isAllowed","allowDrops_over","dropEffect","pastable","paste","TabManager","ctxName","tabs","activeTab","previewTab","tabRegistry","preregisterTab","getRegisteredTab","activateTab","closeTab","closeOtherTabs","closeTabsToRight","closeAllTabs","repositionTab","tabController","getTabId","preview","logQualifier","$tabs","$activeTab","$previewTab","_tabs","_previewTab","_activeTab","findTab","getTabName","tab","syncStore","onBehalfOf","before","closeTabIndex","findTabIndex","nextIndx","retainTabIndex","retainTab","anchorTabIndex","anchorTab","fromTabId","toTabId","placement","fromTab","toTab","tabsChanged","activeTabChanged","previewTabChanged","pkgEntryTabManager","getTabContext","handleDispModeChange","requestedDispMode","currentDispMode","$changeManager","dm","TabControllerPkgEntry","Comp","RenderSmartView","PkgEntryTabsContextMenu","square","elevation","transition","findAncestorWithCssClass","cssClass","getIconName","CLOSE","tabManager","AppContextMenu","getAppContextMenu","tabContext","closeIconName","closeIconVisible","contextMenu","closeIconStyle","closeIconToolTip","tabHover","closeIconHover","dndPastableType","isDropAllowed","boundingRect","getDropZone","lastDropEvent","dropZoneCssClass","effectAllowed","setData","stopPropagation","setOpen","alert","isActive","getTabPanel","backInOut","cubicOut","flip","_t","start_time","running","started","splashComp","StartUpPage","handleAbout","systemMenu","selectedDispMode","selected_option","_leftNavComp","deactivateSingleton","cachedLeftNavComps","registerLeftNavEntry","drawerHook","drawerElm","appContentHook","appContentElm","leftNavComp","drawerWidth","resizerInitialized","resizeOccurred","drawerOpen","activateSingleton","appTitle","getTabQualifyingDesc","titleToolTip","titleIcon","inSyncTitleIcon","inSyncIcon","resize","minWidth","ResizeObserver","observe","marginLeft","discloseError","showUser","logIt","slide","padding_top","paddingTop","padding_bottom","paddingBottom","margin_top","marginTop","margin_bottom","marginBottom","border_top_width","borderTopWidth","border_bottom_width","borderBottomWidth","_expansionState","pkgEntryToolTip","displayEntry","onSingleClick","onDoubleClick","timeoutID","genDualClickHandler","copySrcPkgEntry","copyable","boundry","styling","topBorder","bottomBorder","inEditMode","pkgTreeKey","expanded","arrowDown","copySrcPkgTree","savePkg","saveAs","async","showSaveFilePicker","fileHandle","getPkgResourcePath","description","accept","application/json","createWriter","writer","createWritable","setPkgResourcePath","savePkgService","editPkg","editPkgComplete","expandedIndicator","pkgNameToolTip","handleOpenPkg","_viewPkg$comp","cachedPkgs","viewPkg","showOpenFilePicker","file","getFile","fileContent","fromSmartJSON","registerPkg","openPkg","pkgs","viewPkg$comp","preregisterTabs","SmartComp","containingKonvaLayer","compGroup","Valve1","shape1","connector1","connector2","subGroup","subCircle","Valve2","Valve3","class2CompPkgTreeEntry","generalCompsPkg","replaceAll","escapeRegExp","scene1Master","scene2Master","collage1","konvaSandboxSmartPkg","clonedPkg","json","pkgName","jsonStr","rehydratedSmartPkg"],"mappings":"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WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,UAAY,WAAY,WAAY,WACpC,WAAY,SAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,UAAY,WAAY,WACpC,WAAY,WAAY,SAAY,WACpC,WAAY,WAAY,SAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,UAAY,WACpC,WAAY,WAAY,WAAY,SACpC,WAAY,WAAY,WAAY,SACpC,WAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,UACpC,WAAY,WAAY,WAAY,WACpC,WAAY,WAA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GAAQxE,OACVjsE,QAAgBgtF,EAChBA,EAAMjvF,UAAU2R,UAAY,QAC5Bs9E,EAAMjvF,UAAUswE,WAAY,EAC5B2e,EAAMjvF,UAAUkmE,oBAAsB,CAAC,UACvC8C,EAASqE,cAAc4hB,MACbxiC,QAAQR,gBAAgBgjC,EAAO,SAAU,EAAG/hC,GAAakL,yBACzD3L,QAAQR,gBAAgBgjC,EAAO,QAAS,EAAG/hC,GAAakL,yBACxD3L,QAAQR,gBAAgBgjC,EAAO,aAAa,MAC5CxiC,QAAQe,WAAWyhC,EAAO,CAChCt4C,SAAU,QACVu4C,YAAa,WACbC,YAAa,gBAEVr3C,WAAWK,WAAW82C,6CCvD7B,SAASG,IACLjvF,KAAK2f,EAAI,EACT3f,KAAKmmD,EAAI,EACTnmD,KAAK0U,EAAI,EACT1U,KAAKyU,EAAI,EACTzU,KAAK6c,KAAO,KAThBrb,OAAOsQ,eAAehQ,EAAS,aAAc,CAAEuB,OAAO,IAWtD,IAAI6rF,EAAY,CACZ,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAEAC,EAAY,CACZ,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,IAwKJrtF,OAAe,SAAcs7D,GACzB,IAAIid,EAASnkE,KAAKysB,MAAM3iC,KAAKywE,cACzB4J,EAAS,GAxKjB,SAA6Bjd,EAAWid,GACpC,IACI1mE,EAAG8b,EAAGrZ,EAAGuF,EAAGikE,EAAIwP,EAAIC,EAAIC,EAAOC,EAAOC,EAAOC,EAAOC,EAAWC,EAAWC,EAAWC,EAAWC,EAAUC,EAAUC,EAAUC,EAAUhlC,EAAIilC,EAAIC,EAAIC,EAAIC,EADxJC,EAASlzB,EAAUj2D,KAAMmW,EAAQ8/C,EAAU9/C,MAAOC,EAAS6/C,EAAU7/C,OAErEgzE,EAAMlW,EAASA,EAAS,EAAGmW,EAAclzE,EAAQ,EAAGmzE,EAAelzE,EAAS,EAAGmzE,EAAcrW,EAAS,EAAGsW,EAAaD,GAAeA,EAAc,GAAM,EAAGE,EAAa,IAAI3B,EAAa4B,EAAW,KAAM5nF,EAAQ2nF,EAAYE,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"}